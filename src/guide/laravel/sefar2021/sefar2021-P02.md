# Proyecto App Sefar Universal 2021 (Parte II)
+ Versión: **Laravel Framework 8.31.0**


## CRUD Permisos
1. Crear grupo de rutas en **routes\web.php**:
	```php
    // Grupo de rutas CRUD
    Route::group(['middleware' => ['auth'], 'as' => 'crud.'], function(){
    });
    ```
2. Crear modelo Permission:
	+ $ php artisan make:model Permission
3. Programar modelo Permission **app\Models\Permission.php**:
	```php
    <?php

    namespace App\Models;

    use Illuminate\Database\Eloquent\Factories\HasFactory;
    use Illuminate\Database\Eloquent\Model;

    class Permission extends Model
    {
        use HasFactory;
        
        protected $fillable = [
            'name',
        ];
    }
    ```
4. Crear controlador Permission:
	+ $ php artisan make:controller PermissionController -r
5. Programar el controlador Permission **app\Http\Controllers\PermissionController.php**
	```php
    <?php

    namespace App\Http\Controllers;

    use Illuminate\Http\Request;
    use Spatie\Permission\Models\Permission;
    use Spatie\Permission\Models\Role;
    use Spatie\Permission\Traits\HasRoles;
    use RealRashid\SweetAlert\Facades\Alert;

    class PermissionController extends Controller
    {
        use HasRoles;
        
        /**
        * Display a listing of the resource.
        *
        * @return \Illuminate\Http\Response
        */
        public function index()
        {
            return view('crud.permissions.index');
        }

        /**
        * Show the form for creating a new resource.
        *
        * @return \Illuminate\Http\Response
        */
        public function create()
        {
            $roles = Role::all();
            return view('crud.permissions.create', compact('roles'));
        }

        /**
        * Store a newly created resource in storage.
        *
        * @param  \Illuminate\Http\Request  $request
        * @return \Illuminate\Http\Response
        */
        public function store(Request $request)
        {
            // Validación
            $request->validate([
                'name' => 'required|max:254'
            ]);

            // Creando permiso
            $permission = Permission::create(['name' => $request->name]);
            
            // Asignando permisos a roles seleccionados
            $roles = Role::all();
            foreach($roles as $role){
                if($request->input("role" . $role->id)){
                    $roles->find($role->id)->givePermissionTo($permission);
                }
            }

            // Mensaje 
            Alert::success('¡Éxito!', 'Se ha creado el permiso: ' . $request->name);
            
            // Redireccionar a la vista index
            return redirect()->route('crud.permissions.index');
        }

        /**
        * Display the specified resource.
        *
        * @param  int  $id
        * @return \Illuminate\Http\Response
        */
        public function show(Permission $permission)
        {
            $roles = Role::all();
            return view('crud.permissions.edit', compact('permission', 'roles'));
        }

        /**
        * Show the form for editing the specified resource.
        *
        * @param  int  $id
        * @return \Illuminate\Http\Response
        */
        public function edit(Permission $permission)
        {
            $roles = Role::all();
            return view('crud.permissions.edit', compact('permission', 'roles'));
        }

        /**
        * Update the specified resource in storage.
        *
        * @param  \Illuminate\Http\Request  $request
        * @param  int  $id
        * @return \Illuminate\Http\Response
        */
        public function update(Request $request, Permission $permission)
        {
            // Validación
            $request->validate([
                'name' => 'required|max:254'
            ]);

            // actualizando permiso
            $permission->name = $request->name;
            $permission->save();

            // Actualizando permisos a roles seleccionados
            $roles = Role::all();
            foreach($roles as $role){
                if($request->input("role" . $role->id)){
                    $roles->find($role->id)->givePermissionTo($permission);
                }else {
                    $roles->find($role->id)->revokePermissionTo($permission);
                }
            }

            // Mensaje 
            Alert::success('¡Éxito!', 'Se ha actualizado el permiso a: ' . $request->name);
            
            // Redireccionar a la vista index
            return redirect()->route('crud.permissions.index');
        }

        /**
        * Remove the specified resource from storage.
        *
        * @param  int  $id
        * @return \Illuminate\Http\Response
        */
        public function destroy(Permission $permission)
        {
            $nombre = $permission->name;
            
            $permission->delete();

            Alert::info('¡Advertencia!', 'Se ha eliminado el permiso: ' . $nombre);

            return redirect()->route('crud.permissions.index');
        }
    }
	```
6. Agregar ruta de permisos al grupo de rutas CRUD:
	```php
		Route::resource('permissions', PermissionController::class)->names('permissions')
			->middleware('can:crud.permissions.index');
    ```
	+ Nota: añadir a la cabecera:
	```php
	use App\Http\Controllers\PermissionController;
    ```
7. Crear componente Livewire para Tabla Permissions: 
	+ $ php artisan make:livewire crud/permissions-table
8. Programar controlador para la tabla Permissions: **app\Http\Livewire\Crud\PermissionsTable.php**:
	```php
    <?php

    namespace App\Http\Livewire\Crud;

    use Livewire\WithPagination;
    use App\Models\Permission;
    use Livewire\Component;

    class PermissionsTable extends Component
    {
        use WithPagination;

        protected $queryString = [
            'search' => ['except' => ''],
            'perPage' => ['except' => '5']
        ];

        public $search = '';
        public $perPage = '5';
        
        public function render()
        {
            return view('livewire.crud.permissions-table', [
                'permissions' => Permission::where('name','LIKE',"%$this->search%")
                    ->orderBy('updated_at','DESC')
                    ->paginate($this->perPage)
            ]);
        }

        public function clear(){
            $this->search = '';
            $this->page = 1;
            $this->perPage = '5';
        }
    }
	```
9. Diseñar vista para la tabla Permissions: **resources\views\livewire\crud\permissions-table.blade.php**:
	```php
    <div>
        <div class="flex flex-col">
            <div class="-my-2 overflow-x-auto sm:-mx-6 lg:-mx-8">
                <div class="py-2 align-middle inline-block min-w-full sm:px-6 lg:px-8">
                    {{-- Inicio --}}
                    <div class="bg-gray-50">
                        <div class="max-w-7xl mx-auto py-6 px-4 sm:px-6 lg:py-6 lg:px-8 lg:flex lg:items-center lg:justify-between">
                            <h2 class="text-3xl font-extrabold tracking-tight text-gray-900 sm:text-4xl">
                                <span class="ctvSefar block text-indigo-600">{{ __('User permissions') }}</span>
                            </h2>
                            @can('crud.permissions.create')
                            <div class="mt-8 flex lg:mt-0 lg:flex-shrink-0">
                                <div class="inline-flex rounded-md shadow">
                                    <a href="{{ route('crud.permissions.create') }}" class="cfrSefar inline-flex items-center justify-center px-5 py-3 border border-transparent text-base font-medium rounded-md text-white bg-indigo-600 hover:bg-indigo-700">
                                        {{ __('Create permission') }}
                                    </a>
                                </div>
                            </div>
                            @endcan
                        </div>
                    </div>
                    {{-- Fin --}}
                </div>
            </div>
        </div>
        <div class="flex flex-col">
            <div class="-my-2 overflow-x-auto sm:-mx-6 lg:-mx-8">
                <div class="py-2 align-middle inline-block min-w-full sm:px-6 lg:px-8">
                    <div class="shadow overflow-hidden border-b border-gray-200 sm:rounded-lg">
                        <div class="flex bg-white px-4 py-3 sm:px-6">
                            <input 
                                wire:model="search"
                                type="text" 
                                placeholder="Buscar..." 
                                class="mr-2 mt-1 focus:ring-indigo-500 focus:border-indigo-500 block w-full shadow-sm sm:text-sm border-gray-300 rounded-md"
                                {{-- class="form-input rounded-md shadow-sm mt-1 block w-full" --}}
                            >
                            <div class="col-span-6 sm:col-span-3">
                                <select wire:model="perPage" class="py-2 px-2 mt-1 mr-10 block w-full border border-gray-300 bg-white rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm">
                                    <option value="5">5 por pág. </option>
                                    <option value="10">10 por pág.</option>
                                    <option value="15">15 por pág.</option>
                                    <option value="25">25 por pág.</option>
                                    <option value="50">50 por pág.</option>
                                    <option value="100">100 por pág.</option>
                                </select>
                            </div>
                            @if ($search !== '')
                            <button wire:click="clear" class="py-1 px-2 mt-1 ml-2 border border-transparent rounded-md text-white bg-gray-600 hover:bg-gray-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500"><i class="far fa-window-close"></i></button>
                            @endif
                        </div>
                        @if ($permissions->count())
                        <table class="min-w-full divide-y divide-gray-200">
                            <thead class="bg-gray-50">
                            <tr>
                                <th scope="col" class="px-6 py-2 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">
                                    ID
                                </th>
                                <th scope="col" class="px-6 py-2 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">
                                    {{ __('Permission') }}
                                </th>
                                @can('crud.permissions.edit')
                                <th scope="col" class="px-9 y-2 text-xs font-medium text-gray-500 uppercase tracking-wider text-right">
                                    {{ __('Edit') }}
                                </th>
                                @endcan
                                @can('crud.permissions.destroy')
                                <th scope="col" class="px-3 py-2 text-xs font-medium text-gray-500 uppercase tracking-wider text-right">
                                    {{ __('Remove') }}
                                </th>
                                @endcan
                            </tr>
                            </thead>
                            <tbody class="bg-white divide-y divide-gray-200">
                            @foreach ($permissions as $permission)
                            <tr>   
                                <td class="px-6 py-2 whitespace-nowrap">
                                    {{ $permission->id }}
                                </td>
                                <td class="px-6 py-2 whitespace-nowrap">
                                    {{ $permission->name }}
                                </td>
                                @can('crud.permissions.edit')
                                <td class="py-2 whitespace-nowrap text-right font-medium">
                                    <a href="{{ route('crud.permissions.edit', $permission) }}" class="mx-12 text-grey-600 hover:text-indigo-900" title="Editar"><i class="fas fa-edit"></i></a>
                                </td>
                                @endcan
                                @can('crud.permissions.destroy')
                                <td class="px-3 py-2 whitespace-nowrap text-right font-medium">
                                    <form action="{{ route('crud.permissions.destroy', $permission) }}" method="POST">
                                        @csrf
                                        @method('delete')
                                        <button 
                                            type="submit" 
                                            class="text-red-600 hover:text-red-900" 
                                            onclick="return confirm('¿Está seguro que desea eliminar el permiso?')"><i class="fas fa-trash"></i>
                                        </button>
                                    </form>
                                </td>
                                @endcan
                            </tr>
                            @endforeach
                            </tbody>
                        </table>
                        <div class="bg-white px-4 py-3 border-t border-gray-200 sm:px-6">
                        {{ $permissions->links() }}
                        </div>
                        @else
                        <div class="bg-white px-4 py-3 border-t border-gray-200 sm:px-6 text-gray-500">
                            No hay resultado para la búsqueda {{ $search }} en la página {{ $page }} al mostrar {{ $perPage }} por página
                        </div>
                        @endif
                    </div>
                </div>
            </div>
        </div>
    </div>    
	```
10. Diseñar las vistas para el CRUD Permisos:
	- resources\views\crud\permissions\index.blade.php
	- resources\views\crud\permissions\create.blade.php
	- resources\views\crud\permissions\edit.blade.php
11. Realizar commit:
	+ $ git add .
	+ $ git commit -m "CRUD Permisos"


## CRUD Roles
1. Crear modelo Role:
	+ $ php artisan make:model Role
2. Programar modelo Role **app\Models\Role.php**:
	```php
    <?php

    namespace App\Models;

    use Illuminate\Database\Eloquent\Factories\HasFactory;
    use Illuminate\Database\Eloquent\Model;

    class Role extends Model
    {
        use HasFactory;

        protected $fillable = [
            'name',
        ];    
    }
    ```
3. Crear controlador Role:
	+ $ php artisan make:controller RoleController -r
4. Programar el controlador Role **app\Http\Controllers\RoleController.php**:
	```php
	```
5. Agregar ruta de roles al grupo de rutas CRUD:
	```php
    Route::resource('roles', RoleController::class)->names('roles')
        ->middleware('can:crud.roles.index');
    ```
	+ Nota: añadir a la cabecera:
	```php
	use App\Http\Controllers\RoleController;
    ```
6. Crear componente Livewire para Tabla Roles: 
	+ $ php artisan make:livewire crud/roles-table
7. Programar controlador para la tabla Roles: **app\Http\Livewire\Crud\RolesTable.php**:
	```php
	```
8. Diseñar vista para la tabla Roles **resources\views\livewire\crud\roles-table.blade.php**:
	```php
	```
9. Programar controlador Role: **app\Http\Controllers\RoleController.php**:
	```php
	```
10. Diseñar las vistas para el CRUD Roles:
	- resources\views\crud\roles\index.blade.php
	- resources\views\crud\roles\create.blade.php
	- resources\views\crud\roles\edit.blade.php
11. Realizar commit --:
	+ $ git add .
	+ $ git commit -m "CRUD Roles"


## CRUD Usuarios
1. Agregar el campo **passport** como campo de asignación masiva en el modelo **User**: **app\Models\User.php**:
	```php
    ≡
    protected $fillable = [
        'name',
        'email',
        'password',
        'passport',
    ];
    ≡
    ```
2. Crear controlador User:
	+ $ php artisan make:controller UserController -r
3. Programar el controlador User **app\Http\Controllers\UserController.php**:
	```php
    <?php

    namespace App\Http\Controllers;

    use App\Models\User;
    use Illuminate\Http\Request;
    use Spatie\Permission\Models\Permission;
    use Spatie\Permission\Models\Role;
    use Spatie\Permission\Traits\HasRoles;
    use RealRashid\SweetAlert\Facades\Alert;

    class UserController extends Controller
    {
        /**
        * Display a listing of the resource.
        *
        * @return \Illuminate\Http\Response
        */
        public function index()
        {
            return view('crud.users.index');
        }

        /**
        * Show the form for creating a new resource.
        *
        * @return \Illuminate\Http\Response
        */
        public function create()
        {
            $roles = Role::all();
            /* $permissions = Permission::all(); */
            return view('crud.users.create', compact('roles'));
        }

        /**
        * Store a newly created resource in storage.
        *
        * @param  \Illuminate\Http\Request  $request
        * @return \Illuminate\Http\Response
        */
        public function store(Request $request)
        {
            // Validación
            $request->validate([
                'name' => 'required|max:254',
                'passport' => 'nullable|unique:users,passport',
                'email' => 'required|unique:users,email'
            ]);

            // Creando usuario
            $user = User::create([
                'name' => $request->name,
                'email' => $request->email,
                'passport' => $request->passport,
                'password' => bcrypt('sefar2021'),
                'password_md5' => md5('sefar2021'),
                'email_verified_at' => date('Y-m-d H:i:s')
            ]);

            // Asignando roles seleccionados
            $roles = Role::all();
            foreach($roles as $role){
                if($request->input("role" . $role->id)){
                    $user->assignRole($role->name);
                }
            }
            
            // Mensaje 
            Alert::success('¡Éxito!', 'Se ha creado el usuario: ' . $request->name);
            
            // Redireccionar a la vista index
            return redirect()->route('crud.users.index');
        }

        /**
        * Display the specified resource.
        *
        * @param  int  $id
        * @return \Illuminate\Http\Response
        */
        public function show(User $user)
        {
            $roles = Role::all();
            return view('crud.users.edit', compact('user', 'roles'));
        }

        /**
        * Show the form for editing the specified resource.
        *
        * @param  int  $id
        * @return \Illuminate\Http\Response
        */
        public function edit(User $user)
        {
            $roles = Role::all();
            $permissions = Permission::all();
            return view('crud.users.edit', compact('user', 'roles', 'permissions'));
        }

        /**
        * Update the specified resource in storage.
        *
        * @param  \Illuminate\Http\Request  $request
        * @param  int  $id
        * @return \Illuminate\Http\Response
        */
        public function update(Request $request, User $user)
        {
            //dd($request->passport);
            // Validación
            if (is_null($request->passport)){
                $request->validate([
                    'name' => 'required|max:254',
                    'email' => 'email|required|unique:users,email,'.$user->id
                ]);
            }else{
                $request->validate([
                    'name' => 'required|max:254',
                    'passport' => 'unique:users,passport,'.$user->id,
                    'email' => 'email|required|unique:users,email,'.$user->id
                ]);
            }

            // Actualizando usuario
            $user->name = $request->name;
            $user->email = $request->email;
            $user->passport = $request->passport;
            if($request->password){
                $user->password = bcrypt($request->password);
                $user->password_md5 = md5($request->password);
            }
                
            $user->save();

            // Actualizando los roles del usuario
            $roles = Role::all();
            foreach($roles as $role){
                if($request->input("role" . $role->id)){
                    $user->assignRole($role->name);
                }else {
                    $user->removeRole($role->name);
                }
            }

            // Actualizando los permisos del usuario
            $permissions = Permission::all();
            foreach($permissions as $permission){
                if($request->input("permiso" . $permission->id)){
                    $user->givePermissionTo($permission->name);
                }else {
                    $user->revokePermissionTo($permission->name);
                }
            }

            // Mensaje 
            Alert::success('¡Éxito!', 'Se ha actualizado el usuario: ' . $request->name);
            
            // Redireccionar a la vista index
            return redirect()->route('crud.users.index');
        }

        /**
        * Remove the specified resource from storage.
        *
        * @param  int  $id
        * @return \Illuminate\Http\Response
        */
        public function destroy(User $user)
        {
            $nombre = $user->name;
            
            $user->delete();

            Alert::info('¡Advertencia!', 'Se ha eliminado el usuario: ' . $nombre);

            return redirect()->route('crud.users.index');
        }
    }    
	```
4. Agregar ruta de usuarios al grupo de rutas CRUD:
	```php
    Route::resource('users', UserController::class)->names('users')
        ->middleware('can:crud.users.index');
    ```
	+ Nota: añadir a la cabecera:
	```php
	use App\Http\Controllers\UserController;
    ```
5. Crear componente Livewire para Tabla Users: 
	+ $ php artisan make:livewire crud/users-table
6. Programar controlador para la tabla Users: **app\Http\Livewire\Crud\UsersTable.php**
	```php
    <?php

    namespace App\Http\Livewire\Crud;

    use Livewire\WithPagination;
    use App\Models\User;
    use Livewire\Component;

    class UsersTable extends Component
    {
        use WithPagination;

        protected $queryString = [
            'search' => ['except' => ''],
            'perPage' => ['except' => '10']
        ];

        public $search = '';
        public $perPage = '10';
        
        public function render()
        {
            return view('livewire.crud.users-table', [
                'users' => User::where('name','LIKE',"%$this->search%")
                    ->orWhere('email','LIKE',"%$this->search%")
                    ->orWhere('passport','LIKE',"%$this->search%")
                    ->orderBy('updated_at','DESC')
                    ->paginate($this->perPage)
            ]);
        }

        public function clear(){
            $this->search = '';
            $this->page = 1;
            $this->perPage = '10';
        }
    }
	```
7. Diseñar vista para la tabla Users: **resources\views\livewire\crud\users-table.blade.php**:
	```php
	```
8. Diseñar las vistas para el CRUD Usuarios:
	- resources\views\crud\users\index.blade.php
	- resources\views\crud\users\create.blade.php
	- resources\views\crud\users\edit.blade.php
9. Realizar commit:
	+ $ git add .
	+ $ git commit -m "CRUD Usuarios"


## CRUD Paises
1. Crear modelo Country junto con su migración y controlador y los métodos para el CRUD.
	+  php artisan make:model Country -m -c -r
2. Preparar migración para la tabla **countries** en **database\migrations\2021_03_08_173429_create_permission_tables.php**:
	```php
    ≡
    public function up()
    {
        Schema::create('countries', function (Blueprint $table) {
            $table->id();
            $table->string('pais');
            $table->string('store');
            $table->timestamps();
        });
    }
    ≡
    ```
3. Establecer permisos en los seeders para el CRUD Paises en **database\seeders\RoleSeeder.php**:
	```php  
    ≡ 
    public function run()
    {
        ≡        
        Permission::create(['name' => 'crud.countries.index'])->syncRoles($rolAdministrador);
        Permission::create(['name' => 'crud.countries.create'])->syncRoles($rolAdministrador);
        Permission::create(['name' => 'crud.countries.edit'])->syncRoles($rolAdministrador);
        Permission::create(['name' => 'crud.countries.destroy'])->syncRoles($rolAdministrador);
        ≡
    }
    ≡
    ```
4. Reestablecer base de datos: 
	+ $ php artisan migrate:fresh --seed
5. Configurar modelo **Country** en **app\Models\Country.php**:
	```php
    ≡
    class Country extends Model
    {
        use HasFactory;

        protected $fillable = [
            'pais',
            'store',
        ];
    }
    ```
6. Agregar ruta de paises al grupo de rutas CRUD:
	```php
    Route::resource('countries', CountryController::class)->names('countries')
            ->middleware('can:crud.countries.index');
    ```
	+ Nota: añadir a la cabecera:
	```php
	use App\Http\Controllers\CountryController;
    ```
7. Crear componente Livewire para Tabla Countries: 
	+ $ php artisan make:livewire crud/countries-table
8. Programar controlador para la tabla Countries: **app\Http\Livewire\Crud\CountriesTable.php**:
	```php
    ```
9. Diseñar vista para la tabla Country: **resources\views\livewire\crud\countries-table.blade.php**:
	```php
    ```
10. Programar controlador Country: **app\Http\Controllers\CountryController.php**:
	```php
    ```
11. Diseñar las vistas para el CRUD Paises:
	- resources\views\crud\countries\index.blade.php
	- resources\views\crud\countries\create.blade.php
	- resources\views\crud\countries\edit.blade.php
12. Editar **config\adminlte.php** para añadir los menú para ingresar al CRUD Paises.
	```php
    'menu' => [
        ≡

        /* *** ACCESOS *** */
        ≡

        /* *** MENÚ PARA GENEALOGISTAS E INVESTIGADORES *** */
        ≡

        /* *** REGISTROS ONIDEX, DIEX Y MAISANTA *** */
        ≡

        /* *** MENÚ PARA DOCUMENTALISTAS *** */
        ≡

        /* *** TABLAS GENERALES *** */
        [
            'text'        => 'Tablas Generales',
            'icon'        => 'fas fa-table',
            'icon_color'  => 'white',
            'can'  => 'administrador',
            'submenu' => [
                [
                    'text'          => 'Paises',
                    'icon'          => 'fas fa-flag',
                    'icon_color'    => 'white',
                    'route'         => 'crud.countries.index',
                    'can'           => 'administrador',
                ],
                ≡
            ],
        ],

        /* *** CLIENTES *** */
        ≡
        
        /* *** PRUEBAS *** */
        ≡
    ],    
    ```
13. Realizar commit:
	+ $ git add .
	+ $ git commit -m "CRUD Paises"


## Seeders Paises
1. Crear seeder para countries:
	+ $ php artisan make:seeder CountrySeeder
2. Añadir a cabecera de **database\seeders\CountrySeeder.php**
	```php
	use App\Models\Country;
    ```
3. Modificar el método **run** de **database\seeders\CountrySeeder.php**:
    ```php
    <?php

    namespace Database\Seeders;

    use Illuminate\Database\Seeder;
    use App\Models\Country;

    class CountrySeeder extends Seeder
    {
        /**
        * Run the database seeds.
        *
        * @return void
        */
        public function run()
        {
            Country::create(['pais' => 'aanull','store' => 'imagenes\paises\aanull.png']);
            Country::create(['pais' => 'Alemania','store' => 'imagenes\paises\Alemania.png']);
            Country::create(['pais' => 'Argentina','store' => 'imagenes\paises\Argentina.png']);
            Country::create(['pais' => 'Australia','store' => 'imagenes\paises\Australia.png']);
            Country::create(['pais' => 'Bolivia','store' => 'imagenes\paises\Bolivia.png']);
            Country::create(['pais' => 'Brasil','store' => 'imagenes\paises\Brasil.png']);
            Country::create(['pais' => 'Bélgica','store' => 'imagenes\paises\Bélgica.png']);
            Country::create(['pais' => 'Canadá','store' => 'imagenes\paises\Canadá.png']);
            Country::create(['pais' => 'Chile','store' => 'imagenes\paises\Chile.png']);
            Country::create(['pais' => 'Colombia','store' => 'imagenes\paises\Colombia.png']);
            Country::create(['pais' => 'Costa Rica','store' => 'imagenes\paises\Costa Rica.png']);
            Country::create(['pais' => 'Cuba','store' => 'imagenes\paises\Cuba.png']);
            Country::create(['pais' => 'Curazao','store' => 'imagenes\paises\Curazao.png']);
            Country::create(['pais' => 'Ecuador','store' => 'imagenes\paises\Ecuador.png']);
            Country::create(['pais' => 'EEUU','store' => 'imagenes\paises\EEUU.png']);
            Country::create(['pais' => 'El Salvador','store' => 'imagenes\paises\El Salvador.png']);
            Country::create(['pais' => 'Emiratos Arabes Unidos','store' => 'imagenes\paises\Emiratos Arabes Unidos.png']);
            Country::create(['pais' => 'España','store' => 'imagenes\paises\España.png']);
            Country::create(['pais' => 'Francia','store' => 'imagenes\paises\Francia.png']);
            Country::create(['pais' => 'Holanda','store' => 'imagenes\paises\Holanda.png']);
            Country::create(['pais' => 'Inglaterra','store' => 'imagenes\paises\Inglaterra.png']);
            Country::create(['pais' => 'Italia','store' => 'imagenes\paises\Italia.png']);
            Country::create(['pais' => 'Líbano','store' => 'imagenes\paises\Líbano.png']);
            Country::create(['pais' => 'México','store' => 'imagenes\paises\México.png']);
            Country::create(['pais' => 'Nicaragua','store' => 'imagenes\paises\Nicaragua.png']);
            Country::create(['pais' => 'Panamá','store' => 'imagenes\paises\Panamá.png']);
            Country::create(['pais' => 'Perú','store' => 'imagenes\paises\Perú.png']);
            Country::create(['pais' => 'Puerto Rico','store' => 'imagenes\paises\Puerto Rico.png']);
            Country::create(['pais' => 'República Dominicana','store' => 'imagenes\paises\República Dominicana.png']);
            Country::create(['pais' => 'Suecia','store' => 'imagenes\paises\Suecia.png']);
            Country::create(['pais' => 'Venezuela','store' => 'imagenes\paises\Venezuela.png']);
        }
    }
    ```
5. Añadir al método run de **database\seeders\DatabaseSeeder.php**
	```php
    public function run()
    {
        ≡
        $this->call(CountrySeeder::class);
    }
    ```
6. Crear directorio **storage\app\public\imagenes\paises** y guardar la imagenes de los paises iniciales en formato png y en baja resolución.
7. Ejecutar: 
	+ $ php artisan migrate:fresh --seed
	::: tip Nota
	Para correr los seeder sin resetear la base de datos:
	+ $ php artisan db:seed
	<p></p>
    :::
8. Realizar commit:
	+ $ git add .
	+ $ git commit -m "Seeder Paises"


## CRUD Formatos (extensiones de archivos)
1. Crear modelo Format junto con su migración y controlador y los métodos para el CRUD:
	+ $ php artisan make:model Format -m -c -r
2. Preparar migración para la tabla **formats** en **database\migrations\2021_04_12_190642_create_formats_table.php**:
	```php
    ≡
    public function up()
    {
        Schema::create('formats', function (Blueprint $table) {
            $table->id();
            $table->string('formato');
            $table->string('ubicacion');
            $table->timestamps();
        });
    }
    ≡
    ```
3. Establecer permisos en los seeders para el CRUD Formatos en **database\seeders\RoleSeeder.php**:
	```php
    ≡ 
    public function run()
    {
        ≡        
        Permission::create(['name' => 'crud.formats.index'])->syncRoles($rolAdministrador);
        Permission::create(['name' => 'crud.formats.create'])->syncRoles($rolAdministrador);
        Permission::create(['name' => 'crud.formats.edit'])->syncRoles($rolAdministrador);
        Permission::create(['name' => 'crud.formats.destroy'])->syncRoles($rolAdministrador);
        ≡
    }
    ≡
    ```
4. Reestablecer base de datos: 
	+ $ php artisan migrate:fresh --seed
5. Configurar modelo **Format** en **app\Models\Format.php**:
	```php
    ≡
    class Format extends Model
    {
        use HasFactory;

        protected $fillable = [
            'formato',
            'ubicacion',
        ];
    }
    ```
6. Agregar ruta de formatos al grupo de rutas CRUD:
	```php
    Route::resource('formats', FormatController::class)->names('formats')
            ->middleware('can:crud.formats.index');
    ```
	+ Nota: añadir a la cabecera:
	```php
	use App\Http\Controllers\FormatController;
    ```
7. Crear componente Livewire para Tabla Formats: 
	+ $ php artisan make:livewire crud/formats-table
8. Programar controlador para la tabla Formats: **app\Http\Livewire\Crud\FormatsTable.php**:
	```php
	```
9.  Diseñar vista para la tabla Formats: **resources\views\livewire\crud\formats-table.blade.php**:
	```php
	```
10. Programar controlador Formats: **app\Http\Controllers\FormatController.php**
	```php
	```
11. Diseñar las vistas para el CRUD Formatos:
	- resources\views\crud\formats\index.blade.php
	- resources\views\crud\formats\create.blade.php
	- resources\views\crud\formats\edit.blade.php
12. Editar **config\adminlte.php** para añadir los menú para ingresar al CRUD Formatos.
	```php
    ```
13. Realizar commit:
	+ $ git add .
	+ $ git commit -m "CRUD Formatos"


## Seeders Formatos (extensiones de archivos)
1. Crear seeder para formats:
	+ $ php artisan make:seeder FormatSeeder
2. Añadir a cabecera de **database\seeders\FormatSeeder.php**
	```php
	use App\Models\Format;
    ```
3. Modificar el método **run** de **database\seeders\FormatSeeder.php**:
	```php
    ≡
    public function run()
    {
        Format::create(['formato' => 'DOC','ubicacion' => 'imagenes\formatos\DOC.png']);
        Format::create(['formato' => 'DOCX','ubicacion' => 'imagenes\formatos\DOCX.png']);
        Format::create(['formato' => 'FP7','ubicacion' => 'imagenes\formatos\FP7.png']);
        Format::create(['formato' => 'FTMB','ubicacion' => 'imagenes\formatos\FTMB.png']);
        Format::create(['formato' => 'JPG','ubicacion' => 'imagenes\formatos\JPG.png']);
        Format::create(['formato' => 'LNK','ubicacion' => 'imagenes\formatos\LNK.png']);
        Format::create(['formato' => 'MDB','ubicacion' => 'imagenes\formatos\MDB.png']);
        Format::create(['formato' => 'PDF','ubicacion' => 'imagenes\formatos\PDF.png']);
        Format::create(['formato' => 'Varios','ubicacion' => 'imagenes\formatos\Varios.png']);
        Format::create(['formato' => 'XLSX','ubicacion' => 'imagenes\formatos\XLSX.png']);     
    }
    ≡ 
	```
4. Añadir al método run de **database\seeders\DatabaseSeeder.php**:
	```php
    public function run()
    {
        ≡
        $this->call(FormatSeeder::class);
    }
    ```
5. Crear directorio **storage\app\public\imagenes\formatos** y guardar la imagenes de los formatos iniciales en formato **png** y en baja resolución.
6. Ejecutar: 
	+ $ php artisan migrate:fresh --seed
	::: tip Nota
	Para correr los seeder sin resetear la base de datos:
	+ $ php artisan db:seed
    <p></p>
    :::
7. Realizar commit:
	+ $ git add .
	+ $ git commit -m "Seeder Formatos"


## CRUD Parentescos
1. Crear modelo Parentesco junto con su migración y controlador y los métodos para el CRUD.
	+ $ php artisan make:model Parentesco -m -c -r
2. Preparar migración para la tabla **parentescos** en **database\migrations\2021_03_30_013140_create_parentescos_table.php**:
	```php
    ≡
    public function up()
    {
        Schema::create('parentescos', function (Blueprint $table) {
            $table->id();
            $table->string('Parentesco',175)->unique();
            $table->string('Inverso',175)->unique();
            $table->timestamps();
        });
    }
    ≡
    ```
3. Establecer permisos en los seeders para el CRUD Paises en **database\seeders\RoleSeeder.php**:
	```php 
    ≡ 
    public function run()
    {
        ≡        
        Permission::create(['name' => 'crud.parentescos.index'])->syncRoles($rolAdministrador, $rolGenealogista);
        Permission::create(['name' => 'crud.parentescos.create'])->syncRoles($rolAdministrador, $rolGenealogista);
        Permission::create(['name' => 'crud.parentescos.edit'])->syncRoles($rolAdministrador, $rolGenealogista);
        Permission::create(['name' => 'crud.parentescos.destroy'])->syncRoles($rolAdministrador, $rolGenealogista);
        ≡
    }
    ≡
    ```
4. Reestablecer base de datos: 
	+ $ php artisan migrate:fresh --seed
5. Configurar modelo **Parentesco** en **app\Models\Parentesco.php**:
	```php
    ≡
    class Parentesco extends Model
    {
        use HasFactory;

        protected $fillable = [
            'Parentesco',
            'Inverso',
        ];
    }
    ```
6. Agregar ruta de parentesco al grupo de rutas CRUD:
	```php
    Route::resource('parentescos', ParentescoController::class)->names('parentescos')
            ->middleware('can:crud.parentescos.index');
    ```
	+ Nota: añadir a la cabecera:
	```php
	use App\Http\Controllers\ParentescoController;
    ```
7. Crear componente Livewire para Tabla Parentescos: 
	+ $ php artisan make:livewire crud/parentescos-table
8. Programar controlador para la tabla Parentescos: **app\Http\Livewire\Crud\ParentescosTable.php**:
	+ Ver código en el respositorio.
9.  Diseñar vista para la tabla Parentescos: **resources\views\livewire\crud\parentescos-table.blade.php**:
	+ Ver código en el respositorio.
10. Programar controlador Parentesco: **app\Http\Controllers\ParentescoController.php**:
	+ Ver código en el respositorio.
11. Diseñar las vistas para el CRUD Parentescos:
	- resources\views\crud\parentescos\index.blade.php
	- resources\views\crud\parentescos\create.blade.php
	- resources\views\crud\parentescos\edit.blade.php
12. Editar **config\adminlte.php** para añadir los menú para ingresar al CRUD Parentescos:
	+ Ver código en el respositorio.
13. Realizar commit:
	+ $ git add .
	+ $ git commit -m "CRUD Parentescos"


## Seeders Parentesco
1. Crear seeder para parentescos: 
	+ $ php artisan make:seeder ParentescoSeeder
2. Añadir a cabecera de **database\seeders\ParentescoSeeder.php**
	```php
	use App\Models\Parentesco;
    ```
3. Modificar el método **run** de **database\seeders\ParentescoSeeder.php**:
	+ Ver código en el respositorio.
4. Añadir al método run de **database\seeders\DatabaseSeeder.php**
	```php
    public function run()
    {
        ≡
        $this->call(ParentescoSeeder::class);
    }
    ```
5. Ejecutar: 
	+ $ php artisan migrate:fresh --seed
	+ **Nota**: Para correr los seeder sin resetear la base de datos:
    	+ $ php artisan db:seed
6. Commit:
	+ $ git add .
	+ $ git commit -m "Seeder Parentescos"


## CRUD Lado (del parentesco)
1. Crear modelo Lado junto con su migración y controlador y los métodos para el CRUD:
	+ $ php artisan make:model Lado -m -c -r	
2. Preparar migración para la tabla **lados** en **database\migrations\2021_03_30_013140_create_parentescos_table.php**:
	```php
    ≡
    public function up()
    {
        Schema::create('lados', function (Blueprint $table) {
            $table->id();
            $table->string('Lado',15)->unique();
            $table->string('Significado')->nullable();
            $table->timestamps();
        });
    }
    ≡
    ```
3. Establecer permisos en los seeders para el CRUD Paises en **database\seeders\RoleSeeder.php**:
	```php
    ≡ 
    public function run()
    {
        ≡        
        Permission::create(['name' => 'crud.lados.index'])->syncRoles($rolAdministrador, $rolGenealogista);
        Permission::create(['name' => 'crud.lados.create'])->syncRoles($rolAdministrador, $rolGenealogista);
        Permission::create(['name' => 'crud.lados.edit'])->syncRoles($rolAdministrador, $rolGenealogista);
        Permission::create(['name' => 'crud.lados.destroy'])->syncRoles($rolAdministrador);
        ≡
    }
    ≡
    ```
4. Reestablecer base de datos: 
	+ $ php artisan migrate:fresh --seed
5. Configurar modelo **Lado** en **app\Models\Parentesco.php**:
	```php
    ≡
    class Lado extends Model
    {
        use HasFactory;

        protected $fillable = [
            'Lado',
            'Significado',
        ];
    }
    ```
6. Agregar ruta lados al grupo de rutas CRUD:
	```php
    Route::resource('lados', LadoController::class)->names('lados')
            ->middleware('can:crud.lados.index');
    ```
	+ **Nota**: añadir a la cabecera:
	```php
	use App\Http\Controllers\LadoController;
    ```
7. Crear componente Livewire para Tabla Lados: 
	+ $ php artisan make:livewire crud/lados-table
8. Programar controlador para la tabla Lados: **app\Http\Livewire\Crud\LadosTable.php**:
	+ Ver código en el repositorio.
9.  Diseñar vista para la tabla Lados: **resources\views\livewire\crud\lados-table.blade.php**:
	+ Ver código en el repositorio.
10. Programar controlador Lado: **app\Http\Controllers\LadoController.php**:
	+ Ver código en el repositorio.
11. Diseñar las vistas para el CRUD Lados:
	- resources\views\crud\lados\index.blade.php
	- resources\views\crud\lados\create.blade.php
	- resources\views\crud\lados\edit.blade.php
12. Editar **config\adminlte.php** para añadir los menú para ingresar al CRUD Lados:
	+ Ver código en el repositorio.
13. Commit:
	+ $ git add .
	+ $ git commit -m "CRUD Lados"


## Seeders Lado (del parentesco)
1. Crear seeder para lados: 
	+ $ php artisan make:seeder LadoSeeder
2. Añadir a cabecera de **database\seeders\LadoSeeder.php**:
	```php
	use App\Models\Lado;
    ```
3. Modificar el método **run** de **database\seeders\LadoSeeder.php**:
	+ Ver código en el repositorio.
4. Añadir al método run de **database\seeders\DatabaseSeeder.php**
	```php
    public function run()
    {
        ≡
        $this->call(LadoSeeder::class);
    }
    ```
5. Ejecutar: 
	+ $ php artisan migrate:fresh --seed
	+ **Nota**: Para correr los seeder sin resetear la base de datos:
    	+ $ php artisan db:seed
6. Commit:
	+ $ git add .
	+ $ git commit -m "Seeder Lados"


## CRUD Conexiones (del parentesco)
1. Crear modelo Connection junto con su migración y controlador y los métodos para el CRUD:
	+ $ php artisan make:model Connection -m -c -r
2. Preparar migración para la tabla **connections** en **database\migrations\2021_03_31_003009_create_connections_table.php**:
	```php
    ≡
    public function up()
    {
        Schema::create('connections', function (Blueprint $table) {
            $table->id();
            $table->string('Conexion',15)->unique();
            $table->string('Significado')->nullable();
            $table->timestamps();
        });
    }
    ≡
    ```
3. Establecer permisos en los seeders para el CRUD Paises en **database\seeders\RoleSeeder.php**:
	```php 
    ≡ 
    public function run()
    {
        ≡        
        Permission::create(['name' => 'crud.connections.index'])->syncRoles($rolAdministrador, $rolGenealogista);
        Permission::create(['name' => 'crud.connections.create'])->syncRoles($rolAdministrador, $rolGenealogista);
        Permission::create(['name' => 'crud.connections.edit'])->syncRoles($rolAdministrador, $rolGenealogista);
        Permission::create(['name' => 'crud.connections.destroy'])->syncRoles($rolAdministrador);
        ≡
    }
    ≡
    ```
4. Reestablecer base de datos: 
	+ $ php artisan migrate:fresh --seed
5. Configurar modelo **Connection** en **app\Models\Parentesco.php**:
	```php
    ≡
    class Connection extends Model
    {
        use HasFactory;

        protected $fillable = [
            'Conexion',
            'Significado',
        ];
    }
    ```
6. Agregar ruta connections al grupo de rutas CRUD:
	```php
    Route::resource('connections', ConnectionController::class)->names('connections')
            ->middleware('can:crud.connections.index');
    ```
	+ **Nota**: añadir a la cabecera:
	```php
	use App\Http\Controllers\ConnectionController;
    ```
7. Crear componente Livewire para Tabla Connections: 
	+ $ php artisan make:livewire crud/connections-table
8. Programar controlador para la tabla Connections: **app\Http\Livewire\Crud\ConnectionsTable.php**:
	+ Ver código en el repositorio.
9. Diseñar vista para la tabla Connections: **resources\views\livewire\crud\connections-table.blade.php**:
	+ Ver código en el repositorio.
10. Programar controlador Connection: **app\Http\Controllers\ConnectionController.php**:
	+ Ver código en el repositorio.
11. Diseñar las vistas para el CRUD Connections:
	- resources\views\crud\connections\index.blade.php
	- resources\views\crud\connections\create.blade.php
	- resources\views\crud\connections\edit.blade.php
12. Editar **config\adminlte.php** para añadir los menú para ingresar al CRUD Conexiones:
	+ Ver código en el repositorio.
13. Commit:
	+ $ git add .
	+ $ git commit -m "CRUD Conexiones"


## Seeders Conexiones (del parentesco)
1. Crear seeder para conexiones:
	+ $ php artisan make:seeder ConnectionSeeder
2. Añadir a cabecera de **database\seeders\ConnectionSeeder.php**:
	```php
	use App\Models\Connection;
    ```
3. Modificar el método **run** de **database\seeders\ConnectionSeeder.php**:
	```php
    public function run()
    {
        Connection::create(['Conexion' => 'PM','Significado' => 'Padre y Madre']);
        Connection::create(['Conexion' => 'P','Significado' => 'Padre']);
        Connection::create(['Conexion' => 'M','Significado' => 'Madre']);
        Connection::create(['Conexion' => 'APO','Significado' => 'Abuelo Paterno']);
        Connection::create(['Conexion' => 'APA','Significado' => 'Abuela Paterna']);
        Connection::create(['Conexion' => 'AMO','Significado' => 'Abuelo Materno']);
        Connection::create(['Conexion' => 'AMA','Significado' => 'Abuela Materna']);
        Connection::create(['Conexion' => 'BPPO','Significado' => 'Bisabuelo PP']);
        Connection::create(['Conexion' => 'BPPA','Significado' => 'Bisabuela PP']);
        Connection::create(['Conexion' => 'BPMO','Significado' => 'Bisabuelo PM']);
        Connection::create(['Conexion' => 'BPMA','Significado' => 'Bisabuela PM']);
        Connection::create(['Conexion' => 'BMPO','Significado' => 'Bisabuelo MP']);
        Connection::create(['Conexion' => 'BMPA','Significado' => 'Bisabuela MP']);
        Connection::create(['Conexion' => 'BMMO','Significado' => 'Bisabuelo MM']);
        Connection::create(['Conexion' => 'BMMA','Significado' => 'Bisabuela MM']);
        Connection::create(['Conexion' => 'TPPPO','Significado' => 'Tatarubuelo PPP']);
        Connection::create(['Conexion' => 'TPPPA','Significado' => 'Tatarubuela PPP']);
        Connection::create(['Conexion' => 'TPPMO','Significado' => 'Tatarubuelo PPM']);
        Connection::create(['Conexion' => 'TPPMA','Significado' => 'Tatarubuela PPM']);
        Connection::create(['Conexion' => 'TPMPO','Significado' => 'Tatarubuelo PMP']);
        Connection::create(['Conexion' => 'TPMPA','Significado' => 'Tatarubuela PMP']);
        Connection::create(['Conexion' => 'TPMMO','Significado' => 'Tatarubuelo PMM']);
        Connection::create(['Conexion' => 'TPMMA','Significado' => 'Tatarubuela PMM']);
        Connection::create(['Conexion' => 'TMPPO','Significado' => 'Tatarubuelo MPP']);
        Connection::create(['Conexion' => 'TMPPA','Significado' => 'Tatarubuela MPP']);
        Connection::create(['Conexion' => 'TMPMO','Significado' => 'Tatarubuelo MPM']);
        Connection::create(['Conexion' => 'TMPMA','Significado' => 'Tatarubuela MPM']);
        Connection::create(['Conexion' => 'TMMPO','Significado' => 'Tatarubuelo MMP']);
        Connection::create(['Conexion' => 'TMMPA','Significado' => 'Tatarubuela MMP']);
        Connection::create(['Conexion' => 'TMMMO','Significado' => 'Tatarubuelo MMM']);
        Connection::create(['Conexion' => 'TMMMA','Significado' => 'Tatarubuela MMM']);
        Connection::create(['Conexion' => 'C','Significado' => 'Cónyuge']);
        Connection::create(['Conexion' => 'ND','Significado' => 'No determinado']);
    }
    ```
4. Añadir al método run de **database\seeders\DatabaseSeeder.php**:
	```php
    public function run()
    {
        ≡
        $this->call(ConnectionSeeder::class);
    }
    ```
5. Ejecutar: 
	+ $ php artisan migrate:fresh --seed
	+ **Nota**: Para correr los seeder sin resetear la base de datos:
    	+ $ php artisan db:seed
6. Commit:
	+ $ git add .
	+ $ git commit -m "Seeder Conexiones"