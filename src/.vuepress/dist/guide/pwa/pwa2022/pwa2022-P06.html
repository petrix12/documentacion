<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>PWA - Aplicaciones Web Progresivas: De cero a experto (Parte VI) | Docs S++</title>
    <meta name="generator" content="VuePress 1.9.7">
    <link rel="icon" type="image/png" href="https://raw.githubusercontent.com/petrix12/imagenes2022/main/Soluciones%2B%2B/S%2B%2B.ico">
    <meta name="description" content="Documentación General">
    <meta name="theme-color" content="#3eaf7c">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    
    <link rel="preload" href="/assets/css/0.styles.cf1f87b2.css" as="style"><link rel="preload" href="/assets/js/app.271db0af.js" as="script"><link rel="preload" href="/assets/js/2.63c13255.js" as="script"><link rel="preload" href="/assets/js/34.efba546f.js" as="script"><link rel="prefetch" href="/assets/js/10.48929f7d.js"><link rel="prefetch" href="/assets/js/11.d19bb8e6.js"><link rel="prefetch" href="/assets/js/12.5220d855.js"><link rel="prefetch" href="/assets/js/13.63118c27.js"><link rel="prefetch" href="/assets/js/14.de416fbc.js"><link rel="prefetch" href="/assets/js/15.6c40b102.js"><link rel="prefetch" href="/assets/js/16.50046b07.js"><link rel="prefetch" href="/assets/js/17.246601f6.js"><link rel="prefetch" href="/assets/js/18.e29c4ef8.js"><link rel="prefetch" href="/assets/js/19.51805c4e.js"><link rel="prefetch" href="/assets/js/20.885520a9.js"><link rel="prefetch" href="/assets/js/21.110ef84e.js"><link rel="prefetch" href="/assets/js/22.89bec5c9.js"><link rel="prefetch" href="/assets/js/23.c2d1c2e9.js"><link rel="prefetch" href="/assets/js/24.0d8bae3c.js"><link rel="prefetch" href="/assets/js/25.e45536d4.js"><link rel="prefetch" href="/assets/js/26.3613333a.js"><link rel="prefetch" href="/assets/js/27.38ce7268.js"><link rel="prefetch" href="/assets/js/28.83292aca.js"><link rel="prefetch" href="/assets/js/29.8f22e9de.js"><link rel="prefetch" href="/assets/js/3.24a329a2.js"><link rel="prefetch" href="/assets/js/30.191f2466.js"><link rel="prefetch" href="/assets/js/31.ee5c7176.js"><link rel="prefetch" href="/assets/js/32.f6629035.js"><link rel="prefetch" href="/assets/js/33.235a8790.js"><link rel="prefetch" href="/assets/js/35.0a6ca200.js"><link rel="prefetch" href="/assets/js/36.631dd507.js"><link rel="prefetch" href="/assets/js/4.6d32e573.js"><link rel="prefetch" href="/assets/js/5.e457cf98.js"><link rel="prefetch" href="/assets/js/6.8d81f0ec.js"><link rel="prefetch" href="/assets/js/7.159f2f50.js"><link rel="prefetch" href="/assets/js/8.4dc47d25.js"><link rel="prefetch" href="/assets/js/9.6a63ad8e.js">
    <link rel="stylesheet" href="/assets/css/0.styles.cf1f87b2.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><!----> <span class="site-name">Docs S++</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/guide/" class="nav-link router-link-active">
  Guías
</a></div><div class="nav-item"><a href="/config/" class="nav-link">
  Doc
</a></div><div class="nav-item"><a href="https://github.com/petrix12" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Mi GitHub
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/guide/" class="nav-link router-link-active">
  Guías
</a></div><div class="nav-item"><a href="/config/" class="nav-link">
  Doc
</a></div><div class="nav-item"><a href="https://github.com/petrix12" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Mi GitHub
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div> <!----></nav>  <ul class="sidebar-links"><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Soluciones++</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>AWS</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Docker</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Herramientas</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Laravel</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Lógica</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading open"><span>PWA</span> <span class="arrow down"></span></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/guide/pwa/pwa2022/pwa2022-P01.html" class="sidebar-link">PWA - Aplicaciones Web Progresivas: De cero a experto (Parte I)</a></li><li><a href="/guide/pwa/pwa2022/pwa2022-P02.html" class="sidebar-link">PWA - Aplicaciones Web Progresivas: De cero a experto (Parte II)</a></li><li><a href="/guide/pwa/pwa2022/pwa2022-P03.html" class="sidebar-link">PWA - Aplicaciones Web Progresivas: De cero a experto (Parte III)</a></li><li><a href="/guide/pwa/pwa2022/pwa2022-P04.html" class="sidebar-link">PWA - Aplicaciones Web Progresivas: De cero a experto (Parte IV)</a></li><li><a href="/guide/pwa/pwa2022/pwa2022-P05.html" class="sidebar-link">PWA - Aplicaciones Web Progresivas: De cero a experto (Parte V)</a></li><li><a href="/guide/pwa/pwa2022/pwa2022-P06.html" aria-current="page" class="active sidebar-link">PWA - Aplicaciones Web Progresivas: De cero a experto (Parte VI)</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/guide/pwa/pwa2022/pwa2022-P06.html#seccion-11-recursos-nativos" class="sidebar-link">Sección 11: Recursos Nativos</a></li><li class="sidebar-sub-header"><a href="/guide/pwa/pwa2022/pwa2022-P06.html#seccion-12-bonus-angular-pwa" class="sidebar-link">Sección 12: Bonus: @angular/pwa</a></li><li class="sidebar-sub-header"><a href="/guide/pwa/pwa2022/pwa2022-P06.html#seccion-13-cierre-del-curso" class="sidebar-link">Sección 13: Cierre del curso</a></li><li class="sidebar-sub-header"><a href="/guide/pwa/pwa2022/pwa2022-P06.html#utilidades" class="sidebar-link">Utilidades</a></li></ul></li></ul></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="pwa-aplicaciones-web-progresivas-de-cero-a-experto-parte-vi"><a href="#pwa-aplicaciones-web-progresivas-de-cero-a-experto-parte-vi" class="header-anchor">#</a> PWA - Aplicaciones Web Progresivas: De cero a experto (Parte VI)</h1> <ul><li>URL: https://www.udemy.com/course/aplicaciones-web-progresivas</li> <li>Instructor: Fernando Herrera</li></ul> <h2 id="seccion-11-recursos-nativos"><a href="#seccion-11-recursos-nativos" class="header-anchor">#</a> Sección 11: Recursos Nativos</h2> <h3 id="_131-introduccion-a-la-seccion"><a href="#_131-introduccion-a-la-seccion" class="header-anchor">#</a> 131. Introducción a la sección</h3> <h3 id="_132-temas-puntuales-de-la-seccion"><a href="#_132-temas-puntuales-de-la-seccion" class="header-anchor">#</a> 132. Temas puntuales de la sección</h3> <ul><li>Aquí vamos a trabajar con recursos nativos que los dispositivos móviles tienen acceso. También comprenderemos cómo funciona la nueva ShareAPI, que aunque en este momento sólo funciona en Chrome para Android, pronto será aceptada por otros navegadores.</li></ul> <h3 id="_133-inicio-del-proyecto-recursos-nativos"><a href="#_133-inicio-del-proyecto-recursos-nativos" class="header-anchor">#</a> 133. Inicio del proyecto - Recursos Nativos</h3> <ol><li>Iniciar proyecto tomando como base el siguiente archivo <strong><a href="https://github.com/petrix12/pwa2022/blob/main/recursos/seccion11/12-twittor-recursos-nativos-inicio.zip" target="_blank" rel="noopener noreferrer">12-twittor-recursos-nativos-inicio.zip<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></strong>.</li></ol> <h3 id="_134-uso-de-la-geolocalizacion"><a href="#_134-uso-de-la-geolocalizacion" class="header-anchor">#</a> 134. Uso de la Geolocalización</h3> <ol><li>Modificar <strong>12-twittor-recursos-nativos\public\js\app.js</strong>:<div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">var</span> url <span class="token operator">=</span> window<span class="token punctuation">.</span>location<span class="token punctuation">.</span>href<span class="token punctuation">;</span>
<span class="token keyword">var</span> swLocation <span class="token operator">=</span> <span class="token string">'/twittor/sw.js'</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> swReg<span class="token punctuation">;</span>

<span class="token keyword">if</span> <span class="token punctuation">(</span> navigator<span class="token punctuation">.</span>serviceWorker <span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span> url<span class="token punctuation">.</span><span class="token function">includes</span><span class="token punctuation">(</span><span class="token string">'localhost'</span><span class="token punctuation">)</span> <span class="token punctuation">)</span> <span class="token punctuation">{</span>
        swLocation <span class="token operator">=</span> <span class="token string">'/sw.js'</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    window<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">'load'</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        navigator<span class="token punctuation">.</span>serviceWorker<span class="token punctuation">.</span><span class="token function">register</span><span class="token punctuation">(</span> swLocation <span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">reg</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
            swReg <span class="token operator">=</span> reg<span class="token punctuation">;</span>
            swReg<span class="token punctuation">.</span>pushManager<span class="token punctuation">.</span><span class="token function">getSubscription</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span> verificaSuscripcion <span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment">// Referencias de jQuery</span>
<span class="token keyword">var</span> googleMapKey <span class="token operator">=</span> <span class="token string">'AIzaSyA5mjCwx1TRLuBAjwQw84WE6h5ErSe7Uj8'</span><span class="token punctuation">;</span>
<span class="token comment">// Google Maps llaves alternativas - desarrollo</span>
<span class="token comment">// AIzaSyDyJPPlnIMOLp20Ef1LlTong8rYdTnaTXM</span>
<span class="token comment">// AIzaSyDzbQ_553v-n8QNs2aafN9QaZbByTyM7gQ</span>
<span class="token comment">// AIzaSyA5mjCwx1TRLuBAjwQw84WE6h5ErSe7Uj8</span>
<span class="token comment">// AIzaSyCroCERuudf2z02rCrVa6DTkeeneQuq8TA</span>
<span class="token comment">// AIzaSyBkDYSVRVtQ6P2mf2Xrq0VBjps8GEcWsLU</span>
<span class="token comment">// AIzaSyAu2rb0mobiznVJnJd6bVb5Bn2WsuXP2QI</span>
<span class="token comment">// AIzaSyAZ7zantyAHnuNFtheMlJY1VvkRBEjvw9Y</span>
<span class="token comment">// AIzaSyDSPDpkFznGgzzBSsYvTq_sj0T0QCHRgwM</span>
<span class="token comment">// AIzaSyD4YFaT5DvwhhhqMpDP2pBInoG8BTzA9JY</span>
<span class="token comment">// AIzaSyAbPC1F9pWeD70Ny8PHcjguPffSLhT-YF8</span>
<span class="token keyword">var</span> titulo      <span class="token operator">=</span> <span class="token function">$</span><span class="token punctuation">(</span><span class="token string">'#titulo'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> nuevoBtn    <span class="token operator">=</span> <span class="token function">$</span><span class="token punctuation">(</span><span class="token string">'#nuevo-btn'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> salirBtn    <span class="token operator">=</span> <span class="token function">$</span><span class="token punctuation">(</span><span class="token string">'#salir-btn'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> cancelarBtn <span class="token operator">=</span> <span class="token function">$</span><span class="token punctuation">(</span><span class="token string">'#cancel-btn'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> postBtn     <span class="token operator">=</span> <span class="token function">$</span><span class="token punctuation">(</span><span class="token string">'#post-btn'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> avatarSel   <span class="token operator">=</span> <span class="token function">$</span><span class="token punctuation">(</span><span class="token string">'#seleccion'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> timeline    <span class="token operator">=</span> <span class="token function">$</span><span class="token punctuation">(</span><span class="token string">'#timeline'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> modal       <span class="token operator">=</span> <span class="token function">$</span><span class="token punctuation">(</span><span class="token string">'#modal'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> modalAvatar <span class="token operator">=</span> <span class="token function">$</span><span class="token punctuation">(</span><span class="token string">'#modal-avatar'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> avatarBtns  <span class="token operator">=</span> <span class="token function">$</span><span class="token punctuation">(</span><span class="token string">'.seleccion-avatar'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> txtMensaje  <span class="token operator">=</span> <span class="token function">$</span><span class="token punctuation">(</span><span class="token string">'#txtMensaje'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> btnActivadas    <span class="token operator">=</span> <span class="token function">$</span><span class="token punctuation">(</span><span class="token string">'.btn-noti-activadas'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> btnDesactivadas <span class="token operator">=</span> <span class="token function">$</span><span class="token punctuation">(</span><span class="token string">'.btn-noti-desactivadas'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> btnLocation      <span class="token operator">=</span> <span class="token function">$</span><span class="token punctuation">(</span><span class="token string">'#location-btn'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> modalMapa        <span class="token operator">=</span> <span class="token function">$</span><span class="token punctuation">(</span><span class="token string">'.modal-mapa'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> btnTomarFoto     <span class="token operator">=</span> <span class="token function">$</span><span class="token punctuation">(</span><span class="token string">'#tomar-foto-btn'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> btnPhoto         <span class="token operator">=</span> <span class="token function">$</span><span class="token punctuation">(</span><span class="token string">'#photo-btn'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> contenedorCamara <span class="token operator">=</span> <span class="token function">$</span><span class="token punctuation">(</span><span class="token string">'.camara-contenedor'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> lat  <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> lng  <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span> 
<span class="token keyword">var</span> foto <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span> 
<span class="token comment">// El usuario, contiene el ID del héroe seleccionado</span>
<span class="token keyword">var</span> usuario<span class="token punctuation">;</span>

<span class="token comment">// Init de la camara class</span>
<span class="token comment">// document.getElementById('player');</span>
<span class="token keyword">const</span> camara <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Camara</span><span class="token punctuation">(</span> <span class="token function">$</span><span class="token punctuation">(</span><span class="token string">'#player'</span><span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// ===== Codigo de la aplicación</span>
<span class="token keyword">function</span> <span class="token function">crearMensajeHTML</span><span class="token punctuation">(</span><span class="token parameter">mensaje<span class="token punctuation">,</span> personaje<span class="token punctuation">,</span> lat<span class="token punctuation">,</span> lng<span class="token punctuation">,</span> foto</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// console.log(mensaje, personaje, lat, lng);</span>
    <span class="token keyword">var</span> content <span class="token operator">=</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">
    &lt;li class=&quot;animated fadeIn fast&quot;
        data-user=&quot;</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span> personaje <span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">&quot;
        data-mensaje=&quot;</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span> mensaje <span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">&quot;
        data-tipo=&quot;mensaje&quot;&gt;
        &lt;div class=&quot;avatar&quot;&gt;
            &lt;img src=&quot;img/avatars/</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span> personaje <span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">.jpg&quot;&gt;
        &lt;/div&gt;
        &lt;div class=&quot;bubble-container&quot;&gt;
            &lt;div class=&quot;bubble&quot;&gt;
                &lt;h3&gt;@</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span> personaje <span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">&lt;/h3&gt;
                &lt;br/&gt;
                </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span> mensaje <span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">
                </span><span class="token template-punctuation string">`</span></span><span class="token punctuation">;</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span> foto <span class="token punctuation">)</span> <span class="token punctuation">{</span>
        content <span class="token operator">+=</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">
                &lt;br&gt;
                &lt;img class=&quot;foto-mensaje&quot; src=&quot;</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span> foto <span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">&quot;&gt;
        </span><span class="token template-punctuation string">`</span></span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span> 
    content <span class="token operator">+=</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">&lt;/div&gt;        
                &lt;div class=&quot;arrow&quot;&gt;&lt;/div&gt;
            &lt;/div&gt;
        &lt;/li&gt;
    </span><span class="token template-punctuation string">`</span></span><span class="token punctuation">;</span>
    <span class="token comment">// si existe la latitud y longitud, </span>
    <span class="token comment">// llamamos la funcion para crear el mapa</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span> lat <span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token function">crearMensajeMapa</span><span class="token punctuation">(</span> lat<span class="token punctuation">,</span> lng<span class="token punctuation">,</span> personaje <span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token comment">// Borramos la latitud y longitud por si las usó</span>
    lat <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
    lng <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
    <span class="token function">$</span><span class="token punctuation">(</span><span class="token string">'.modal-mapa'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">remove</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    timeline<span class="token punctuation">.</span><span class="token function">prepend</span><span class="token punctuation">(</span>content<span class="token punctuation">)</span><span class="token punctuation">;</span>
    cancelarBtn<span class="token punctuation">.</span><span class="token function">click</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">function</span> <span class="token function">crearMensajeMapa</span><span class="token punctuation">(</span><span class="token parameter">lat<span class="token punctuation">,</span> lng<span class="token punctuation">,</span> personaje</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">let</span> content <span class="token operator">=</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">
    &lt;li class=&quot;animated fadeIn fast&quot;
        data-tipo=&quot;mapa&quot;
        data-user=&quot;</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span> personaje <span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">&quot;
        data-lat=&quot;</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span> lat <span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">&quot;
        data-lng=&quot;</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span> lng <span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">&quot;&gt;
                &lt;div class=&quot;avatar&quot;&gt;
                    &lt;img src=&quot;img/avatars/</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span> personaje <span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">.jpg&quot;&gt;
                &lt;/div&gt;
                &lt;div class=&quot;bubble-container&quot;&gt;
                    &lt;div class=&quot;bubble&quot;&gt;
                        &lt;iframe
                            width=&quot;100%&quot;
                            height=&quot;250&quot;
                            frameborder=&quot;0&quot; style=&quot;border:0&quot;
                            src=&quot;https://www.google.com/maps/embed/v1/view?key=</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span> googleMapKey <span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">&amp;center=</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span> lat <span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">,</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span> lng <span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">&amp;zoom=17&quot; allowfullscreen&gt;
                            &lt;/iframe&gt;
                    &lt;/div&gt;
                    
                    &lt;div class=&quot;arrow&quot;&gt;&lt;/div&gt;
                &lt;/div&gt;
            &lt;/li&gt; 
    </span><span class="token template-punctuation string">`</span></span><span class="token punctuation">;</span>
    timeline<span class="token punctuation">.</span><span class="token function">prepend</span><span class="token punctuation">(</span>content<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment">// Globals</span>
<span class="token keyword">function</span> <span class="token function">logIn</span><span class="token punctuation">(</span> <span class="token parameter">ingreso</span> <span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span> ingreso <span class="token punctuation">)</span> <span class="token punctuation">{</span>
        nuevoBtn<span class="token punctuation">.</span><span class="token function">removeClass</span><span class="token punctuation">(</span><span class="token string">'oculto'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        salirBtn<span class="token punctuation">.</span><span class="token function">removeClass</span><span class="token punctuation">(</span><span class="token string">'oculto'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        timeline<span class="token punctuation">.</span><span class="token function">removeClass</span><span class="token punctuation">(</span><span class="token string">'oculto'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        avatarSel<span class="token punctuation">.</span><span class="token function">addClass</span><span class="token punctuation">(</span><span class="token string">'oculto'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        modalAvatar<span class="token punctuation">.</span><span class="token function">attr</span><span class="token punctuation">(</span><span class="token string">'src'</span><span class="token punctuation">,</span> <span class="token string">'img/avatars/'</span> <span class="token operator">+</span> usuario <span class="token operator">+</span> <span class="token string">'.jpg'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
        nuevoBtn<span class="token punctuation">.</span><span class="token function">addClass</span><span class="token punctuation">(</span><span class="token string">'oculto'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        salirBtn<span class="token punctuation">.</span><span class="token function">addClass</span><span class="token punctuation">(</span><span class="token string">'oculto'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        timeline<span class="token punctuation">.</span><span class="token function">addClass</span><span class="token punctuation">(</span><span class="token string">'oculto'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        avatarSel<span class="token punctuation">.</span><span class="token function">removeClass</span><span class="token punctuation">(</span><span class="token string">'oculto'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        titulo<span class="token punctuation">.</span><span class="token function">text</span><span class="token punctuation">(</span><span class="token string">'Seleccione Personaje'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token comment">// Seleccion de personaje</span>
avatarBtns<span class="token punctuation">.</span><span class="token function">on</span><span class="token punctuation">(</span><span class="token string">'click'</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    usuario <span class="token operator">=</span> <span class="token function">$</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">data</span><span class="token punctuation">(</span><span class="token string">'user'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    titulo<span class="token punctuation">.</span><span class="token function">text</span><span class="token punctuation">(</span><span class="token string">'@'</span> <span class="token operator">+</span> usuario<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token function">logIn</span><span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// Boton de salir</span>
salirBtn<span class="token punctuation">.</span><span class="token function">on</span><span class="token punctuation">(</span><span class="token string">'click'</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token function">logIn</span><span class="token punctuation">(</span><span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// Boton de nuevo mensaje</span>
nuevoBtn<span class="token punctuation">.</span><span class="token function">on</span><span class="token punctuation">(</span><span class="token string">'click'</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    modal<span class="token punctuation">.</span><span class="token function">removeClass</span><span class="token punctuation">(</span><span class="token string">'oculto'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    modal<span class="token punctuation">.</span><span class="token function">animate</span><span class="token punctuation">(</span><span class="token punctuation">{</span> 
        <span class="token literal-property property">marginTop</span><span class="token operator">:</span> <span class="token string">'-=1000px'</span><span class="token punctuation">,</span>
        <span class="token literal-property property">opacity</span><span class="token operator">:</span> <span class="token number">1</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token number">200</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// Boton de cancelar mensaje</span>
cancelarBtn<span class="token punctuation">.</span><span class="token function">on</span><span class="token punctuation">(</span><span class="token string">'click'</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span> <span class="token operator">!</span>modal<span class="token punctuation">.</span><span class="token function">hasClass</span><span class="token punctuation">(</span><span class="token string">'oculto'</span><span class="token punctuation">)</span> <span class="token punctuation">)</span> <span class="token punctuation">{</span>
        modal<span class="token punctuation">.</span><span class="token function">animate</span><span class="token punctuation">(</span><span class="token punctuation">{</span> 
            <span class="token literal-property property">marginTop</span><span class="token operator">:</span> <span class="token string">'+=1000px'</span><span class="token punctuation">,</span>
            <span class="token literal-property property">opacity</span><span class="token operator">:</span> <span class="token number">0</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token number">200</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            modal<span class="token punctuation">.</span><span class="token function">addClass</span><span class="token punctuation">(</span><span class="token string">'oculto'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            modalMapa<span class="token punctuation">.</span><span class="token function">addClass</span><span class="token punctuation">(</span><span class="token string">'oculto'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            txtMensaje<span class="token punctuation">.</span><span class="token function">val</span><span class="token punctuation">(</span><span class="token string">''</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// Boton de enviar mensaje</span>
postBtn<span class="token punctuation">.</span><span class="token function">on</span><span class="token punctuation">(</span><span class="token string">'click'</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">var</span> mensaje <span class="token operator">=</span> txtMensaje<span class="token punctuation">.</span><span class="token function">val</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span> mensaje<span class="token punctuation">.</span>length <span class="token operator">===</span> <span class="token number">0</span> <span class="token punctuation">)</span> <span class="token punctuation">{</span>
        cancelarBtn<span class="token punctuation">.</span><span class="token function">click</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">var</span> data <span class="token operator">=</span> <span class="token punctuation">{</span>
        <span class="token literal-property property">mensaje</span><span class="token operator">:</span> mensaje<span class="token punctuation">,</span>
        <span class="token literal-property property">user</span><span class="token operator">:</span> usuario<span class="token punctuation">,</span>
        <span class="token literal-property property">lat</span><span class="token operator">:</span> lat<span class="token punctuation">,</span>
        <span class="token literal-property property">lng</span><span class="token operator">:</span> lng<span class="token punctuation">,</span>
        <span class="token literal-property property">foto</span><span class="token operator">:</span> foto
    <span class="token punctuation">}</span><span class="token punctuation">;</span>
    <span class="token function">fetch</span><span class="token punctuation">(</span><span class="token string">'api'</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
        <span class="token literal-property property">method</span><span class="token operator">:</span> <span class="token string">'POST'</span><span class="token punctuation">,</span>
        <span class="token literal-property property">headers</span><span class="token operator">:</span> <span class="token punctuation">{</span>
            <span class="token string-property property">'Content-Type'</span><span class="token operator">:</span> <span class="token string">'application/json'</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token literal-property property">body</span><span class="token operator">:</span> <span class="token constant">JSON</span><span class="token punctuation">.</span><span class="token function">stringify</span><span class="token punctuation">(</span> data <span class="token punctuation">)</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span> <span class="token parameter">res</span> <span class="token operator">=&gt;</span> res<span class="token punctuation">.</span><span class="token function">json</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span> <span class="token parameter">res</span> <span class="token operator">=&gt;</span> console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span> <span class="token string">'app.js'</span><span class="token punctuation">,</span> res <span class="token punctuation">)</span><span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">catch</span><span class="token punctuation">(</span> <span class="token parameter">err</span> <span class="token operator">=&gt;</span> console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span> <span class="token string">'app.js error:'</span><span class="token punctuation">,</span> err <span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token function">crearMensajeHTML</span><span class="token punctuation">(</span> mensaje<span class="token punctuation">,</span> usuario<span class="token punctuation">,</span> lat<span class="token punctuation">,</span> lng<span class="token punctuation">,</span> foto <span class="token punctuation">)</span><span class="token punctuation">;</span> 
    foto <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// Obtener mensajes del servidor</span>
<span class="token keyword">function</span> <span class="token function">getMensajes</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token function">fetch</span><span class="token punctuation">(</span><span class="token string">'api'</span><span class="token punctuation">)</span>
        <span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span> <span class="token parameter">res</span> <span class="token operator">=&gt;</span> res<span class="token punctuation">.</span><span class="token function">json</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">)</span>
        <span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span> <span class="token parameter">posts</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
            console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>posts<span class="token punctuation">)</span><span class="token punctuation">;</span>
            posts<span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span> <span class="token parameter">post</span> <span class="token operator">=&gt;</span> 
                <span class="token function">crearMensajeHTML</span><span class="token punctuation">(</span> post<span class="token punctuation">.</span>mensaje<span class="token punctuation">,</span> post<span class="token punctuation">.</span>user<span class="token punctuation">,</span> post<span class="token punctuation">.</span>lat<span class="token punctuation">,</span> post<span class="token punctuation">.</span>lng<span class="token punctuation">,</span> post<span class="token punctuation">.</span>foto <span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token function">getMensajes</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// Detectar cambios de conexión</span>
<span class="token keyword">function</span> <span class="token function">isOnline</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span> navigator<span class="token punctuation">.</span>onLine <span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">// tenemos conexión</span>
        <span class="token comment">// console.log('online');</span>
        $<span class="token punctuation">.</span><span class="token function">mdtoast</span><span class="token punctuation">(</span><span class="token string">'Online'</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
            <span class="token literal-property property">interaction</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
            <span class="token literal-property property">interactionTimeout</span><span class="token operator">:</span> <span class="token number">1000</span><span class="token punctuation">,</span>
            <span class="token literal-property property">actionText</span><span class="token operator">:</span> <span class="token string">'OK!'</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span> <span class="token keyword">else</span><span class="token punctuation">{</span>
        <span class="token comment">// No tenemos conexión</span>
        $<span class="token punctuation">.</span><span class="token function">mdtoast</span><span class="token punctuation">(</span><span class="token string">'Offline'</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
            <span class="token literal-property property">interaction</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
            <span class="token literal-property property">actionText</span><span class="token operator">:</span> <span class="token string">'OK'</span><span class="token punctuation">,</span>
            <span class="token literal-property property">type</span><span class="token operator">:</span> <span class="token string">'warning'</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

window<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">'online'</span><span class="token punctuation">,</span> isOnline <span class="token punctuation">)</span><span class="token punctuation">;</span>
window<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">'offline'</span><span class="token punctuation">,</span> isOnline <span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token function">isOnline</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// Notificaciones</span>
<span class="token keyword">function</span> <span class="token function">verificaSuscripcion</span><span class="token punctuation">(</span> <span class="token parameter">activadas</span> <span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span> activadas <span class="token punctuation">)</span> <span class="token punctuation">{</span>    
        btnActivadas<span class="token punctuation">.</span><span class="token function">removeClass</span><span class="token punctuation">(</span><span class="token string">'oculto'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        btnDesactivadas<span class="token punctuation">.</span><span class="token function">addClass</span><span class="token punctuation">(</span><span class="token string">'oculto'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
        btnActivadas<span class="token punctuation">.</span><span class="token function">addClass</span><span class="token punctuation">(</span><span class="token string">'oculto'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        btnDesactivadas<span class="token punctuation">.</span><span class="token function">removeClass</span><span class="token punctuation">(</span><span class="token string">'oculto'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">function</span> <span class="token function">enviarNotificacion</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> notificationOpts <span class="token operator">=</span> <span class="token punctuation">{</span>
        <span class="token literal-property property">body</span><span class="token operator">:</span> <span class="token string">'Este es el cuerpo de la notificación'</span><span class="token punctuation">,</span>
        <span class="token literal-property property">icon</span><span class="token operator">:</span> <span class="token string">'img/icons/icon-72x72.png'</span>
    <span class="token punctuation">}</span><span class="token punctuation">;</span>
    <span class="token keyword">const</span> n <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Notification</span><span class="token punctuation">(</span><span class="token string">'Hola Mundo'</span><span class="token punctuation">,</span> notificationOpts<span class="token punctuation">)</span><span class="token punctuation">;</span>
    n<span class="token punctuation">.</span><span class="token function-variable function">onclick</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'Click'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">function</span> <span class="token function">notificarme</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span> <span class="token operator">!</span>window<span class="token punctuation">.</span>Notification <span class="token punctuation">)</span> <span class="token punctuation">{</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'Este navegador no soporta notificaciones'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span> Notification<span class="token punctuation">.</span>permission <span class="token operator">===</span> <span class="token string">'granted'</span> <span class="token punctuation">)</span> <span class="token punctuation">{</span>   
        <span class="token comment">// new Notification('Hola Mundo! - granted');</span>
        <span class="token function">enviarNotificacion</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span> Notification<span class="token punctuation">.</span>permission <span class="token operator">!==</span> <span class="token string">'denied'</span> <span class="token operator">||</span> Notification<span class="token punctuation">.</span>permission <span class="token operator">===</span> <span class="token string">'default'</span> <span class="token punctuation">)</span>  <span class="token punctuation">{</span>
        Notification<span class="token punctuation">.</span><span class="token function">requestPermission</span><span class="token punctuation">(</span> <span class="token keyword">function</span><span class="token punctuation">(</span> <span class="token parameter">permission</span> <span class="token punctuation">)</span> <span class="token punctuation">{</span>
            console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span> permission <span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">if</span> <span class="token punctuation">(</span> permission <span class="token operator">===</span> <span class="token string">'granted'</span> <span class="token punctuation">)</span> <span class="token punctuation">{</span>
                <span class="token comment">// new Notification('Hola Mundo! - pregunta');</span>
                <span class="token function">enviarNotificacion</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token comment">// notificarme();</span>

<span class="token comment">// Get Key</span>
<span class="token keyword">function</span> <span class="token function">getPublicKey</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// fetch('api/key')</span>
    <span class="token comment">//     .then( res =&gt; res.text())</span>
    <span class="token comment">//     .then( console.log );</span>
    <span class="token keyword">return</span> <span class="token function">fetch</span><span class="token punctuation">(</span><span class="token string">'api/key'</span><span class="token punctuation">)</span>
        <span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span> <span class="token parameter">res</span> <span class="token operator">=&gt;</span> res<span class="token punctuation">.</span><span class="token function">arrayBuffer</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
        <span class="token comment">// returnar arreglo, pero como un Uint8array</span>
        <span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span> <span class="token parameter">key</span> <span class="token operator">=&gt;</span> <span class="token keyword">new</span> <span class="token class-name">Uint8Array</span><span class="token punctuation">(</span>key<span class="token punctuation">)</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment">// getPublicKey().then( console.log );</span>
btnDesactivadas<span class="token punctuation">.</span><span class="token function">on</span><span class="token punctuation">(</span> <span class="token string">'click'</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span> <span class="token operator">!</span>swReg <span class="token punctuation">)</span> <span class="token keyword">return</span> console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'No hay registro de SW'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token function">getPublicKey</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span> <span class="token keyword">function</span><span class="token punctuation">(</span> <span class="token parameter">key</span> <span class="token punctuation">)</span> <span class="token punctuation">{</span>
        swReg<span class="token punctuation">.</span>pushManager<span class="token punctuation">.</span><span class="token function">subscribe</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
            <span class="token literal-property property">userVisibleOnly</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
            <span class="token literal-property property">applicationServerKey</span><span class="token operator">:</span> key
        <span class="token punctuation">}</span><span class="token punctuation">)</span>
        <span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span> <span class="token parameter">res</span> <span class="token operator">=&gt;</span> res<span class="token punctuation">.</span><span class="token function">toJSON</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">)</span>
        <span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span> <span class="token parameter">suscripcion</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
            <span class="token comment">// console.log(suscripcion);</span>
            <span class="token function">fetch</span><span class="token punctuation">(</span><span class="token string">'api/subscribe'</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
                <span class="token literal-property property">method</span><span class="token operator">:</span> <span class="token string">'POST'</span><span class="token punctuation">,</span>
                <span class="token literal-property property">headers</span><span class="token operator">:</span> <span class="token punctuation">{</span> <span class="token string-property property">'Content-Type'</span><span class="token operator">:</span> <span class="token string">'application/json'</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
                <span class="token literal-property property">body</span><span class="token operator">:</span> <span class="token constant">JSON</span><span class="token punctuation">.</span><span class="token function">stringify</span><span class="token punctuation">(</span> suscripcion <span class="token punctuation">)</span>
            <span class="token punctuation">}</span><span class="token punctuation">)</span>
            <span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span> verificaSuscripcion <span class="token punctuation">)</span>
            <span class="token punctuation">.</span><span class="token function">catch</span><span class="token punctuation">(</span> cancelarSuscripcion <span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">function</span> <span class="token function">cancelarSuscripcion</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    swReg<span class="token punctuation">.</span>pushManager<span class="token punctuation">.</span><span class="token function">getSubscription</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span> <span class="token parameter">subs</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
        subs<span class="token punctuation">.</span><span class="token function">unsubscribe</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span>  <span class="token function">verificaSuscripcion</span><span class="token punctuation">(</span><span class="token boolean">false</span><span class="token punctuation">)</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

btnActivadas<span class="token punctuation">.</span><span class="token function">on</span><span class="token punctuation">(</span> <span class="token string">'click'</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token function">cancelarSuscripcion</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// Crear mapa en el modal</span>
<span class="token keyword">function</span> <span class="token function">mostrarMapaModal</span><span class="token punctuation">(</span><span class="token parameter">lat<span class="token punctuation">,</span> lng</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token function">$</span><span class="token punctuation">(</span><span class="token string">'.modal-mapa'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">remove</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">var</span> content <span class="token operator">=</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">
        &lt;div class=&quot;modal-mapa&quot;&gt;
            &lt;iframe
                width=&quot;100%&quot;
                height=&quot;250&quot;
                frameborder=&quot;0&quot;
                src=&quot;https://www.google.com/maps/embed/v1/view?key=</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span> googleMapKey <span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">&amp;center=</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span> lat <span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">,</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span> lng <span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">&amp;zoom=17&quot; allowfullscreen&gt;
                &lt;/iframe&gt;
        &lt;/div&gt;
    </span><span class="token template-punctuation string">`</span></span><span class="token punctuation">;</span>
    modal<span class="token punctuation">.</span><span class="token function">append</span><span class="token punctuation">(</span> content <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment">// Sección 11 - Recursos Nativos</span>
<span class="token comment">// Obtener la geolocalización</span>
btnLocation<span class="token punctuation">.</span><span class="token function">on</span><span class="token punctuation">(</span><span class="token string">'click'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token comment">// console.log('Botón geolocalización');</span>
    $<span class="token punctuation">.</span><span class="token function">mdtoast</span><span class="token punctuation">(</span><span class="token string">'Cargando mapa...'</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
        <span class="token literal-property property">interaction</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
        <span class="token literal-property property">interactionTimeout</span><span class="token operator">:</span> <span class="token number">2000</span><span class="token punctuation">,</span>
        <span class="token literal-property property">actionText</span><span class="token operator">:</span> <span class="token string">'Ok!'</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    navigator<span class="token punctuation">.</span>geolocation<span class="token punctuation">.</span><span class="token function">getCurrentPosition</span><span class="token punctuation">(</span> <span class="token parameter">pos</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span> pos <span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token function">mostrarMapaModal</span><span class="token punctuation">(</span> pos<span class="token punctuation">.</span>coords<span class="token punctuation">.</span>latitude<span class="token punctuation">,</span> pos<span class="token punctuation">.</span>coords<span class="token punctuation">.</span>longitude <span class="token punctuation">)</span><span class="token punctuation">;</span>
        lat <span class="token operator">=</span> pos<span class="token punctuation">.</span>coords<span class="token punctuation">.</span>latitude<span class="token punctuation">;</span>
        lng <span class="token operator">=</span> pos<span class="token punctuation">.</span>coords<span class="token punctuation">.</span>longitude<span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// Boton de la camara</span>
<span class="token comment">// usamos la funcion de fleca para prevenir</span>
<span class="token comment">// que jQuery me cambie el valor del this</span>
btnPhoto<span class="token punctuation">.</span><span class="token function">on</span><span class="token punctuation">(</span><span class="token string">'click'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'Inicializar camara'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    contenedorCamara<span class="token punctuation">.</span><span class="token function">removeClass</span><span class="token punctuation">(</span><span class="token string">'oculto'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    camara<span class="token punctuation">.</span><span class="token function">encender</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// Boton para tomar la foto</span>
btnTomarFoto<span class="token punctuation">.</span><span class="token function">on</span><span class="token punctuation">(</span><span class="token string">'click'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'Botón tomar foto'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    foto <span class="token operator">=</span> camara<span class="token punctuation">.</span><span class="token function">tomarFoto</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    camara<span class="token punctuation">.</span><span class="token function">apagar</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">// console.log(foto);</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// Share API</span>
<span class="token comment">// if ( navigator.share ) {</span>
<span class="token comment">//     console.log('Navegador lo soporta');</span>
<span class="token comment">// } else {</span>
<span class="token comment">//     console.log('Navegador NO lo soporta');</span>
<span class="token comment">// }</span>

timeline<span class="token punctuation">.</span><span class="token function">on</span><span class="token punctuation">(</span><span class="token string">'click'</span><span class="token punctuation">,</span> <span class="token string">'li'</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// console.log(  $(this)  );</span>
    <span class="token keyword">let</span> tipo    <span class="token operator">=</span> <span class="token function">$</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">data</span><span class="token punctuation">(</span><span class="token string">'tipo'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">let</span> lat     <span class="token operator">=</span> <span class="token function">$</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">data</span><span class="token punctuation">(</span><span class="token string">'lat'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">let</span> lng     <span class="token operator">=</span> <span class="token function">$</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">data</span><span class="token punctuation">(</span><span class="token string">'lng'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">let</span> mensaje <span class="token operator">=</span> <span class="token function">$</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">data</span><span class="token punctuation">(</span><span class="token string">'mensaje'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">let</span> user    <span class="token operator">=</span> <span class="token function">$</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">data</span><span class="token punctuation">(</span><span class="token string">'user'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token punctuation">{</span> tipo<span class="token punctuation">,</span> lat<span class="token punctuation">,</span> lng<span class="token punctuation">,</span> mensaje<span class="token punctuation">,</span> user <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">const</span> shareOpts <span class="token operator">=</span> <span class="token punctuation">{</span>
        <span class="token literal-property property">title</span><span class="token operator">:</span> user<span class="token punctuation">,</span>
        <span class="token literal-property property">text</span><span class="token operator">:</span> mensaje
    <span class="token punctuation">}</span><span class="token punctuation">;</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>tipo <span class="token operator">===</span> <span class="token string">'mapa'</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        shareOpts<span class="token punctuation">.</span>text <span class="token operator">=</span> <span class="token string">'Mapa'</span><span class="token punctuation">;</span>
        shareOpts<span class="token punctuation">.</span>url  <span class="token operator">=</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">https://www.google.com/maps/@</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span> lat <span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">,</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span> lng <span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">,15z</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    navigator<span class="token punctuation">.</span><span class="token function">share</span><span class="token punctuation">(</span>shareOpts<span class="token punctuation">)</span>
        <span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'Successful share'</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
        <span class="token punctuation">.</span><span class="token function">catch</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">error</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'Error sharing'</span><span class="token punctuation">,</span> error<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    
</code></pre></div></li></ol> <h3 id="_135-post-con-las-coordenadas-y-el-mapa"><a href="#_135-post-con-las-coordenadas-y-el-mapa" class="header-anchor">#</a> 135. POST con las coordenadas y el mapa</h3> <h3 id="_136-mostrar-video-de-la-camara"><a href="#_136-mostrar-video-de-la-camara" class="header-anchor">#</a> 136. Mostrar video de la cámara</h3> <ol><li>Crear <strong>12-twittor-recursos-nativos\public\js\camara-class.js</strong>:<div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">class</span> <span class="token class-name">Camara</span> <span class="token punctuation">{</span>
    <span class="token function">constructor</span><span class="token punctuation">(</span> <span class="token parameter">videoNode</span> <span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>videoNode <span class="token operator">=</span> videoNode<span class="token punctuation">;</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'Camara Class init'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token function">encender</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        navigator<span class="token punctuation">.</span>mediaDevices<span class="token punctuation">.</span><span class="token function">getUserMedia</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
            <span class="token literal-property property">audio</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
            <span class="token literal-property property">video</span><span class="token operator">:</span> <span class="token punctuation">{</span> <span class="token literal-property property">width</span><span class="token operator">:</span> <span class="token number">300</span><span class="token punctuation">,</span> <span class="token literal-property property">height</span><span class="token operator">:</span> <span class="token number">300</span> <span class="token punctuation">}</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span> <span class="token parameter">stream</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
            <span class="token keyword">this</span><span class="token punctuation">.</span>videoNode<span class="token punctuation">.</span>srcObject <span class="token operator">=</span> stream<span class="token punctuation">;</span>
            <span class="token keyword">this</span><span class="token punctuation">.</span>stream <span class="token operator">=</span> stream<span class="token punctuation">;</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token function">apagar</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>videoNode<span class="token punctuation">.</span><span class="token function">pause</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span> <span class="token keyword">this</span><span class="token punctuation">.</span>stream <span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">this</span><span class="token punctuation">.</span>stream<span class="token punctuation">.</span><span class="token function">getTracks</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">stop</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
    <span class="token function">tomarFoto</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">// Crear un elemento canvas para renderizr ahí la foto</span>
        <span class="token keyword">let</span> canvas <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">createElement</span><span class="token punctuation">(</span><span class="token string">'canvas'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">// Colocar las dimensiones igual al elemento del video</span>
        canvas<span class="token punctuation">.</span><span class="token function">setAttribute</span><span class="token punctuation">(</span><span class="token string">'width'</span><span class="token punctuation">,</span> <span class="token number">300</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>
        canvas<span class="token punctuation">.</span><span class="token function">setAttribute</span><span class="token punctuation">(</span><span class="token string">'height'</span><span class="token punctuation">,</span> <span class="token number">300</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">// obtener el contexto del canvas</span>
        <span class="token keyword">let</span> context <span class="token operator">=</span> canvas<span class="token punctuation">.</span><span class="token function">getContext</span><span class="token punctuation">(</span><span class="token string">'2d'</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// una simple imagen</span>
        <span class="token comment">// dibujar, la imagen dentro del canvas</span>
        context<span class="token punctuation">.</span><span class="token function">drawImage</span><span class="token punctuation">(</span> <span class="token keyword">this</span><span class="token punctuation">.</span>videoNode<span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> canvas<span class="token punctuation">.</span>width<span class="token punctuation">,</span> canvas<span class="token punctuation">.</span>height <span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>foto <span class="token operator">=</span> context<span class="token punctuation">.</span>canvas<span class="token punctuation">.</span><span class="token function">toDataURL</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">// limpieza</span>
        canvas  <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
        context <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span>foto<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>    
</code></pre></div></li> <li>Modificar <strong>12-twittor-recursos-nativos\public\sw.js</strong>:<div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// imports</span>
<span class="token function">importScripts</span><span class="token punctuation">(</span><span class="token string">'https://cdn.jsdelivr.net/npm/pouchdb@7.0.0/dist/pouchdb.min.js'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">importScripts</span><span class="token punctuation">(</span><span class="token string">'js/sw-db.js'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">importScripts</span><span class="token punctuation">(</span><span class="token string">'js/sw-utils.js'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> <span class="token constant">STATIC_CACHE</span>    <span class="token operator">=</span> <span class="token string">'static-v3'</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> <span class="token constant">DYNAMIC_CACHE</span>   <span class="token operator">=</span> <span class="token string">'dynamic-v1'</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> <span class="token constant">INMUTABLE_CACHE</span> <span class="token operator">=</span> <span class="token string">'inmutable-v1'</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> <span class="token constant">APP_SHELL</span> <span class="token operator">=</span> <span class="token punctuation">[</span>
    <span class="token string">'/'</span><span class="token punctuation">,</span>
    <span class="token string">'index.html'</span><span class="token punctuation">,</span>
    <span class="token string">'css/style.css'</span><span class="token punctuation">,</span>
    <span class="token string">'img/favicon.ico'</span><span class="token punctuation">,</span>
    <span class="token string">'img/avatars/hulk.jpg'</span><span class="token punctuation">,</span>
    <span class="token string">'img/avatars/ironman.jpg'</span><span class="token punctuation">,</span>
    <span class="token string">'img/avatars/spiderman.jpg'</span><span class="token punctuation">,</span>
    <span class="token string">'img/avatars/thor.jpg'</span><span class="token punctuation">,</span>
    <span class="token string">'img/avatars/wolverine.jpg'</span><span class="token punctuation">,</span>
    <span class="token string">'js/app.js'</span><span class="token punctuation">,</span>
    <span class="token string">'js/camara-class.js'</span><span class="token punctuation">,</span>
    <span class="token string">'js/sw-utils.js'</span><span class="token punctuation">,</span>
    <span class="token string">'js/libs/plugins/mdtoast.min.js'</span><span class="token punctuation">,</span>
    <span class="token string">'js/libs/plugins/mdtoast.min.css'</span>
<span class="token punctuation">]</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> <span class="token constant">APP_SHELL_INMUTABLE</span> <span class="token operator">=</span> <span class="token punctuation">[</span>
    <span class="token string">'https://fonts.googleapis.com/css?family=Quicksand:300,400'</span><span class="token punctuation">,</span>
    <span class="token string">'https://fonts.googleapis.com/css?family=Lato:400,300'</span><span class="token punctuation">,</span>
    <span class="token string">'https://use.fontawesome.com/releases/v5.3.1/css/all.css'</span><span class="token punctuation">,</span>
    <span class="token string">'https://cdnjs.cloudflare.com/ajax/libs/animate.css/3.7.0/animate.css'</span><span class="token punctuation">,</span>
    <span class="token string">'https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js'</span><span class="token punctuation">,</span>
    <span class="token string">'https://cdn.jsdelivr.net/npm/pouchdb@7.0.0/dist/pouchdb.min.js'</span>
<span class="token punctuation">]</span><span class="token punctuation">;</span>

self<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">'install'</span><span class="token punctuation">,</span> <span class="token parameter">e</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> cacheStatic <span class="token operator">=</span> caches<span class="token punctuation">.</span><span class="token function">open</span><span class="token punctuation">(</span> <span class="token constant">STATIC_CACHE</span> <span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token parameter">cache</span> <span class="token operator">=&gt;</span> 
        cache<span class="token punctuation">.</span><span class="token function">addAll</span><span class="token punctuation">(</span> <span class="token constant">APP_SHELL</span> <span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">const</span> cacheInmutable <span class="token operator">=</span> caches<span class="token punctuation">.</span><span class="token function">open</span><span class="token punctuation">(</span> <span class="token constant">INMUTABLE_CACHE</span> <span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token parameter">cache</span> <span class="token operator">=&gt;</span> 
        cache<span class="token punctuation">.</span><span class="token function">addAll</span><span class="token punctuation">(</span> <span class="token constant">APP_SHELL_INMUTABLE</span> <span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    e<span class="token punctuation">.</span><span class="token function">waitUntil</span><span class="token punctuation">(</span> Promise<span class="token punctuation">.</span><span class="token function">all</span><span class="token punctuation">(</span><span class="token punctuation">[</span> cacheStatic<span class="token punctuation">,</span> cacheInmutable <span class="token punctuation">]</span><span class="token punctuation">)</span>  <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

self<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">'activate'</span><span class="token punctuation">,</span> <span class="token parameter">e</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> respuesta <span class="token operator">=</span> caches<span class="token punctuation">.</span><span class="token function">keys</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span> <span class="token parameter">keys</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
        keys<span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span> <span class="token parameter">key</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
            <span class="token keyword">if</span> <span class="token punctuation">(</span>  key <span class="token operator">!==</span> <span class="token constant">STATIC_CACHE</span> <span class="token operator">&amp;&amp;</span> key<span class="token punctuation">.</span><span class="token function">includes</span><span class="token punctuation">(</span><span class="token string">'static'</span><span class="token punctuation">)</span> <span class="token punctuation">)</span> <span class="token punctuation">{</span>
                <span class="token keyword">return</span> caches<span class="token punctuation">.</span><span class="token function">delete</span><span class="token punctuation">(</span>key<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
            <span class="token keyword">if</span> <span class="token punctuation">(</span>  key <span class="token operator">!==</span> <span class="token constant">DYNAMIC_CACHE</span> <span class="token operator">&amp;&amp;</span> key<span class="token punctuation">.</span><span class="token function">includes</span><span class="token punctuation">(</span><span class="token string">'dynamic'</span><span class="token punctuation">)</span> <span class="token punctuation">)</span> <span class="token punctuation">{</span>
                <span class="token keyword">return</span> caches<span class="token punctuation">.</span><span class="token function">delete</span><span class="token punctuation">(</span>key<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    e<span class="token punctuation">.</span><span class="token function">waitUntil</span><span class="token punctuation">(</span> respuesta <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

self<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span> <span class="token string">'fetch'</span><span class="token punctuation">,</span> <span class="token parameter">e</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">let</span> respuesta<span class="token punctuation">;</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span> e<span class="token punctuation">.</span>request<span class="token punctuation">.</span>url<span class="token punctuation">.</span><span class="token function">includes</span><span class="token punctuation">(</span><span class="token string">'/api'</span><span class="token punctuation">)</span> <span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">// return respuesta????</span>
        respuesta <span class="token operator">=</span> <span class="token function">manejoApiMensajes</span><span class="token punctuation">(</span> <span class="token constant">DYNAMIC_CACHE</span><span class="token punctuation">,</span> e<span class="token punctuation">.</span>request <span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
        respuesta <span class="token operator">=</span> caches<span class="token punctuation">.</span><span class="token function">match</span><span class="token punctuation">(</span> e<span class="token punctuation">.</span>request <span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span> <span class="token parameter">res</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
            <span class="token keyword">if</span> <span class="token punctuation">(</span> res <span class="token punctuation">)</span> <span class="token punctuation">{</span>
                <span class="token function">actualizaCacheStatico</span><span class="token punctuation">(</span> <span class="token constant">STATIC_CACHE</span><span class="token punctuation">,</span> e<span class="token punctuation">.</span>request<span class="token punctuation">,</span> <span class="token constant">APP_SHELL_INMUTABLE</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token keyword">return</span> res<span class="token punctuation">;</span>
            <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
                <span class="token keyword">return</span> <span class="token function">fetch</span><span class="token punctuation">(</span> e<span class="token punctuation">.</span>request <span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span> <span class="token parameter">newRes</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
                    <span class="token keyword">return</span> <span class="token function">actualizaCacheDinamico</span><span class="token punctuation">(</span> <span class="token constant">DYNAMIC_CACHE</span><span class="token punctuation">,</span> e<span class="token punctuation">.</span>request<span class="token punctuation">,</span> newRes <span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    e<span class="token punctuation">.</span><span class="token function">respondWith</span><span class="token punctuation">(</span> respuesta <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// tareas asíncronas</span>
self<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">'sync'</span><span class="token punctuation">,</span> <span class="token parameter">e</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'SW: Sync'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span> e<span class="token punctuation">.</span>tag <span class="token operator">===</span> <span class="token string">'nuevo-post'</span> <span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">// postear a BD cuando hay conexión</span>
        <span class="token keyword">const</span> respuesta <span class="token operator">=</span> <span class="token function">postearMensajes</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>   
        e<span class="token punctuation">.</span><span class="token function">waitUntil</span><span class="token punctuation">(</span> respuesta <span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// Escuchar PUSH</span>
self<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">'push'</span><span class="token punctuation">,</span> <span class="token parameter">e</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token comment">// console.log(e);</span>
    <span class="token keyword">const</span> data <span class="token operator">=</span> <span class="token constant">JSON</span><span class="token punctuation">.</span><span class="token function">parse</span><span class="token punctuation">(</span> e<span class="token punctuation">.</span>data<span class="token punctuation">.</span><span class="token function">text</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">// console.log(data);</span>
    <span class="token keyword">const</span> title <span class="token operator">=</span> data<span class="token punctuation">.</span>titulo<span class="token punctuation">;</span>
    <span class="token keyword">const</span> options <span class="token operator">=</span> <span class="token punctuation">{</span>
        <span class="token literal-property property">body</span><span class="token operator">:</span> data<span class="token punctuation">.</span>cuerpo<span class="token punctuation">,</span>
        <span class="token comment">// icon: 'img/icons/icon-72x72.png',</span>
        <span class="token literal-property property">icon</span><span class="token operator">:</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">img/avatars/</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span> data<span class="token punctuation">.</span>usuario <span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">.jpg</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">,</span>
        <span class="token literal-property property">badge</span><span class="token operator">:</span> <span class="token string">'img/favicon.ico'</span><span class="token punctuation">,</span>
        <span class="token literal-property property">image</span><span class="token operator">:</span> <span class="token string">'https://vignette.wikia.nocookie.net/marvelcinematicuniverse/images/5/5b/Torre_de_los_Avengers.png/revision/latest?cb=20150626220613&amp;path-prefix=es'</span><span class="token punctuation">,</span>
        <span class="token literal-property property">vibrate</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token number">125</span><span class="token punctuation">,</span><span class="token number">75</span><span class="token punctuation">,</span><span class="token number">125</span><span class="token punctuation">,</span><span class="token number">275</span><span class="token punctuation">,</span><span class="token number">200</span><span class="token punctuation">,</span><span class="token number">275</span><span class="token punctuation">,</span><span class="token number">125</span><span class="token punctuation">,</span><span class="token number">75</span><span class="token punctuation">,</span><span class="token number">125</span><span class="token punctuation">,</span><span class="token number">275</span><span class="token punctuation">,</span><span class="token number">200</span><span class="token punctuation">,</span><span class="token number">600</span><span class="token punctuation">,</span><span class="token number">200</span><span class="token punctuation">,</span><span class="token number">600</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
        <span class="token literal-property property">openUrl</span><span class="token operator">:</span> <span class="token string">'/'</span><span class="token punctuation">,</span>
        <span class="token literal-property property">data</span><span class="token operator">:</span> <span class="token punctuation">{</span>
            <span class="token comment">// url: 'https://google.com',</span>
            <span class="token literal-property property">url</span><span class="token operator">:</span> <span class="token string">'/'</span><span class="token punctuation">,</span>
            <span class="token literal-property property">id</span><span class="token operator">:</span> data<span class="token punctuation">.</span>usuario
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token literal-property property">actions</span><span class="token operator">:</span> <span class="token punctuation">[</span>
            <span class="token punctuation">{</span>
                <span class="token literal-property property">action</span><span class="token operator">:</span> <span class="token string">'thor-action'</span><span class="token punctuation">,</span>
                <span class="token literal-property property">title</span><span class="token operator">:</span> <span class="token string">'Thor'</span><span class="token punctuation">,</span>
                <span class="token literal-property property">icon</span><span class="token operator">:</span> <span class="token string">'img/avatar/thor.jpg'</span>
            <span class="token punctuation">}</span><span class="token punctuation">,</span>
            <span class="token punctuation">{</span>
                <span class="token literal-property property">action</span><span class="token operator">:</span> <span class="token string">'ironman-action'</span><span class="token punctuation">,</span>
                <span class="token literal-property property">title</span><span class="token operator">:</span> <span class="token string">'Ironman'</span><span class="token punctuation">,</span>
                <span class="token literal-property property">icon</span><span class="token operator">:</span> <span class="token string">'img/avatar/ironman.jpg'</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">]</span>
    <span class="token punctuation">}</span><span class="token punctuation">;</span>
    e<span class="token punctuation">.</span><span class="token function">waitUntil</span><span class="token punctuation">(</span> self<span class="token punctuation">.</span>registration<span class="token punctuation">.</span><span class="token function">showNotification</span><span class="token punctuation">(</span> title<span class="token punctuation">,</span> options<span class="token punctuation">)</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// Cierra la notificacion</span>
self<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">'notificationclose'</span><span class="token punctuation">,</span> <span class="token parameter">e</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'Notificación cerrada'</span><span class="token punctuation">,</span> e<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

self<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">'notificationclick'</span><span class="token punctuation">,</span> <span class="token parameter">e</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> notificacion <span class="token operator">=</span> e<span class="token punctuation">.</span>notification<span class="token punctuation">;</span>
    <span class="token keyword">const</span> accion <span class="token operator">=</span> e<span class="token punctuation">.</span>action<span class="token punctuation">;</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token punctuation">{</span> notificacion<span class="token punctuation">,</span> accion <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">// console.log(notificacion);</span>
    <span class="token comment">// console.log(accion);</span>
    <span class="token keyword">const</span> respuesta <span class="token operator">=</span> clients<span class="token punctuation">.</span><span class="token function">matchAll</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
        <span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token parameter">clientes</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
            <span class="token keyword">let</span> cliente <span class="token operator">=</span> clientes<span class="token punctuation">.</span><span class="token function">find</span><span class="token punctuation">(</span> <span class="token parameter">c</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
                <span class="token keyword">return</span> c<span class="token punctuation">.</span>visibilityState <span class="token operator">===</span> <span class="token string">'visible'</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">if</span> <span class="token punctuation">(</span> cliente <span class="token operator">!==</span> <span class="token keyword">undefined</span> <span class="token punctuation">)</span> <span class="token punctuation">{</span>
                cliente<span class="token punctuation">.</span><span class="token function">navigate</span><span class="token punctuation">(</span> notificacion<span class="token punctuation">.</span>data<span class="token punctuation">.</span>url <span class="token punctuation">)</span><span class="token punctuation">;</span>
                cliente<span class="token punctuation">.</span><span class="token function">focus</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
                clients<span class="token punctuation">.</span><span class="token function">openWindow</span><span class="token punctuation">(</span> notificacion<span class="token punctuation">.</span>data<span class="token punctuation">.</span>url <span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
            <span class="token keyword">return</span> notificacion<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    e<span class="token punctuation">.</span><span class="token function">waitUntil</span><span class="token punctuation">(</span> respuesta <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    
</code></pre></div></li></ol> <h3 id="_137-nota-camara-posterior"><a href="#_137-nota-camara-posterior" class="header-anchor">#</a> 137. Nota: Camara posterior</h3> <ul><li>Documentación MDN - Media Devices: Este artículo de MDN, les ayudará a tener mejor control de la cámara en sí:
<ul><li><a href="https://developer.mozilla.org/es/docs/Web/API/MediaDevices/getUserMedia" target="_blank" rel="noopener noreferrer">Media Devices<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>.</li> <li>También incluye cómo utilizar por defecto la cámara posterior.</li></ul></li></ul> <h3 id="_138-tomar-foto-y-apagar-camara"><a href="#_138-tomar-foto-y-apagar-camara" class="header-anchor">#</a> 138. Tomar Foto y apagar cámara</h3> <h3 id="_139-mostrar-la-fotografia-como-un-mensaje"><a href="#_139-mostrar-la-fotografia-como-un-mensaje" class="header-anchor">#</a> 139. Mostrar la fotografía como un mensaje</h3> <ol><li>Modificar <strong>12-twittor-recursos-nativos\server\routes.js</strong>:<div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// Routes.js - Módulo de rutas</span>
<span class="token keyword">const</span> express <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'express'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> router <span class="token operator">=</span> express<span class="token punctuation">.</span><span class="token function">Router</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> push <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'./push'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> mensajes <span class="token operator">=</span> <span class="token punctuation">[</span>
    <span class="token punctuation">{</span>
        <span class="token literal-property property">_id</span><span class="token operator">:</span> <span class="token string">'XXX'</span><span class="token punctuation">,</span>
        <span class="token literal-property property">user</span><span class="token operator">:</span> <span class="token string">'spiderman'</span><span class="token punctuation">,</span>
        <span class="token literal-property property">mensaje</span><span class="token operator">:</span> <span class="token string">'Hola Mundo'</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">]</span><span class="token punctuation">;</span>

<span class="token comment">// Get mensajes</span>
router<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">'/'</span><span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">req<span class="token punctuation">,</span> res</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// res.json('Obteniendo mensajes');</span>
    res<span class="token punctuation">.</span><span class="token function">json</span><span class="token punctuation">(</span> mensajes <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// Post mensaje</span>
router<span class="token punctuation">.</span><span class="token function">post</span><span class="token punctuation">(</span><span class="token string">'/'</span><span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">req<span class="token punctuation">,</span> res</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// console.log( req.body.lat );</span>
    <span class="token comment">// console.log( req.body.lng );</span>
    <span class="token keyword">const</span> mensaje <span class="token operator">=</span> <span class="token punctuation">{</span>
        <span class="token literal-property property">mensaje</span><span class="token operator">:</span> req<span class="token punctuation">.</span>body<span class="token punctuation">.</span>mensaje<span class="token punctuation">,</span>
        <span class="token literal-property property">user</span><span class="token operator">:</span> req<span class="token punctuation">.</span>body<span class="token punctuation">.</span>user<span class="token punctuation">,</span>
        <span class="token literal-property property">lat</span><span class="token operator">:</span> req<span class="token punctuation">.</span>body<span class="token punctuation">.</span>lat<span class="token punctuation">,</span>
        <span class="token literal-property property">lng</span><span class="token operator">:</span> req<span class="token punctuation">.</span>body<span class="token punctuation">.</span>lng<span class="token punctuation">,</span>
        <span class="token literal-property property">foto</span><span class="token operator">:</span> req<span class="token punctuation">.</span>body<span class="token punctuation">.</span>foto
    <span class="token punctuation">}</span><span class="token punctuation">;</span>
    mensajes<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span> mensaje <span class="token punctuation">)</span><span class="token punctuation">;</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>mensajes<span class="token punctuation">)</span><span class="token punctuation">;</span>
    res<span class="token punctuation">.</span><span class="token function">json</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
        <span class="token literal-property property">ok</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
        mensaje
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// Almacenar la suscripción</span>
router<span class="token punctuation">.</span><span class="token function">post</span><span class="token punctuation">(</span><span class="token string">'/subscribe'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">req<span class="token punctuation">,</span> res</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> suscripcion <span class="token operator">=</span> req<span class="token punctuation">.</span>body<span class="token punctuation">;</span>
    push<span class="token punctuation">.</span><span class="token function">addSubscription</span><span class="token punctuation">(</span> suscripcion <span class="token punctuation">)</span><span class="token punctuation">;</span>
    res<span class="token punctuation">.</span><span class="token function">json</span><span class="token punctuation">(</span><span class="token string">'subscribe'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// Almacenar la suscripción</span>
router<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">'/key'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">req<span class="token punctuation">,</span> res</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> key <span class="token operator">=</span> push<span class="token punctuation">.</span><span class="token function">getKey</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    res<span class="token punctuation">.</span><span class="token function">send</span><span class="token punctuation">(</span>key<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// Envar una notificación PUSH a las personas</span>
<span class="token comment">// que nosotros queramos</span>
<span class="token comment">// ES ALGO que se controla del lado del server</span>
router<span class="token punctuation">.</span><span class="token function">post</span><span class="token punctuation">(</span><span class="token string">'/push'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">req<span class="token punctuation">,</span> res</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> post <span class="token operator">=</span> <span class="token punctuation">{</span>
        <span class="token literal-property property">titulo</span><span class="token operator">:</span> req<span class="token punctuation">.</span>body<span class="token punctuation">.</span>titulo<span class="token punctuation">,</span>
        <span class="token literal-property property">cuerpo</span><span class="token operator">:</span> req<span class="token punctuation">.</span>body<span class="token punctuation">.</span>cuerpo<span class="token punctuation">,</span>
        <span class="token literal-property property">usuario</span><span class="token operator">:</span> req<span class="token punctuation">.</span>body<span class="token punctuation">.</span>usuario
    <span class="token punctuation">}</span><span class="token punctuation">;</span>
    push<span class="token punctuation">.</span><span class="token function">sendPush</span><span class="token punctuation">(</span> post <span class="token punctuation">)</span><span class="token punctuation">;</span>
    res<span class="token punctuation">.</span><span class="token function">json</span><span class="token punctuation">(</span> post <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

module<span class="token punctuation">.</span>exports <span class="token operator">=</span> router<span class="token punctuation">;</span>    
</code></pre></div></li></ol> <h3 id="_140-share-api"><a href="#_140-share-api" class="header-anchor">#</a> 140. Share API</h3> <ul><li><strong><a href="https://web.dev/web-share" target="_blank" rel="noopener noreferrer">Integrate with the OS sharing UI with the Web Share API<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></strong>.</li> <li><strong><a href="https://caniuse.com/?search=share" target="_blank" rel="noopener noreferrer">Can I use share<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></strong>.</li></ul> <h3 id="_141-codigo-fuente-de-la-seccion"><a href="#_141-codigo-fuente-de-la-seccion" class="header-anchor">#</a> 141. Código fuente de la sección</h3> <ul><li><strong><a href="https://github.com/petrix12/pwa2022/blob/main/recursos/seccion11/12-twittor-recursos-nativos-fin.zip" target="_blank" rel="noopener noreferrer">Código fuente<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></strong>.</li></ul> <h2 id="seccion-12-bonus-angular-pwa"><a href="#seccion-12-bonus-angular-pwa" class="header-anchor">#</a> Sección 12: Bonus: @angular/pwa</h2> <h3 id="_142-introduccion-a-la-seccion"><a href="#_142-introduccion-a-la-seccion" class="header-anchor">#</a> 142. Introducción a la sección</h3> <h3 id="_143-temas-puntuales-de-la-seccion"><a href="#_143-temas-puntuales-de-la-seccion" class="header-anchor">#</a> 143. Temas puntuales de la sección</h3> <ul><li>Esta sección está diseñada para enseñar cómo usar el paquete de @angular/pwa, el cual me han solicitado mucho en preguntas y mensajes privados.</li> <li>Aquí aprenderán cómo usarlo, configurarlo y cómo utilizar la documentación oficial de @angular/pwa, la cual irá expandiendo sus capacidades conforme pase el tiempo.</li> <li>Aquí crearemos una aplicación web de cero, consumiendo servicios e implementando diferentes estrategias de caché que nos ofrece dicho paquete.</li></ul> <h3 id="_144-inicio-de-proyecto-angular-pwa"><a href="#_144-inicio-de-proyecto-angular-pwa" class="header-anchor">#</a> 144. Inicio de proyecto - Angular PWA</h3> <ol><li>Crear proyecto angular:
<ul><li>$ ng new paises</li></ul></li></ol> <div class="custom-block tip"><p class="custom-block-title">Nota</p> <p>Para crear proyecto angular con service worker:</p> <div class="language- extra-class"><pre class="language-text"><code>$ ng new paises --service-worker
</code></pre></div></div> <h3 id="_145-rutas-de-nuestra-aplicacion"><a href="#_145-rutas-de-nuestra-aplicacion" class="header-anchor">#</a> 145. Rutas de nuestra aplicación</h3> <h3 id="_146-servicio-y-manejo-de-informacion-agregar-interfaz-y-url"><a href="#_146-servicio-y-manejo-de-informacion-agregar-interfaz-y-url" class="header-anchor">#</a> 146. Servicio y manejo de información - Agregar interfaz y URL</h3> <ul><li><strong><a href="https://github.com/petrix12/pwa2022/blob/main/recursos/seccion12/pais.interface.ts" target="_blank" rel="noopener noreferrer">pais.interface.ts<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></strong>.</li> <li><strong><a href="https://restcountries.eu/#api-endpoints-language" target="_blank" rel="noopener noreferrer">Restcountries API<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></strong>.</li></ul> <h3 id="_147-pagina-del-pais"><a href="#_147-pagina-del-pais" class="header-anchor">#</a> 147. Página del país</h3> <ul><li><strong><a href="https://github.com/petrix12/pwa2022/blob/main/recursos/seccion12/pais.component.html" target="_blank" rel="noopener noreferrer">pais.component.html<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></strong>.</li></ul> <h3 id="_148-documentacion-de-angular-pwa"><a href="#_148-documentacion-de-angular-pwa" class="header-anchor">#</a> 148. Documentación de @angular/pwa</h3> <ul><li>Este es el paquete oficial de Angular para añadir funcionalidades de PWA en una aplicación de forma rápida, recuerden que pueden implementar el service worker como lo vieron en el curso, simplemente creándolo y luego añadiendolo a la aplicación de Angular terminada.</li> <li>Este paquete automatiza varias cosas de las PWAs, pero todavía no cubre todo lo que vimos en el curso, es decisión suya si lo desean implementar con el @angular/pwa o manualmente.</li> <li>Documentación:
<a href="https://angular.io/guide/service-worker-config" target="_blank" rel="noopener noreferrer">@angular/pwa - documentación oficial<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul> <h3 id="_149-ng-add-angular-pwa"><a href="#_149-ng-add-angular-pwa" class="header-anchor">#</a> 149. ng add @angular/pwa</h3> <h3 id="_150-configuraciones-en-el-archivo-ngsw-config-json"><a href="#_150-configuraciones-en-el-archivo-ngsw-config-json" class="header-anchor">#</a> 150. Configuraciones en el archivo ngsw-config.json</h3> <h3 id="_151-codigo-fuente-de-la-seccion"><a href="#_151-codigo-fuente-de-la-seccion" class="header-anchor">#</a> 151. Código fuente de la sección</h3> <ul><li><strong><a href="https://github.com/petrix12/pwa2022/blob/main/recursos/seccion12/13-paises.zip" target="_blank" rel="noopener noreferrer">Código fuente<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></strong>.</li></ul> <h2 id="seccion-13-cierre-del-curso"><a href="#seccion-13-cierre-del-curso" class="header-anchor">#</a> Sección 13: Cierre del curso</h2> <h3 id="_152-promociones-especiales-para-alumnos"><a href="#_152-promociones-especiales-para-alumnos" class="header-anchor">#</a> 152. Promociones especiales para alumnos</h3> <ul><li><strong>Más cursos</strong>: Si desean más cursos gratuitos, los tengo listados aquí para que los puedan tomar fácilmente:
<ul><li><a href="https://fernando-herrera.com/#/cursos-gratis" target="_blank" rel="noopener noreferrer">Fernando Herrera - Cursos gratuitos<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>.</li></ul></li> <li>Y también aquí pueden encontrar todos mis cursos al menor precio posible siempre, todo el año:
<ul><li><a href="https://fernando-herrera.com/#/home" target="_blank" rel="noopener noreferrer">Fernando Herrera - Cursos de pago al menor precio posible siempre<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>.</li></ul></li> <li><strong>Subir el certificado de Udemy</strong>: Pueden subir su certificado que les genera Udemy a mi página web, y participar en promociones, regalos, otras cosas que se me ocurran, simplemente descarguen el certificado que les genera Udemy y subanlo aquí:
<ul><li><a href="https://fernando-herrera.com/#/logros" target="_blank" rel="noopener noreferrer">Logros de Alumnos - Fernando Herrera<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>.</li></ul></li> <li><strong>Nota</strong>: Si pueden, usen los cupones de mi sitio web, eso me ayuda a mi y ustedes siempre lo tendrán al menor precio possible que puedo dejarlos $9.99.</li></ul> <h3 id="_153-despedida"><a href="#_153-despedida" class="header-anchor">#</a> 153. Despedida</h3> <ul><li>Despedida del curso.</li></ul> <h2 id="utilidades"><a href="#utilidades" class="header-anchor">#</a> Utilidades</h2> <ul><li>Raíz del respositorio GitHub: https://github.com/petrix12/pwa2022/blob/main/</li> <li>Levantar servidor con <strong>http-server</strong>:
<ul><li>$ http-server -o -p 8082</li> <li>Cambiar luego la dercción de <strong>http://127.0.0.1:8082</strong> a <strong>http://localhost:8082</strong>.</li></ul></li></ul></div> <footer class="page-edit"><!----> <!----></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/guide/pwa/pwa2022/pwa2022-P05.html" class="prev">
        PWA - Aplicaciones Web Progresivas: De cero a experto (Parte V)
      </a></span> <!----></p></div> </main></div><div class="global-ui"></div></div>
    <script src="/assets/js/app.271db0af.js" defer></script><script src="/assets/js/2.63c13255.js" defer></script><script src="/assets/js/34.efba546f.js" defer></script>
  </body>
</html>
