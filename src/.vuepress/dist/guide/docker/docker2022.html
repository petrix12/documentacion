<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Curso práctico de Docker y Microservicios (apto para todos) | Docs S++</title>
    <meta name="generator" content="VuePress 1.9.7">
    <link rel="icon" type="image/png" href="https://raw.githubusercontent.com/petrix12/imagenes2022/main/Soluciones%2B%2B/S%2B%2B.ico">
    <meta name="description" content="Documentación General">
    <meta name="theme-color" content="#3eaf7c">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    
    <link rel="preload" href="/assets/css/0.styles.73d0500b.css" as="style"><link rel="preload" href="/assets/js/app.99e194c4.js" as="script"><link rel="preload" href="/assets/js/2.63c13255.js" as="script"><link rel="preload" href="/assets/js/15.ca5eb4d6.js" as="script"><link rel="prefetch" href="/assets/js/10.30d6fda3.js"><link rel="prefetch" href="/assets/js/11.39f71485.js"><link rel="prefetch" href="/assets/js/12.b1d220f7.js"><link rel="prefetch" href="/assets/js/13.32652b16.js"><link rel="prefetch" href="/assets/js/14.bc603a87.js"><link rel="prefetch" href="/assets/js/16.999fee66.js"><link rel="prefetch" href="/assets/js/17.8be46701.js"><link rel="prefetch" href="/assets/js/18.f888f43e.js"><link rel="prefetch" href="/assets/js/19.cfc5651c.js"><link rel="prefetch" href="/assets/js/20.c0b3f6b7.js"><link rel="prefetch" href="/assets/js/21.67b3029d.js"><link rel="prefetch" href="/assets/js/22.216618b4.js"><link rel="prefetch" href="/assets/js/23.be205c22.js"><link rel="prefetch" href="/assets/js/24.5eb8f2a1.js"><link rel="prefetch" href="/assets/js/25.0906d804.js"><link rel="prefetch" href="/assets/js/26.51cd84d9.js"><link rel="prefetch" href="/assets/js/27.263599a1.js"><link rel="prefetch" href="/assets/js/28.a4a70a41.js"><link rel="prefetch" href="/assets/js/29.eb1991da.js"><link rel="prefetch" href="/assets/js/3.8f343ae9.js"><link rel="prefetch" href="/assets/js/30.3127a39f.js"><link rel="prefetch" href="/assets/js/31.1235f033.js"><link rel="prefetch" href="/assets/js/32.1136ffd3.js"><link rel="prefetch" href="/assets/js/33.fe324fa6.js"><link rel="prefetch" href="/assets/js/34.0afad1fb.js"><link rel="prefetch" href="/assets/js/35.4706b85f.js"><link rel="prefetch" href="/assets/js/36.3565fa23.js"><link rel="prefetch" href="/assets/js/37.cea91192.js"><link rel="prefetch" href="/assets/js/38.e19839de.js"><link rel="prefetch" href="/assets/js/39.a6658ea6.js"><link rel="prefetch" href="/assets/js/4.832274fd.js"><link rel="prefetch" href="/assets/js/5.e457cf98.js"><link rel="prefetch" href="/assets/js/6.8d81f0ec.js"><link rel="prefetch" href="/assets/js/7.159f2f50.js"><link rel="prefetch" href="/assets/js/8.4ecdf95d.js"><link rel="prefetch" href="/assets/js/9.6a63ad8e.js">
    <link rel="stylesheet" href="/assets/css/0.styles.73d0500b.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><!----> <span class="site-name">Docs S++</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/guide/" class="nav-link router-link-active">
  Guías
</a></div><div class="nav-item"><a href="/config/" class="nav-link">
  Doc
</a></div><div class="nav-item"><a href="https://github.com/petrix12" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Mi GitHub
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/guide/" class="nav-link router-link-active">
  Guías
</a></div><div class="nav-item"><a href="/config/" class="nav-link">
  Doc
</a></div><div class="nav-item"><a href="https://github.com/petrix12" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Mi GitHub
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div> <!----></nav>  <ul class="sidebar-links"><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Soluciones++</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>AWS</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>C/C++</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading open"><span>Docker</span> <span class="arrow down"></span></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/guide/docker/docker2022.html" aria-current="page" class="active sidebar-link">Curso práctico de Docker y Microservicios (apto para todos)</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/guide/docker/docker2022.html#url-s" class="sidebar-link">URL's</a></li><li class="sidebar-sub-header"><a href="/guide/docker/docker2022.html#creacion-del-repositorio-en-github" class="sidebar-link">Creación del repositorio en GitHub</a></li><li class="sidebar-sub-header"><a href="/guide/docker/docker2022.html#utilidades" class="sidebar-link">Utilidades</a></li><li class="sidebar-sub-header"><a href="/guide/docker/docker2022.html#seccion-1-introduccion-general" class="sidebar-link">Sección 1: Introducción general</a></li><li class="sidebar-sub-header"><a href="/guide/docker/docker2022.html#seccion-2-iniciando-con-docker" class="sidebar-link">Sección 2: Iniciando con Docker</a></li><li class="sidebar-sub-header"><a href="/guide/docker/docker2022.html#seccion-3-comandos-basicos" class="sidebar-link">Sección 3: Comandos básicos</a></li><li class="sidebar-sub-header"><a href="/guide/docker/docker2022.html#seccion-4-bash-docker-images" class="sidebar-link">Sección 4: Bash &amp; Docker Images</a></li><li class="sidebar-sub-header"><a href="/guide/docker/docker2022.html#seccion-5-docker-run-otros" class="sidebar-link">Sección 5: Docker Run &amp; Otros</a></li><li class="sidebar-sub-header"><a href="/guide/docker/docker2022.html#seccion-6-ejemplo-imagen-de-un-proyecto-web-simple" class="sidebar-link">Sección 6: Ejemplo: Imagen de un proyecto web simple</a></li><li class="sidebar-sub-header"><a href="/guide/docker/docker2022.html#seccion-7-compartir-imagenes" class="sidebar-link">Sección 7: Compartir imágenes</a></li><li class="sidebar-sub-header"><a href="/guide/docker/docker2022.html#seccion-8-como-funciona-docker" class="sidebar-link">Sección 8: Como funciona Docker</a></li><li class="sidebar-sub-header"><a href="/guide/docker/docker2022.html#seccion-9-proyecto-node-mongodb" class="sidebar-link">Sección 9: Proyecto Node + MongoDB</a></li><li class="sidebar-sub-header"><a href="/guide/docker/docker2022.html#seccion-10-docker-orchestration" class="sidebar-link">Sección 10: Docker Orchestration</a></li><li class="sidebar-sub-header"><a href="/guide/docker/docker2022.html#seccion-11-proyecto-wordpress" class="sidebar-link">Sección 11: Proyecto Wordpress</a></li><li class="sidebar-sub-header"><a href="/guide/docker/docker2022.html#seccion-12-proyecto-laravel" class="sidebar-link">Sección 12: Proyecto Laravel</a></li><li class="sidebar-sub-header"><a href="/guide/docker/docker2022.html#seccion-13-python-redis-postgresql-node-net" class="sidebar-link">Sección 13: Python Redis PostgreSQL Node .NET</a></li></ul></li></ul></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Herramientas</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Laravel</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Lógica</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>PWA</span> <span class="arrow right"></span></p> <!----></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="curso-practico-de-docker-y-microservicios-apto-para-todos"><a href="#curso-practico-de-docker-y-microservicios-apto-para-todos" class="header-anchor">#</a> Curso práctico de Docker y Microservicios (apto para todos)</h1> <ul><li>Instructor: Juan Ramos</li></ul> <h2 id="url-s"><a href="#url-s" class="header-anchor">#</a> URL's</h2> <div class="custom-block tip"><p class="custom-block-title">Direcciones web</p> <ul><li><a href="https://www.udemy.com/course/curso-practico-de-docker-y-microservicios-desde-cero" target="_blank" rel="noopener noreferrer">Curso práctico de Docker y Microservicios (apto para todos)<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>.</li> <li><a href="https://github.com/petrix12/docker2022.git" target="_blank" rel="noopener noreferrer">Repositorio del curso<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>.</li></ul></div> <h2 id="creacion-del-repositorio-en-github"><a href="#creacion-del-repositorio-en-github" class="header-anchor">#</a> Creación del repositorio en GitHub</h2> <ol><li>Crear proyecto en la página de <a href="https://github.com" target="_blank" rel="noopener noreferrer">GitHub<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> con el nombre: <strong>docker2022</strong>.
<ul><li><strong>Description</strong>: Proyecto para seguir el curso &quot;Curso práctico de Docker y Microservicios (apto para todos)&quot;, creado por Juan Ramos.</li> <li><strong>Public</strong>.</li></ul></li> <li>En la ubicación raíz del proyecto en la terminal de la máquina local:
<ul><li>$ git init</li> <li>$ git add .</li> <li>$ git commit -m &quot;Antes de iniciar&quot;</li> <li>$ git branch -M main</li> <li>$ git remote add origin https://github.com/petrix12/docker2022.git</li> <li>$ git push -u origin main</li></ul></li></ol> <h2 id="utilidades"><a href="#utilidades" class="header-anchor">#</a> Utilidades</h2> <div class="custom-block tip"><p class="custom-block-title">Enlaces de interes</p> <ul><li><strong><a href="https://help.clouding.io/hc/es/articles/360010679999-C%C3%B3mo-Desplegar-Laravel-con-Docker-en-Ubuntu-18-04" target="_blank" rel="noopener noreferrer">Cómo Desplegar Laravel con Docker en Ubuntu 18.04<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></strong>.</li></ul></div> <div class="custom-block tip"><p class="custom-block-title">Comando Docker comunes</p> <p>Para eliminar todos los contenedores:</p> <ul><li>$ docker stop $(docker ps -a -q)</li> <li>$ docker rm $(docker ps -a -q)
Para eliminar todos las imagenes:</li> <li>$ docker rmi $(docker images -q)
Iniciar un contenedor:</li> <li>$ docker run nombre_del_contenedor
Listar contenedores:</li> <li>$ docker ps
Detener un contendor:</li> <li>$ docker stop id_del_contenedor
Eliminar un contenedor:</li> <li>$ docker rm nombre_o_id_del_contenedor
Listar imágenes:</li> <li>$ docker images
Eliminar una imagen:</li> <li>$ docker rmi nombre_de_la_imagen
Descargar una imagen:</li> <li>$ docker pull nombre_de_la_imagen
Ejecutar un comando sobre un contenedor:</li> <li>$ docker exec nombre_o_id_del_contenedor comando_a_ejecutar</li></ul></div> <h2 id="seccion-1-introduccion-general"><a href="#seccion-1-introduccion-general" class="header-anchor">#</a> Sección 1: Introducción general</h2> <h3 id="_1-importancia-que-problemas-resuelve-docker"><a href="#_1-importancia-que-problemas-resuelve-docker" class="header-anchor">#</a> 1. Importancia: Qué problemas resuelve Docker</h3> <h3 id="_2-historia-breve-maquinas-virtuales-y-docker"><a href="#_2-historia-breve-maquinas-virtuales-y-docker" class="header-anchor">#</a> 2. Historia breve: Máquinas virtuales y Docker</h3> <h3 id="_3-vms-y-containers-no-son-enemigos"><a href="#_3-vms-y-containers-no-son-enemigos" class="header-anchor">#</a> 3. VMs y Containers no son enemigos</h3> <h3 id="_4-microservicios-vision-general"><a href="#_4-microservicios-vision-general" class="header-anchor">#</a> 4. Microservicios: Visión general</h3> <h3 id="_5-microservicios-casos-reales"><a href="#_5-microservicios-casos-reales" class="header-anchor">#</a> 5. Microservicios: Casos reales</h3> <h2 id="seccion-2-iniciando-con-docker"><a href="#seccion-2-iniciando-con-docker" class="header-anchor">#</a> Sección 2: Iniciando con Docker</h2> <h3 id="_6-docker-containers-images"><a href="#_6-docker-containers-images" class="header-anchor">#</a> 6. Docker: Containers &amp; Images</h3> <h3 id="_7-¿como-usar-docker-segun-mi-so"><a href="#_7-¿como-usar-docker-segun-mi-so" class="header-anchor">#</a> 7. ¿Cómo usar Docker según mi SO?</h3> <ul><li><strong><a href="https://www.virtualbox.org" target="_blank" rel="noopener noreferrer">Página oficial de VirtualBox<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></strong>.</li> <li><strong><a href="https://ubuntu.com" target="_blank" rel="noopener noreferrer">Página oficial de Ubuntu<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></strong>.</li></ul> <ol><li>Descargar e instalar <strong><a href="https://www.virtualbox.org/wiki/Downloads" target="_blank" rel="noopener noreferrer">VirtualBox<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></strong>.</li> <li>Descargar imagen <strong><a href="https://ubuntu.com/#download" target="_blank" rel="noopener noreferrer">Ubuntu Desktop<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></strong>.</li> <li>Ejecutar <strong>VirtualBox</strong>.</li> <li>Crear máquina virtual haciendo clic en <strong>Nueva</strong>:
<ul><li>Nombre: Ubuntu</li> <li>Memoria base: 2048 MB</li> <li>Disco duro virtual: 10 GB</li></ul></li> <li>Iniciar máquina virtual en <strong>Iniciar</strong>.<div class="custom-block tip"><p class="custom-block-title">Nota</p> <p>Como es la primera vez que se inicia esta máquina virtual, se solicitará un disco de inicio, en este caso se facilitará la imagen de Ubuntu descargada anteriormente.</p></div> <div class="custom-block warning"><p class="custom-block-title">Advertencia</p> <p>Es posible, que dependiendo de la versión del sistema operativo Windows, sea necesario desactivar <strong>Hyper-V</strong>. Para esto, ejecutar en una terminal de windows, como administrador, el siguiente comando:
+ $ bcdedit /set hypervisorlaunchtype off
</p><p></p><p></p></div> <ul><li>Instalar Ubuntu en ingles en la máquina virtual.</li> <li>Seleccionar la instalación mínima.</li> <li>Ingresar datos básicos.</li> <li>Establecer contraseña en <strong>12345678</strong>.</li> <li>Reiniciar Ubuntu luego de la instalación.</li></ul></li></ol> <div class="custom-block tip"><p class="custom-block-title">Nota</p> <p>Luegar por defecto en donde se almacenan las máquinas virtuales en VirtualBox:</p> <ul><li>C:\Users\bazop\VirtualBox VMs</li></ul></div> <h3 id="_8-vm-a-pantalla-completa"><a href="#_8-vm-a-pantalla-completa" class="header-anchor">#</a> 8. VM a pantalla completa</h3> <h3 id="_9-instalacion-en-linux"><a href="#_9-instalacion-en-linux" class="header-anchor">#</a> 9. Instalación en Linux</h3> <ol><li>Instalar Docker en la máquina virtual:
<ul><li>Ir https://docs.docker.com/desktop/install/ubuntu</li> <li>Descargar Docker</li></ul> <div class="language- extra-class"><pre class="language-text"><code>+ $ sudo apt remove docker-desktop
+ $ sudo apt-get update
+ $ sudo apt-get install ./docker-desktop-&lt;version&gt;-&lt;arch&gt;.deb
+ $ sudo usermod -aG docker pedro
</code></pre></div></li></ol> <h3 id="_10-instalacion-para-windows"><a href="#_10-instalacion-para-windows" class="header-anchor">#</a> 10. Instalación para Windows</h3> <ul><li><strong><a href="https://docs.docker.com/desktop" target="_blank" rel="noopener noreferrer">Docker Desktop<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></strong>.</li> <li><strong><a href="https://docs.docker.com/desktop/install/windows-install" target="_blank" rel="noopener noreferrer">Install on Windows<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></strong>.</li></ul> <div class="custom-block tip"><p class="custom-block-title">Nota</p> <p>Otras alternativas para trabajar con Docker en Windows:</p> <ul><li>Docker Toolboc en Windows</li> <li>Docker Desktop for Windows</li></ul></div> <ol><li>Descargar e instalar <a href="https://desktop.docker.com/win/main/amd64/Docker%20Desktop%20Installer.exe" target="_blank" rel="noopener noreferrer">Docker Desktop for Windows<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ol> <h3 id="_11-instalacion-para-mac"><a href="#_11-instalacion-para-mac" class="header-anchor">#</a> 11. Instalación para Mac</h3> <ul><li><strong><a href="https://docs.docker.com/desktop" target="_blank" rel="noopener noreferrer">Docker Desktop<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></strong>.</li> <li><strong><a href="https://docs.docker.com/desktop/install/mac-install" target="_blank" rel="noopener noreferrer">Install on Mac<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></strong>.</li></ul> <div class="custom-block tip"><p class="custom-block-title">Nota</p> <p>Otras alternativas para trabajar con Docker en Windows:</p> <ul><li>Docker Toolboc en Mac</li> <li>Docker Desktop for Mac</li></ul></div> <h2 id="seccion-3-comandos-basicos"><a href="#seccion-3-comandos-basicos" class="header-anchor">#</a> Sección 3: Comandos básicos</h2> <h3 id="_12-lista-de-comandos-basicos"><a href="#_12-lista-de-comandos-basicos" class="header-anchor">#</a> 12. Lista de comandos básicos</h3> <div class="custom-block tip"><p class="custom-block-title">Comandos básicos</p> <ul><li><p>Docker Run (Iniciar un contenedor):           $ docker run nombre_del_contenedor</p></li> <li><p>Docker Ps (Listar contenedores):              $ docker ps</p></li> <li><p>Docker Stop (Detener un contendor):           &amp; docker stop id_del_contenedor</p></li> <li><p>Docker Rm (Eliminar un contenedor):           $ docker rm nombre_o_id_del_contenedor</p></li> <li><p>Docker Images (Listar imágenes):              $ docker images</p></li> <li><p>Docker Rmi (Eliminar una imagen):             $ docker rmi nombre_de_la_imagen</p></li> <li><p>Docker Pull (Descargar una imagen):           $ docker pull nombre_de_la_imagen</p></li> <li><p>Docker Exec (Ejecutar sobre un contenedor):   $ docker exec nombre_o_id_del_contenedor comando_a_ejecutar</p></li></ul></div> <h3 id="_13-docker-run-ps-rm-images-rmi"><a href="#_13-docker-run-ps-rm-images-rmi" class="header-anchor">#</a> 13. Docker Run, Ps, Rm, Images &amp; Rmi</h3> <div class="custom-block tip"><p class="custom-block-title">Algunos comandos Docker</p> <ol><li>Obtener lista de contenedores en ejecución:
<ul><li>$ docker ps</li></ul></li> <li>Obtener lista de todos los contenedores:
<ul><li>$ docker ps -a</li></ul></li> <li>Iniciar contenedor:
<ul><li>$ docker pull nombre_de_la_imagen</li></ul></li> <li>Ejecutar contenedor:
<ul><li>$ docker run nombre_del_contenedor</li></ul></li> <li>Eliminar un contenedor por su nombre:
<ul><li>$ docker rm nombre_del_contenedor</li></ul></li> <li>Eliminar un contenedor por su id:
<ul><li>$ docker rm id_del_contenedor</li></ul></li></ol></div> <ol><li>Iniciar un contenedor centos:
<ul><li>$ docker pull centos</li></ul> <div class="custom-block tip"><p class="custom-block-title">Nota</p> <p>Este comando buscará la imagen de centos localmente, y si no la encuentra, entonces, la descargará de internet.</p></div></li> <li>Ejecutar el contenedor <strong>centos</strong> y que se active durante 30 segundos:
<ul><li>$ docker run centos sleep 30</li></ul></li> <li>Ejecutar el contenedor <strong>centos</strong> y que se active durante 30 segundos sin afectar la terminal:
<ul><li>$ docker run -d centos sleep 30</li></ul> <div class="custom-block tip"><p class="custom-block-title">Nota</p> <p>Con la instrucción <strong>-d</strong> el contenedor se ejecutará en segundo plano.</p></div></li> <li>Para ver el contendor <strong>centos</strong>:
<ul><li>$ docker ps -a</li></ul></li> <li>Remover contenedor a partir de su ID <strong>1e9eba1485a4</strong>:
<ul><li>$ docker rm 1e9eba1485a4</li></ul></li> <li>Remover contenedor a partir de su name <strong>bold_chandrasekhar</strong>:
<ul><li>$ docker rm bold_chandrasekhar</li></ul></li> <li>Remover la imagen <strong>centos</strong>:
<ul><li>$ docker rmi centos</li></ul> <div class="custom-block warning"><p class="custom-block-title">Advertencia</p> <p>Antes de eliminar la imagen, es necesario eliminar todos los contenedores que la estan usando.</p></div></li></ol> <div class="custom-block tip"><p class="custom-block-title">Nota</p> <p>Para eliminar un contenedor basta con escribir los primeros caracteres de su <strong>id</strong> o <strong>name</strong>, siempre y cuando no coincida con otro.</p></div> <h3 id="_14-docker-pull-stop-exec"><a href="#_14-docker-pull-stop-exec" class="header-anchor">#</a> 14. Docker Pull, Stop &amp; Exec</h3> <ol><li>Descargar contenedor <strong>centos</strong>:
<ul><li>$ docker pull centos</li></ul></li> <li>Ejecutar contenedor con la imagen de <strong>centos</strong> por 500 segundos en segundo plano:
<ul><li>$ docker run -d centos sleep 500</li></ul></li> <li>Para el contenedor que acabamos de iniciar:
<ul><li>$ docker stop 9bfd3</li></ul> <div class="custom-block tip"><p class="custom-block-title">Nota</p> <p>Bastará solo con escribir los primeros caracteres del id del contenedor, siempre y cuando no coincida con el de otro.</p></div></li> <li>Obtener la versión de <strong>centos</strong>:
<ul><li>$ docker exec gracious_chatterjee cat /etc/os-release</li></ul> <div class="custom-block tip"><p class="custom-block-title">Nota</p> <p>Para ejecutar este comando, el contenedor deberá estar en ejecución.</p></div></li></ol> <h3 id="cuestionario-1-prueba-1-fundamentos-de-docker"><a href="#cuestionario-1-prueba-1-fundamentos-de-docker" class="header-anchor">#</a> Cuestionario 1: Prueba 1: Fundamentos de Docker</h3> <ul><li><strong>Pregunta 1:</strong> Hay muchos motivos por los que Docker es bastante popular hoy en día. Selecciona un motivo correcto entre las alternativas siguientes:
<ul><li>Los contenedores de Docker comparten el mismo Kernel. Eso los hace más rápido de iniciar, más ligeros y más portables.</li></ul></li> <li><strong>Pregunta 2:</strong> ¿Las máquinas virtuales se pueden usar en conjunto con los contenedores de Docker?
<ul><li>Si. Es posible tener máquinas virtuales, y contenedores dentro de ellas.</li></ul></li> <li><strong>Pregunta 3:</strong> Es correcto respecto a los microservicios:
<ul><li>Es un enfoque o estilo arquitectural, que consiste en contar con múltiples proyectos de desarrollo, asociando una funcionalidad específica a cada uno.</li></ul></li> <li><strong>Pregunta 4:</strong> Son motivos por los que las grandes empresas tecnológicas suelen adoptar un enfoque basado en microservicios. A excepción de uno:
<ul><li>Se requiere de una menor cantidad de desarrolladores de software para operar los microservicios.</li></ul></li> <li><strong>Pregunta 5:</strong> ¿Cuál es la diferencia entre contenedores e imágenes?
<ul><li>Una imagen es de solo lectura. Un contenedor resulta de la ejecución de una imagen.</li></ul></li> <li><strong>Pregunta 6:</strong> Acerca de la instalación de Docker, es correcto decir que:
<ul><li>Para usar contenedores Linux necesitamos un host Linux. Hay alternativas para Windows y Mac, a fin de ejeuctar contenedores Linux.</li></ul></li> <li><strong>Pregunta 7:</strong> Acerca del comando docker run:
<ul><li>Inicia un contenedor a partir de una imagen. De ser necesario hace pull de la imagen.</li></ul></li> <li><strong>Pregunta 8:</strong> Acerca del comando docker ps:
<ul><li>Lista los contenedores que están ejecutandose. Si se le añade -a los lista todos.</li></ul></li> <li><strong>Pregunta 9:</strong> Acerca del comando docker images:
<ul><li>Lista las imágenes dispnibles localmente.</li></ul></li> <li><strong>Pregunta 10:</strong> Acerca del comando <code>docker rmi</code>:
<ul><li>Permite eliminar imágenes. Es conveniente que no existan conenedores asociados, o el Docker daemon advertirá de ello.</li></ul></li> <li><strong>Pregunta 11:</strong> ¿Qué ocurre si se usa docker stop sobre un contenedor y luego docker exec sobre el mismo?
<ul><li>El contenedor se detine, pero docker exec no funciona, ya que el contenedor ya no está ejecutándose.</li></ul></li> <li><strong>Pregunta 12:</strong> Acerca de Hyper-V y VirtualBox, es correcto decir que:
<ul><li>Hyper-V solo funciona con la familia de sistemas operativos Windows, mientras que VirtualBox es multiplataforma.</li></ul></li></ul> <h2 id="seccion-4-bash-docker-images"><a href="#seccion-4-bash-docker-images" class="header-anchor">#</a> Sección 4: Bash &amp; Docker Images</h2> <h3 id="_15-shell-scripting"><a href="#_15-shell-scripting" class="header-anchor">#</a> 15. Shell Scripting</h3> <ol><li>Crear carpeta para script de bash <strong>Scripts</strong>.</li> <li>Crear script <strong>infinite-counter.sh</strong><div class="custom-block tip"><p class="custom-block-title">Nota</p> <p>Una forma de crear el archivo en Linux es:</p> <ul><li>$ nano infinite-counter.sh</li> <li>Ctrl + X para guardar.
<p></p></li></ul></div> <div class="language-sh extra-class"><pre class="language-sh"><code><span class="token shebang important">#!/bin/bash</span>
<span class="token builtin class-name">echo</span> <span class="token string">&quot;Soluciones++&quot;</span>
<span class="token function">ls</span> <span class="token parameter variable">-l</span>
<span class="token builtin class-name">echo</span> <span class="token string">&quot;Los anteriores son los archivos en esta carpeta, y sus permisos asociados&quot;</span>
<span class="token builtin class-name">echo</span> <span class="token string">&quot;Contador:&quot;</span>
<span class="token assign-left variable">i</span><span class="token operator">=</span><span class="token number">0</span>
<span class="token keyword">while</span> <span class="token builtin class-name">:</span>
<span class="token keyword">do</span>
    <span class="token builtin class-name">echo</span> <span class="token string">&quot;i: <span class="token variable">$i</span>&quot;</span>
    <span class="token variable"><span class="token punctuation">((</span>i<span class="token operator">++</span><span class="token punctuation">))</span></span>
    <span class="token function">sleep</span> <span class="token number">1</span>
<span class="token keyword">done</span>    
</code></pre></div></li> <li>Ejecutar script:
<ul><li>$ ./infinite-counter.sh</li></ul> <div class="custom-block warning"><p class="custom-block-title">Advertencia</p> <p>En caso de requerir un permiso de ejecuación:</p> <ul><li>$ chmod 755 infinite-counter.sh
Para ver los permisos de los archivos contenidos en una carpeta:</li> <li>$ ls -l
<p></p></li></ul></div></li></ol> <h3 id="_16-bash-script-con-solicitud-de-entrada"><a href="#_16-bash-script-con-solicitud-de-entrada" class="header-anchor">#</a> 16. Bash Script con solicitud de entrada</h3> <ol><li>Crear script ****:<div class="language-sh extra-class"><pre class="language-sh"><code><span class="token shebang important">#!/bin/bash</span>
<span class="token builtin class-name">read</span> <span class="token parameter variable">-p</span> <span class="token string">&quot;Type your name?: &quot;</span> name
<span class="token builtin class-name">echo</span> <span class="token string">&quot;Hello <span class="token variable">$name</span>&quot;</span>    
</code></pre></div></li> <li>Ejecutar script:
<ul><li>$ ./simple-greeting.sh</li></ul></li></ol> <h3 id="_17-¿por-que-y-como-construir-imagenes"><a href="#_17-¿por-que-y-como-construir-imagenes" class="header-anchor">#</a> 17. ¿Por qué y cómo construir imágenes?</h3> <ul><li>Un <strong>Dockerfile</strong> es un archivo o documento de texto simple que incluye una serie de instrucciones que se necesitan ejecutar de manera consecutiva para cumplir con los procesos necesarios para la creación de una nueva imagen de Docker.</li></ul> <h3 id="_18-construye-tu-1ra-imagen"><a href="#_18-construye-tu-1ra-imagen" class="header-anchor">#</a> 18. Construye tu 1ra imagen</h3> <div class="custom-block tip"><p class="custom-block-title">Algunos comando Linux</p> <p>Ver directorio en donde nos encontramos ubicados:</p> <ul><li>$ pwd
Renombrar una carpeta:</li> <li>$ mv NombreActual NuevoNombre
Crear una carpeta:</li> <li>$ mkdir NombreNuevoDirectorio
Mover un directorio:</li> <li>mv CarpetaAMover CarpetaContenedora
Ir un directorio atrás:</li> <li>$ cd ..</li></ul></div> <ol><li>Renombra <strong>Scripts</strong> a <strong>InfiniteCounter</strong>.</li> <li>Crear carpeta <strong>SimpleGreeting</strong>.</li> <li>Crear carpeta <strong>Script</strong>.</li> <li>Mover carpetas <strong>InfiniteCounter</strong> y <strong>SimpleGreeting</strong> dentro de <strong>Script</strong>.</li> <li>Mover <strong>Script\InfiniteCounter\simple-greeting.sh</strong> a <strong>Script\SimpleGreeting\simple-greeting.sh</strong>.</li> <li>Crear archivo <strong>Script\InfiniteCounter\Dockerfile</strong>:<div class="language- extra-class"><pre class="language-text"><code>FROM ubuntu:18.04
COPY infinite-counter.sh /
CMD ./infinite-counter.sh    
</code></pre></div></li> <li>Ir al directorio de trabajo <strong>InfiniteCounter</strong>:
<ul><li>$ cd Script\InfiniteCounter</li></ul></li> <li>Construir imagen:
<ul><li>$ docker build .</li></ul></li> <li>Ver la imagen recien creada:
<ul><li>$ docker images</li></ul></li> <li>Construir otra imagen, pero con un tag:
<ul><li>$ docker build . -t 11639889/infinite-counter</li></ul></li> <li>Ejecutar un contenedor con la imagen creada anteriormente:
<ul><li>$ docker run 84d</li></ul></li></ol> <h3 id="_19-¿que-ocurre-si-olvide-algo-en-el-dockerfile"><a href="#_19-¿que-ocurre-si-olvide-algo-en-el-dockerfile" class="header-anchor">#</a> 19. ¿Qué ocurre si olvidé algo en el Dockerfile?</h3> <ol><li>Ir al directorio de trabajo <strong>SimpleGreeting</strong>:
<ul><li>$ cd Script\SimpleGreeting</li></ul></li> <li>Crear archivo <strong>Script\SimpleGreeting\Dockerfile</strong>:<div class="language- extra-class"><pre class="language-text"><code>FROM ubuntu:18.04
COPY simple-greeting.sh /
CMD ./simple-greeting.sh
</code></pre></div></li> <li>Construir imagen:
<ul><li>$ docker build . -t 11639889/simple-greeting:1.0</li></ul></li> <li>Crear contenedor a partir de la imagen anteror:
<ul><li>$ docker run petrix12/simple-greeting:1.0</li></ul></li></ol> <h3 id="_20-publica-tu-1ra-imagen"><a href="#_20-publica-tu-1ra-imagen" class="header-anchor">#</a> 20. Publica tu 1ra imagen</h3> <ol><li>Iniciar sesión en <strong><a href="https://hub.docker.com" target="_blank" rel="noopener noreferrer">Docker Hub<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></strong>.</li> <li>Subir imagenes a <strong>Docker Hub</strong>:
<ul><li>$ docker push 11639889/infinite-counter</li> <li>$ docker push 11639889/simple-greeting:1.0</li></ul> <div class="custom-block warning"><p class="custom-block-title">Advertencia</p> <p>Si la terminal en donde se ejecutó el comando anterior no está logeado a tu cuenta de Docker Hub:</p> <ul><li>$ docker login
<p></p></li></ul></div></li> <li>Para personalizar un repositorio, en la página de Docker Hub:
<ul><li>Ir al perfil.</li> <li>Seleccionar repositorio.</li> <li>Click en <strong>Manage Repository</strong>,</li></ul></li></ol> <h2 id="seccion-5-docker-run-otros"><a href="#seccion-5-docker-run-otros" class="header-anchor">#</a> Sección 5: Docker Run &amp; Otros</h2> <h3 id="_21-detached-mode-d"><a href="#_21-detached-mode-d" class="header-anchor">#</a> 21. Detached mode (-d)</h3> <ol><li>Ejecutar contenedor de forma simple:
<ul><li>$ docker run 11639889/infinite-counter</li></ul></li> <li>En otra terminal ver el contenedor que se esta ejecutando:
<ul><li>$ docker ps</li></ul></li> <li>Para contenedor:
<ul><li>$ docker stop 817</li></ul> <div class="custom-block tip"><p class="custom-block-title">Nota</p> <p>Por defecto el contenedor se parará luego de 10 segundos, para modificar este tiempo a 2 segundos:</p> <ul><li>$ docker stop 817 -t 2
<p></p></li></ul></div></li> <li>Ejecutar contenedor en <strong>Detached Mode</strong>:
<ul><li>$ docker run -d 11639889/infinite-counter</li></ul></li> <li>Conectar con el contenedor iniciado con <strong>Detached Mode</strong>:
<ul><li>$ docker attach d4e</li></ul></li></ol> <h3 id="_22-interactive-tty-it"><a href="#_22-interactive-tty-it" class="header-anchor">#</a> 22. Interactive &amp; TTY (-it)</h3> <ol><li>Ejecutar contenedor, asociando la terminal de nuestro host con la del contenedor:
<ul><li>$ docker run -t 11639889/infinite-counter</li></ul></li> <li>Ejecutar contendor en modo simple:
<ul><li>$ docker run 11639889/simple-greeting:1.0</li></ul></li> <li>Ejecutar contenedor, asociando la terminal de nuestro host con la del contenedor:
<ul><li>$ docker run -t 11639889/simple-greeting:1.0</li></ul></li> <li>Ejecutar contenedor, asociando la terminal de nuestro host con la del contenedor, y manteniendo abierto el flujo de entrada de datos:
<ul><li>$ docker run -it 11639889/simple-greeting:1.0</li></ul> <div class="custom-block tip"><p class="custom-block-title">Nota</p> <p>La expresión anterior también se podría escribir:</p> <ul><li>$ docker run -i -t 11639889/simple-greeting:1.0
<p></p></li></ul></div></li></ol> <h3 id="_23-publish-ports-p"><a href="#_23-publish-ports-p" class="header-anchor">#</a> 23. Publish ports (-p)</h3> <ol><li>Ejecuatar un contenedor con nginx:
<ul><li>$ docker run --name myWebServer1 -d -p 8080:80 nginx</li></ul> <div class="custom-block tip"><p class="custom-block-title">Nota</p> <p>Para verificar que nginx se está ejecutando ir a la siguiente url:</p> <ul><li>http://localhost:8080
<p></p></li></ul></div></li> <li>Ejecuatar un contenedor con apache:
<ul><li>$ docker run --name myWebServer2 -d -p 8081:80 httpd</li></ul> <div class="custom-block tip"><p class="custom-block-title">Nota</p> <p>Para verificar que apache se está ejecutando ir a la siguiente url:</p> <ul><li>http://localhost:8081
<p></p></li></ul></div></li></ol> <h3 id="_24-docker-exec"><a href="#_24-docker-exec" class="header-anchor">#</a> 24. Docker Exec</h3> <ol><li>Para ingresar dentro del contenedor <strong>myWebServer1</strong>:
<ul><li>$ docker exec -it myWebServer1 bash</li></ul></li> <li>Dentro del contenedor:
<ol><li>ir a la carpeta <strong>/usr/share/nginx/html</strong>:
<ul><li>/# cd /usr/share/nginx/html</li></ul></li> <li>Eliminar index.html
<ul><li>/# rm index.html</li></ul></li> <li>Ejecutar:
<ul><li>/# echo &quot;nginx editado&quot; &gt; index.html</li></ul></li> <li>Salir del contenedor:
<ul><li>/# exit</li></ul></li></ol></li> <li>Para ingresar dentro del contenedor <strong>myWebServer2</strong>:
<ul><li>$ docker exec -it myWebServer2 bash</li></ul></li> <li>Dentro del contenedor:
<ol><li>Ir a <strong>htdocs</strong>:
<ul><li>/# cd htdocs</li></ul></li> <li>Eliminar index.html
<ul><li>/# rm index.html</li></ul></li> <li>Ejecutar:
<ul><li>/# echo &quot;apache editado&quot; &gt; index.html</li></ul></li> <li>Salir del contenedor:
<ul><li>/# exit</li></ul></li></ol></li> <li>Detener los contenedores <strong>myWebServer1</strong> y <strong>myWebServer2</strong>:
<ul><li>$ docker stop 377 8be</li></ul></li></ol> <h3 id="_25-clean-up-rm"><a href="#_25-clean-up-rm" class="header-anchor">#</a> 25. Clean up (--rm)</h3> <ol><li>Eliminar los contenedores <strong>myWebServer1</strong> y <strong>myWebServer2</strong>:
<ul><li>$ docker rm 377 8be</li></ul></li> <li>Ejecutar contenedores que se eliminen cuando se detengan:
<ul><li>$ docker run --name myNginx1 --rm -d -p 8080:80 nginx</li> <li>$ docker run --name myNginx2 --rm -d -p 8081:80 nginx</li> <li>$ docker run --name myNginx3 --rm -d -p 8082:80 nginx</li></ul></li> <li>Detener los contenedores <strong>myNginx1</strong>, <strong>myNginx2</strong> y <strong>myNginx3</strong>:
<ul><li>$ docker stop 98a 937 8f8</li></ul></li></ol> <h3 id="_26-diferencia-entre-attach-exec"><a href="#_26-diferencia-entre-attach-exec" class="header-anchor">#</a> 26. Diferencia entre Attach &amp; Exec</h3> <ul><li>En el módulo anterior hemos visto que podemos usar <strong>docker attach</strong> para conectarnos a un contenedor que fue iniciado en detached mode.</li> <li>Y en este módulo, en una lección previa, usamos <strong>docker exec</strong> sobre un contenedor de Nginx para ejecutar el comando <strong>bash</strong> y así tener acceso al filesystem del contenedor a través de la terminal.</li> <li>¿Por qué usamos <strong>docker exec</strong> en vez de <strong>docker attach</strong>, y cuál es la diferencia entre ambos comandos?</li> <li>La diferencia es que <strong>docker exec</strong> permite ejecutar un comando sobre un contenedor que está en ejecución. Éste comando nos <strong>permite iniciar una nueva terminal</strong>. Sin embargo, <strong>no está limitado a ello</strong>, ya que se puede iniciar cualquier proceso nuevo.</li> <li>En cambio <strong>docker attach</strong> nos conecta a un contenedor, con relación a una misma instancia de la terminal, que se inició al ejecutar el contenedor.</li> <li>En el caso de un contenedor de Nginx, el proceso principal muestra en la terminal información acerca de los requests HTTP que recibe el servidor web. Si usamos <strong>docker attach</strong>, estaremos viendo por consola esa información, y no será posible navegar entre los archivos del contenedor. Por eso fue conveniente usar <strong>docker exec</strong>, para iniciar una nueva instancia de la terminal.</li></ul> <h3 id="_27-volume-binding-v-inspect"><a href="#_27-volume-binding-v-inspect" class="header-anchor">#</a> 27. Volume binding (-v) &amp; Inspect</h3> <ol><li>Crear archivo <strong>Script\Web\index.html</strong>:<div class="language-html extra-class"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span><span class="token punctuation">&gt;</span></span>Soluciones++ con Docker<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>a</span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>about.html<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>Acerca de<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>a</span><span class="token punctuation">&gt;</span></span>    
</code></pre></div></li> <li>Crear archivo <strong>Script\Web\about.html</strong>:<div class="language-html extra-class"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span><span class="token punctuation">&gt;</span></span>Página acerca de ...<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>a</span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>index.html<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>Inicio<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>a</span><span class="token punctuation">&gt;</span></span>    
</code></pre></div></li> <li>Ejecutar contenedor:
<ul><li>$ docker run --name my-nginx-server -d -p 8080:80 -v ~/Script/Web:/usr/share/nginx/html nginx
Para verificar que nginx se está ejecutando ir a la siguiente url:</li> <li>http://localhost:8080
<p></p>
:::</li></ul></li> <li>Detener y remover el contenedor:
<ul><li>$ docker stop my-nginx-server</li> <li>$ docker rm my-nginx-server</li></ul></li></ol> <h3 id="_28-remove-all-containers"><a href="#_28-remove-all-containers" class="header-anchor">#</a> 28. Remove all containers</h3> <ol><li>Obtener los identificadores de todos los contenedores:
<ul><li>$ docker ps -a -q
O también:</li> <li>$ echo $(docker ps -a -q)</li></ul></li> <li>Imprimir la ruta absoluta en donde nos encontramos ubicados:
<ul><li>$ echo $(pwd)</li></ul></li> <li>Eliminar todos los contenedores:
<ul><li>$ docker rm $(docker ps -a -q)</li></ul></li> <li>Una forma de ver la ruta de la carpeta <strong>Web</strong> dentro de la carpeta <strong>Script</strong>:
<ul><li>$ echo $(pwd)/Web</li></ul></li> <li>Otra forma de ejecutar contenedor dentro de la carpeta <strong>Script</strong>:
<ul><li>$ docker run --name my-nginx-server -d -p 8080:80 -v $(pwd)/Web:/usr/share/nginx/html nginx</li></ul> <div class="custom-block warning"><p class="custom-block-title">Advertencia</p> <p>Para obtener la ubicación actual en Windows, se escribe <strong>%cd%</strong>, por lo tanto la ruta anterior se escribe:</p> <ul><li>$ docker run --name my-nginx-server -d -p 8080:80 -v $(%cd%)/Web:/usr/share/nginx/html nginx
Para obtener la ubicación actual en una terminal de PowerShell, se escribe <strong>PWD</strong>, por lo tanto la ruta anterior se escribe:</li> <li>$ docker run --name my-nginx-server -d -p 8080:80 -v $(PWD)/Web:/usr/share/nginx/html nginx
<p></p></li></ul></div></li></ol> <h3 id="_29-environment-variables"><a href="#_29-environment-variables" class="header-anchor">#</a> 29. Environment variables</h3> <ol><li>Ejecutar contenedor con la imagen ubuntu interactiva, que se elimine cuando se pare, y con una variable de entorno:
<ul><li>$ docker run -it --rm -e VAR1=AAA ubuntu</li></ul></li> <li>Imprimir variable de entorno en el contenedor ubuntu:
<ul><li>/# echo $VAR1</li></ul></li> <li>Listar las variables de entorno que existen:
<ul><li>/# printenv</li></ul></li> <li>Salir del contenedor:
<ul><li>/# exit</li></ul></li> <li>Ejecutar:
<ul><li>$ docker run -it --rm -e VAR1=AAA -e VAR2=BBB ubuntu</li></ul></li> <li>Filtrar todas las variable de entorno que comienzan con <strong>VAR</strong>:
<ul><li>/# printenv | grep VAR</li></ul></li> <li>Salir del contenedor:
<ul><li>/# exit</li></ul></li> <li>Crear archivo de variables de entorno <strong>Script\Env\env.list</strong>:<div class="language-list extra-class"><pre class="language-text"><code>VAR1=AAA
VAR2=BBB
USER    
</code></pre></div></li> <li>Ejecutar contenedor que tome las variables de entorno de un archivo:
<ul><li>$ cd Script\Env</li> <li>$ docker run -it --rm --env-file env.list ubuntu</li></ul></li> <li>Salir del contenedor:
<ul><li>/# exit</li></ul></li> <li>Ejecutar contenedor con imagen MySQL:
<ul><li>$ docker run --rm -e MYSQL_ROOT_PASSWORD=12345678 mysql</li></ul> <div class="custom-block tip"><p class="custom-block-title">Nota</p> <p>Con esta acción queda un servidor MySQL levantado con el puerto 3306</p></div></li> <li>Conectarnos al servidor MySQL de manera interactiva:
<ul><li>$ docker exec -it 276 bash</li> <li>$ mysql -u root -p</li></ul></li> <li>Probar BD MySQL ejecutando los siguientes comandos:
<ul><li>CREATE DATABASE miDB;</li> <li>USE miDB;</li> <li>exit</li></ul></li></ol> <h3 id="cuestionario-2-prueba-2-comandos-de-docker"><a href="#cuestionario-2-prueba-2-comandos-de-docker" class="header-anchor">#</a> Cuestionario 2: Prueba 2: Comandos de Docker</h3> <ul><li><strong>Pregunta 1:</strong> Acerca de construir una imagen y asignarle un tag:
<ul><li>Un tag es opcional pero recomendable.</li></ul></li> <li><strong>Pregunta 2:</strong> Acerca del tag latest:
<ul><li>Es un tag como cualquier otro. Cuando se usa <strong>docker run</strong> y no se especifica un tag, se busca el tag <strong>latest</strong> correspondiente a la imagen.</li></ul></li> <li><strong>Pregunta 3:</strong> Acerca de publicar imágenes:
<ul><li>El comando <strong>docker push</strong> permite subir imágenes a un registry, siempre que tengamos los permisos adecuados.</li></ul></li> <li><strong>Pregunta 4:</strong> ¿Qué es el detached mode?
<ul><li>Consiste en iniciar un contenedor en background, ya que por defecto se inicia en foreground. Entonces en la terminal solo se imprime su ID.</li></ul></li> <li><strong>Pregunta 5:</strong> Acerca de usar <strong>-it</strong> junto al comando <strong>docker run</strong>:
<ul><li>Permite iniciar un contenedor de forma interactiva, conectando el STDIN y la terminal del host con la del contenedor.</li></ul></li> <li><strong>Pregunta 6:</strong> Acerca de la opción <strong>-p</strong> usada sobre <strong>docker run</strong>:
<ul><li>Es equivalente a <strong>--publish</strong> y permite exponer un puerto del contenedor sobre un puerto del host.</li></ul></li> <li><strong>Pregunta 7:</strong> Acerca del comando <strong>docker exec</strong>:
<ul><li>Permite ejeuctar un comando sobre un contenedor que esá en ejecución.</li></ul></li> <li><strong>Pregunta 8:</strong> Acerca de la opción <strong>--rm</strong> usada sobre <strong>docker run</strong>:
<ul><li>Es útil ya que permite iniciar contenedores, y estos serán eliminados automáticacmente cuando se detengan.</li></ul></li> <li><strong>Pregunta 9:</strong> Acerca de los <strong>volúmenes</strong> y el flag <strong>-v</strong> usado sobre <strong>docker run</strong>:
<ul><li>Un volumen es muy útil ya que permite persistir cambios realizados por un contenedor, al crear una asociación con el filesystem del host.</li></ul></li> <li><strong>Pregunta 10:</strong> Acerca de eliminar contenedores, ¿cuál de las siguientes alternativas <strong>es incorrecta</strong>?
<ul><li>El comando <strong>docker rm</strong> elimina también contenedores en ejecución por lo que hay que tener cuidado.</li></ul></li> <li><strong>Pregunta 11:</strong> Acerca de las <strong>variables de entorno</strong>, es correcta la siguiente afirmación:
<ul><li>Cuando iniciamos un contenedor, podemos definir <strong>environment varables</strong> para personalizar su comportamiento o configurar algún servicio.</li></ul></li></ul> <h2 id="seccion-6-ejemplo-imagen-de-un-proyecto-web-simple"><a href="#seccion-6-ejemplo-imagen-de-un-proyecto-web-simple" class="header-anchor">#</a> Sección 6: Ejemplo: Imagen de un proyecto web simple</h2> <h3 id="_30-dockerfile-repaso-y-sugerencias"><a href="#_30-dockerfile-repaso-y-sugerencias" class="header-anchor">#</a> 30. Dockerfile: Repaso y sugerencias</h3> <ol><li>Renombrar <strong>Script</strong> a <strong>DockerExamples</strong>.</li></ol> <h3 id="_31-seleccion-de-la-imagen-base"><a href="#_31-seleccion-de-la-imagen-base" class="header-anchor">#</a> 31. Selección de la imagen base</h3> <ul><li><strong><a href="https://pusher.com/tutorials/game-python-vue" target="_blank" rel="noopener noreferrer">Create a two-player game with Python and Vue<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></strong>.</li> <li><strong><a href="https://www.fullstackpython.com/flask.html" target="_blank" rel="noopener noreferrer">Full Stack Python - Flask<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></strong>.</li></ul> <ol><li>Ejecutar contenedor:
<ul><li>$ docker run -it python:3.8.0-buster</li></ul></li> <li>En otra terminal nuevo, ejecutar:
<ul><li>$ docker ps</li></ul></li> <li>Ejecutar el contenedor de python de modo interactivo:
<ul><li>$ docker exec -it b79 bash</li> <li>/# python</li> <li>/&gt;&gt;&gt; exit()</li></ul></li></ol> <h3 id="_32-docker-commit-history"><a href="#_32-docker-commit-history" class="header-anchor">#</a> 32. Docker Commit &amp; History</h3> <ul><li><strong><a href="https://realpython.com/flask-by-example-part-1-project-setup" target="_blank" rel="noopener noreferrer">Deploying a Python Flask Example Application Using Heroku<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></strong>.</li></ul> <ol><li>Continuando con el apartado anterior, ejecutar:
<ul><li>/# cd var</li> <li>/# cd opt</li> <li>/# pip install flask</li> <li>/# apt-get update</li> <li>/# apt-get install nano</li> <li>/# nano app.py<div class="language-py extra-class"><pre class="language-py"><code><span class="token keyword">from</span> flask <span class="token keyword">import</span> Flask

app <span class="token operator">=</span> Flask<span class="token punctuation">(</span>__name__<span class="token punctuation">)</span>

<span class="token decorator annotation punctuation">@app<span class="token punctuation">.</span>route</span><span class="token punctuation">(</span><span class="token string">&quot;/&quot;</span><span class="token punctuation">)</span>
<span class="token keyword">def</span> <span class="token function">index</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token keyword">return</span> <span class="token string">&quot;Hello World!&quot;</span>
<span class="token keyword">if</span> __name__ <span class="token operator">==</span> <span class="token string">'__main__'</span><span class="token punctuation">:</span>
    app<span class="token punctuation">.</span>run<span class="token punctuation">(</span>host<span class="token operator">=</span><span class="token string">'0.0.0.0'</span><span class="token punctuation">,</span> port<span class="token operator">=</span><span class="token number">5000</span><span class="token punctuation">)</span>
</code></pre></div><ul><li>Ctrl + X</li> <li>Y</li> <li>ENTER</li></ul></li> <li>/# python app.py</li></ul></li> <li>Abrir una terminal nueva y ejecutar:.
<ul><li>$ docker stop b79</li></ul></li> <li>Crear una imagen a partir de un contenedor detenido:
<ul><li>$ docker commit b79 my-flask-project</li></ul></li> <li>Ejecutar la imagen <strong>my-flask-project</strong>:
<ul><li>$ docker run -it -p 80:5000 my-flask-project bash</li></ul></li> <li>Ejecutar:
<ul><li>/# cd var</li> <li>/# cd opt</li> <li>/# nano app.py</li> <li>/# python app.py</li></ul> <div class="custom-block tip"><p class="custom-block-title">Nota</p> <p>El programa <strong>app.py</strong> debería correr en la url:</p> <ul><li>http://0.0.0.0:5000
<p></p></li></ul></div></li></ol> <h3 id="_33-uso-de-versiones-especificas"><a href="#_33-uso-de-versiones-especificas" class="header-anchor">#</a> 33. Uso de versiones específicas</h3> <div class="custom-block tip"><p class="custom-block-title">Nota</p> <p>Para ver los paquetes asociados a Python:</p> <ul><li>$ pip list</li></ul></div> <ol><li>Partiendo del apartado anterior:
<ul><li>/# pip uninstall flask</li> <li>Proceed (y/n)?: y</li> <li>pip install flask==2.2.2</li></ul></li></ol> <h3 id="_34-una-vista-y-una-variable-backend"><a href="#_34-una-vista-y-una-variable-backend" class="header-anchor">#</a> 34. Una vista y una variable backend</h3> <ol><li>Partiendo del apartado anterior:
<ul><li>/# nano app.py<div class="language-py extra-class"><div class="highlight-lines"><br><div class="highlighted"> </div><br><br><br><div class="highlighted"> </div><div class="highlighted"> </div><br><br><br><br></div><pre class="language-py"><code><span class="token keyword">from</span> flask <span class="token keyword">import</span> Flask
<span class="token keyword">from</span> flask <span class="token keyword">import</span> render_template
app <span class="token operator">=</span> Flask<span class="token punctuation">(</span>__name__<span class="token punctuation">)</span>

<span class="token decorator annotation punctuation">@app<span class="token punctuation">.</span>route</span><span class="token punctuation">(</span><span class="token string">&quot;/&quot;</span><span class="token punctuation">)</span>
<span class="token keyword">def</span> <span class="token function">hello</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token keyword">return</span> render_template<span class="token punctuation">(</span><span class="token string">'index.html'</span><span class="token punctuation">,</span> name<span class="token operator">=</span><span class="token string">'Flask Project Example'</span><span class="token punctuation">)</span>

<span class="token keyword">if</span> __name__ <span class="token operator">==</span> <span class="token string">'__main__'</span><span class="token punctuation">:</span>
    app<span class="token punctuation">.</span>run<span class="token punctuation">(</span>host<span class="token operator">=</span><span class="token string">'0.0.0.0'</span><span class="token punctuation">,</span> port<span class="token operator">=</span><span class="token number">5000</span><span class="token punctuation">)</span>
</code></pre></div><ul><li>Ctrl + X</li> <li>Y</li> <li>ENTER</li></ul></li> <li>/# nano index.html<div class="language-html extra-class"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>html</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>body</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h1</span><span class="token punctuation">&gt;</span></span>{{ name }}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h1</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>body</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>html</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><ul><li>Ctrl + X</li> <li>Y</li> <li>ENTER</li></ul></li> <li>/# mkdir templates</li> <li>/# mv index.html templates/index.html</li> <li>/# python app.py<div class="custom-block tip"><p class="custom-block-title">Nota</p> <p>El proyecto estará ejecutandose en:</p> <ul><li>http://localhost
<p></p></li></ul></div></li></ul></li></ol> <h3 id="_35-dos-variables-de-entorno"><a href="#_35-dos-variables-de-entorno" class="header-anchor">#</a> 35. Dos variables de entorno</h3> <ol><li>En otra terminal, ejecutar:
<ul><li>$ docker exec -it ef8 bash</li> <li>/# cd var/opt/templates</li> <li>/# nano index.html<div class="language-html extra-class"><div class="highlight-lines"><div class="highlighted"> </div><br><div class="highlighted"> </div><div class="highlighted"> </div><div class="highlighted"> </div><div class="highlighted"> </div><div class="highlighted"> </div><div class="highlighted"> </div><div class="highlighted"> </div><div class="highlighted"> </div><br><br><br><br><br><br></div><pre class="language-html"><code><span class="token doctype"><span class="token punctuation">&lt;!</span><span class="token doctype-tag">DOCTYPE</span> <span class="token name">html</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>html</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>head</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>title</span><span class="token punctuation">&gt;</span></span>{{ name }}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>title</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>style</span><span class="token punctuation">&gt;</span></span><span class="token style"><span class="token language-css">
        <span class="token selector">body</span> <span class="token punctuation">{</span>
            <span class="token selector">background:</span> <span class="token punctuation">{</span><span class="token punctuation">{</span> bg_color <span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token selector">;
            color:</span> <span class="token punctuation">{</span><span class="token punctuation">{</span> text_color <span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    </span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>style</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>head</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>body</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h1</span><span class="token punctuation">&gt;</span></span>{{ name }}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h1</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>body</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>html</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><ul><li>Ctrl + X</li> <li>Y</li> <li>ENTER</li></ul></li> <li>/# cd ..</li> <li>/# nano app.py<div class="language-py extra-class"><div class="highlight-lines"><div class="highlighted"> </div><br><br><br><br><br><br><div class="highlighted"> </div><div class="highlighted"> </div><div class="highlighted"> </div><br><br><br><br></div><pre class="language-py"><code><span class="token keyword">import</span> os
<span class="token keyword">from</span> flask <span class="token keyword">import</span> Flask
<span class="token keyword">from</span> flask <span class="token keyword">import</span> render_template
app <span class="token operator">=</span> Flask<span class="token punctuation">(</span>__name__<span class="token punctuation">)</span>

<span class="token decorator annotation punctuation">@app<span class="token punctuation">.</span>route</span><span class="token punctuation">(</span><span class="token string">&quot;/&quot;</span><span class="token punctuation">)</span>
<span class="token keyword">def</span> <span class="token function">hello</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
    bg_color <span class="token operator">=</span> os<span class="token punctuation">.</span>getenv<span class="token punctuation">(</span><span class="token string">'BG_COLOR'</span><span class="token punctuation">,</span> <span class="token string">'black'</span><span class="token punctuation">)</span>
    text_color <span class="token operator">=</span> os<span class="token punctuation">.</span>getenv<span class="token punctuation">(</span><span class="token string">'TEXT_COLOR'</span><span class="token punctuation">,</span> <span class="token string">'white'</span><span class="token punctuation">)</span>
    <span class="token keyword">return</span> render_template<span class="token punctuation">(</span><span class="token string">'index.html'</span><span class="token punctuation">,</span> name<span class="token operator">=</span><span class="token string">'Flask Project Example'</span><span class="token punctuation">,</span> bg_color<span class="token operator">=</span>bg_color<span class="token punctuation">,</span> text_color<span class="token operator">=</span>text_color<span class="token punctuation">)</span>

<span class="token keyword">if</span> __name__ <span class="token operator">==</span> <span class="token string">'__main__'</span><span class="token punctuation">:</span>
    app<span class="token punctuation">.</span>run<span class="token punctuation">(</span>host<span class="token operator">=</span><span class="token string">'0.0.0.0'</span><span class="token punctuation">,</span> port<span class="token operator">=</span><span class="token number">5000</span><span class="token punctuation">)</span>
</code></pre></div><ul><li>Ctrl + X</li> <li>Y</li> <li>ENTER</li></ul></li></ul></li></ol> <h3 id="_36-docker-commit-vs-dockerfile"><a href="#_36-docker-commit-vs-dockerfile" class="header-anchor">#</a> 36. Docker Commit vs Dockerfile</h3> <h3 id="_37-docker-cp"><a href="#_37-docker-cp" class="header-anchor">#</a> 37. Docker Cp</h3> <ol><li>Copiar archivos del contenedor al host:
<ul><li>docker cp ef8:/var/opt /c/laragon/www/docker2022/DockerExamples/FlaskProject/code</li></ul> <div class="custom-block tip"><p class="custom-block-title">Nota</p> <p>Para copiar archivos del contenedor al host o viceversa, hay que tener en cuenta, que primero va la fuente y luego el destino.</p></div></li> <li>Mover todo el contenido de <strong>DockerExamples\FlaskProject\code\opt</strong> a <strong>DockerExamples\FlaskProject\code</strong> y eliminar la carpeta <strong>opt</strong>.</li> <li>Eliminar todos los contenedores:
<ul><li>$ docker rm $(docker ps -a -q)</li></ul></li> <li>Eliminar imagen <strong>my-flask-project</strong>:
<ul><li>$ docker rmi my-flask-project</li></ul></li></ol> <h3 id="_38-un-dockerfile-para-el-proyecto"><a href="#_38-un-dockerfile-para-el-proyecto" class="header-anchor">#</a> 38. Un Dockerfile para el proyecto</h3> <ol><li>Crear <strong>DockerExamples\FlaskProject\Dockerfile</strong>:<div class="language- extra-class"><pre class="language-text"><code>FROM python:3.8-buster
RUN pip install flask==2.2.2
COPY code/ /var/opt/

WORKDIR /var/opt
CMD python app.py    
</code></pre></div></li> <li>Construir imagen:
<ul><li>$ docker build -t my-flask-project .</li></ul> <div class="custom-block warning"><p class="custom-block-title">Advertencia</p> <p>Para ejecutar el comando anterior, es necesario estar ubicados en el directorio de trabajo <strong>DockerExamples\FlaskProject</strong>.</p></div></li> <li>Ejecutar la imagen creada en el paso anterior:
<ul><li>$ docker run -d -p 80:5000 my-flask-project</li></ul></li></ol> <h3 id="_39-docker-logs"><a href="#_39-docker-logs" class="header-anchor">#</a> 39. Docker Logs</h3> <ol><li>Ver el log del contenedor:
<ul><li>$ docker logs fffa</li></ul></li></ol> <h3 id="_40-multiples-contenedores-y-conclusiones"><a href="#_40-multiples-contenedores-y-conclusiones" class="header-anchor">#</a> 40. Múltiples contenedores y Conclusiones</h3> <ol><li>Ejecutar contenedor usando variables de entorno
<ul><li>$ docker run -d -p 8080:5000 -e BG_COLOR=yellow -e TEXT_COLOR=red my-flask-project</li></ul></li></ol> <h2 id="seccion-7-compartir-imagenes"><a href="#seccion-7-compartir-imagenes" class="header-anchor">#</a> Sección 7: Compartir imágenes</h2> <h3 id="_41-docker-tag-docker-push"><a href="#_41-docker-tag-docker-push" class="header-anchor">#</a> 41. Docker Tag &amp; Docker Push</h3> <ol><li>Cambiar el nombre de la imagen <strong>my-flask-project</strong> por <strong>11639889/my-flask-project</strong>:
<ul><li>$ docker images       (Para obtener todas las imagenes y ver el ID de <strong>my-flask-project</strong>: 173a46280c9a)</li> <li>$ docker tag 173a46280c9a 11639889/my-flask-project</li></ul></li> <li>Subir nuestra imagen a Docker Hub:
<ul><li>$ docker push 11639889/my-flask-project</li></ul></li> <li>Borrar imagenes <strong>11639889/my-flask-project</strong> y <strong>my-flask-project</strong>:
<ul><li>$ docker rmi 11639889/my-flask-project my-flask-project</li></ul></li> <li>Ahora, para ejecutar un contenedor con la imagen subida a nuestro repositorio de Docker Hub:
<ul><li>$ docker run -d -p 80:5000 -e BG_COLOR=black -e TEXT_COLOR=yellow 11639889/my-flask-project</li></ul></li></ol> <h3 id="_42-git-y-repositorio-del-curso"><a href="#_42-git-y-repositorio-del-curso" class="header-anchor">#</a> 42. Git y Repositorio del curso</h3> <ul><li><strong><a href="https://series.programacionymas.com/aprende-a-usar-git" target="_blank" rel="noopener noreferrer">Curso: Aprende a usar Git<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></strong>.</li> <li><strong><a href="https://github.com/JCarlosR/DockerExamples" target="_blank" rel="noopener noreferrer">Repositorio GitHub DockerExamples<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></strong>.</li></ul> <h3 id="_43-cmd-vs-entrypoint"><a href="#_43-cmd-vs-entrypoint" class="header-anchor">#</a> 43. CMD vs ENTRYPOINT</h3> <ol><li>Crear <strong>DockerExamples\UbuntuSleeper\1-cmd\Dockerfile</strong>:<div class="language- extra-class"><pre class="language-text"><code>FROM ubuntu
CMD sleep 3    
</code></pre></div></li> <li>Crear imagen:
<ul><li>$ docker build -t ubuntu-sleeper .</li></ul></li> <li>Para alterar el comando por defecto, al crear un contenedor basado en la imagen anterior:
<ul><li>$ docker run ubuntu-sleeper sleep 10</li></ul></li> <li>Crear <strong>DockerExamples\UbuntuSleeper\2-entrypoint\Dockerfile</strong>:<div class="language- extra-class"><pre class="language-text"><code>FROM ubuntu
ENTRYPOINT [&quot;sleep&quot;]
</code></pre></div></li> <li>Crear imagen:
<ul><li>$ docker build -t ubuntu-sleeper .</li></ul> <div class="custom-block tip"><p class="custom-block-title">Nota</p> <p>Esta acción sobreescribe la imagen anterior.</p></div></li> <li>Iniciar contenedor pasando el parámetro que indica cuanto tiempo deberá dormir:
<ul><li>$ docker run ubuntu-sleeper 10</li></ul></li> <li>Crear <strong>DockerExamples\UbuntuSleeper\3-entrypoint-cmd\Dockerfile</strong>:<div class="language- extra-class"><pre class="language-text"><code>FROM ubuntu
ENTRYPOINT [&quot;sleep&quot;]
CMD [&quot;3&quot;]    
</code></pre></div></li> <li>Crear imagen:
<ul><li>$ docker build -t ubuntu-sleeper .</li></ul></li> <li>Iniciar contenedor:
<ul><li>$ docker run ubuntu-sleeper</li></ul></li> <li>Iniciar contenedor cambiando el comando de ejecución por defecto:
<ul><li>$ docker run --entrypoint echo ubuntu-sleeper Hola</li></ul></li></ol> <h2 id="seccion-8-como-funciona-docker"><a href="#seccion-8-como-funciona-docker" class="header-anchor">#</a> Sección 8: Como funciona Docker</h2> <h3 id="_44-docker-engine"><a href="#_44-docker-engine" class="header-anchor">#</a> 44. Docker Engine</h3> <ul><li><strong><a href="https://docs.docker.com/get-started/overview" target="_blank" rel="noopener noreferrer">Docker overview<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></strong>.</li></ul> <h3 id="_45-docker-storage"><a href="#_45-docker-storage" class="header-anchor">#</a> 45. Docker Storage</h3> <ul><li><strong><a href="https://docs.docker.com/storage/storagedriver" target="_blank" rel="noopener noreferrer">About storage drivers<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></strong>.</li></ul> <div class="custom-block tip"><p class="custom-block-title">Nota</p> <p>Para crear un volumen de nombre <strong>mi_bd</strong>:</p> <ul><li>$ docker volume create mi_bd
Para crear un servidor MySQL y persistir los datos en el volumen <strong>mi_bd</strong>:</li> <li>$ docker run -v mi_bd:/var/lib/mysql mysql</li> <li>Si Docker no encuentra la carpeta <strong>mi_bd</strong>, entonces la creará.
Si queremos crear un volumen en una ubicación partícular:</li> <li>$ docker run -v /data/mysql/my_data:/var/lib/mysql mysql</li></ul></div> <h3 id="_46-docker-networking"><a href="#_46-docker-networking" class="header-anchor">#</a> 46. Docker Networking</h3> <ul><li><strong><a href="https://docs.docker.com/network" target="_blank" rel="noopener noreferrer">Networking overview<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></strong>.</li></ul> <div class="custom-block tip"><p class="custom-block-title">Nota</p> <p>Para listar las Networkings en nuestro hot:</p> <ul><li>$ docker network ls
Para inspeccionar un contenedor:</li> <li>$ docker inspect c7e</li> <li>De manera similar se puede inspeccionar una Networking, pero en lugar del id de un contenedor, se colocará el id de la networking.
Por defecto los contenedores se ejecutan en la network <strong>bridge</strong>, pero para iniciar un contenedor en otra network, por ejemplo la network <strong>host</strong>:</li> <li>$ docker run -dit --network=host ubuntu bash
Para crear nuestra propia network <strong>my-bridge-network</strong>:</li> <li>$ docker network create --driver bridge --subnet 172.18.0.0/16 my-bridge-network</li></ul></div> <h3 id="_47-docker-registry"><a href="#_47-docker-registry" class="header-anchor">#</a> 47. Docker Registry</h3> <ul><li><strong><a href="https://docs.docker.com/registry/deploying" target="_blank" rel="noopener noreferrer">Deploy a registry server<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></strong>.</li></ul> <h3 id="cuestionario-3-prueba-3-como-funciona-docker"><a href="#cuestionario-3-prueba-3-como-funciona-docker" class="header-anchor">#</a> Cuestionario 3: Prueba 3: Cómo funciona Docker</h3> <ul><li><strong>Pregunta 1</strong>: Acerca del <strong>Docker Engine</strong>, es correcto afirmar que:
<ul><li>Está compuesto por el Docker Daemon, una REST API y un Docker CLI.</li></ul></li> <li><strong>Pregunta 2</strong>: Acerca de los <strong>namespaces</strong> es incorrecto decir que:
<ul><li>Los namespaces permiten gestionar las capas de una imagen, que son sol lectura, en contraste con la capa de escritura que tienen los contenedores.</li></ul></li> <li><strong>Pregunta 3</strong>: Acerca de los <strong>Control groups</strong>, ¿qué alternativa es incorrecta?
<ul><li>Los namespaces y control groups son exactamente lo mismo.</li></ul></li> <li><strong>Pregunta 4</strong>: Acerca de las <strong>capas</strong> de imágenes y contenedores:
<ul><li>Tenemos capas de imagen que son de solo lectura y una capa de escritura por cada contenedor creado.</li></ul></li> <li><strong>Pregunta 5</strong>: Acerca de las capas que constituyen a cada imagen:
<ul><li>Cada instrucción presente en un Dockerfile se corresponde con una capa de la imagen que se está construyendo.</li></ul></li> <li><strong>Pregunta 6</strong>: ¿En qué consiste la <strong>estrategia CoW</strong>?
<ul><li>Permite que una capa acceda a los archivos de otra. De este modo no se necesita copiar archivos entre capas, a menos que se hagan cambios.</li></ul></li> <li><strong>Pregunta 7</strong>: Acerca de los <strong>volúmenes</strong>, es incorrecto decir que:
<ul><li>Los bind mounts permiten asociar carpetas de un contenedor con otras carpetas al interior de la carpeta + <strong>/var/lib/docker/volumes</strong>, mientras que los <strong>volume mounts</strong> se socian con cualquier otra dirección del fliesystem de nuestro host.</li></ul></li> <li><strong>Pregunta 8</strong>: ¿Cuáles de las siguientes son las 3 networks que Docker crea por defecto? Ten en cuenta sus nombres, no los drivers.
<ul><li>bridge, host, none</li></ul></li> <li><strong>Pregunta 9</strong>: ¿Cuál es la diferencia entre las networks que tienen como name <strong>bridge</strong> y <strong>host</strong>?
<ul><li>La network <strong>bridge</strong> permite la comunicación entre los contenedores en su interior, pero si se desea acceder a través del host, es necesario asociar puertos. La network <strong>host</strong> en cambio permite que contenedores y host compartan la misma configuración (los puertos expuestos por contenedores son usados también por el host)</li></ul></li> <li><strong>Pregunta 10</strong>: Acerca de <strong>Docker Networking</strong>, ¿cuál de las siguientes alternativas es incorrecta?
<ul><li>La network llamada <strong>none</strong> representa que los contenedores en su interior no tienen ninguna restricción. Por tanto se pueden comunicar con cualquier network / contenedor.</li></ul></li> <li><strong>Pregunta 11</strong>: ¿Es <strong>Docker Hub</strong> sinónimo de <strong>Docker Registry</strong>?
<ul><li>Docker Hub es un Registry público para el almacenamiento de imágenes Docker. Sin embargo, no es el único.</li></ul></li> <li><strong>Pregunta 12</strong>: ¿Qué es un Hosted Docker Registry?
<ul><li>Es cuando alojamos en un servidor propio un Docker Registry privado, generalmente para uso exclusivo de una compañia u organización.</li></ul></li> <li><strong>Pregunta 13</strong>: ¿Qué representa el prefijo <strong>docker.io</strong> cuando descargamos una imagen?
<ul><li>Es el hostname usado por Docker Hub. Entonces significa que estamos descargando la imagen desde este Registry público.</li></ul></li></ul> <h2 id="seccion-9-proyecto-node-mongodb"><a href="#seccion-9-proyecto-node-mongodb" class="header-anchor">#</a> Sección 9: Proyecto Node + MongoDB</h2> <h3 id="_48-repaso-general"><a href="#_48-repaso-general" class="header-anchor">#</a> 48. Repaso general</h3> <h3 id="_49-construir-imagen-node-app"><a href="#_49-construir-imagen-node-app" class="header-anchor">#</a> 49. Construir imagen Node App</h3> <ul><li><strong><a href="https://github.com/JCarlosR/demo-node-app" target="_blank" rel="noopener noreferrer">Repositorio demo-node-app<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></strong>.</li></ul> <ol><li>Clonar repositorio <strong>demo-node-app</strong>:
<ul><li>$ git clone https://github.com/JCarlosR/demo-node-app.git</li></ul></li> <li>Crear imagen:
<ul><li>$ cd demo-node-app</li> <li>$ docker build -t my-node-app:1.0 .</li></ul></li></ol> <h3 id="_50-ejecutar-app-en-un-contenedor"><a href="#_50-ejecutar-app-en-un-contenedor" class="header-anchor">#</a> 50. Ejecutar App en un contenedor</h3> <ol><li>Ejecutar contenedor:
<ul><li>$ docker run -d -p 8082:3000 --rm my-node-app:1.0</li></ul></li> <li>Parar contenedor ejecutado en el paso anterior.</li></ol> <h3 id="_51-ejecutar-mongo-db-en-un-contenedor"><a href="#_51-ejecutar-mongo-db-en-un-contenedor" class="header-anchor">#</a> 51. Ejecutar Mongo DB en un contenedor</h3> <ul><li><strong><a href="https://hub.docker.com/_/mongo" target="_blank" rel="noopener noreferrer">Docker Hub MongoDB<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></strong>.</li></ul> <ol><li>Crear network <strong>network_mongo</strong>:
<ul><li>$ docker network create network_mongo</li></ul></li> <li>Levantar un contenedor con MongoDB:
<ul><li>$ docker run -e MONGO_INITDB_ROOT_USERNAME=admin -e MONGO_INITDB_ROOT_PASSWORD=password --network network_mongo --name mongodb --rm -d mongo</li></ul></li></ol> <h3 id="_52-ejecutar-mongo-express-en-un-contenedor"><a href="#_52-ejecutar-mongo-express-en-un-contenedor" class="header-anchor">#</a> 52. Ejecutar Mongo Express en un contenedor</h3> <ul><li><strong><a href="https://hub.docker.com/_/mongo-express" target="_blank" rel="noopener noreferrer">Docker Hub Mongo Express<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></strong>.</li></ul> <ol><li>Crear un contenedor de Mongo Express:
<ul><li>$ docker run --network network_mongo -e ME_CONFIG_MONGODB_ADMINUSERNAME=admin -e ME_CONFIG_MONGODB_ADMINPASSWORD=password -e ME_CONFIG_MONGODB_SERVER=mongodb -p 8081:8081 -d mongo-express</li></ul> <div class="custom-block tip"><p class="custom-block-title">Nota</p> <p>Mongo Express se estará ejecutando en:</p> <ul><li>http://localhost:8081</li></ul></div></li> <li>Ingresando en <strong>http://localhost:8081</strong> crear:
<ul><li>Base de datos <strong>my-db</strong>.</li> <li>El la base de datos <strong>my-db</strong> crear colección: <strong>users</strong></li></ul></li></ol> <h3 id="_53-ejecutar-todo-multiples-comandos"><a href="#_53-ejecutar-todo-multiples-comandos" class="header-anchor">#</a> 53. Ejecutar todo (múltiples comandos)</h3> <ol><li>Ejecutar contenedor:
<ul><li>$ docker run -d -p 8082:3000 --network network_mongo --rm my-node-app:1.0</li></ul> <div class="custom-block tip"><p class="custom-block-title">Nota</p> <p>El proyecto de Node.js se estará ejecutando en:</p> <ul><li>http://localhost:8082</li></ul></div></li></ol> <h3 id="_54-docker-compose-y-yaml"><a href="#_54-docker-compose-y-yaml" class="header-anchor">#</a> 54. Docker Compose y YAML</h3> <ol><li>Pasos a tener en cuenta para programar un Docker Compose:<div class="language- extra-class"><pre class="language-text"><code>docker build -t my-node-app:1.0 .

docker network create network_mongo

docker run 
    -e MONGO_INITDB_ROOT_USERNAME=admin 
    -e MONGO_INITDB_ROOT_PASSWORD=password 
    --network network_mongo 
    --name mongodb 
    mongo

docker run 
    -e ME_CONFIG_MONGODB_SERVER=mongodb 
    -e ME_CONFIG_MONGODB_ADMINUSERNAME=admin 
    -e ME_CONFIG_MONGODB_ADMINPASSWORD=password 
    -p 8081:8081 
    --network network_mongo 
    -name mongo-express
    mongo-express

docker run 
    -p 8082:3000 
    --network network_mongo 
    --rm my-node-app:1.0
</code></pre></div></li> <li>Modificar <strong>demo-node-app\docker-compose.yaml</strong>:<div class="language-yaml extra-class"><pre class="language-yaml"><code><span class="token key atrule">version</span><span class="token punctuation">:</span> <span class="token string">'3'</span>
<span class="token key atrule">services</span><span class="token punctuation">:</span>
<span class="token key atrule">my-node-app</span><span class="token punctuation">:</span>
    <span class="token key atrule">build</span><span class="token punctuation">:</span> .
    <span class="token key atrule">ports</span><span class="token punctuation">:</span>
        <span class="token punctuation">-</span> 8082<span class="token punctuation">:</span><span class="token number">3000</span>
<span class="token key atrule">mongodb</span><span class="token punctuation">:</span>
    <span class="token key atrule">image</span><span class="token punctuation">:</span> mongo
    <span class="token key atrule">environment</span><span class="token punctuation">:</span>
        <span class="token punctuation">-</span> MONGO_INITDB_ROOT_USERNAME=admin
        <span class="token punctuation">-</span> MONGO_INITDB_ROOT_PASSWORD=password
    <span class="token key atrule">volumes</span><span class="token punctuation">:</span>
        <span class="token punctuation">-</span> mongo<span class="token punctuation">-</span>data<span class="token punctuation">:</span>/data/db
<span class="token key atrule">mongo-express</span><span class="token punctuation">:</span>
    <span class="token key atrule">image</span><span class="token punctuation">:</span> mongo<span class="token punctuation">-</span>express
    <span class="token key atrule">ports</span><span class="token punctuation">:</span>
        <span class="token punctuation">-</span> 8081<span class="token punctuation">:</span><span class="token number">8081</span>
    <span class="token key atrule">environment</span><span class="token punctuation">:</span>
        <span class="token punctuation">-</span> ME_CONFIG_MONGODB_ADMINUSERNAME=admin
        <span class="token punctuation">-</span> ME_CONFIG_MONGODB_ADMINPASSWORD=password
        <span class="token punctuation">-</span> ME_CONFIG_MONGODB_SERVER=mongodb
<span class="token key atrule">volumes</span><span class="token punctuation">:</span>
    <span class="token key atrule">mongo-data</span><span class="token punctuation">:</span>
        <span class="token key atrule">driver</span><span class="token punctuation">:</span> local  
</code></pre></div></li></ol> <h3 id="_55-ejecutar-todo-1-comando-docker-compose"><a href="#_55-ejecutar-todo-1-comando-docker-compose" class="header-anchor">#</a> 55. Ejecutar todo (1 comando Docker Compose)</h3> <ul><li><strong><a href="https://docs.docker.com/compose/install" target="_blank" rel="noopener noreferrer">Overview<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></strong>.</li></ul> <ol><li>Ubicados en <strong>demo-node-app</strong>, ejecutar:
<ul><li>$ docker-compose up</li></ul> <div class="custom-block tip"><p class="custom-block-title">Nota</p> <p>Este comando buscará un archivo de nombre <strong>docker-compose.yaml</strong>.</p></div></li> <li>Para detener los contenedores ejecutados por Docker Compose:
<ul><li>$ docker-compose down</li></ul></li> <li>Para ver los volumenes en Docker:
<ul><li>$ docker volume ls</li></ul></li></ol> <h2 id="seccion-10-docker-orchestration"><a href="#seccion-10-docker-orchestration" class="header-anchor">#</a> Sección 10: Docker Orchestration</h2> <h3 id="_56-introduccion-e-importancia"><a href="#_56-introduccion-e-importancia" class="header-anchor">#</a> 56. Introducción e Importancia</h3> <h3 id="_57-docker-swarm"><a href="#_57-docker-swarm" class="header-anchor">#</a> 57. Docker Swarm</h3> <h3 id="_58-kubernetes"><a href="#_58-kubernetes" class="header-anchor">#</a> 58. Kubernetes</h3> <h3 id="cuestionario-4-prueba-4-container-orchestration"><a href="#cuestionario-4-prueba-4-container-orchestration" class="header-anchor">#</a> Cuestionario 4: Prueba 4: Container Orchestration</h3> <ul><li><strong>Pregunta 1</strong>: Acerca de <strong>Kubernetes</strong> y <strong>Docker</strong>. Es cierto que:
<ul><li>Están relacionados pero no siempre se usan en conjunto.</li></ul></li> <li><strong>Pregunta 2</strong>: ¿Cuál es la principal diferencia entre <strong>Docker Swarm</strong> y <strong>Kubernetes</strong>?
<ul><li>Dokcer Swarm ofrece mayor simplicidad y por tanto es más fácil empezar con esta herramienta. Kubernetes presenta más características pero incrementa la complejidad de configuración.</li></ul></li> <li><strong>Pregunta 3</strong>: ¿Qué es <strong>K8s</strong>?
<ul><li>Kubernetes se puede abreviar como k8s porque entre la k y la s encontramos 8 caracteres.</li></ul></li> <li><strong>Pregunta 4</strong>: En <strong>Kubernetes</strong>, ¿qué es un <strong>Pod</strong>?
<ul><li>Los nodos de Kubernetes contienen pods. Cada pod puede representar a uno o varios contenedores.</li></ul></li> <li><strong>Pregunta 5</strong>: En Kubernetes, se le conoce como &quot;<strong>Node Agent</strong>&quot; y está a cargo de informar al Kubernetes Master sobre el estado de pods y contenedores.
<ul><li>Kubelet</li></ul></li> <li><strong>Pregunta 6</strong>: Es una herramienta de línea de comandos que nos va a permitir gestionar los clusters de Kubernetes.
<ul><li>kubectl</li></ul></li></ul> <h2 id="seccion-11-proyecto-wordpress"><a href="#seccion-11-proyecto-wordpress" class="header-anchor">#</a> Sección 11: Proyecto Wordpress</h2> <h3 id="_59-docker-compose-file"><a href="#_59-docker-compose-file" class="header-anchor">#</a> 59. Docker Compose File</h3> <ul><li><strong><a href="https://hub.docker.com/_/wordpress" target="_blank" rel="noopener noreferrer">Docker Hub WordPress<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></strong>.</li> <li><strong><a href="https://hub.docker.com/_/mysql" target="_blank" rel="noopener noreferrer">Docker Hub MySQL<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></strong>.</li> <li><strong><a href="https://hub.docker.com/_/phpmyadmin" target="_blank" rel="noopener noreferrer">Docker Hub phpMyAdmin<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></strong>.</li></ul> <ol><li>Crear <strong>demo-compose-wordpress\docker-compose.yml</strong>:<div class="language-yml extra-class"><pre class="language-yml"><code><span class="token key atrule">version</span><span class="token punctuation">:</span> <span class="token string">'3'</span>

<span class="token key atrule">services</span><span class="token punctuation">:</span>
<span class="token key atrule">db</span><span class="token punctuation">:</span>
    <span class="token key atrule">image</span><span class="token punctuation">:</span> mysql<span class="token punctuation">:</span><span class="token number">8</span>
    <span class="token key atrule">volumes</span><span class="token punctuation">:</span>
        <span class="token punctuation">-</span> db_data<span class="token punctuation">:</span>/var/lib/mysql
    <span class="token key atrule">restart</span><span class="token punctuation">:</span> always
    <span class="token key atrule">environment</span><span class="token punctuation">:</span>
    <span class="token key atrule">MYSQL_ROOT_PASSWORD</span><span class="token punctuation">:</span> password
    <span class="token key atrule">MYSQL_DATABASE</span><span class="token punctuation">:</span> wordpress
    <span class="token key atrule">MYSQL_USER</span><span class="token punctuation">:</span> admin
    <span class="token key atrule">MYSQL_PASSWORD</span><span class="token punctuation">:</span> password
<span class="token key atrule">wp</span><span class="token punctuation">:</span>
    <span class="token key atrule">image</span><span class="token punctuation">:</span> wordpress<span class="token punctuation">:</span>php7.4
    <span class="token key atrule">depends_on</span><span class="token punctuation">:</span>
        <span class="token punctuation">-</span> db
    <span class="token key atrule">ports</span><span class="token punctuation">:</span>
        <span class="token punctuation">-</span> 8080<span class="token punctuation">:</span><span class="token number">80</span>
    <span class="token key atrule">restart</span><span class="token punctuation">:</span> always
    <span class="token key atrule">volumes</span><span class="token punctuation">:</span>
        <span class="token punctuation">-</span> ./<span class="token punctuation">:</span>/var/www/html
    <span class="token key atrule">environment</span><span class="token punctuation">:</span>
    <span class="token key atrule">WORDPRESS_DB_HOST</span><span class="token punctuation">:</span> db
    <span class="token key atrule">WORDPRESS_DB_USER</span><span class="token punctuation">:</span> admin
    <span class="token key atrule">WORDPRESS_DB_PASSWORD</span><span class="token punctuation">:</span> password
    <span class="token key atrule">WORDPRESS_DB_NAME</span><span class="token punctuation">:</span> wordpress    
</code></pre></div></li></ol> <h3 id="_60-docker-compose-up"><a href="#_60-docker-compose-up" class="header-anchor">#</a> 60. Docker Compose Up</h3> <ol><li>Modificar <strong>demo-compose-wordpress\docker-compose.yml</strong>:<div class="language-yml extra-class"><div class="highlight-lines"><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><div class="highlighted"> </div><div class="highlighted"> </div><br></div><pre class="language-yml"><code><span class="token key atrule">version</span><span class="token punctuation">:</span> <span class="token string">'3'</span>

<span class="token key atrule">services</span><span class="token punctuation">:</span>
<span class="token key atrule">db</span><span class="token punctuation">:</span>
    <span class="token key atrule">image</span><span class="token punctuation">:</span> mysql<span class="token punctuation">:</span><span class="token number">8</span>
    <span class="token key atrule">volumes</span><span class="token punctuation">:</span>
        <span class="token punctuation">-</span> db_data<span class="token punctuation">:</span>/var/lib/mysql
    <span class="token key atrule">restart</span><span class="token punctuation">:</span> always
    <span class="token key atrule">environment</span><span class="token punctuation">:</span>
    <span class="token key atrule">MYSQL_ROOT_PASSWORD</span><span class="token punctuation">:</span> password
    <span class="token key atrule">MYSQL_DATABASE</span><span class="token punctuation">:</span> wordpress
    <span class="token key atrule">MYSQL_USER</span><span class="token punctuation">:</span> admin
    <span class="token key atrule">MYSQL_PASSWORD</span><span class="token punctuation">:</span> password
<span class="token key atrule">wp</span><span class="token punctuation">:</span>
    <span class="token key atrule">image</span><span class="token punctuation">:</span> wordpress<span class="token punctuation">:</span>php7.4
    <span class="token key atrule">depends_on</span><span class="token punctuation">:</span>
        <span class="token punctuation">-</span> db
    <span class="token key atrule">ports</span><span class="token punctuation">:</span>
        <span class="token punctuation">-</span> 8080<span class="token punctuation">:</span><span class="token number">80</span>
    <span class="token key atrule">restart</span><span class="token punctuation">:</span> always
    <span class="token key atrule">volumes</span><span class="token punctuation">:</span>
        <span class="token punctuation">-</span> ./<span class="token punctuation">:</span>/var/www/html
    <span class="token key atrule">environment</span><span class="token punctuation">:</span>
    <span class="token key atrule">WORDPRESS_DB_HOST</span><span class="token punctuation">:</span> db
    <span class="token key atrule">WORDPRESS_DB_USER</span><span class="token punctuation">:</span> admin
    <span class="token key atrule">WORDPRESS_DB_PASSWORD</span><span class="token punctuation">:</span> password
    <span class="token key atrule">WORDPRESS_DB_NAME</span><span class="token punctuation">:</span> wordpress

<span class="token key atrule">volumes</span><span class="token punctuation">:</span>
<span class="token key atrule">db_data</span><span class="token punctuation">:</span>    
</code></pre></div></li></ol> <h3 id="_61-agregando-un-servicio-mas"><a href="#_61-agregando-un-servicio-mas" class="header-anchor">#</a> 61. Agregando un servicio más</h3> <ul><li><strong><a href="https://hub.docker.com/_/phpmyadmin" target="_blank" rel="noopener noreferrer">Docker Hub phpMyAdmin<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></strong>.</li></ul> <ol><li>Modificar <strong>demo-compose-wordpress\docker-compose.yml</strong>:<div class="language-yml{} extra-class"><pre class="language-text"><code></code></pre></div></li> <li>Levantar servicios:
<ul><li>$ docker-compose up -d</li></ul> <div class="custom-block tip"><p class="custom-block-title">Nota</p> <p>El servidor web (WordPress) deberá correr en:</p> <ul><li>http://localhost:8080
El servidor de base de datos (MySQL) deberá correr en:</li> <li>http://localhost:8081</li></ul></div></li> <li>Ir a <strong>http://localhost:8080</strong> en instalar WordPress.</li></ol> <h2 id="seccion-12-proyecto-laravel"><a href="#seccion-12-proyecto-laravel" class="header-anchor">#</a> Sección 12: Proyecto Laravel</h2> <h3 id="_62-introduccion-general"><a href="#_62-introduccion-general" class="header-anchor">#</a> 62. Introducción general</h3> <ul><li><strong><a href="https://www.digitalocean.com/community/tutorials/how-to-install-and-set-up-laravel-with-docker-compose-on-ubuntu-22-04" target="_blank" rel="noopener noreferrer">How To Install and Set Up Laravel with Docker Compose on Ubuntu 22.04<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></strong>.</li> <li><strong><a href="https://www.digitalocean.com/community/tutorials/how-to-install-and-set-up-laravel-with-docker-compose-on-ubuntu-20-04" target="_blank" rel="noopener noreferrer">How To Install and Set Up Laravel with Docker Compose on Ubuntu 20.04<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></strong>.</li></ul> <h3 id="_63-repositorio-del-proyecto"><a href="#_63-repositorio-del-proyecto" class="header-anchor">#</a> 63. Repositorio del proyecto</h3> <ul><li><strong><a href="https://github.com/do-community/travellist-laravel-demo" target="_blank" rel="noopener noreferrer">Repositorio GitHub travellist-laravel-demo<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></strong>.</li></ul> <div class="custom-block tip"><p class="custom-block-title">Nota</p> <p>En el archivo <strong>docker-compose.yml</strong> del repositorio podemos ver la estructura y configuración del proyecto:</p> <div class="language-yml extra-class"><pre class="language-yml"><code><span class="token key atrule">version</span><span class="token punctuation">:</span> <span class="token string">&quot;3.7&quot;</span>
<span class="token key atrule">services</span><span class="token punctuation">:</span>
  <span class="token key atrule">app</span><span class="token punctuation">:</span>
    <span class="token key atrule">build</span><span class="token punctuation">:</span>
      <span class="token key atrule">args</span><span class="token punctuation">:</span>
        <span class="token key atrule">user</span><span class="token punctuation">:</span> sammy
        <span class="token key atrule">uid</span><span class="token punctuation">:</span> <span class="token number">1000</span>
      <span class="token key atrule">context</span><span class="token punctuation">:</span> ./
      <span class="token key atrule">dockerfile</span><span class="token punctuation">:</span> Dockerfile
    <span class="token key atrule">image</span><span class="token punctuation">:</span> travellist
    <span class="token key atrule">container_name</span><span class="token punctuation">:</span> travellist<span class="token punctuation">-</span>app
    <span class="token key atrule">restart</span><span class="token punctuation">:</span> unless<span class="token punctuation">-</span>stopped
    <span class="token key atrule">working_dir</span><span class="token punctuation">:</span> /var/www/
    <span class="token key atrule">volumes</span><span class="token punctuation">:</span>
      <span class="token punctuation">-</span> ./<span class="token punctuation">:</span>/var/www
    <span class="token key atrule">networks</span><span class="token punctuation">:</span>
      <span class="token punctuation">-</span> travellist

  <span class="token key atrule">db</span><span class="token punctuation">:</span>
    <span class="token key atrule">image</span><span class="token punctuation">:</span> mysql<span class="token punctuation">:</span><span class="token number">5.7</span>
    <span class="token key atrule">container_name</span><span class="token punctuation">:</span> travellist<span class="token punctuation">-</span>db
    <span class="token key atrule">restart</span><span class="token punctuation">:</span> unless<span class="token punctuation">-</span>stopped
    <span class="token key atrule">environment</span><span class="token punctuation">:</span>
      <span class="token key atrule">MYSQL_DATABASE</span><span class="token punctuation">:</span> $<span class="token punctuation">{</span>DB_DATABASE<span class="token punctuation">}</span>
      <span class="token key atrule">MYSQL_ROOT_PASSWORD</span><span class="token punctuation">:</span> $<span class="token punctuation">{</span>DB_PASSWORD<span class="token punctuation">}</span>
      <span class="token key atrule">MYSQL_PASSWORD</span><span class="token punctuation">:</span> $<span class="token punctuation">{</span>DB_PASSWORD<span class="token punctuation">}</span>
      <span class="token key atrule">MYSQL_USER</span><span class="token punctuation">:</span> $<span class="token punctuation">{</span>DB_USERNAME<span class="token punctuation">}</span>
      <span class="token key atrule">SERVICE_TAGS</span><span class="token punctuation">:</span> dev
      <span class="token key atrule">SERVICE_NAME</span><span class="token punctuation">:</span> mysql
    <span class="token key atrule">volumes</span><span class="token punctuation">:</span>
      <span class="token punctuation">-</span> ./docker<span class="token punctuation">-</span>compose/mysql<span class="token punctuation">:</span>/docker<span class="token punctuation">-</span>entrypoint<span class="token punctuation">-</span>initdb.d
    <span class="token key atrule">networks</span><span class="token punctuation">:</span>
      <span class="token punctuation">-</span> travellist

  <span class="token key atrule">nginx</span><span class="token punctuation">:</span>
    <span class="token key atrule">image</span><span class="token punctuation">:</span> nginx<span class="token punctuation">:</span>alpine
    <span class="token key atrule">container_name</span><span class="token punctuation">:</span> travellist<span class="token punctuation">-</span>nginx
    <span class="token key atrule">restart</span><span class="token punctuation">:</span> unless<span class="token punctuation">-</span>stopped
    <span class="token key atrule">ports</span><span class="token punctuation">:</span>
      <span class="token punctuation">-</span> <span class="token string">&quot;8000:80&quot;</span>
    <span class="token key atrule">volumes</span><span class="token punctuation">:</span>
      <span class="token punctuation">-</span> ./<span class="token punctuation">:</span>/var/www
      <span class="token punctuation">-</span> ./docker<span class="token punctuation">-</span>compose/nginx<span class="token punctuation">:</span>/etc/nginx/conf.d
    <span class="token key atrule">networks</span><span class="token punctuation">:</span>
      <span class="token punctuation">-</span> travellist

<span class="token key atrule">networks</span><span class="token punctuation">:</span>
  <span class="token key atrule">travellist</span><span class="token punctuation">:</span>
    <span class="token key atrule">driver</span><span class="token punctuation">:</span> bridge
</code></pre></div></div> <h3 id="_64-iniciando-todos-los-servicios"><a href="#_64-iniciando-todos-los-servicios" class="header-anchor">#</a> 64. Iniciando todos los servicios</h3> <ol><li>Crear proyecto a partir del repositorio <strong>https://github.com/do-community/travellist-laravel-demo</strong>:
<ul><li>$ git clone https://github.com/do-community/travellist-laravel-demo</li> <li>$ cd travellist-laravel-demo</li> <li>$ docker-compose up -d</li> <li>$ docker-compose exec app composer install<div class="custom-block tip"><p class="custom-block-title">Nota</p> <p><strong>app</strong> es el nombre del servicio definido en <strong>docker-compose.yml</strong>.</p></div></li></ul></li> <li>Tomando como referencia <strong>travellist-laravel-demo\.env.example</strong> crear el archivo de variables <strong>travellist-laravel-demo\.env</strong>:<div class="language-env extra-class"><pre class="language-text"><code>APP_NAME=Travellist
APP_ENV=dev
APP_KEY=
APP_DEBUG=true
APP_URL=http://localhost:8000

LOG_CHANNEL=stack

DB_CONNECTION=mysql
DB_HOST=db
DB_PORT=3306
DB_DATABASE=travellist
DB_USERNAME=travellist_user
DB_PASSWORD=password

BROADCAST_DRIVER=log
CACHE_DRIVER=file
QUEUE_CONNECTION=sync
SESSION_DRIVER=cookie
SESSION_LIFETIME=120

REDIS_HOST=127.0.0.1
REDIS_PASSWORD=null
REDIS_PORT=6379

MAIL_DRIVER=smtp
MAIL_HOST=smtp.mailtrap.io
MAIL_PORT=2525
MAIL_USERNAME=null
MAIL_PASSWORD=null
MAIL_ENCRYPTION=null

AWS_ACCESS_KEY_ID=
AWS_SECRET_ACCESS_KEY=
AWS_DEFAULT_REGION=us-east-1
AWS_BUCKET=

PUSHER_APP_ID=
PUSHER_APP_KEY=
PUSHER_APP_SECRET=
PUSHER_APP_CLUSTER=mt1

MIX_PUSHER_APP_KEY=&quot;${PUSHER_APP_KEY}&quot;
MIX_PUSHER_APP_CLUSTER=&quot;${PUSHER_APP_CLUSTER}&quot;
</code></pre></div></li></ol> <div class="custom-block tip"><p class="custom-block-title">Nota</p> <p>La aplicación se ejecutará en:</p> <ul><li>http://localhost:8000</li></ul></div> <ol start="3"><li>Crear llave:
<ul><li>$ docker-compose exec app php artisan key:generate</li></ul></li> <li>Parar el servicio y reiniciarlo para que tome los valores de las variables de entorno:
<ul><li>$ docker-compose down</li> <li>$ docker-compose up -d</li></ul></li></ol> <h2 id="seccion-13-python-redis-postgresql-node-net"><a href="#seccion-13-python-redis-postgresql-node-net" class="header-anchor">#</a> Sección 13: Python Redis PostgreSQL Node .NET</h2> <h3 id="_65-introduccion-general"><a href="#_65-introduccion-general" class="header-anchor">#</a> 65. Introducción general</h3> <ul><li><strong><a href="https://github.com/dockersamples/example-voting-app" target="_blank" rel="noopener noreferrer">Repositorio GitHub example-voting-app<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></strong>.</li></ul> <h3 id="_66-repositorio-del-proyecto"><a href="#_66-repositorio-del-proyecto" class="header-anchor">#</a> 66. Repositorio del proyecto</h3> <div class="custom-block tip"><p class="custom-block-title">Nota</p> <p>En el archivo <strong>docker-compose.yml</strong> del repositorio podemos ver la estructura y configuración del proyecto:</p> <div class="language-yml extra-class"><pre class="language-yml"><code><span class="token comment"># version is now using &quot;compose spec&quot;</span>
<span class="token comment"># v2 and v3 are now combined!</span>
<span class="token comment"># docker-compose v1.27+ required</span>

<span class="token key atrule">services</span><span class="token punctuation">:</span>
  <span class="token key atrule">vote</span><span class="token punctuation">:</span>
    <span class="token key atrule">build</span><span class="token punctuation">:</span> ./vote
    <span class="token comment"># use python rather than gunicorn for local dev</span>
    <span class="token key atrule">command</span><span class="token punctuation">:</span> python app.py
    <span class="token key atrule">depends_on</span><span class="token punctuation">:</span>
      <span class="token key atrule">redis</span><span class="token punctuation">:</span>
        <span class="token key atrule">condition</span><span class="token punctuation">:</span> service_healthy
    <span class="token key atrule">healthcheck</span><span class="token punctuation">:</span> 
      <span class="token key atrule">test</span><span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token string">&quot;CMD&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;curl&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;-f&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;http://localhost&quot;</span><span class="token punctuation">]</span>
      <span class="token key atrule">interval</span><span class="token punctuation">:</span> 15s
      <span class="token key atrule">timeout</span><span class="token punctuation">:</span> 5s
      <span class="token key atrule">retries</span><span class="token punctuation">:</span> <span class="token number">3</span>
      <span class="token key atrule">start_period</span><span class="token punctuation">:</span> 10s
    <span class="token key atrule">volumes</span><span class="token punctuation">:</span>
     <span class="token punctuation">-</span> ./vote<span class="token punctuation">:</span>/app
    <span class="token key atrule">ports</span><span class="token punctuation">:</span>
      <span class="token punctuation">-</span> <span class="token string">&quot;5000:80&quot;</span>
    <span class="token key atrule">networks</span><span class="token punctuation">:</span>
      <span class="token punctuation">-</span> front<span class="token punctuation">-</span>tier
      <span class="token punctuation">-</span> back<span class="token punctuation">-</span>tier

  <span class="token key atrule">result</span><span class="token punctuation">:</span>
    <span class="token key atrule">build</span><span class="token punctuation">:</span> ./result
    <span class="token comment"># use nodemon rather than node for local dev</span>
    <span class="token key atrule">entrypoint</span><span class="token punctuation">:</span> nodemon server.js
    <span class="token key atrule">depends_on</span><span class="token punctuation">:</span>
      <span class="token key atrule">db</span><span class="token punctuation">:</span>
        <span class="token key atrule">condition</span><span class="token punctuation">:</span> service_healthy 
    <span class="token key atrule">volumes</span><span class="token punctuation">:</span>
      <span class="token punctuation">-</span> ./result<span class="token punctuation">:</span>/app
    <span class="token key atrule">ports</span><span class="token punctuation">:</span>
      <span class="token punctuation">-</span> <span class="token string">&quot;5001:80&quot;</span>
      <span class="token punctuation">-</span> <span class="token string">&quot;5858:5858&quot;</span>
    <span class="token key atrule">networks</span><span class="token punctuation">:</span>
      <span class="token punctuation">-</span> front<span class="token punctuation">-</span>tier
      <span class="token punctuation">-</span> back<span class="token punctuation">-</span>tier

  <span class="token key atrule">worker</span><span class="token punctuation">:</span>
    <span class="token key atrule">build</span><span class="token punctuation">:</span>
      <span class="token key atrule">context</span><span class="token punctuation">:</span> ./worker
    <span class="token key atrule">depends_on</span><span class="token punctuation">:</span>
      <span class="token key atrule">redis</span><span class="token punctuation">:</span>
        <span class="token key atrule">condition</span><span class="token punctuation">:</span> service_healthy 
      <span class="token key atrule">db</span><span class="token punctuation">:</span>
        <span class="token key atrule">condition</span><span class="token punctuation">:</span> service_healthy 
    <span class="token key atrule">networks</span><span class="token punctuation">:</span>
      <span class="token punctuation">-</span> back<span class="token punctuation">-</span>tier

  <span class="token key atrule">redis</span><span class="token punctuation">:</span>
    <span class="token key atrule">image</span><span class="token punctuation">:</span> redis<span class="token punctuation">:</span>alpine
    <span class="token key atrule">volumes</span><span class="token punctuation">:</span>
      <span class="token punctuation">-</span> <span class="token string">&quot;./healthchecks:/healthchecks&quot;</span>
    <span class="token key atrule">healthcheck</span><span class="token punctuation">:</span>
      <span class="token key atrule">test</span><span class="token punctuation">:</span> /healthchecks/redis.sh
      <span class="token key atrule">interval</span><span class="token punctuation">:</span> <span class="token string">&quot;5s&quot;</span>
    <span class="token key atrule">networks</span><span class="token punctuation">:</span>
      <span class="token punctuation">-</span> back<span class="token punctuation">-</span>tier

  <span class="token key atrule">db</span><span class="token punctuation">:</span>
    <span class="token key atrule">image</span><span class="token punctuation">:</span> postgres<span class="token punctuation">:</span>15<span class="token punctuation">-</span>alpine
    <span class="token key atrule">environment</span><span class="token punctuation">:</span>
      <span class="token key atrule">POSTGRES_USER</span><span class="token punctuation">:</span> <span class="token string">&quot;postgres&quot;</span>
      <span class="token key atrule">POSTGRES_PASSWORD</span><span class="token punctuation">:</span> <span class="token string">&quot;postgres&quot;</span>
    <span class="token key atrule">volumes</span><span class="token punctuation">:</span>
      <span class="token punctuation">-</span> <span class="token string">&quot;db-data:/var/lib/postgresql/data&quot;</span>
      <span class="token punctuation">-</span> <span class="token string">&quot;./healthchecks:/healthchecks&quot;</span>
    <span class="token key atrule">healthcheck</span><span class="token punctuation">:</span>
      <span class="token key atrule">test</span><span class="token punctuation">:</span> /healthchecks/postgres.sh
      <span class="token key atrule">interval</span><span class="token punctuation">:</span> <span class="token string">&quot;5s&quot;</span>
    <span class="token key atrule">networks</span><span class="token punctuation">:</span>
      <span class="token punctuation">-</span> back<span class="token punctuation">-</span>tier

  <span class="token comment"># this service runs once to seed the database with votes</span>
  <span class="token comment"># it won't run unless you specify the &quot;seed&quot; profile</span>
  <span class="token comment"># docker compose --profile seed up -d</span>
  <span class="token key atrule">seed</span><span class="token punctuation">:</span>
    <span class="token key atrule">build</span><span class="token punctuation">:</span> ./seed<span class="token punctuation">-</span>data
    <span class="token key atrule">profiles</span><span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token string">&quot;seed&quot;</span><span class="token punctuation">]</span>
    <span class="token key atrule">depends_on</span><span class="token punctuation">:</span>
      <span class="token key atrule">vote</span><span class="token punctuation">:</span>
        <span class="token key atrule">condition</span><span class="token punctuation">:</span> service_healthy 
    <span class="token key atrule">networks</span><span class="token punctuation">:</span>
      <span class="token punctuation">-</span> front<span class="token punctuation">-</span>tier
    <span class="token key atrule">restart</span><span class="token punctuation">:</span> <span class="token string">&quot;no&quot;</span>

<span class="token key atrule">volumes</span><span class="token punctuation">:</span>
  <span class="token key atrule">db-data</span><span class="token punctuation">:</span>

<span class="token key atrule">networks</span><span class="token punctuation">:</span>
  <span class="token key atrule">front-tier</span><span class="token punctuation">:</span>
  <span class="token key atrule">back-tier</span><span class="token punctuation">:</span>
</code></pre></div><p>En <strong>example-voting-app/vote/Dockerfile</strong> del repositorio podemos ver como se construirá la imagen <strong>vote</strong>:</p> <div class="language- extra-class"><pre class="language-text"><code># Using official python runtime base image
FROM python:3.9-slim

# add curl for healthcheck
RUN apt-get update \
    &amp;&amp; apt-get install -y --no-install-recommends \
    curl \
    &amp;&amp; rm -rf /var/lib/apt/lists/*

# Set the application directory
WORKDIR /app

# Install our requirements.txt
COPY requirements.txt /app/requirements.txt
RUN pip install -r requirements.txt

# Copy our code from the current folder to /app inside the container
COPY . .

# Make port 80 available for links and/or publish
EXPOSE 80

# Define our command to be run when launching the container
CMD [&quot;gunicorn&quot;, &quot;app:app&quot;, &quot;-b&quot;, &quot;0.0.0.0:80&quot;, &quot;--log-file&quot;, &quot;-&quot;, &quot;--access-logfile&quot;, &quot;-&quot;, &quot;--workers&quot;, &quot;4&quot;, &quot;--keep-alive&quot;, &quot;0&quot;]
</code></pre></div></div> <h3 id="_67-ejercicio-final-y-fin-del-curso"><a href="#_67-ejercicio-final-y-fin-del-curso" class="header-anchor">#</a> 67. Ejercicio final y fin del curso</h3> <ol><li>Crear proyecto a partir del repositorio <strong>https://github.com/dockersamples/example-voting-app</strong>:
<ul><li>$ git clone https://github.com/dockersamples/example-voting-app</li> <li>$ cd example-voting-app</li> <li>$ docker-compose up -d</li></ul></li></ol> <div class="custom-block tip"><p class="custom-block-title">Nota</p> <p>La aplicación se ejecutará en:</p> <ul><li>http://localhost:5000     (Para votar)</li> <li>http://localhost:5001     (Para ver resultados)</li></ul></div></div> <footer class="page-edit"><!----> <!----></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/guide/c_cpp/clases_cpp/clases_cpp2023.html" class="prev">
        Clases C++
      </a></span> <span class="next"><a href="/guide/herramientas/zapier2022/zapier2022.html">
        CURSO: Automatiza tu negocio con Zapier - De 0 a 100
      </a>
      →
    </span></p></div> </main></div><div class="global-ui"></div></div>
    <script src="/assets/js/app.99e194c4.js" defer></script><script src="/assets/js/2.63c13255.js" defer></script><script src="/assets/js/15.ca5eb4d6.js" defer></script>
  </body>
</html>
