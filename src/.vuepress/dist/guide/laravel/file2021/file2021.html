<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Subir archivos a la red con Laravel y almacenar sus datos en MySQL | Docs S++</title>
    <meta name="generator" content="VuePress 1.9.7">
    <link rel="icon" type="image/png" href="https://raw.githubusercontent.com/petrix12/imagenes2022/main/Soluciones%2B%2B/S%2B%2B.ico">
    <meta name="description" content="Documentación General">
    <meta name="theme-color" content="#3eaf7c">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    
    <link rel="preload" href="/assets/css/0.styles.a5359c9c.css" as="style"><link rel="preload" href="/assets/js/app.5b50b18c.js" as="script"><link rel="preload" href="/assets/js/2.63c13255.js" as="script"><link rel="preload" href="/assets/js/13.a4b2e9a7.js" as="script"><link rel="prefetch" href="/assets/js/10.62a9e3f2.js"><link rel="prefetch" href="/assets/js/11.b9de3e97.js"><link rel="prefetch" href="/assets/js/12.63ce43f8.js"><link rel="prefetch" href="/assets/js/14.63c87577.js"><link rel="prefetch" href="/assets/js/15.0d753188.js"><link rel="prefetch" href="/assets/js/16.a67c209e.js"><link rel="prefetch" href="/assets/js/17.0341dfd0.js"><link rel="prefetch" href="/assets/js/18.d9651679.js"><link rel="prefetch" href="/assets/js/19.3793a7d6.js"><link rel="prefetch" href="/assets/js/20.543ffd24.js"><link rel="prefetch" href="/assets/js/21.fc7e0ad6.js"><link rel="prefetch" href="/assets/js/22.adf0bef7.js"><link rel="prefetch" href="/assets/js/23.62dd0c61.js"><link rel="prefetch" href="/assets/js/24.ea63bf10.js"><link rel="prefetch" href="/assets/js/25.ab4f33a7.js"><link rel="prefetch" href="/assets/js/26.722c8951.js"><link rel="prefetch" href="/assets/js/27.051b997d.js"><link rel="prefetch" href="/assets/js/28.6fc6f9bd.js"><link rel="prefetch" href="/assets/js/29.eb35bee7.js"><link rel="prefetch" href="/assets/js/3.94a7c997.js"><link rel="prefetch" href="/assets/js/30.b3c13d7f.js"><link rel="prefetch" href="/assets/js/31.e639e9df.js"><link rel="prefetch" href="/assets/js/32.4ee63fe0.js"><link rel="prefetch" href="/assets/js/33.5c5cf380.js"><link rel="prefetch" href="/assets/js/4.957ff7af.js"><link rel="prefetch" href="/assets/js/5.93d598e3.js"><link rel="prefetch" href="/assets/js/6.8d81f0ec.js"><link rel="prefetch" href="/assets/js/7.159f2f50.js"><link rel="prefetch" href="/assets/js/8.c4f7d3f3.js"><link rel="prefetch" href="/assets/js/9.6a63ad8e.js">
    <link rel="stylesheet" href="/assets/css/0.styles.a5359c9c.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><!----> <span class="site-name">Docs S++</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/guide/" class="nav-link router-link-active">
  Guías
</a></div><div class="nav-item"><a href="/config/" class="nav-link">
  Doc
</a></div><div class="nav-item"><a href="https://github.com/petrix12" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Mi GitHub
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/guide/" class="nav-link router-link-active">
  Guías
</a></div><div class="nav-item"><a href="/config/" class="nav-link">
  Doc
</a></div><div class="nav-item"><a href="https://github.com/petrix12" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Mi GitHub
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div> <!----></nav>  <ul class="sidebar-links"><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading open"><span>Soluciones++</span> <span class="arrow down"></span></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/guide/" aria-current="page" class="sidebar-link">Enlaces de interés</a></li></ul></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Docker</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Laravel</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Lógica</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>PWA</span> <span class="arrow right"></span></p> <!----></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="subir-archivos-a-la-red-con-laravel-y-almacenar-sus-datos-en-mysql"><a href="#subir-archivos-a-la-red-con-laravel-y-almacenar-sus-datos-en-mysql" class="header-anchor">#</a> Subir archivos a la red con Laravel y almacenar sus datos en MySQL</h1> <p><strong>Repositorio GitHub</strong>: https://github.com/petrix12/file.git</p> <h2 id="creacion-del-proyecto"><a href="#creacion-del-proyecto" class="header-anchor">#</a> Creación del proyecto:</h2> <ol><li>Crear proyecto:
<ul><li>$ laravel new file</li></ul></li> <li>Ir a phpMyAdmin y crear base de datos con el nombre <strong>file</strong>.</li> <li>Establecer los siguientes valores en el archivo de variables de entorno .env:<div class="language-txt extra-class"><pre class="language-txt"><code>APP_NAME=&quot;File Soluciones++&quot;
≡
APP_URL=http://127.0.0.1:8000
≡
</code></pre></div><strong>Nota</strong>: en local deberemos levantar nuestro proyecto con el servidor de php artisan:
<ul><li>$ php artisan serve</li></ul></li> <li>Instalar Laravel Breeze:
<ul><li>$ composer require laravel/breeze --dev</li> <li>$ php artisan breeze:install</li> <li>$ npm install</li> <li>$ npm run dev</li> <li>$ php artisan migrate</li></ul></li></ol> <h2 id="personalizacion-del-proyecto"><a href="#personalizacion-del-proyecto" class="header-anchor">#</a> Personalización del proyecto:</h2> <ol><li>Personalizar vista <strong>welcome</strong> en <strong>resources\views\welcome.blade.php</strong>:<div class="language-php extra-class"><pre class="language-php"><code><span class="token operator">&lt;</span><span class="token operator">!</span><span class="token constant">DOCTYPE</span> html<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span>html lang<span class="token operator">=</span><span class="token string double-quoted-string">&quot;{{ str_replace('_', '-', app()-&gt;getLocale()) }}&quot;</span><span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span>head<span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>meta charset<span class="token operator">=</span><span class="token string double-quoted-string">&quot;utf-8&quot;</span><span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>meta name<span class="token operator">=</span><span class="token string double-quoted-string">&quot;viewport&quot;</span> content<span class="token operator">=</span><span class="token string double-quoted-string">&quot;width=device-width, initial-scale=1&quot;</span><span class="token operator">&gt;</span>

        <span class="token operator">&lt;</span>title<span class="token operator">&gt;</span><span class="token class-name">Files</span> <span class="token operator">|</span> <span class="token class-name">Soluciones</span><span class="token operator">++</span><span class="token operator">&lt;</span><span class="token operator">/</span>title<span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>link rel<span class="token operator">=</span><span class="token string double-quoted-string">&quot;shortcut icon&quot;</span> href<span class="token operator">=</span><span class="token string double-quoted-string">&quot;{{{ asset('favicon.ico') }}}&quot;</span><span class="token operator">&gt;</span>

        <span class="token operator">&lt;</span><span class="token operator">!</span><span class="token operator">--</span> Fonts <span class="token operator">--</span><span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>link href<span class="token operator">=</span><span class="token string double-quoted-string">&quot;https://fonts.googleapis.com/css2?family=Nunito:wght@400;600;700&amp;display=swap&quot;</span> rel<span class="token operator">=</span><span class="token string double-quoted-string">&quot;stylesheet&quot;</span><span class="token operator">&gt;</span>

        <span class="token operator">&lt;</span><span class="token operator">!</span><span class="token operator">--</span> Styles <span class="token operator">--</span><span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>style<span class="token operator">&gt;</span>
            <span class="token comment">/*! normalize.css v8.0.1 | MIT License | github.com/necolas/normalize.css */</span>html<span class="token punctuation">{</span>line<span class="token operator">-</span>height<span class="token punctuation">:</span><span class="token number">1.15</span><span class="token punctuation">;</span><span class="token operator">-</span>webkit<span class="token operator">-</span>text<span class="token operator">-</span>size<span class="token operator">-</span>adjust<span class="token punctuation">:</span><span class="token number">100</span><span class="token operator">%</span><span class="token punctuation">}</span>body<span class="token punctuation">{</span>margin<span class="token punctuation">:</span><span class="token number">0</span><span class="token punctuation">}</span>a<span class="token punctuation">{</span>background<span class="token operator">-</span>color<span class="token punctuation">:</span>transparent<span class="token punctuation">}</span><span class="token punctuation">[</span>hidden<span class="token punctuation">]</span><span class="token punctuation">{</span>display<span class="token punctuation">:</span>none<span class="token punctuation">}</span>html<span class="token punctuation">{</span>font<span class="token operator">-</span>family<span class="token punctuation">:</span>system<span class="token operator">-</span>ui<span class="token punctuation">,</span><span class="token operator">-</span>apple<span class="token operator">-</span>system<span class="token punctuation">,</span>BlinkMacSystemFont<span class="token punctuation">,</span>Segoe <span class="token constant">UI</span><span class="token punctuation">,</span>Roboto<span class="token punctuation">,</span>Helvetica Neue<span class="token punctuation">,</span>Arial<span class="token punctuation">,</span>Noto Sans<span class="token punctuation">,</span>sans<span class="token operator">-</span>serif<span class="token punctuation">,</span>Apple Color Emoji<span class="token punctuation">,</span>Segoe <span class="token constant">UI</span> Emoji<span class="token punctuation">,</span>Segoe <span class="token constant">UI</span> Symbol<span class="token punctuation">,</span>Noto Color Emoji<span class="token punctuation">;</span>line<span class="token operator">-</span>height<span class="token punctuation">:</span><span class="token number">1.5</span><span class="token punctuation">}</span><span class="token operator">*</span><span class="token punctuation">,</span><span class="token punctuation">:</span>after<span class="token punctuation">,</span><span class="token punctuation">:</span>before<span class="token punctuation">{</span>box<span class="token operator">-</span>sizing<span class="token punctuation">:</span>border<span class="token operator">-</span>box<span class="token punctuation">;</span>border<span class="token punctuation">:</span><span class="token number">0</span> solid <span class="token comment">#e2e8f0}a{color:inherit;text-decoration:inherit}svg,video{display:block;vertical-align:middle}video{max-width:100%;height:auto}.bg-white{--bg-opacity:1;background-color:#fff;background-color:rgba(255,255,255,var(--bg-opacity))}.bg-gray-100{--bg-opacity:1;background-color:#f7fafc;background-color:rgba(247,250,252,var(--bg-opacity))}.border-gray-200{--border-opacity:1;border-color:#edf2f7;border-color:rgba(237,242,247,var(--border-opacity))}.border-t{border-top-width:1px}.flex{display:flex}.grid{display:grid}.hidden{display:none}.items-center{align-items:center}.justify-center{justify-content:center}.font-semibold{font-weight:600}.h-5{height:1.25rem}.h-8{height:2rem}.h-16{height:4rem}.text-sm{font-size:.875rem}.text-lg{font-size:1.125rem}.leading-7{line-height:1.75rem}.mx-auto{margin-left:auto;margin-right:auto}.ml-1{margin-left:.25rem}.mt-2{margin-top:.5rem}.mr-2{margin-right:.5rem}.ml-2{margin-left:.5rem}.mt-4{margin-top:1rem}.ml-4{margin-left:1rem}.mt-8{margin-top:2rem}.ml-12{margin-left:3rem}.-mt-px{margin-top:-1px}.max-w-6xl{max-width:72rem}.min-h-screen{min-height:100vh}.overflow-hidden{overflow:hidden}.p-6{padding:1.5rem}.py-4{padding-top:1rem;padding-bottom:1rem}.px-6{padding-left:1.5rem;padding-right:1.5rem}.pt-8{padding-top:2rem}.fixed{position:fixed}.relative{position:relative}.top-0{top:0}.right-0{right:0}.shadow{box-shadow:0 1px 3px 0 rgba(0,0,0,.1),0 1px 2px 0 rgba(0,0,0,.06)}.text-center{text-align:center}.text-gray-200{--text-opacity:1;color:#edf2f7;color:rgba(237,242,247,var(--text-opacity))}.text-gray-300{--text-opacity:1;color:#e2e8f0;color:rgba(226,232,240,var(--text-opacity))}.text-gray-400{--text-opacity:1;color:#cbd5e0;color:rgba(203,213,224,var(--text-opacity))}.text-gray-500{--text-opacity:1;color:#a0aec0;color:rgba(160,174,192,var(--text-opacity))}.text-gray-600{--text-opacity:1;color:#718096;color:rgba(113,128,150,var(--text-opacity))}.text-gray-700{--text-opacity:1;color:#4a5568;color:rgba(74,85,104,var(--text-opacity))}.text-gray-900{--text-opacity:1;color:#1a202c;color:rgba(26,32,44,var(--text-opacity))}.underline{text-decoration:underline}.antialiased{-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale}.w-5{width:1.25rem}.w-8{width:2rem}.w-auto{width:auto}.grid-cols-1{grid-template-columns:repeat(1,minmax(0,1fr))}@media (min-width:640px){.sm\:rounded-lg{border-radius:.5rem}.sm\:block{display:block}.sm\:items-center{align-items:center}.sm\:justify-start{justify-content:flex-start}.sm\:justify-between{justify-content:space-between}.sm\:h-20{height:5rem}.sm\:ml-0{margin-left:0}.sm\:px-6{padding-left:1.5rem;padding-right:1.5rem}.sm\:pt-0{padding-top:0}.sm\:text-left{text-align:left}.sm\:text-right{text-align:right}}@media (min-width:768px){.md\:border-t-0{border-top-width:0}.md\:border-l{border-left-width:1px}.md\:grid-cols-2{grid-template-columns:repeat(2,minmax(0,1fr))}}@media (min-width:1024px){.lg\:px-8{padding-left:2rem;padding-right:2rem}}@media (prefers-color-scheme:dark){.dark\:bg-gray-800{--bg-opacity:1;background-color:#2d3748;background-color:rgba(45,55,72,var(--bg-opacity))}.dark\:bg-gray-900{--bg-opacity:1;background-color:#1a202c;background-color:rgba(26,32,44,var(--bg-opacity))}.dark\:border-gray-700{--border-opacity:1;border-color:#4a5568;border-color:rgba(74,85,104,var(--border-opacity))}.dark\:text-white{--text-opacity:1;color:#fff;color:rgba(255,255,255,var(--text-opacity))}.dark\:text-gray-400{--text-opacity:1;color:#cbd5e0;color:rgba(203,213,224,var(--text-opacity))}}</span>
        <span class="token operator">&lt;</span><span class="token operator">/</span>style<span class="token operator">&gt;</span>

        <span class="token operator">&lt;</span>style<span class="token operator">&gt;</span>
            body <span class="token punctuation">{</span>
                font<span class="token operator">-</span>family<span class="token punctuation">:</span> <span class="token string single-quoted-string">'Nunito'</span><span class="token punctuation">,</span> sans<span class="token operator">-</span>serif<span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
        <span class="token operator">&lt;</span><span class="token operator">/</span>style<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span><span class="token operator">/</span>head<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span>body <span class="token keyword">class</span><span class="token operator">=</span><span class="token string double-quoted-string">&quot;antialiased&quot;</span><span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>div <span class="token keyword">class</span><span class="token operator">=</span><span class="token string double-quoted-string">&quot;relative flex items-top justify-center bg-gray-100 dark:bg-gray-900 sm:items-center py-4 sm:pt-0&quot;</span><span class="token operator">&gt;</span>
            @<span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token class-name static-context">Route</span><span class="token operator">::</span><span class="token function">has</span><span class="token punctuation">(</span><span class="token string single-quoted-string">'login'</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
                <span class="token operator">&lt;</span>div <span class="token keyword">class</span><span class="token operator">=</span><span class="token string double-quoted-string">&quot;hidden fixed top-0 right-0 px-6 py-4 sm:block&quot;</span><span class="token operator">&gt;</span>
                    @auth
                        <span class="token operator">&lt;</span>a href<span class="token operator">=</span><span class="token string double-quoted-string">&quot;{{ url('/dashboard') }}&quot;</span> <span class="token keyword">class</span><span class="token operator">=</span><span class="token string double-quoted-string">&quot;text-sm text-gray-700 underline&quot;</span><span class="token operator">&gt;</span>Almacenamiento<span class="token operator">&lt;</span><span class="token operator">/</span>a<span class="token operator">&gt;</span>
                    @<span class="token keyword">else</span>
                        <span class="token operator">&lt;</span>a href<span class="token operator">=</span><span class="token string double-quoted-string">&quot;{{ route('login') }}&quot;</span> <span class="token keyword">class</span><span class="token operator">=</span><span class="token string double-quoted-string">&quot;text-sm text-gray-700 underline&quot;</span><span class="token operator">&gt;</span>Iniciar sesión<span class="token operator">&lt;</span><span class="token operator">/</span>a<span class="token operator">&gt;</span>

                        @<span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token class-name static-context">Route</span><span class="token operator">::</span><span class="token function">has</span><span class="token punctuation">(</span><span class="token string single-quoted-string">'register'</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
                            <span class="token operator">&lt;</span>a href<span class="token operator">=</span><span class="token string double-quoted-string">&quot;{{ route('register') }}&quot;</span> <span class="token keyword">class</span><span class="token operator">=</span><span class="token string double-quoted-string">&quot;ml-4 text-sm text-gray-700 underline&quot;</span><span class="token operator">&gt;</span>Registrarse<span class="token operator">&lt;</span><span class="token operator">/</span>a<span class="token operator">&gt;</span>
                        @<span class="token keyword">endif</span>
                    @endauth
                <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
            @<span class="token keyword">endif</span>
        <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>div <span class="token keyword">class</span><span class="token operator">=</span><span class="token string double-quoted-string">&quot;container&quot;</span><span class="token operator">&gt;</span>
            <span class="token operator">&lt;</span>div <span class="token keyword">class</span><span class="token operator">=</span><span class="token string double-quoted-string">&quot;max-w-6xl mx-auto sm:px-6 lg:px-8 mt-8&quot;</span><span class="token operator">&gt;</span>
                <span class="token operator">&lt;</span>div <span class="token keyword">class</span><span class="token operator">=</span><span class="token string double-quoted-string">&quot;flex justify-center pt-8 sm:justify-start sm:pt-0&quot;</span><span class="token operator">&gt;</span>
                    <span class="token operator">&lt;</span>img src<span class="token operator">=</span><span class="token string double-quoted-string">&quot;https://blogger.googleusercontent.com/img/a/AVvXsEifwlLRSm6XkHMSD_3ZS18OhzoF5pY7dpKVuPt5ViCvAxBDbqvKnSzQYMl39y83DMwBNpFrqWDU6Jz5VAF7gmL3gOCojWmfCOjWGiRx6y5iVSBP9dXAGCsHpgcjwPDZC_fBTO0uFuGJ0ylgE8koEv8C0DxxInz0-ilHyHKw6i3AOKSPOhsjJoP15BWOQQ=s954&quot;</span> alt<span class="token operator">=</span><span class="token string double-quoted-string">&quot;Logo Soluciones++&quot;</span> height<span class="token operator">=</span><span class="token string double-quoted-string">&quot;50&quot;</span><span class="token operator">&gt;</span>
                <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
                
                <span class="token operator">&lt;</span>div <span class="token keyword">class</span><span class="token operator">=</span><span class="token string double-quoted-string">&quot;mt-8 bg-white dark:bg-gray-800 overflow-hidden shadow sm:rounded-lg&quot;</span><span class="token operator">&gt;</span>
                    <span class="token operator">&lt;</span>div <span class="token keyword">class</span><span class="token operator">=</span><span class="token string double-quoted-string">&quot;grid grid-cols-1&quot;</span><span class="token operator">&gt;</span>
                        <span class="token operator">&lt;</span>div <span class="token keyword">class</span><span class="token operator">=</span><span class="token string double-quoted-string">&quot;p-6&quot;</span><span class="token operator">&gt;</span>
                            <span class="token operator">&lt;</span>div <span class="token keyword">class</span><span class="token operator">=</span><span class="token string double-quoted-string">&quot;flex items-center&quot;</span><span class="token operator">&gt;</span>
                                <span class="token operator">&lt;</span>svg fill<span class="token operator">=</span><span class="token string double-quoted-string">&quot;none&quot;</span> stroke<span class="token operator">=</span><span class="token string double-quoted-string">&quot;currentColor&quot;</span> stroke<span class="token operator">-</span>linecap<span class="token operator">=</span><span class="token string double-quoted-string">&quot;round&quot;</span> stroke<span class="token operator">-</span>linejoin<span class="token operator">=</span><span class="token string double-quoted-string">&quot;round&quot;</span> stroke<span class="token operator">-</span>width<span class="token operator">=</span><span class="token string double-quoted-string">&quot;2&quot;</span> viewBox<span class="token operator">=</span><span class="token string double-quoted-string">&quot;0 0 24 24&quot;</span> <span class="token keyword">class</span><span class="token operator">=</span><span class="token string double-quoted-string">&quot;w-8 h-8 text-gray-500&quot;</span><span class="token operator">&gt;</span><span class="token operator">&lt;</span>path d<span class="token operator">=</span><span class="token string double-quoted-string">&quot;M12 6.253v13m0-13C10.832 5.477 9.246 5 7.5 5S4.168 5.477 3 6.253v13C4.168 18.477 5.754 18 7.5 18s3.332.477 4.5 1.253m0-13C13.168 5.477 14.754 5 16.5 5c1.747 0 3.332.477 4.5 1.253v13C19.832 18.477 18.247 18 16.5 18c-1.746 0-3.332.477-4.5 1.253&quot;</span><span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>path<span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>svg<span class="token operator">&gt;</span>
                                <span class="token operator">&lt;</span>div <span class="token keyword">class</span><span class="token operator">=</span><span class="token string double-quoted-string">&quot;ml-4 text-lg leading-7 font-semibold&quot;</span><span class="token operator">&gt;</span><span class="token operator">&lt;</span>a href<span class="token operator">=</span><span class="token string double-quoted-string">&quot;# {{-- Crear vista instructivo --}}&quot;</span> <span class="token keyword">class</span><span class="token operator">=</span><span class="token string double-quoted-string">&quot;underline text-gray-900 dark:text-white&quot;</span><span class="token operator">&gt;</span>Instructivo<span class="token operator">&lt;</span><span class="token operator">/</span>a<span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
                            <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>

                            <span class="token operator">&lt;</span>div <span class="token keyword">class</span><span class="token operator">=</span><span class="token string double-quoted-string">&quot;ml-12&quot;</span><span class="token operator">&gt;</span>
                                <span class="token operator">&lt;</span>div <span class="token keyword">class</span><span class="token operator">=</span><span class="token string double-quoted-string">&quot;mt-2 text-gray-600 dark:text-gray-400 text-sm embed-container&quot;</span><span class="token operator">&gt;</span>
                                    <span class="token operator">&lt;</span>iframe src<span class="token operator">=</span><span class="token string double-quoted-string">&quot;instructivo.html&quot;</span> width<span class="token operator">=</span><span class="token string double-quoted-string">&quot;100%&quot;</span> height<span class="token operator">=</span><span class="token string double-quoted-string">&quot;400&quot;</span><span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>iframe<span class="token operator">&gt;</span>
                                <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
                            <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
                        <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
                    <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
                <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>

                <span class="token operator">&lt;</span>div <span class="token keyword">class</span><span class="token operator">=</span><span class="token string double-quoted-string">&quot;flex justify-center mt-4 sm:items-center sm:justify-between&quot;</span><span class="token operator">&gt;</span>
                    <span class="token operator">&lt;</span>div <span class="token keyword">class</span><span class="token operator">=</span><span class="token string double-quoted-string">&quot;ml-4 text-center text-sm text-gray-500 sm:text-right sm:ml-0&quot;</span><span class="token operator">&gt;</span>
                        Laravel v<span class="token punctuation">{</span><span class="token punctuation">{</span> <span class="token class-name class-name-fully-qualified static-context">Illuminate<span class="token punctuation">\</span>Foundation<span class="token punctuation">\</span>Application</span><span class="token operator">::</span><span class="token constant">VERSION</span> <span class="token punctuation">}</span><span class="token punctuation">}</span> <span class="token punctuation">(</span><span class="token constant">PHP</span> v<span class="token punctuation">{</span><span class="token punctuation">{</span> <span class="token constant">PHP_VERSION</span> <span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token punctuation">)</span>
                    <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
                <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
            <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span><span class="token operator">/</span>body<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>html<span class="token operator">&gt;</span>
</code></pre></div></li> <li>Seleccionar un favicon para la aplicación y almacenarlo en <strong>public\favicon.ico</strong>.</li> <li>Crear documento HTML <strong>public\instructivo.html</strong>:<div class="language-html extra-class"><pre class="language-html"><code><span class="token doctype"><span class="token punctuation">&lt;!</span><span class="token doctype-tag">DOCTYPE</span> <span class="token name">html</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>html</span> <span class="token attr-name">lang</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>es<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>head</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>meta</span> <span class="token attr-name">charset</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>UTF-8<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>meta</span> <span class="token attr-name">http-equiv</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>X-UA-Compatible<span class="token punctuation">&quot;</span></span> <span class="token attr-name">content</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>IE=edge<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>meta</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>viewport<span class="token punctuation">&quot;</span></span> <span class="token attr-name">content</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>width=device-width, initial-scale=1.0<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>title</span><span class="token punctuation">&gt;</span></span>Instructivo | Soluciones++<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>title</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>head</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>body</span><span class="token punctuation">&gt;</span></span>
    ESTE DOCUMENTO SE REESCRIBIRÁ COMPLETAMENTE MÁS ADELANTE
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>body</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>html</span><span class="token punctuation">&gt;</span></span>  
</code></pre></div><strong>Nota</strong>: si estas elaborando tu instructivo en formato Markdown puedes convertirlo a HTML en:
<ul><li>https://dillinger.io</li></ul></li> <li>Cambiar logo de la aplicación en <strong>resources\views\components\application-logo.blade.php</strong>:<div class="language-php extra-class"><pre class="language-php"><code><span class="token operator">&lt;</span>img src<span class="token operator">=</span><span class="token string double-quoted-string">&quot;https://blogger.googleusercontent.com/img/a/AVvXsEi6G3DYPhX_zU3sA_hSYxJ4DN_FW9jZOtVTnMPyGx4Po-hzAu2CiyY-LWhMIgNwud0uVrwVn0tBcEZvHqTtIDeIQA9zkYQguDXgB48jhNcpzgh-WIo6ZW9UW_PYGCrn4R2XInHdF1YxSP2kk1ldHlCTr_fDhzXpLnwNbhYJ5JMCcFfUFvW7x_NKJBPY6g=s314&quot;</span> alt<span class="token operator">=</span><span class="token string double-quoted-string">&quot;Logo Soluciones++&quot;</span><span class="token operator">&gt;</span>
</code></pre></div></li> <li>Agregar CDN CSS de Bootstrap al <strong>head</strong> de la plantilla <strong>resources\views\layouts\app.blade.php</strong>:<div class="language-php extra-class"><pre class="language-php"><code><span class="token operator">&lt;</span><span class="token operator">!</span><span class="token operator">--</span> <span class="token constant">CSS</span> only <span class="token operator">--</span><span class="token operator">&gt;</span>
<span class="token operator">&lt;</span>link href<span class="token operator">=</span><span class="token string double-quoted-string">&quot;https://cdn.jsdelivr.net/npm/bootstrap@5.1.0/dist/css/bootstrap.min.css&quot;</span> rel<span class="token operator">=</span><span class="token string double-quoted-string">&quot;stylesheet&quot;</span> integrity<span class="token operator">=</span><span class="token string double-quoted-string">&quot;sha384-KyZXEAg3QhqLMpG8r+8fhAXLRk2vvoC2f3B09zVXn8CA5QIVfZOJ3BCsw2P0p/We&quot;</span> crossorigin<span class="token operator">=</span><span class="token string double-quoted-string">&quot;anonymous&quot;</span><span class="token operator">&gt;</span>
</code></pre></div></li> <li>En caso de que querer personalizar las vistas relacionadas con la autenticación de usuarios, estas se encuentran ubicadas en <strong>resources\views\auth</strong>.</li></ol> <h2 id="subir-proyecto-a-github"><a href="#subir-proyecto-a-github" class="header-anchor">#</a> Subir proyecto a GitHub:</h2> <ol><li>Ir a la página de GitHub e iniciar sesión:
<ul><li>https://github.com</li></ul></li> <li>Crear un nuevo repositorio y darle el nombre de <strong>file</strong>.</li> <li>Abrir una terminal en la raíz de nuestro proyecto <strong>file</strong> en local y ejecutar:
<ul><li>$ git init</li> <li>$ git add .</li> <li>$ git commit -m &quot;Primer commit&quot;</li> <li>$ git branch -M main</li> <li>$ git remote add origin https://github.com/petrix12/file.git</li> <li>$ git push -u origin main</li></ul></li></ol> <h2 id="deploy-en-heroku"><a href="#deploy-en-heroku" class="header-anchor">#</a> Deploy en Heroku:</h2> <ol><li>Crear en la raíz del proyecto el archivo <strong>Procfile</strong> (sin extensión) para elegir un servidor apache en Heroku y también indicarle la ubicación del archivo <strong>index.php</strong>:<div class="language-txt extra-class"><pre class="language-txt"><code>web: vendor/bin/heroku-php-apache2 public/
</code></pre></div></li> <li>Iniciar sesión en la página de Heroku e ir a Dashboard:
<ul><li>https://dashboard.heroku.com/apps</li></ul></li> <li>Crear un nuevo proyecto en <strong>New</strong> &gt; <strong>Create new app</strong>:
<ul><li>Nombre: solucionespp-file
<strong>Nota</strong>: Escoger un nombre de tu elección.</li></ul></li> <li>Ir a <strong>Deploy</strong> y dar clic en <strong>GitHub</strong>.</li> <li>Clic en el botón <strong>Connect to GitHub</strong> e ingresar las credenciales.</li> <li>Seleccionar el repositorio <strong>petrix12/file</strong> y presionar el botón <strong>Connect</strong>.</li> <li>Para tener siempre la ultima actualización de <strong>GitHub</strong> de nuestro proyecto presionar el botón <strong>Enable Automatic Deploys</strong>.</li> <li>Presionar el botón <strong>Deploy Branch</strong>.</li> <li>Descargar e instalar Heroku CLI:
<ul><li>https://devcenter.heroku.com/articles/heroku-cli
<strong>Nota</strong>: si no ejecuta desde VSC ejecutar:</li> <li>$ Set-ExecutionPolicy -Scope CurrentUser -ExecutionPolicy Unrestricted</li></ul></li> <li>Ir a la terminal del proyecto y ejecutar:
<ol><li>Iniciar sesión en Heroku:
<ul><li>$ heroku login</li></ul></li> <li>Víncular nuestro proyecto <strong>file</strong> con la aplicación de Heroku <strong>solucionespp-file</strong>:
<ul><li>$ git remote add heroku git.heroku.com/solucionespp-file.git</li> <li>$ heroku git:remote -a solucionespp-file</li></ul></li> <li>Registrar variables de entorno de la aplicación desde la terminal:
<ul><li>$ heroku config:add APP_NAME=&quot;File Soluciones++&quot;</li> <li>$ heroku config:add APP_ENV=production</li> <li>$ heroku config:add APP_KEY=base64:+K2OTyzMC5qJ2OceRZtbEkHnuW7hxN8itZwYqW+BVEQ=</li> <li>$ heroku config:add APP_DEBUG=true</li> <li>$ heroku config:add APP_URL=https://solucionespp-file.herokuapp.com/</li></ul></li> <li>Crear base de datos Postgre SQL desde la terminal:
<ul><li>$ heroku addons:create heroku-postgresql:hobby-dev</li> <li>$ heroku pg:credentials:url
<strong>Nota</strong>: la salida de la última línea de comando nos servirá para configurar las variables de entorno de la base de datos:</li></ul> <div class="language-txt extra-class"><pre class="language-txt"><code>»   Warning: heroku update available from 7.52.0 to 7.56.1.
Connection information for default credential.
Connection info string:
&quot;dbname=dcf4kqn86o0p64 host=ec2-34-197-105-186.compute-1.amazonaws.com port=5432 user=zsefyveumlxgjx password=b3e5638aef880fcc42f00083b6c0bbffe7b58e4e0002664b5660e7fe7b7c6d56 sslmode=require&quot;
Connection URL:
postgres://zsefyveumlxgjx:b3e5638aef880fcc42f00083b6c0bbffe7b58e4e0002664b5660e7fe7b7c6d56@ec2-34-197-105-186.compute-1.amazonaws.com:5432/dcf4kqn86o0p64
</code></pre></div></li> <li>Registrar variables de entorno de la base de datos desde la terminal:
<ul><li>$ heroku config:add DB_CONNECTION=pgsql</li> <li>$ heroku config:add DB_HOST=ec2-34-197-105-186.compute-1.amazonaws.com</li> <li>$ heroku config:add DB_PORT=5432</li> <li>$ heroku config:add DB_DATABASE=dcf4kqn86o0p64</li> <li>$ heroku config:add DB_USERNAME=zsefyveumlxgjx</li> <li>$ heroku config:add DB_PASSWORD=b3e5638aef880fcc42f00083b6c0bbffe7b58e4e0002664b5660e7fe7b7c6d56 sslmode=require</li></ul></li> <li>Ejecutar migraciones:
<ul><li>$ heroku run bash</li> <li>~ $ php artisan migrate
<ul><li>Do you really wish to run this command? (yes/no) [no]: yes</li></ul></li> <li>~ $ exit</li></ul></li> <li>Salir de Heroku:
<ul><li>$ heroku logout</li></ul></li> <li>Desconectar con repositorio Heroku:
<ul><li>$ git remote rm heroku
<strong>Nota</strong>: La carga de nuestro proyecto en el servidor de Heroku puede tardar minutos, e incluso horas.</li></ul></li></ol></li></ol> <h2 id="integrar-sweetalert"><a href="#integrar-sweetalert" class="header-anchor">#</a> Integrar SweetAlert</h2> <p><strong>URL</strong>: https://github.com/realrashid/sweet-alert</p> <ol><li>Ejecutar:
<ul><li>$ composer require realrashid/sweet-alert</li></ul></li> <li>Agregar los servicios de <strong>SweetAlert</strong>  en la sección <strong>providers</strong> del archivo de configuración <strong>config\app.php</strong>:<div class="language-php extra-class"><pre class="language-php"><code><span class="token string single-quoted-string">'providers'</span> <span class="token operator">=&gt;</span> <span class="token punctuation">[</span>
    <span class="token comment">/*
    * Package Service Providers...
    */</span>
    <span class="token class-name class-name-fully-qualified static-context">RealRashid<span class="token punctuation">\</span>SweetAlert<span class="token punctuation">\</span>SweetAlertServiceProvider</span><span class="token operator">::</span><span class="token keyword">class</span><span class="token punctuation">,</span>

     <span class="token comment">/*
     * Application Service Providers...
     */</span>
<span class="token punctuation">]</span><span class="token punctuation">,</span>
</code></pre></div></li> <li>Agregar el facade de <strong>SweetAlert</strong>  en la sección <strong>aliases</strong> del archivo de configuración <strong>config\app.php</strong>:<div class="language-php extra-class"><pre class="language-php"><code><span class="token string single-quoted-string">'aliases'</span> <span class="token operator">=&gt;</span> <span class="token punctuation">[</span>
    ≡
    <span class="token string single-quoted-string">'Alert'</span> <span class="token operator">=&gt;</span> <span class="token class-name class-name-fully-qualified static-context">RealRashid<span class="token punctuation">\</span>SweetAlert<span class="token punctuation">\</span>Facades<span class="token punctuation">\</span>Alert</span><span class="token operator">::</span><span class="token keyword">class</span><span class="token punctuation">,</span>
<span class="token punctuation">]</span><span class="token punctuation">,</span>
</code></pre></div></li> <li>Importar el facade de <strong>SweetAlert</strong> en la cabecera del controlador <strong>app\Http\Controllers\FilesController.php</strong>:<div class="language-php extra-class"><pre class="language-php"><code><span class="token keyword">use</span> <span class="token package">RealRashid<span class="token punctuation">\</span>SweetAlert<span class="token punctuation">\</span>Facades<span class="token punctuation">\</span>Alert</span><span class="token punctuation">;</span>
</code></pre></div></li> <li>Insertar el siguiente código en la sección <strong>Page Content</strong> de la plantilla <strong>resources\views\layouts\app.blade.php</strong>:<div class="language-php extra-class"><pre class="language-php"><code><span class="token operator">&lt;</span><span class="token operator">!</span><span class="token operator">--</span> Page Content <span class="token operator">--</span><span class="token operator">&gt;</span>
<span class="token operator">&lt;</span>main<span class="token operator">&gt;</span>
    <span class="token punctuation">{</span><span class="token punctuation">{</span> <span class="token variable">$slot</span> <span class="token punctuation">}</span><span class="token punctuation">}</span>
    @<span class="token keyword">include</span><span class="token punctuation">(</span><span class="token string single-quoted-string">'sweetalert::alert'</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token string single-quoted-string">'cdn'</span> <span class="token operator">=&gt;</span> <span class="token string double-quoted-string">&quot;https://cdn.jsdelivr.net/npm/sweetalert2@9&quot;</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>main<span class="token operator">&gt;</span>
</code></pre></div><strong>Nota</strong>: si falla, reemplazar por:<div class="language-php extra-class"><pre class="language-php"><code><span class="token operator">&lt;</span><span class="token operator">!</span><span class="token operator">--</span> Page Content <span class="token operator">--</span><span class="token operator">&gt;</span>
<span class="token operator">&lt;</span>main<span class="token operator">&gt;</span>
    <span class="token punctuation">{</span><span class="token punctuation">{</span> <span class="token variable">$slot</span> <span class="token punctuation">}</span><span class="token punctuation">}</span>
    @<span class="token keyword">include</span><span class="token punctuation">(</span><span class="token string single-quoted-string">'sweetalert::alert'</span><span class="token punctuation">)</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>main<span class="token operator">&gt;</span>
</code></pre></div></li> <li>Realizar commit Integración SweetAlert:
<ul><li>$ git add .</li> <li>$ git commit -m &quot;Integración SweetAlert&quot;</li> <li>$ git push -u origin main</li></ul></li></ol> <h2 id="crear-mvc-modelo-vista-controlador-file"><a href="#crear-mvc-modelo-vista-controlador-file" class="header-anchor">#</a> Crear MVC (Modelo - Vista - Controlador) File:</h2> <ol><li>Crear modelo <strong>File</strong> junto a su migración:
<ul><li>$ php artisan make:model File -m</li></ul></li> <li>Agregar campos <strong>name</strong> y <strong>code_name</strong> y la clave foránea <strong>user_id</strong> a la migración de la tabla <strong>files</strong> (database\migrations\2021_08_19_213814_create_files_table.php):<div class="language-php extra-class"><pre class="language-php"><code><span class="token keyword">public</span> <span class="token keyword">function</span> <span class="token function-definition function">up</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    <span class="token class-name static-context">Schema</span><span class="token operator">::</span><span class="token function">create</span><span class="token punctuation">(</span><span class="token string single-quoted-string">'files'</span><span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token class-name type-declaration">Blueprint</span> <span class="token variable">$table</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token variable">$table</span><span class="token operator">-&gt;</span><span class="token function">id</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token variable">$table</span><span class="token operator">-&gt;</span><span class="token keyword type-declaration">string</span><span class="token punctuation">(</span><span class="token string single-quoted-string">'name'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                 <span class="token comment">// Nombre del archivo</span>
        <span class="token variable">$table</span><span class="token operator">-&gt;</span><span class="token function">text</span><span class="token punctuation">(</span><span class="token string single-quoted-string">'code_name'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>              <span class="token comment">// Nombre del archivo encriptado</span>
        <span class="token variable">$table</span><span class="token operator">-&gt;</span><span class="token function">unsignedBigInteger</span><span class="token punctuation">(</span><span class="token string single-quoted-string">'user_id'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">// Relación con los usuarios (clave foránea)</span>
        <span class="token variable">$table</span><span class="token operator">-&gt;</span><span class="token function">foreign</span><span class="token punctuation">(</span><span class="token string single-quoted-string">'user_id'</span><span class="token punctuation">)</span>
            <span class="token operator">-&gt;</span><span class="token function">references</span><span class="token punctuation">(</span><span class="token string single-quoted-string">'id'</span><span class="token punctuation">)</span>
            <span class="token operator">-&gt;</span><span class="token function">on</span><span class="token punctuation">(</span><span class="token string single-quoted-string">'users'</span><span class="token punctuation">)</span>
            <span class="token operator">-&gt;</span><span class="token function">onDelete</span><span class="token punctuation">(</span><span class="token string single-quoted-string">'cascade'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token variable">$table</span><span class="token operator">-&gt;</span><span class="token function">timestamps</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div></li> <li>Indicar campos de asignación masiva en el modelo <strong>File</strong> (app\Models\File.php):<div class="language-php extra-class"><pre class="language-php"><code>≡
<span class="token keyword">protected</span> <span class="token variable">$fillable</span> <span class="token operator">=</span> <span class="token punctuation">[</span>
    <span class="token string single-quoted-string">'name'</span><span class="token punctuation">,</span>
    <span class="token string single-quoted-string">'code_name'</span><span class="token punctuation">,</span>
    <span class="token string single-quoted-string">'user_id'</span>
<span class="token punctuation">]</span><span class="token punctuation">;</span>
≡
</code></pre></div></li> <li>Crear controlador que administre el modelo <strong>File</strong> con todos los métodos para hacer un CRUD:
<ul><li>$ php artisan make:controller FilesController -r
<strong>Nota</strong>: Solamente trabajaremos con los métodos <strong>index</strong>, <strong>create</strong> y <strong>store</strong>.</li></ul></li> <li>Ejecutar migración:
<ul><li>$ php artisan migrate</li></ul></li> <li>Importar el controlador <strong>FilesController</strong> en el archivo de rutas <strong>routes\web.php</strong>:<div class="language-php extra-class"><pre class="language-php"><code><span class="token keyword">use</span> <span class="token package">App<span class="token punctuation">\</span>Http<span class="token punctuation">\</span>Controllers<span class="token punctuation">\</span>FilesController</span><span class="token punctuation">;</span>
</code></pre></div></li> <li>Agregar las rutas para el CRUD File en <strong>routes\web.php</strong>:<div class="language-php extra-class"><pre class="language-php"><code><span class="token class-name static-context">Route</span><span class="token operator">::</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string single-quoted-string">'files'</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token class-name static-context">FilesController</span><span class="token operator">::</span><span class="token keyword">class</span><span class="token punctuation">,</span> <span class="token string single-quoted-string">'index'</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token operator">-&gt;</span><span class="token function">name</span><span class="token punctuation">(</span><span class="token string single-quoted-string">'user.files.index'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token class-name static-context">Route</span><span class="token operator">::</span><span class="token function">post</span><span class="token punctuation">(</span><span class="token string single-quoted-string">'upload'</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token class-name static-context">FilesController</span><span class="token operator">::</span><span class="token keyword">class</span><span class="token punctuation">,</span> <span class="token string single-quoted-string">'store'</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token operator">-&gt;</span><span class="token function">name</span><span class="token punctuation">(</span><span class="token string single-quoted-string">'user.files.store'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token class-name static-context">Route</span><span class="token operator">::</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string single-quoted-string">'files/{file}'</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token class-name static-context">FilesController</span><span class="token operator">::</span><span class="token keyword">class</span><span class="token punctuation">,</span> <span class="token string single-quoted-string">'show'</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token operator">-&gt;</span><span class="token function">name</span><span class="token punctuation">(</span><span class="token string single-quoted-string">'user.files.show'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token class-name static-context">Route</span><span class="token operator">::</span><span class="token function">delete</span><span class="token punctuation">(</span><span class="token string single-quoted-string">'delete/{file}'</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token class-name static-context">FilesController</span><span class="token operator">::</span><span class="token keyword">class</span><span class="token punctuation">,</span> <span class="token string single-quoted-string">'destroy'</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token operator">-&gt;</span><span class="token function">name</span><span class="token punctuation">(</span><span class="token string single-quoted-string">'user.files.destroy'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div></li> <li>Crear menú <strong>Mis archivos</strong> en la plantilla de navegación <strong>resources\views\layouts\navigation.blade.php</strong>:<div class="language-php extra-class"><pre class="language-php"><code><span class="token operator">&lt;</span>nav x<span class="token operator">-</span>data<span class="token operator">=</span><span class="token string double-quoted-string">&quot;{ open: false }&quot;</span> <span class="token keyword">class</span><span class="token operator">=</span><span class="token string double-quoted-string">&quot;bg-white border-b border-gray-100&quot;</span><span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span><span class="token operator">!</span><span class="token operator">--</span> Primary Navigation Menu <span class="token operator">--</span><span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span>div <span class="token keyword">class</span><span class="token operator">=</span><span class="token string double-quoted-string">&quot;max-w-7xl mx-auto px-4 sm:px-6 lg:px-8&quot;</span><span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>div <span class="token keyword">class</span><span class="token operator">=</span><span class="token string double-quoted-string">&quot;flex justify-between h-16&quot;</span><span class="token operator">&gt;</span>
            <span class="token operator">&lt;</span>div <span class="token keyword">class</span><span class="token operator">=</span><span class="token string double-quoted-string">&quot;flex&quot;</span><span class="token operator">&gt;</span>
                <span class="token operator">&lt;</span><span class="token operator">!</span><span class="token operator">--</span> Logo <span class="token operator">--</span><span class="token operator">&gt;</span>
                ≡
                <span class="token operator">&lt;</span><span class="token operator">!</span><span class="token operator">--</span> Navigation Links <span class="token operator">--</span><span class="token operator">&gt;</span>
                <span class="token operator">&lt;</span>div <span class="token keyword">class</span><span class="token operator">=</span><span class="token string double-quoted-string">&quot;hidden space-x-8 sm:-my-px sm:ml-10 sm:flex&quot;</span><span class="token operator">&gt;</span>
                    <span class="token operator">&lt;</span>x<span class="token operator">-</span>nav<span class="token operator">-</span>link <span class="token punctuation">:</span>href<span class="token operator">=</span><span class="token string double-quoted-string">&quot;route('dashboard')&quot;</span> <span class="token punctuation">:</span>active<span class="token operator">=</span><span class="token string double-quoted-string">&quot;request()-&gt;routeIs('dashboard')&quot;</span><span class="token operator">&gt;</span>
                        <span class="token punctuation">{</span><span class="token punctuation">{</span> <span class="token function">__</span><span class="token punctuation">(</span><span class="token string single-quoted-string">'Dashboard'</span><span class="token punctuation">)</span> <span class="token punctuation">}</span><span class="token punctuation">}</span>
                    <span class="token operator">&lt;</span><span class="token operator">/</span>x<span class="token operator">-</span>nav<span class="token operator">-</span>link<span class="token operator">&gt;</span>
                <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>

                <span class="token operator">&lt;</span><span class="token operator">!</span><span class="token operator">--</span> Mis archivos Links <span class="token operator">--</span><span class="token operator">&gt;</span>
                <span class="token operator">&lt;</span>div <span class="token keyword">class</span><span class="token operator">=</span><span class="token string double-quoted-string">&quot;hidden space-x-8 sm:-my-px sm:ml-10 sm:flex&quot;</span><span class="token operator">&gt;</span>
                    <span class="token operator">&lt;</span>x<span class="token operator">-</span>nav<span class="token operator">-</span>link <span class="token punctuation">:</span>href<span class="token operator">=</span><span class="token string double-quoted-string">&quot;route('user.files.index')&quot;</span> <span class="token punctuation">:</span>active<span class="token operator">=</span><span class="token string double-quoted-string">&quot;request()-&gt;routeIs('user.files.index')&quot;</span><span class="token operator">&gt;</span>
                        Mis archivos
                    <span class="token operator">&lt;</span><span class="token operator">/</span>x<span class="token operator">-</span>nav<span class="token operator">-</span>link<span class="token operator">&gt;</span>
                <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
            <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
            ≡
        <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>

    <span class="token operator">&lt;</span><span class="token operator">!</span><span class="token operator">--</span> Responsive Navigation Menu <span class="token operator">--</span><span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span>div <span class="token punctuation">:</span><span class="token keyword">class</span><span class="token operator">=</span><span class="token string double-quoted-string">&quot;{'block': open, 'hidden': ! open}&quot;</span> <span class="token keyword">class</span><span class="token operator">=</span><span class="token string double-quoted-string">&quot;hidden sm:hidden&quot;</span><span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>div <span class="token keyword">class</span><span class="token operator">=</span><span class="token string double-quoted-string">&quot;pt-2 pb-3 space-y-1&quot;</span><span class="token operator">&gt;</span>
            <span class="token operator">&lt;</span>x<span class="token operator">-</span>responsive<span class="token operator">-</span>nav<span class="token operator">-</span>link <span class="token punctuation">:</span>href<span class="token operator">=</span><span class="token string double-quoted-string">&quot;route('dashboard')&quot;</span> <span class="token punctuation">:</span>active<span class="token operator">=</span><span class="token string double-quoted-string">&quot;request()-&gt;routeIs('dashboard')&quot;</span><span class="token operator">&gt;</span>
                <span class="token punctuation">{</span><span class="token punctuation">{</span> <span class="token function">__</span><span class="token punctuation">(</span><span class="token string single-quoted-string">'Dashboard'</span><span class="token punctuation">)</span> <span class="token punctuation">}</span><span class="token punctuation">}</span>
            <span class="token operator">&lt;</span><span class="token operator">/</span>x<span class="token operator">-</span>responsive<span class="token operator">-</span>nav<span class="token operator">-</span>link<span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>

        <span class="token operator">&lt;</span>div <span class="token keyword">class</span><span class="token operator">=</span><span class="token string double-quoted-string">&quot;pt-2 pb-3 space-y-1&quot;</span><span class="token operator">&gt;</span>
            <span class="token operator">&lt;</span>x<span class="token operator">-</span>responsive<span class="token operator">-</span>nav<span class="token operator">-</span>link <span class="token punctuation">:</span>href<span class="token operator">=</span><span class="token string double-quoted-string">&quot;route('user.files.index')&quot;</span> <span class="token punctuation">:</span>active<span class="token operator">=</span><span class="token string double-quoted-string">&quot;request()-&gt;routeIs('user.files.index')&quot;</span><span class="token operator">&gt;</span>
                Mis archivos
            <span class="token operator">&lt;</span><span class="token operator">/</span>x<span class="token operator">-</span>responsive<span class="token operator">-</span>nav<span class="token operator">-</span>link<span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
        ≡
    <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>nav<span class="token operator">&gt;</span>
</code></pre></div></li> <li>Modificar la vista <strong>dashboard</strong> (resources\views\dashboard.blade.php):<div class="language-php extra-class"><pre class="language-php"><code><span class="token operator">&lt;</span>x<span class="token operator">-</span>app<span class="token operator">-</span>layout<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span>x<span class="token operator">-</span>slot name<span class="token operator">=</span><span class="token string double-quoted-string">&quot;header&quot;</span><span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>h2 <span class="token keyword">class</span><span class="token operator">=</span><span class="token string double-quoted-string">&quot;font-semibold text-xl text-gray-800 leading-tight&quot;</span><span class="token operator">&gt;</span>
            <span class="token punctuation">{</span><span class="token punctuation">{</span> <span class="token function">__</span><span class="token punctuation">(</span><span class="token string single-quoted-string">'Dashboard'</span><span class="token punctuation">)</span> <span class="token punctuation">}</span><span class="token punctuation">}</span>
        <span class="token operator">&lt;</span><span class="token operator">/</span>h2<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span><span class="token operator">/</span>x<span class="token operator">-</span>slot<span class="token operator">&gt;</span>

    <span class="token operator">&lt;</span>div <span class="token keyword">class</span><span class="token operator">=</span><span class="token string double-quoted-string">&quot;py-12&quot;</span><span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>div <span class="token keyword">class</span><span class="token operator">=</span><span class="token string double-quoted-string">&quot;container&quot;</span><span class="token operator">&gt;</span>
            <span class="token operator">&lt;</span>div <span class="token keyword">class</span><span class="token operator">=</span><span class="token string double-quoted-string">&quot;row justify-content-center&quot;</span><span class="token operator">&gt;</span>
                <span class="token operator">&lt;</span>div <span class="token keyword">class</span><span class="token operator">=</span><span class="token string double-quoted-string">&quot;card&quot;</span><span class="token operator">&gt;</span>
                    <span class="token punctuation">{</span><span class="token punctuation">{</span><span class="token operator">--</span> <span class="token operator">&lt;</span>div <span class="token keyword">class</span><span class="token operator">=</span><span class="token string double-quoted-string">&quot;card-header&quot;</span><span class="token operator">&gt;</span><span class="token punctuation">{</span><span class="token punctuation">{</span> <span class="token function">__</span><span class="token punctuation">(</span><span class="token string single-quoted-string">'Subir archivos'</span><span class="token punctuation">)</span> <span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span> <span class="token operator">--</span><span class="token punctuation">}</span><span class="token punctuation">}</span>
                    <span class="token operator">&lt;</span>p <span class="token keyword">class</span><span class="token operator">=</span><span class="token string double-quoted-string">&quot;text-xl m-2 text-gray-600&quot;</span><span class="token operator">&gt;</span>Subir archivos<span class="token operator">&lt;</span><span class="token operator">/</span>p<span class="token operator">&gt;</span>
                    <span class="token operator">&lt;</span>form action<span class="token operator">=</span><span class="token string double-quoted-string">&quot;{{ route('user.files.store')}}&quot;</span> method<span class="token operator">=</span><span class="token string double-quoted-string">&quot;POST&quot;</span> enctype<span class="token operator">=</span><span class="token string double-quoted-string">&quot;multipart/form-data&quot;</span><span class="token operator">&gt;</span>
                        @csrf
                        <span class="token operator">&lt;</span>input type<span class="token operator">=</span><span class="token string double-quoted-string">&quot;file&quot;</span> name<span class="token operator">=</span><span class="token string double-quoted-string">&quot;files[]&quot;</span> multiple <span class="token keyword">class</span><span class="token operator">=</span><span class="token string double-quoted-string">&quot;form-control&quot;</span> required<span class="token operator">&gt;</span>
                        <span class="token operator">&lt;</span>button type<span class="token operator">=</span><span class="token string double-quoted-string">&quot;submit&quot;</span> <span class="token keyword">class</span><span class="token operator">=</span><span class="token string double-quoted-string">&quot;my-4 btn btn-secondary float-right&quot;</span><span class="token operator">&gt;</span>
                            Subir
                        <span class="token operator">&lt;</span><span class="token operator">/</span>button<span class="token operator">&gt;</span>
                    <span class="token operator">&lt;</span><span class="token operator">/</span>form<span class="token operator">&gt;</span>
                <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
            <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>x<span class="token operator">-</span>app<span class="token operator">-</span>layout<span class="token operator">&gt;</span>
</code></pre></div></li> <li>Crear enlace simbólico de public a storage:
<ul><li>$ php artisan storage:link</li></ul></li> <li>Importar el modelo <strong>File</strong> y los facades <strong>Auth</strong> y <strong>Storage</strong> en el controlador <strong>app\Http\Controllers\FilesController.php</strong>:<div class="language-php extra-class"><pre class="language-php"><code><span class="token keyword">use</span> <span class="token package">App<span class="token punctuation">\</span>Models<span class="token punctuation">\</span>File</span><span class="token punctuation">;</span>
<span class="token keyword">use</span> <span class="token package">Illuminate<span class="token punctuation">\</span>Support<span class="token punctuation">\</span>Facades<span class="token punctuation">\</span>Auth</span><span class="token punctuation">;</span>
<span class="token keyword">use</span> <span class="token package">Illuminate<span class="token punctuation">\</span>Support<span class="token punctuation">\</span>Facades<span class="token punctuation">\</span>Storage</span><span class="token punctuation">;</span>
<span class="token keyword">use</span> <span class="token package">Illuminate<span class="token punctuation">\</span>Support<span class="token punctuation">\</span>Str</span><span class="token punctuation">;</span>
</code></pre></div></li> <li>Programar el método <strong>index</strong> del controlador <strong>app\Http\Controllers\FilesController.php</strong>:<div class="language-php extra-class"><pre class="language-php"><code><span class="token keyword">public</span> <span class="token keyword">function</span> <span class="token function-definition function">index</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    <span class="token variable">$files</span> <span class="token operator">=</span> <span class="token class-name static-context">File</span><span class="token operator">::</span><span class="token function">whereUserId</span><span class="token punctuation">(</span><span class="token class-name static-context">Auth</span><span class="token operator">::</span><span class="token function">id</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token operator">-&gt;</span><span class="token function">latest</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">-&gt;</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span> <span class="token function">view</span><span class="token punctuation">(</span><span class="token string single-quoted-string">'index'</span><span class="token punctuation">,</span> <span class="token function">compact</span><span class="token punctuation">(</span><span class="token string single-quoted-string">'files'</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div></li> <li>Crear vista para el método <strong>index</strong> (resources\views\index.blade.php) del controlador <strong>app\Http\Controllers\FilesController.php</strong>:<div class="language-php extra-class"><pre class="language-php"><code><span class="token operator">&lt;</span>x<span class="token operator">-</span>app<span class="token operator">-</span>layout<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span>x<span class="token operator">-</span>slot name<span class="token operator">=</span><span class="token string double-quoted-string">&quot;header&quot;</span><span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>h2 <span class="token keyword">class</span><span class="token operator">=</span><span class="token string double-quoted-string">&quot;font-semibold text-xl text-gray-800 leading-tight&quot;</span><span class="token operator">&gt;</span>
            Mis archivos
        <span class="token operator">&lt;</span><span class="token operator">/</span>h2<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span><span class="token operator">/</span>x<span class="token operator">-</span>slot<span class="token operator">&gt;</span>

    <span class="token operator">&lt;</span>div <span class="token keyword">class</span><span class="token operator">=</span><span class="token string double-quoted-string">&quot;py-12&quot;</span><span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>div <span class="token keyword">class</span><span class="token operator">=</span><span class="token string double-quoted-string">&quot;container&quot;</span><span class="token operator">&gt;</span>
            <span class="token operator">&lt;</span>div <span class="token keyword">class</span><span class="token operator">=</span><span class="token string double-quoted-string">&quot;row justify-content-center&quot;</span><span class="token operator">&gt;</span>
                <span class="token operator">&lt;</span>div <span class="token keyword">class</span><span class="token operator">=</span><span class="token string double-quoted-string">&quot;card&quot;</span><span class="token operator">&gt;</span>
                    <span class="token operator">&lt;</span>h1 <span class="token keyword">class</span><span class="token operator">=</span><span class="token string double-quoted-string">&quot;col-md-8 text-xl text-gray-600 m-2&quot;</span><span class="token operator">&gt;</span><span class="token operator">&lt;</span>strong<span class="token operator">&gt;</span>Lista de archivos<span class="token operator">&lt;</span><span class="token operator">/</span>strong<span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>h1<span class="token operator">&gt;</span>
                    @<span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token variable">$files</span><span class="token operator">-&gt;</span><span class="token function">count</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
                        <span class="token operator">&lt;</span>table <span class="token keyword">class</span><span class="token operator">=</span><span class="token string double-quoted-string">&quot;table table-striped&quot;</span><span class="token operator">&gt;</span>
                            <span class="token operator">&lt;</span>thead<span class="token operator">&gt;</span>
                                <span class="token operator">&lt;</span>tr<span class="token operator">&gt;</span>
                                    <span class="token operator">&lt;</span>th scope<span class="token operator">=</span><span class="token string double-quoted-string">&quot;col&quot;</span><span class="token operator">&gt;</span><span class="token constant">ID</span><span class="token operator">&lt;</span><span class="token operator">/</span>th<span class="token operator">&gt;</span>
                                    <span class="token operator">&lt;</span>th scope<span class="token operator">=</span><span class="token string double-quoted-string">&quot;col&quot;</span><span class="token operator">&gt;</span>Nombre del archivo<span class="token operator">&lt;</span><span class="token operator">/</span>th<span class="token operator">&gt;</span>
                                    <span class="token operator">&lt;</span>th scope<span class="token operator">=</span><span class="token string double-quoted-string">&quot;col&quot;</span><span class="token operator">&gt;</span>Ruta<span class="token operator">&lt;</span><span class="token operator">/</span>th<span class="token operator">&gt;</span>
                                    <span class="token operator">&lt;</span>th scope<span class="token operator">=</span><span class="token string double-quoted-string">&quot;col&quot;</span><span class="token operator">&gt;</span>Ver<span class="token operator">&lt;</span><span class="token operator">/</span>th<span class="token operator">&gt;</span>
                                    <span class="token operator">&lt;</span>th scope<span class="token operator">=</span><span class="token string double-quoted-string">&quot;col&quot;</span><span class="token operator">&gt;</span>Eliminar<span class="token operator">&lt;</span><span class="token operator">/</span>th<span class="token operator">&gt;</span>
                                <span class="token operator">&lt;</span><span class="token operator">/</span>tr<span class="token operator">&gt;</span>
                            <span class="token operator">&lt;</span><span class="token operator">/</span>thead<span class="token operator">&gt;</span>
                            <span class="token operator">&lt;</span>tbody<span class="token operator">&gt;</span>
                                @<span class="token keyword">foreach</span> <span class="token punctuation">(</span><span class="token variable">$files</span> <span class="token keyword">as</span> <span class="token variable">$file</span><span class="token punctuation">)</span>
                                <span class="token operator">&lt;</span>tr<span class="token operator">&gt;</span>
                                    <span class="token operator">&lt;</span>th scope<span class="token operator">=</span><span class="token string double-quoted-string">&quot;row&quot;</span><span class="token operator">&gt;</span><span class="token punctuation">{</span><span class="token punctuation">{</span> <span class="token variable">$file</span><span class="token operator">-&gt;</span><span class="token property">id</span> <span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>th<span class="token operator">&gt;</span>
                                    <span class="token operator">&lt;</span>td<span class="token operator">&gt;</span><span class="token punctuation">{</span><span class="token punctuation">{</span> <span class="token variable">$file</span><span class="token operator">-&gt;</span><span class="token property">name</span> <span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>td<span class="token operator">&gt;</span>
                                    <span class="token operator">&lt;</span>td<span class="token operator">&gt;</span><span class="token punctuation">{</span><span class="token punctuation">{</span> <span class="token function">public_path</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">}</span><span class="token punctuation">}</span>s<span class="token operator">&lt;</span><span class="token operator">/</span>td<span class="token operator">&gt;</span>
                                    <span class="token operator">&lt;</span>td<span class="token operator">&gt;</span>
                                        <span class="token operator">&lt;</span>a href<span class="token operator">=</span><span class="token string double-quoted-string">&quot;{{ route('user.files.show',<span class="token interpolation"><span class="token variable">$file</span><span class="token operator">-&gt;</span><span class="token property">code_name</span></span>) }}&quot;</span> <span class="token keyword">class</span><span class="token operator">=</span><span class="token string double-quoted-string">&quot;btn btn-sm btn-outline-secondary&quot;</span> target<span class="token operator">=</span><span class="token string double-quoted-string">&quot;_blank&quot;</span><span class="token operator">&gt;</span>Ver<span class="token operator">&lt;</span><span class="token operator">/</span>a<span class="token operator">&gt;</span>
                                    <span class="token operator">&lt;</span><span class="token operator">/</span>td<span class="token operator">&gt;</span>
                                    <span class="token operator">&lt;</span>td<span class="token operator">&gt;</span>
                                        <span class="token operator">&lt;</span>form action<span class="token operator">=</span><span class="token string double-quoted-string">&quot;{{ route('user.files.destroy',<span class="token interpolation"><span class="token variable">$file</span><span class="token operator">-&gt;</span><span class="token property">code_name</span></span>) }}&quot;</span> method<span class="token operator">=</span><span class="token string double-quoted-string">&quot;POST&quot;</span><span class="token operator">&gt;</span>
                                            @<span class="token function">method</span><span class="token punctuation">(</span><span class="token string single-quoted-string">'DELETE'</span><span class="token punctuation">)</span>
                                            @csrf
                                            <span class="token operator">&lt;</span>button type<span class="token operator">=</span><span class="token string double-quoted-string">&quot;submit&quot;</span> <span class="token keyword">class</span><span class="token operator">=</span><span class="token string double-quoted-string">&quot;btn btn-sm btn-outline-danger&quot;</span><span class="token operator">&gt;</span>Eliminar<span class="token operator">&lt;</span><span class="token operator">/</span>button<span class="token operator">&gt;</span>
                                        <span class="token operator">&lt;</span><span class="token operator">/</span>form<span class="token operator">&gt;</span>
                                    <span class="token operator">&lt;</span><span class="token operator">/</span>td<span class="token operator">&gt;</span>
                                <span class="token operator">&lt;</span><span class="token operator">/</span>tr<span class="token operator">&gt;</span>
                                @<span class="token keyword">endforeach</span>
                            <span class="token operator">&lt;</span><span class="token operator">/</span>tbody<span class="token operator">&gt;</span>
                        <span class="token operator">&lt;</span><span class="token operator">/</span>table<span class="token operator">&gt;</span>
                    @<span class="token keyword">else</span>
                        <span class="token operator">&lt;</span>p <span class="token keyword">class</span><span class="token operator">=</span><span class="token string double-quoted-string">&quot;m-2&quot;</span><span class="token operator">&gt;</span><span class="token punctuation">{</span><span class="token punctuation">{</span> <span class="token function">auth</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">-&gt;</span><span class="token function">user</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">-&gt;</span><span class="token property">name</span> <span class="token punctuation">}</span><span class="token punctuation">}</span> no tienes archivos almacenados<span class="token operator">&lt;</span><span class="token operator">/</span>p<span class="token operator">&gt;</span>
                    @<span class="token keyword">endif</span>
                <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
            <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>x<span class="token operator">-</span>app<span class="token operator">-</span>layout<span class="token operator">&gt;</span>
</code></pre></div><strong>Nota</strong>: Puedes seleccionar un modelo de tabla de bootstrap para el diseño del la vista index en:
URL: https://getbootstrap.com</li> <li>Programar el método <strong>store</strong> del controlador <strong>app\Http\Controllers\FilesController.php</strong>:<div class="language-php extra-class"><pre class="language-php"><code><span class="token keyword">public</span> <span class="token keyword">function</span> <span class="token function-definition function">store</span><span class="token punctuation">(</span><span class="token class-name type-declaration">Request</span> <span class="token variable">$request</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    <span class="token variable">$max_size</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token keyword type-casting">int</span><span class="token punctuation">)</span><span class="token function">ini_get</span><span class="token punctuation">(</span><span class="token string single-quoted-string">'upload_max_filesize'</span><span class="token punctuation">)</span> <span class="token operator">*</span> <span class="token number">10240</span><span class="token punctuation">;</span>
    <span class="token variable">$files</span> <span class="token operator">=</span> <span class="token variable">$request</span><span class="token operator">-&gt;</span><span class="token function">file</span><span class="token punctuation">(</span><span class="token string single-quoted-string">'files'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token variable">$user_id</span> <span class="token operator">=</span> <span class="token class-name static-context">Auth</span><span class="token operator">::</span><span class="token function">id</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token variable">$request</span><span class="token operator">-&gt;</span><span class="token function">hasFile</span><span class="token punctuation">(</span><span class="token string single-quoted-string">'files'</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token keyword">foreach</span><span class="token punctuation">(</span><span class="token variable">$files</span> <span class="token keyword">as</span> <span class="token variable">$file</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
            <span class="token comment">//$fileName = Str::slug($file-&gt;getClientOriginalName()).'.'.$file-&gt;getClientOriginalExtension();</span>
            <span class="token variable">$fileName</span> <span class="token operator">=</span> <span class="token function">encrypt</span><span class="token punctuation">(</span><span class="token variable">$file</span><span class="token operator">-&gt;</span><span class="token function">getClientOriginalName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token operator">.</span><span class="token string single-quoted-string">'.'</span><span class="token operator">.</span><span class="token variable">$file</span><span class="token operator">-&gt;</span><span class="token function">getClientOriginalExtension</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token class-name static-context">Storage</span><span class="token operator">::</span><span class="token function">putFileAs</span><span class="token punctuation">(</span><span class="token string single-quoted-string">'/public/'</span> <span class="token operator">.</span> <span class="token variable">$user_id</span> <span class="token operator">.</span> <span class="token string single-quoted-string">'/'</span> <span class="token punctuation">,</span> <span class="token variable">$file</span><span class="token punctuation">,</span> <span class="token variable">$fileName</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
                <span class="token class-name static-context">File</span><span class="token operator">::</span><span class="token function">create</span><span class="token punctuation">(</span><span class="token punctuation">[</span>
                    <span class="token string single-quoted-string">'name'</span> <span class="token operator">=&gt;</span> <span class="token variable">$file</span><span class="token operator">-&gt;</span><span class="token function">getClientOriginalName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
                    <span class="token string single-quoted-string">'code_name'</span> <span class="token operator">=&gt;</span> <span class="token variable">$fileName</span><span class="token punctuation">,</span>
                    <span class="token string single-quoted-string">'user_id'</span> <span class="token operator">=&gt;</span> <span class="token variable">$user_id</span>
                <span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>
        <span class="token class-name static-context">Alert</span><span class="token operator">::</span><span class="token function">success</span><span class="token punctuation">(</span><span class="token string single-quoted-string">'¡Éxito!'</span><span class="token punctuation">,</span> <span class="token string single-quoted-string">'Se ha subido el archivo'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span> <span class="token function">back</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token keyword">else</span><span class="token punctuation">{</span>
        <span class="token class-name static-context">Alert</span><span class="token operator">::</span><span class="token function">error</span><span class="token punctuation">(</span><span class="token string single-quoted-string">'¡Error!'</span><span class="token punctuation">,</span> <span class="token string single-quoted-string">'Debes subir uno o más archivos'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span> <span class="token function">back</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div></li> <li>Programar el método <strong>show</strong> del controlador <strong>app\Http\Controllers\FilesController.php</strong>:<div class="language-php extra-class"><pre class="language-php"><code><span class="token keyword">public</span> <span class="token keyword">function</span> <span class="token function-definition function">show</span><span class="token punctuation">(</span><span class="token variable">$id</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    <span class="token variable">$file</span> <span class="token operator">=</span> <span class="token class-name static-context">File</span><span class="token operator">::</span><span class="token function">whereCodeName</span><span class="token punctuation">(</span><span class="token variable">$id</span><span class="token punctuation">)</span><span class="token operator">-&gt;</span><span class="token function">firstOrFail</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token variable">$user_id</span> <span class="token operator">=</span> <span class="token class-name static-context">Auth</span><span class="token operator">::</span><span class="token function">id</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token variable">$file</span><span class="token operator">-&gt;</span><span class="token property">user_id</span> <span class="token operator">==</span> <span class="token variable">$user_id</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token comment">//return redirect(storage_path().'/app/public/'.$user_id.'/'.$file-&gt;code_name);</span>
        <span class="token keyword">return</span> <span class="token function">response</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">-&gt;</span><span class="token function">file</span><span class="token punctuation">(</span><span class="token function">storage_path</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">.</span><span class="token string single-quoted-string">'/app/public/'</span><span class="token operator">.</span><span class="token variable">$user_id</span><span class="token operator">.</span><span class="token string single-quoted-string">'/'</span><span class="token operator">.</span><span class="token variable">$file</span><span class="token operator">-&gt;</span><span class="token property">code_name</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
        <span class="token class-name static-context">Alert</span><span class="token operator">::</span><span class="token function">error</span><span class="token punctuation">(</span><span class="token string single-quoted-string">'¡Error!'</span><span class="token punctuation">,</span> <span class="token string single-quoted-string">'No tiene permisos para ver este archivo'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span> <span class="token function">back</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token comment">// También se puede colocar</span>
        <span class="token comment">// abort(403);</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div></li> <li>Programar el método <strong>destroy</strong> del controlador <strong>app\Http\Controllers\FilesController.php</strong>:<div class="language-php extra-class"><pre class="language-php"><code><span class="token keyword">public</span> <span class="token keyword">function</span> <span class="token function-definition function">destroy</span><span class="token punctuation">(</span><span class="token class-name type-declaration">Request</span> <span class="token variable">$request</span><span class="token punctuation">,</span> <span class="token variable">$id</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    <span class="token variable">$file</span> <span class="token operator">=</span> <span class="token class-name static-context">File</span><span class="token operator">::</span><span class="token function">whereCodeName</span><span class="token punctuation">(</span><span class="token variable">$id</span><span class="token punctuation">)</span><span class="token operator">-&gt;</span><span class="token function">firstOrFail</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    
    <span class="token comment">// Borra el archivo del storage o almacenamiento</span>
    <span class="token variable">$archivo</span> <span class="token operator">=</span> <span class="token function">storage_path</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">.</span><span class="token string single-quoted-string">'/app/public/'</span><span class="token operator">.</span><span class="token class-name static-context">Auth</span><span class="token operator">::</span><span class="token function">id</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">.</span><span class="token string single-quoted-string">'/'</span><span class="token operator">.</span><span class="token variable">$file</span><span class="token operator">-&gt;</span><span class="token property">code_name</span><span class="token punctuation">;</span>
    <span class="token function">unlink</span><span class="token punctuation">(</span><span class="token variable">$archivo</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token comment">// Borra el registro de la bd</span>
    <span class="token variable">$file</span><span class="token operator">-&gt;</span><span class="token function">delete</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token class-name static-context">Alert</span><span class="token operator">::</span><span class="token function">info</span><span class="token punctuation">(</span><span class="token string single-quoted-string">'Atención!'</span><span class="token punctuation">,</span> <span class="token string single-quoted-string">'Se ha eliminado el archivo'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span> <span class="token function">back</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div></li> <li>Realizar commit MVC File:
<ul><li>$ git add .</li> <li>$ git commit -m &quot;MVC File&quot;</li> <li>$ git push -u origin main</li></ul></li></ol> <h2 id="actualizar-instructivo"><a href="#actualizar-instructivo" class="header-anchor">#</a> Actualizar instructivo:</h2> <ol><li>Copiar todo el contenido de este archivo Markdown (<strong>apuntes.md</strong>).</li> <li>Ir a https://dillinger.io y convertir nuestro archivo de <strong>Markdown</strong> a <strong>HTML</strong>.</li> <li>Exportar como <strong>Styled HTML</strong> y guardar este archivo como <strong>public\instructivo.html</strong> reemplazando así al existente.</li></ol> <h2 id="actualizar-proyecto-en-heroku"><a href="#actualizar-proyecto-en-heroku" class="header-anchor">#</a> Actualizar proyecto en Heroku:</h2> <ol><li>Realizar commit final:
<ul><li>$ git add .</li> <li>$ git commit -m &quot;Proyecto terminado V1&quot;</li> <li>$ git push -u origin main</li></ul></li> <li>Abrir nueva terminal para trabajar en heroku
<ol><li>$ heroku login</li> <li>$ git remote add heroku git.heroku.com/solucionespp-file.git</li> <li>$ heroku git:remote -a solucionespp-file</li> <li>$ heroku run bash</li> <li>~ $ php artisan storage:link</li> <li>~ $ php artisan migrate
<ul><li>Do you really wish to run this command? (yes/no) [no]: yes</li></ul></li> <li>~ $ exit</li> <li>$ heroku logout</li></ol></li></ol></div> <footer class="page-edit"><!----> <!----></footer> <!----> </main></div><div class="global-ui"></div></div>
    <script src="/assets/js/app.5b50b18c.js" defer></script><script src="/assets/js/2.63c13255.js" defer></script><script src="/assets/js/13.a4b2e9a7.js" defer></script>
  </body>
</html>
