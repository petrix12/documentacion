<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Proyecto App Sefar Universal 2021 (Parte IV) | Docs S++</title>
    <meta name="generator" content="VuePress 1.9.7">
    <link rel="icon" type="image/png" href="https://raw.githubusercontent.com/petrix12/imagenes2022/main/Soluciones%2B%2B/S%2B%2B.ico">
    <meta name="description" content="Documentación General">
    <meta name="theme-color" content="#3eaf7c">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    
    <link rel="preload" href="/assets/css/0.styles.a5359c9c.css" as="style"><link rel="preload" href="/assets/js/app.5b50b18c.js" as="script"><link rel="preload" href="/assets/js/2.63c13255.js" as="script"><link rel="preload" href="/assets/js/18.d9651679.js" as="script"><link rel="prefetch" href="/assets/js/10.62a9e3f2.js"><link rel="prefetch" href="/assets/js/11.b9de3e97.js"><link rel="prefetch" href="/assets/js/12.63ce43f8.js"><link rel="prefetch" href="/assets/js/13.a4b2e9a7.js"><link rel="prefetch" href="/assets/js/14.63c87577.js"><link rel="prefetch" href="/assets/js/15.0d753188.js"><link rel="prefetch" href="/assets/js/16.a67c209e.js"><link rel="prefetch" href="/assets/js/17.0341dfd0.js"><link rel="prefetch" href="/assets/js/19.3793a7d6.js"><link rel="prefetch" href="/assets/js/20.543ffd24.js"><link rel="prefetch" href="/assets/js/21.fc7e0ad6.js"><link rel="prefetch" href="/assets/js/22.adf0bef7.js"><link rel="prefetch" href="/assets/js/23.62dd0c61.js"><link rel="prefetch" href="/assets/js/24.ea63bf10.js"><link rel="prefetch" href="/assets/js/25.ab4f33a7.js"><link rel="prefetch" href="/assets/js/26.722c8951.js"><link rel="prefetch" href="/assets/js/27.051b997d.js"><link rel="prefetch" href="/assets/js/28.6fc6f9bd.js"><link rel="prefetch" href="/assets/js/29.eb35bee7.js"><link rel="prefetch" href="/assets/js/3.94a7c997.js"><link rel="prefetch" href="/assets/js/30.b3c13d7f.js"><link rel="prefetch" href="/assets/js/31.e639e9df.js"><link rel="prefetch" href="/assets/js/32.4ee63fe0.js"><link rel="prefetch" href="/assets/js/33.5c5cf380.js"><link rel="prefetch" href="/assets/js/4.957ff7af.js"><link rel="prefetch" href="/assets/js/5.93d598e3.js"><link rel="prefetch" href="/assets/js/6.8d81f0ec.js"><link rel="prefetch" href="/assets/js/7.159f2f50.js"><link rel="prefetch" href="/assets/js/8.c4f7d3f3.js"><link rel="prefetch" href="/assets/js/9.6a63ad8e.js">
    <link rel="stylesheet" href="/assets/css/0.styles.a5359c9c.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><!----> <span class="site-name">Docs S++</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/guide/" class="nav-link router-link-active">
  Guías
</a></div><div class="nav-item"><a href="/config/" class="nav-link">
  Doc
</a></div><div class="nav-item"><a href="https://github.com/petrix12" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Mi GitHub
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/guide/" class="nav-link router-link-active">
  Guías
</a></div><div class="nav-item"><a href="/config/" class="nav-link">
  Doc
</a></div><div class="nav-item"><a href="https://github.com/petrix12" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Mi GitHub
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div> <!----></nav>  <ul class="sidebar-links"><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Soluciones++</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Docker</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading open"><span>Laravel</span> <span class="arrow down"></span></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/guide/laravel/sefar2022/sefar2022-P01.html" class="sidebar-link">Proyecto Sefar 2022 (PARTE I)</a></li><li><a href="/guide/laravel/sefar2022/sefar2022-P02.html" class="sidebar-link">Proyecto Sefar 2022 (PARTE II)</a></li><li><a href="/guide/laravel/sefar2022/sefar2022-P03.html" class="sidebar-link">Proyecto Sefar 2022 (PARTE III)</a></li><li><a href="/guide/laravel/sefar2021/sefar2021-P01.html" class="sidebar-link">Proyecto App Sefar Universal 2021 (Parte I)</a></li><li><a href="/guide/laravel/sefar2021/sefar2021-P02.html" class="sidebar-link">Proyecto App Sefar Universal 2021 (Parte II)</a></li><li><a href="/guide/laravel/sefar2021/sefar2021-P03.html" class="sidebar-link">Proyecto App Sefar Universal 2021 (Parte III)</a></li><li><a href="/guide/laravel/sefar2021/sefar2021-P04.html" aria-current="page" class="active sidebar-link">Proyecto App Sefar Universal 2021 (Parte IV)</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/guide/laravel/sefar2021/sefar2021-P04.html#registro-de-clientes" class="sidebar-link">Registro de clientes</a></li></ul></li><li><a href="/guide/laravel/sefar2021/sefar2021-P05.html" class="sidebar-link">Proyecto App Sefar Universal 2021 (Parte V)</a></li><li><a href="/guide/laravel/sefar2021/sefar2021-P06.html" class="sidebar-link">Proyecto App Sefar Universal 2021 (Parte VI)</a></li><li><a href="/guide/laravel/sefar2021/sefar2021-P07.html" class="sidebar-link">Proyecto App Sefar Universal 2021 (Parte VII)</a></li><li><a href="/guide/laravel/laravel2021/laravel2021.html" class="sidebar-link">Curso Laravel 8 desde cero</a></li></ul></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Lógica</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>PWA</span> <span class="arrow right"></span></p> <!----></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="proyecto-app-sefar-universal-2021-parte-iv"><a href="#proyecto-app-sefar-universal-2021-parte-iv" class="header-anchor">#</a> Proyecto App Sefar Universal 2021 (Parte IV)</h1> <ul><li>Versión: <strong>Laravel Framework 8.31.0</strong></li></ul> <h2 id="registro-de-clientes"><a href="#registro-de-clientes" class="header-anchor">#</a> Registro de clientes</h2> <ol><li>Crear controlador para capturar parámetros GET:
<ul><li>$ php artisan make:controller GetController</li></ul></li> <li>Archivo de prueba (resources\views\pruebas\registro.blade.php) para el traspaso de cliente de <strong>JotForm</strong> a <strong>app.sefaruniversal.com</strong>:<div class="language-php extra-class"><pre class="language-php"><code>@<span class="token keyword">extends</span><span class="token punctuation">(</span><span class="token string single-quoted-string">'adminlte::page'</span><span class="token punctuation">)</span>

@<span class="token function">section</span><span class="token punctuation">(</span><span class="token string single-quoted-string">'title'</span><span class="token punctuation">,</span> <span class="token string single-quoted-string">'Prueba Agclientes'</span><span class="token punctuation">)</span>

@<span class="token function">section</span><span class="token punctuation">(</span><span class="token string single-quoted-string">'content_header'</span><span class="token punctuation">)</span>
	<span class="token operator">&lt;</span>h1<span class="token operator">&gt;</span>Generar enlace para registrar cliente<span class="token operator">&lt;</span><span class="token operator">/</span>h1<span class="token operator">&gt;</span>
@stop

@<span class="token function">section</span><span class="token punctuation">(</span><span class="token string single-quoted-string">'content'</span><span class="token punctuation">)</span>
<span class="token operator">&lt;</span>x<span class="token operator">-</span>app<span class="token operator">-</span>layout<span class="token operator">&gt;</span>
	<span class="token operator">&lt;</span>form action<span class="token operator">=</span><span class="token string double-quoted-string">&quot;{{ route('test.capturar_parametros_get') }}&quot;</span> method <span class="token operator">=</span><span class="token string double-quoted-string">&quot;GET&quot;</span><span class="token operator">&gt;</span>
		<span class="token operator">&lt;</span>div <span class="token keyword">class</span><span class="token operator">=</span><span class="token string double-quoted-string">&quot;shadow overflow-hidden sm:rounded-md&quot;</span><span class="token operator">&gt;</span>
			<span class="token operator">&lt;</span>div <span class="token keyword">class</span><span class="token operator">=</span><span class="token string double-quoted-string">&quot;container&quot;</span><span class="token operator">&gt;</span>
				<span class="token operator">&lt;</span>p <span class="token keyword">class</span><span class="token operator">=</span><span class="token string double-quoted-string">&quot;my-2 ml-2 text-bold text-blue-600&quot;</span><span class="token operator">&gt;</span>Datos Clientes<span class="token punctuation">:</span><span class="token operator">&lt;</span><span class="token operator">/</span>p<span class="token operator">&gt;</span>
				<span class="token operator">&lt;</span>div <span class="token keyword">class</span><span class="token operator">=</span><span class="token string double-quoted-string">&quot;md:flex ms:flex-wrap&quot;</span><span class="token operator">&gt;</span>
					<span class="token operator">&lt;</span>div <span class="token keyword">class</span><span class="token operator">=</span><span class="token string double-quoted-string">&quot;px-1 py-2 m-2 flex-1&quot;</span><span class="token operator">&gt;</span>    <span class="token punctuation">{</span><span class="token punctuation">{</span><span class="token operator">--</span> pasaporte <span class="token operator">--</span><span class="token punctuation">}</span><span class="token punctuation">}</span>
						<span class="token operator">&lt;</span>div<span class="token operator">&gt;</span>
							<span class="token operator">&lt;</span>label <span class="token keyword">for</span><span class="token operator">=</span><span class="token string double-quoted-string">&quot;pasaporte&quot;</span> <span class="token keyword">class</span><span class="token operator">=</span><span class="token string double-quoted-string">&quot;block text-sm font-medium text-gray-700&quot;</span><span class="token operator">&gt;</span>Pasaporte<span class="token operator">&lt;</span><span class="token operator">/</span>label<span class="token operator">&gt;</span>
							<span class="token operator">&lt;</span>input value<span class="token operator">=</span><span class="token string double-quoted-string">&quot;1234567{{-- {{ old('pasaporte', <span class="token interpolation"><span class="token variable">$pasaporte</span></span>) }} --}}&quot;</span> type<span class="token operator">=</span><span class="token string double-quoted-string">&quot;text&quot;</span> name<span class="token operator">=</span><span class="token string double-quoted-string">&quot;pasaporte&quot;</span> <span class="token keyword">class</span><span class="token operator">=</span><span class="token string double-quoted-string">&quot;mt-1 focus:ring-indigo-500 focus:border-indigo-500 block w-full shadow-sm sm:text-sm border-gray-300 rounded-md&quot;</span><span class="token operator">&gt;</span>
						<span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
					<span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>

					<span class="token operator">&lt;</span>div <span class="token keyword">class</span><span class="token operator">=</span><span class="token string double-quoted-string">&quot;px-1 py-2 m-2 flex-1&quot;</span><span class="token operator">&gt;</span>    <span class="token punctuation">{</span><span class="token punctuation">{</span><span class="token operator">--</span> nombres <span class="token operator">--</span><span class="token punctuation">}</span><span class="token punctuation">}</span>
						<span class="token operator">&lt;</span>div<span class="token operator">&gt;</span>
							<span class="token operator">&lt;</span>label <span class="token keyword">for</span><span class="token operator">=</span><span class="token string double-quoted-string">&quot;nombres&quot;</span> <span class="token keyword">class</span><span class="token operator">=</span><span class="token string double-quoted-string">&quot;block text-sm font-medium text-gray-700&quot;</span><span class="token operator">&gt;</span>Nombres<span class="token operator">&lt;</span><span class="token operator">/</span>label<span class="token operator">&gt;</span>
							<span class="token operator">&lt;</span>input value<span class="token operator">=</span><span class="token string double-quoted-string">&quot;Fulanito{{-- {{ old('nombres') }} --}}&quot;</span> type<span class="token operator">=</span><span class="token string double-quoted-string">&quot;text&quot;</span> name<span class="token operator">=</span><span class="token string double-quoted-string">&quot;nombres&quot;</span> <span class="token keyword">class</span><span class="token operator">=</span><span class="token string double-quoted-string">&quot;mt-1 focus:ring-indigo-500 focus:border-indigo-500 block w-full shadow-sm sm:text-sm border-gray-300 rounded-md&quot;</span><span class="token operator">&gt;</span>
						<span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
					<span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>

					<span class="token operator">&lt;</span>div <span class="token keyword">class</span><span class="token operator">=</span><span class="token string double-quoted-string">&quot;px-1 py-2 m-2 flex-1&quot;</span><span class="token operator">&gt;</span>    <span class="token punctuation">{</span><span class="token punctuation">{</span><span class="token operator">--</span> apellidos <span class="token operator">--</span><span class="token punctuation">}</span><span class="token punctuation">}</span>
						<span class="token operator">&lt;</span>div<span class="token operator">&gt;</span>
							<span class="token operator">&lt;</span>label <span class="token keyword">for</span><span class="token operator">=</span><span class="token string double-quoted-string">&quot;apellidos&quot;</span> <span class="token keyword">class</span><span class="token operator">=</span><span class="token string double-quoted-string">&quot;block text-sm font-medium text-gray-700&quot;</span><span class="token operator">&gt;</span>Apellidos<span class="token operator">&lt;</span><span class="token operator">/</span>label<span class="token operator">&gt;</span>
							<span class="token operator">&lt;</span>input value<span class="token operator">=</span><span class="token string double-quoted-string">&quot;Detal y Borrar{{-- {{ old('apellidos') }} --}}&quot;</span> type<span class="token operator">=</span><span class="token string double-quoted-string">&quot;text&quot;</span> name<span class="token operator">=</span><span class="token string double-quoted-string">&quot;apellidos&quot;</span> <span class="token keyword">class</span><span class="token operator">=</span><span class="token string double-quoted-string">&quot;mt-1 focus:ring-indigo-500 focus:border-indigo-500 block w-full shadow-sm sm:text-sm border-gray-300 rounded-md&quot;</span><span class="token operator">&gt;</span>
						<span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
					<span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>

					<span class="token operator">&lt;</span>div <span class="token keyword">class</span><span class="token operator">=</span><span class="token string double-quoted-string">&quot;px-1 py-2 m-2 flex-1&quot;</span><span class="token operator">&gt;</span>    <span class="token punctuation">{</span><span class="token punctuation">{</span><span class="token operator">--</span> email <span class="token operator">--</span><span class="token punctuation">}</span><span class="token punctuation">}</span>
						<span class="token operator">&lt;</span>div<span class="token operator">&gt;</span>
							<span class="token operator">&lt;</span>label <span class="token keyword">for</span><span class="token operator">=</span><span class="token string double-quoted-string">&quot;email&quot;</span> <span class="token keyword">class</span><span class="token operator">=</span><span class="token string double-quoted-string">&quot;block text-sm font-medium text-gray-700&quot;</span><span class="token operator">&gt;</span>e<span class="token operator">-</span>mail<span class="token operator">&lt;</span><span class="token operator">/</span>label<span class="token operator">&gt;</span>
							<span class="token operator">&lt;</span>input value<span class="token operator">=</span><span class="token string double-quoted-string">&quot;delete.borrar@gmail.com{{-- {{ old('email') }} --}}&quot;</span> type<span class="token operator">=</span><span class="token string double-quoted-string">&quot;email&quot;</span> name<span class="token operator">=</span><span class="token string double-quoted-string">&quot;email&quot;</span> <span class="token keyword">class</span><span class="token operator">=</span><span class="token string double-quoted-string">&quot;mt-1 focus:ring-indigo-500 focus:border-indigo-500 block w-full shadow-sm sm:text-sm border-gray-300 rounded-md&quot;</span><span class="token operator">&gt;</span>
						<span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
					<span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
				<span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
				<span class="token operator">&lt;</span>div <span class="token keyword">class</span><span class="token operator">=</span><span class="token string double-quoted-string">&quot;md:flex ms:flex-wrap&quot;</span><span class="token operator">&gt;</span>
					<span class="token operator">&lt;</span>div <span class="token keyword">class</span><span class="token operator">=</span><span class="token string double-quoted-string">&quot;px-1 py-2 m-2 flex&quot;</span><span class="token operator">&gt;</span>    <span class="token punctuation">{</span><span class="token punctuation">{</span><span class="token operator">--</span> fnacimiento <span class="token operator">--</span><span class="token punctuation">}</span><span class="token punctuation">}</span>
						<span class="token operator">&lt;</span>div<span class="token operator">&gt;</span>
							<span class="token operator">&lt;</span>label <span class="token keyword">for</span><span class="token operator">=</span><span class="token string double-quoted-string">&quot;fnacimiento&quot;</span> <span class="token keyword">class</span><span class="token operator">=</span><span class="token string double-quoted-string">&quot;block text-sm font-medium text-gray-700&quot;</span> title<span class="token operator">=</span><span class="token string double-quoted-string">&quot;Fecha de registro&quot;</span><span class="token operator">&gt;</span>Fecha de nacimiento<span class="token operator">&lt;</span><span class="token operator">/</span>label<span class="token operator">&gt;</span>
							<span class="token operator">&lt;</span>input value<span class="token operator">=</span><span class="token string double-quoted-string">&quot;1977-11-03{{-- {{ old('fnacimiento') }} --}}&quot;</span> type<span class="token operator">=</span><span class="token string double-quoted-string">&quot;date&quot;</span> name<span class="token operator">=</span><span class="token string double-quoted-string">&quot;fnacimiento&quot;</span> <span class="token keyword">class</span><span class="token operator">=</span><span class="token string double-quoted-string">&quot;mt-1 focus:ring-indigo-500 focus:border-indigo-500 block w-full shadow-sm sm:text-sm border-gray-300 rounded-md&quot;</span><span class="token operator">&gt;</span>
						<span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
					<span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>

					<span class="token operator">&lt;</span>div <span class="token keyword">class</span><span class="token operator">=</span><span class="token string double-quoted-string">&quot;px-1 py-2 m-2 flex-1&quot;</span><span class="token operator">&gt;</span>    <span class="token punctuation">{</span><span class="token punctuation">{</span><span class="token operator">--</span> cnacimiento <span class="token operator">--</span><span class="token punctuation">}</span><span class="token punctuation">}</span>
						<span class="token operator">&lt;</span>div<span class="token operator">&gt;</span>
							<span class="token operator">&lt;</span>label <span class="token keyword">for</span><span class="token operator">=</span><span class="token string double-quoted-string">&quot;cnacimiento&quot;</span> <span class="token keyword">class</span><span class="token operator">=</span><span class="token string double-quoted-string">&quot;block text-sm font-medium text-gray-700&quot;</span><span class="token operator">&gt;</span>Ciudad de nacimiento<span class="token operator">&lt;</span><span class="token operator">/</span>label<span class="token operator">&gt;</span>
							<span class="token operator">&lt;</span>input value<span class="token operator">=</span><span class="token string double-quoted-string">&quot;Punto Fijo{{-- {{ old('cnacimiento') }} --}}&quot;</span> type<span class="token operator">=</span><span class="token string double-quoted-string">&quot;text&quot;</span> name<span class="token operator">=</span><span class="token string double-quoted-string">&quot;cnacimiento&quot;</span> <span class="token keyword">class</span><span class="token operator">=</span><span class="token string double-quoted-string">&quot;mt-1 focus:ring-indigo-500 focus:border-indigo-500 block w-full shadow-sm sm:text-sm border-gray-300 rounded-md&quot;</span><span class="token operator">&gt;</span>
						<span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
					<span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>

					<span class="token operator">&lt;</span>div <span class="token keyword">class</span><span class="token operator">=</span><span class="token string double-quoted-string">&quot;px-1 py-2 m-2 flex-1&quot;</span><span class="token operator">&gt;</span>    <span class="token punctuation">{</span><span class="token punctuation">{</span><span class="token operator">--</span> pnacimiento <span class="token operator">--</span><span class="token punctuation">}</span><span class="token punctuation">}</span>
						<span class="token operator">&lt;</span>div<span class="token operator">&gt;</span>
							<span class="token operator">&lt;</span>label <span class="token keyword">for</span><span class="token operator">=</span><span class="token string double-quoted-string">&quot;pnacimiento&quot;</span> <span class="token keyword">class</span><span class="token operator">=</span><span class="token string double-quoted-string">&quot;block text-sm font-medium text-gray-700&quot;</span> title<span class="token operator">=</span><span class="token string double-quoted-string">&quot;País de nacimiento&quot;</span><span class="token operator">&gt;</span>País Nac<span class="token operator">.</span><span class="token operator">&lt;</span><span class="token operator">/</span>label<span class="token operator">&gt;</span>
							<span class="token operator">&lt;</span>select name<span class="token operator">=</span><span class="token string double-quoted-string">&quot;pnacimiento&quot;</span> autocomplete<span class="token operator">=</span><span class="token string double-quoted-string">&quot;country&quot;</span> <span class="token keyword">class</span><span class="token operator">=</span><span class="token string double-quoted-string">&quot;mt-1 block w-full py-2 px-3 border border-gray-300 bg-white rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm&quot;</span><span class="token operator">&gt;</span>
								<span class="token operator">&lt;</span>option<span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>option<span class="token operator">&gt;</span>
								@<span class="token keyword">foreach</span> <span class="token punctuation">(</span><span class="token variable">$countries</span> <span class="token keyword">as</span> <span class="token variable">$country</span><span class="token punctuation">)</span>
									@<span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token string single-quoted-string">'Venezuela'</span><span class="token comment">/* old('pnacimiento') */</span> <span class="token operator">==</span> <span class="token variable">$country</span><span class="token operator">-&gt;</span><span class="token property">pais</span><span class="token punctuation">)</span>
										<span class="token operator">&lt;</span>option selected<span class="token operator">&gt;</span><span class="token punctuation">{</span><span class="token punctuation">{</span> <span class="token variable">$country</span><span class="token operator">-&gt;</span><span class="token property">pais</span> <span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>option<span class="token operator">&gt;</span>
									@<span class="token keyword">else</span>
										<span class="token operator">&lt;</span>option<span class="token operator">&gt;</span><span class="token punctuation">{</span><span class="token punctuation">{</span> <span class="token variable">$country</span><span class="token operator">-&gt;</span><span class="token property">pais</span> <span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>option<span class="token operator">&gt;</span> 
									@<span class="token keyword">endif</span>
								@<span class="token keyword">endforeach</span>
							<span class="token operator">&lt;</span><span class="token operator">/</span>select<span class="token operator">&gt;</span>
						<span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
					<span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>

					<span class="token operator">&lt;</span>div <span class="token keyword">class</span><span class="token operator">=</span><span class="token string double-quoted-string">&quot;px-1 py-2 m-2 flex-1&quot;</span><span class="token operator">&gt;</span>    <span class="token punctuation">{</span><span class="token punctuation">{</span><span class="token operator">--</span> sexo <span class="token operator">--</span><span class="token punctuation">}</span><span class="token punctuation">}</span>
						<span class="token operator">&lt;</span>div<span class="token operator">&gt;</span>
							<span class="token operator">&lt;</span>label <span class="token keyword">for</span><span class="token operator">=</span><span class="token string double-quoted-string">&quot;sexo&quot;</span> <span class="token keyword">class</span><span class="token operator">=</span><span class="token string double-quoted-string">&quot;block text-sm font-medium text-gray-700&quot;</span> title<span class="token operator">=</span><span class="token string double-quoted-string">&quot;Sexo&quot;</span><span class="token operator">&gt;</span>Sexo<span class="token operator">&lt;</span><span class="token operator">/</span>label<span class="token operator">&gt;</span>
							<span class="token operator">&lt;</span>select name<span class="token operator">=</span><span class="token string double-quoted-string">&quot;sexo&quot;</span> autocomplete<span class="token operator">=</span><span class="token string double-quoted-string">&quot;on&quot;</span> <span class="token keyword">class</span><span class="token operator">=</span><span class="token string double-quoted-string">&quot;mt-1 block w-full py-2 px-3 border border-gray-300 bg-white rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm&quot;</span><span class="token operator">&gt;</span>
								<span class="token operator">&lt;</span>option<span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>option<span class="token operator">&gt;</span>
								@<span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token string double-quoted-string">&quot;F&quot;</span><span class="token comment">/* old('sexo') */</span> <span class="token operator">==</span> <span class="token string double-quoted-string">&quot;M&quot;</span><span class="token punctuation">)</span>
									<span class="token operator">&lt;</span>option title<span class="token operator">=</span><span class="token string double-quoted-string">&quot;Masculino&quot;</span> selected<span class="token operator">&gt;</span><span class="token constant">M</span><span class="token operator">&lt;</span><span class="token operator">/</span>option<span class="token operator">&gt;</span>
								@<span class="token keyword">else</span>
									<span class="token operator">&lt;</span>option title<span class="token operator">=</span><span class="token string double-quoted-string">&quot;Masculino&quot;</span><span class="token operator">&gt;</span><span class="token constant">M</span><span class="token operator">&lt;</span><span class="token operator">/</span>option<span class="token operator">&gt;</span>
								@<span class="token keyword">endif</span>
								
								@<span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token string double-quoted-string">&quot;F&quot;</span><span class="token comment">/* old('sexo') */</span> <span class="token operator">==</span> <span class="token string double-quoted-string">&quot;F&quot;</span><span class="token punctuation">)</span>
									<span class="token operator">&lt;</span>option title<span class="token operator">=</span><span class="token string double-quoted-string">&quot;Masculino&quot;</span> selected<span class="token operator">&gt;</span><span class="token constant">F</span><span class="token operator">&lt;</span><span class="token operator">/</span>option<span class="token operator">&gt;</span>
								@<span class="token keyword">else</span>
									<span class="token operator">&lt;</span>option title<span class="token operator">=</span><span class="token string double-quoted-string">&quot;Masculino&quot;</span><span class="token operator">&gt;</span><span class="token constant">F</span><span class="token operator">&lt;</span><span class="token operator">/</span>option<span class="token operator">&gt;</span>
								@<span class="token keyword">endif</span>
							<span class="token operator">&lt;</span><span class="token operator">/</span>select<span class="token operator">&gt;</span>
						<span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
					<span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
				<span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>

				<span class="token operator">&lt;</span>p <span class="token keyword">class</span><span class="token operator">=</span><span class="token string double-quoted-string">&quot;my-2 ml-2 text-bold text-blue-800&quot;</span><span class="token operator">&gt;</span>Datos Familiar<span class="token punctuation">:</span><span class="token operator">&lt;</span><span class="token operator">/</span>p<span class="token operator">&gt;</span>
				<span class="token operator">&lt;</span>div <span class="token keyword">class</span><span class="token operator">=</span><span class="token string double-quoted-string">&quot;md:flex ms:flex-wrap&quot;</span><span class="token operator">&gt;</span>
					<span class="token operator">&lt;</span>div <span class="token keyword">class</span><span class="token operator">=</span><span class="token string double-quoted-string">&quot;px-1 py-2 m-2 flex&quot;</span><span class="token operator">&gt;</span>    <span class="token punctuation">{</span><span class="token punctuation">{</span><span class="token operator">--</span> pasaporte_f <span class="token operator">--</span><span class="token punctuation">}</span><span class="token punctuation">}</span>
						<span class="token operator">&lt;</span>div<span class="token operator">&gt;</span>
							<span class="token operator">&lt;</span>label <span class="token keyword">for</span><span class="token operator">=</span><span class="token string double-quoted-string">&quot;pasaporte_f&quot;</span> <span class="token keyword">class</span><span class="token operator">=</span><span class="token string double-quoted-string">&quot;block text-sm font-medium text-gray-700&quot;</span><span class="token operator">&gt;</span>Pasaporte del familiar<span class="token operator">&lt;</span><span class="token operator">/</span>label<span class="token operator">&gt;</span>
							<span class="token operator">&lt;</span>input value<span class="token operator">=</span><span class="token string double-quoted-string">&quot;5555555{{-- {{ old('pasaporte_f', <span class="token interpolation"><span class="token variable">$pasaporte_f</span></span>) }} --}}&quot;</span> type<span class="token operator">=</span><span class="token string double-quoted-string">&quot;text&quot;</span> name<span class="token operator">=</span><span class="token string double-quoted-string">&quot;pasaporte_f&quot;</span> <span class="token keyword">class</span><span class="token operator">=</span><span class="token string double-quoted-string">&quot;mt-1 focus:ring-indigo-500 focus:border-indigo-500 block w-full shadow-sm sm:text-sm border-gray-300 rounded-md&quot;</span><span class="token operator">&gt;</span>
						<span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
					<span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>

					<span class="token operator">&lt;</span>div <span class="token keyword">class</span><span class="token operator">=</span><span class="token string double-quoted-string">&quot;px-1 py-2 m-2 flex-1&quot;</span><span class="token operator">&gt;</span>    <span class="token punctuation">{</span><span class="token punctuation">{</span><span class="token operator">--</span> nombre_f <span class="token operator">--</span><span class="token punctuation">}</span><span class="token punctuation">}</span>
						<span class="token operator">&lt;</span>div<span class="token operator">&gt;</span>
							<span class="token operator">&lt;</span>label <span class="token keyword">for</span><span class="token operator">=</span><span class="token string double-quoted-string">&quot;nombre_f&quot;</span> <span class="token keyword">class</span><span class="token operator">=</span><span class="token string double-quoted-string">&quot;block text-sm font-medium text-gray-700&quot;</span><span class="token operator">&gt;</span>Nombres y apellidos del familiar<span class="token operator">&lt;</span><span class="token operator">/</span>label<span class="token operator">&gt;</span>
							<span class="token operator">&lt;</span>input value<span class="token operator">=</span><span class="token string double-quoted-string">&quot;Perensejo Borrar{{-- {{ old('nombre_f') }} --}}&quot;</span> type<span class="token operator">=</span><span class="token string double-quoted-string">&quot;text&quot;</span> name<span class="token operator">=</span><span class="token string double-quoted-string">&quot;nombre_f&quot;</span> <span class="token keyword">class</span><span class="token operator">=</span><span class="token string double-quoted-string">&quot;mt-1 focus:ring-indigo-500 focus:border-indigo-500 block w-full shadow-sm sm:text-sm border-gray-300 rounded-md&quot;</span><span class="token operator">&gt;</span>
						<span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
					<span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
				<span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
			<span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
			<span class="token operator">&lt;</span>div <span class="token keyword">class</span><span class="token operator">=</span><span class="token string double-quoted-string">&quot;px-4 py-3 bg-gray-50 text-right sm:px-6&quot;</span><span class="token operator">&gt;</span>
				<span class="token operator">&lt;</span>button type<span class="token operator">=</span><span class="token string double-quoted-string">&quot;submit&quot;</span> <span class="token keyword">class</span><span class="token operator">=</span><span class="token string double-quoted-string">&quot;cfrSefar inline-flex justify-center py-2 px-4 border border-transparent shadow-sm text-sm font-medium rounded-md text-white bg-indigo-600 hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500&quot;</span><span class="token operator">&gt;</span>
					Generar <span class="token constant">URL</span>
				<span class="token operator">&lt;</span><span class="token operator">/</span>button<span class="token operator">&gt;</span>
			<span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
		<span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
	<span class="token operator">&lt;</span><span class="token operator">/</span>form<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>x<span class="token operator">-</span>app<span class="token operator">-</span>layout<span class="token operator">&gt;</span>
@stop

@<span class="token function">section</span><span class="token punctuation">(</span><span class="token string single-quoted-string">'css'</span><span class="token punctuation">)</span>
	<span class="token operator">&lt;</span>link rel<span class="token operator">=</span><span class="token string double-quoted-string">&quot;stylesheet&quot;</span> href<span class="token operator">=</span><span class="token string double-quoted-string">&quot;{{ asset('css/sefar.css') }}&quot;</span><span class="token operator">&gt;</span>
@stop

@<span class="token function">section</span><span class="token punctuation">(</span><span class="token string single-quoted-string">'js'</span><span class="token punctuation">)</span>

@stop
</code></pre></div></li> <li>Crear rutas para la prueba de registros de clientes y captura de parámetros get en el grupo para realizar pruebas del archivo de rutas <strong>routes\web.php</strong>:<div class="language-php extra-class"><pre class="language-php"><code><span class="token comment">// Grupo de rutas para realizar pruebas</span>
<span class="token class-name static-context">Route</span><span class="token operator">::</span><span class="token function">group</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token string single-quoted-string">'middleware'</span> <span class="token operator">=&gt;</span> <span class="token punctuation">[</span><span class="token string single-quoted-string">'auth'</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token string single-quoted-string">'as'</span> <span class="token operator">=&gt;</span> <span class="token string single-quoted-string">'test.'</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
	≡
	<span class="token comment">// Generar enlaces para registrar clientes</span>
	<span class="token class-name static-context">Route</span><span class="token operator">::</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string single-quoted-string">'registro'</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token class-name class-name-fully-qualified static-context">App<span class="token punctuation">\</span>Http<span class="token punctuation">\</span>Controllers<span class="token punctuation">\</span>GetController</span><span class="token operator">::</span><span class="token keyword">class</span><span class="token punctuation">,</span> <span class="token string single-quoted-string">'registro'</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token operator">-&gt;</span><span class="token function">name</span><span class="token punctuation">(</span><span class="token string single-quoted-string">'registro'</span><span class="token punctuation">)</span><span class="token operator">-&gt;</span><span class="token function">middleware</span><span class="token punctuation">(</span><span class="token string single-quoted-string">'can:administrador'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

	<span class="token comment">// Capturar parámetros get </span>
	<span class="token class-name static-context">Route</span><span class="token operator">::</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string single-quoted-string">'capturar_parametros_get'</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token class-name class-name-fully-qualified static-context">App<span class="token punctuation">\</span>Http<span class="token punctuation">\</span>Controllers<span class="token punctuation">\</span>GetController</span><span class="token operator">::</span><span class="token keyword">class</span><span class="token punctuation">,</span> <span class="token string single-quoted-string">'capturar_parametros_get'</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token operator">-&gt;</span><span class="token function">name</span><span class="token punctuation">(</span><span class="token string single-quoted-string">'capturar_parametros_get'</span><span class="token punctuation">)</span><span class="token operator">-&gt;</span><span class="token function">middleware</span><span class="token punctuation">(</span><span class="token string single-quoted-string">'can:administrador'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div></li> <li>Programar controlador <strong>app\Http\Controllers\GetController.php</strong>:<div class="language-php extra-class"><pre class="language-php"><code><span class="token php language-php"><span class="token delimiter important">&lt;?php</span>

<span class="token keyword">namespace</span> <span class="token package">App<span class="token punctuation">\</span>Http<span class="token punctuation">\</span>Controllers</span><span class="token punctuation">;</span>

<span class="token keyword">use</span> <span class="token package">App<span class="token punctuation">\</span>Models<span class="token punctuation">\</span>Country</span><span class="token punctuation">;</span>
<span class="token keyword">use</span> <span class="token package">Illuminate<span class="token punctuation">\</span>Http<span class="token punctuation">\</span>Request</span><span class="token punctuation">;</span>
<span class="token keyword">use</span> <span class="token package">RealRashid<span class="token punctuation">\</span>SweetAlert<span class="token punctuation">\</span>Facades<span class="token punctuation">\</span>Alert</span><span class="token punctuation">;</span>

<span class="token keyword">class</span> <span class="token class-name-definition class-name">GetController</span> <span class="token keyword">extends</span> <span class="token class-name">Controller</span>
<span class="token punctuation">{</span>
	<span class="token keyword">public</span> <span class="token keyword">function</span> <span class="token function-definition function">registro</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
		<span class="token variable">$countries</span> <span class="token operator">=</span> <span class="token class-name static-context">Country</span><span class="token operator">::</span><span class="token function">all</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token keyword">return</span> <span class="token function">view</span><span class="token punctuation">(</span><span class="token string single-quoted-string">'pruebas.registro'</span><span class="token punctuation">,</span> <span class="token function">compact</span><span class="token punctuation">(</span><span class="token string single-quoted-string">'countries'</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>

	<span class="token keyword">public</span> <span class="token keyword">function</span> <span class="token function-definition function">capturar_parametros_get</span><span class="token punctuation">(</span><span class="token class-name type-declaration">Request</span> <span class="token variable">$request</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
		<span class="token variable">$parametros</span> <span class="token operator">=</span> <span class="token function">substr</span><span class="token punctuation">(</span><span class="token variable">$request</span><span class="token operator">-&gt;</span><span class="token function">fullUrl</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token number">41</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token class-name static-context">Alert</span><span class="token operator">::</span><span class="token function">info</span><span class="token punctuation">(</span><span class="token string single-quoted-string">'Enlaces para registrar cliente'</span><span class="token punctuation">,</span> <span class="token string single-quoted-string">'
			&lt;small&gt;
				&lt;p&gt;&lt;strong&gt;http://sefar.test/register&lt;/strong&gt;'</span><span class="token operator">.</span><span class="token variable">$parametros</span><span class="token operator">.</span><span class="token string single-quoted-string">'&lt;/p&gt;
				&lt;br&gt;&lt;hr&gt;&lt;br&gt;
				&lt;p&gt;&lt;strong&gt;https://app.sefaruniversal.com/register&lt;/strong&gt;'</span><span class="token operator">.</span><span class="token variable">$parametros</span><span class="token operator">.</span><span class="token string single-quoted-string">'&lt;/p&gt;
			&lt;/small&gt;'</span>
		<span class="token punctuation">)</span><span class="token operator">-&gt;</span><span class="token function">toHtml</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">-&gt;</span><span class="token function">persistent</span><span class="token punctuation">(</span><span class="token constant boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token keyword">return</span> <span class="token function">back</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</span></code></pre></div></li> <li>Modificar el archivo de configuración <strong>config\adminlte.php</strong> para incluir ruta:<div class="language-php extra-class"><pre class="language-php"><code><span class="token php language-php"><span class="token delimiter important">&lt;?php</span>

<span class="token keyword">return</span> <span class="token punctuation">[</span>
	≡
	<span class="token string single-quoted-string">'menu'</span> <span class="token operator">=&gt;</span> <span class="token punctuation">[</span>
		≡
		<span class="token comment">/* *** PRUEBAS *** */</span>
		<span class="token punctuation">[</span>
			<span class="token string single-quoted-string">'text'</span>        <span class="token operator">=&gt;</span> <span class="token string single-quoted-string">'Pruebas'</span><span class="token punctuation">,</span>
			<span class="token string single-quoted-string">'icon'</span>        <span class="token operator">=&gt;</span> <span class="token string single-quoted-string">'fas fa-grimace'</span><span class="token punctuation">,</span>
			<span class="token string single-quoted-string">'icon_color'</span>  <span class="token operator">=&gt;</span> <span class="token string single-quoted-string">'yellow'</span><span class="token punctuation">,</span>
			<span class="token string single-quoted-string">'can'</span>  <span class="token operator">=&gt;</span> <span class="token string single-quoted-string">'administrador'</span><span class="token punctuation">,</span>
			<span class="token string single-quoted-string">'submenu'</span> <span class="token operator">=&gt;</span> <span class="token punctuation">[</span>
				≡
				<span class="token punctuation">[</span>
					<span class="token string single-quoted-string">'text'</span>          <span class="token operator">=&gt;</span> <span class="token string single-quoted-string">'Enlace para registro'</span><span class="token punctuation">,</span>
					<span class="token string single-quoted-string">'icon'</span>          <span class="token operator">=&gt;</span> <span class="token string single-quoted-string">'fas fa-user-circle'</span><span class="token punctuation">,</span>
					<span class="token string single-quoted-string">'icon_color'</span>    <span class="token operator">=&gt;</span> <span class="token string single-quoted-string">'green'</span><span class="token punctuation">,</span>
					<span class="token string single-quoted-string">'url'</span>           <span class="token operator">=&gt;</span> <span class="token string single-quoted-string">'registro'</span><span class="token punctuation">,</span>
					<span class="token string single-quoted-string">'can'</span>           <span class="token operator">=&gt;</span> <span class="token string single-quoted-string">'administrador'</span><span class="token punctuation">,</span>
				<span class="token punctuation">]</span><span class="token punctuation">,</span>
			<span class="token punctuation">]</span><span class="token punctuation">,</span>
		<span class="token punctuation">]</span><span class="token punctuation">,</span>
		≡
	<span class="token punctuation">]</span><span class="token punctuation">,</span>
	≡
<span class="token punctuation">]</span><span class="token punctuation">;</span>
</span></code></pre></div></li> <li>Modificar vista <strong>resources\views\auth\register.blade.php</strong>:<div class="language-php extra-class"><pre class="language-php"><code><span class="token php language-php"><span class="token delimiter important">&lt;?php</span>
	<span class="token comment">// Captura de parámetros del JotForm</span>
	<span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span><span class="token keyword">empty</span><span class="token punctuation">(</span><span class="token variable">$_GET</span><span class="token punctuation">[</span><span class="token string single-quoted-string">'pasaporte'</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
		<span class="token variable">$passport</span> <span class="token operator">=</span> <span class="token function">trim</span><span class="token punctuation">(</span><span class="token variable">$_GET</span><span class="token punctuation">[</span><span class="token string single-quoted-string">'pasaporte'</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token variable">$rol</span> <span class="token operator">=</span> <span class="token string single-quoted-string">'cliente'</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span><span class="token keyword">else</span><span class="token punctuation">{</span>
		<span class="token variable">$passport</span> <span class="token operator">=</span> <span class="token constant">null</span><span class="token punctuation">;</span>
		<span class="token variable">$rol</span> <span class="token operator">=</span> <span class="token constant">null</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
	<span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span><span class="token keyword">empty</span><span class="token punctuation">(</span><span class="token variable">$_GET</span><span class="token punctuation">[</span><span class="token string single-quoted-string">'apellidos'</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token variable">$apellidos</span> <span class="token operator">=</span> <span class="token variable">$_GET</span><span class="token punctuation">[</span><span class="token string single-quoted-string">'apellidos'</span><span class="token punctuation">]</span><span class="token punctuation">;</span> <span class="token keyword">else</span> <span class="token variable">$apellidos</span> <span class="token operator">=</span> <span class="token constant">null</span><span class="token punctuation">;</span>
	<span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span><span class="token keyword">empty</span><span class="token punctuation">(</span><span class="token variable">$_GET</span><span class="token punctuation">[</span><span class="token string single-quoted-string">'email'</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token variable">$email</span> <span class="token operator">=</span> <span class="token variable">$_GET</span><span class="token punctuation">[</span><span class="token string single-quoted-string">'email'</span><span class="token punctuation">]</span><span class="token punctuation">;</span> <span class="token keyword">else</span> <span class="token variable">$email</span> <span class="token operator">=</span> <span class="token constant">null</span><span class="token punctuation">;</span>
	<span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span><span class="token keyword">empty</span><span class="token punctuation">(</span><span class="token variable">$_GET</span><span class="token punctuation">[</span><span class="token string single-quoted-string">'fnacimiento'</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token variable">$fnacimiento</span> <span class="token operator">=</span> <span class="token variable">$_GET</span><span class="token punctuation">[</span><span class="token string single-quoted-string">'fnacimiento'</span><span class="token punctuation">]</span><span class="token punctuation">;</span> <span class="token keyword">else</span> <span class="token variable">$fnacimiento</span> <span class="token operator">=</span> <span class="token constant">null</span><span class="token punctuation">;</span>
	<span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span><span class="token keyword">empty</span><span class="token punctuation">(</span><span class="token variable">$_GET</span><span class="token punctuation">[</span><span class="token string single-quoted-string">'cnacimiento'</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token variable">$cnacimiento</span> <span class="token operator">=</span> <span class="token variable">$_GET</span><span class="token punctuation">[</span><span class="token string single-quoted-string">'cnacimiento'</span><span class="token punctuation">]</span><span class="token punctuation">;</span> <span class="token keyword">else</span> <span class="token variable">$cnacimiento</span> <span class="token operator">=</span> <span class="token constant">null</span><span class="token punctuation">;</span>
	<span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span><span class="token keyword">empty</span><span class="token punctuation">(</span><span class="token variable">$_GET</span><span class="token punctuation">[</span><span class="token string single-quoted-string">'pnacimiento'</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token variable">$pnacimiento</span> <span class="token operator">=</span> <span class="token variable">$_GET</span><span class="token punctuation">[</span><span class="token string single-quoted-string">'pnacimiento'</span><span class="token punctuation">]</span><span class="token punctuation">;</span> <span class="token keyword">else</span> <span class="token variable">$pnacimiento</span> <span class="token operator">=</span> <span class="token constant">null</span><span class="token punctuation">;</span>
	<span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span><span class="token keyword">empty</span><span class="token punctuation">(</span><span class="token variable">$_GET</span><span class="token punctuation">[</span><span class="token string single-quoted-string">'sexo'</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token variable">$sexo</span> <span class="token operator">=</span> <span class="token variable">$_GET</span><span class="token punctuation">[</span><span class="token string single-quoted-string">'sexo'</span><span class="token punctuation">]</span><span class="token punctuation">;</span> <span class="token keyword">else</span> <span class="token variable">$sexo</span> <span class="token operator">=</span> <span class="token constant">null</span><span class="token punctuation">;</span>
	<span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span><span class="token keyword">empty</span><span class="token punctuation">(</span><span class="token variable">$_GET</span><span class="token punctuation">[</span><span class="token string single-quoted-string">'nombre_f'</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token variable">$nombre_f</span> <span class="token operator">=</span> <span class="token variable">$_GET</span><span class="token punctuation">[</span><span class="token string single-quoted-string">'nombre_f'</span><span class="token punctuation">]</span><span class="token punctuation">;</span> <span class="token keyword">else</span> <span class="token variable">$nombre_f</span> <span class="token operator">=</span> <span class="token constant">null</span><span class="token punctuation">;</span>
	<span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span><span class="token keyword">empty</span><span class="token punctuation">(</span><span class="token variable">$_GET</span><span class="token punctuation">[</span><span class="token string single-quoted-string">'pasaporte_f'</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token variable">$pasaporte_f</span> <span class="token operator">=</span> <span class="token variable">$_GET</span><span class="token punctuation">[</span><span class="token string single-quoted-string">'pasaporte_f'</span><span class="token punctuation">]</span><span class="token punctuation">;</span> <span class="token keyword">else</span> <span class="token variable">$pasaporte_f</span> <span class="token operator">=</span> <span class="token constant">null</span><span class="token punctuation">;</span>
	<span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span><span class="token keyword">empty</span><span class="token punctuation">(</span><span class="token variable">$_GET</span><span class="token punctuation">[</span><span class="token string single-quoted-string">'referido'</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token variable">$referido</span> <span class="token operator">=</span> <span class="token variable">$_GET</span><span class="token punctuation">[</span><span class="token string single-quoted-string">'referido'</span><span class="token punctuation">]</span><span class="token punctuation">;</span> <span class="token keyword">else</span> <span class="token variable">$referido</span> <span class="token operator">=</span> <span class="token constant">null</span><span class="token punctuation">;</span>

	<span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token function">trim</span><span class="token punctuation">(</span><span class="token variable">$referido</span><span class="token punctuation">)</span> <span class="token operator">==</span> <span class="token string single-quoted-string">'P'</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
		<span class="token variable">$referido</span> <span class="token operator">=</span> <span class="token string single-quoted-string">'P &amp; V Abogados'</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>

	<span class="token variable">$name</span> <span class="token operator">=</span> <span class="token constant">null</span><span class="token punctuation">;</span>
	<span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span><span class="token keyword">empty</span><span class="token punctuation">(</span><span class="token variable">$_GET</span><span class="token punctuation">[</span><span class="token string single-quoted-string">'nombres'</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
		<span class="token keyword">if</span><span class="token punctuation">(</span><span class="token function">is_null</span><span class="token punctuation">(</span><span class="token variable">$apellidos</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
			<span class="token variable">$name</span> <span class="token operator">=</span> <span class="token variable">$_GET</span><span class="token punctuation">[</span><span class="token string single-quoted-string">'nombres'</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
			<span class="token variable">$name</span> <span class="token operator">=</span> <span class="token variable">$_GET</span><span class="token punctuation">[</span><span class="token string single-quoted-string">'nombres'</span><span class="token punctuation">]</span><span class="token operator">.</span><span class="token string single-quoted-string">' '</span><span class="token operator">.</span><span class="token variable">$_GET</span><span class="token punctuation">[</span><span class="token string single-quoted-string">'apellidos'</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span>
		<span class="token variable">$nombres</span> <span class="token operator">=</span> <span class="token variable">$_GET</span><span class="token punctuation">[</span><span class="token string single-quoted-string">'nombres'</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span><span class="token keyword">else</span><span class="token punctuation">{</span>
		<span class="token variable">$nombres</span> <span class="token operator">=</span> <span class="token constant">null</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>

	<span class="token keyword">switch</span> <span class="token punctuation">(</span><span class="token variable">$sexo</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
		<span class="token keyword">case</span> <span class="token string double-quoted-string">&quot;FEMENINO&quot;</span><span class="token punctuation">:</span>
			<span class="token variable">$sexo</span> <span class="token operator">=</span> <span class="token string single-quoted-string">'F'</span><span class="token punctuation">;</span>
			<span class="token keyword">break</span><span class="token punctuation">;</span>
		<span class="token keyword">case</span> <span class="token string double-quoted-string">&quot;FEMENINO / FEMALE&quot;</span><span class="token punctuation">:</span>
			<span class="token variable">$sexo</span> <span class="token operator">=</span> <span class="token string single-quoted-string">'F'</span><span class="token punctuation">;</span>
			<span class="token keyword">break</span><span class="token punctuation">;</span>
		<span class="token keyword">case</span> <span class="token string double-quoted-string">&quot;MASCULINO&quot;</span><span class="token punctuation">:</span>
			<span class="token variable">$sexo</span> <span class="token operator">=</span> <span class="token string single-quoted-string">'M'</span><span class="token punctuation">;</span>
			<span class="token keyword">break</span><span class="token punctuation">;</span>
		<span class="token keyword">case</span> <span class="token string double-quoted-string">&quot;MASCULINO / MALE&quot;</span><span class="token punctuation">:</span>
			<span class="token variable">$sexo</span> <span class="token operator">=</span> <span class="token string single-quoted-string">'M'</span><span class="token punctuation">;</span>
			<span class="token keyword">break</span><span class="token punctuation">;</span>
		<span class="token keyword">case</span> <span class="token string double-quoted-string">&quot;OTROS&quot;</span><span class="token punctuation">:</span>
			<span class="token variable">$sexo</span> <span class="token operator">=</span> <span class="token string single-quoted-string">'O'</span><span class="token punctuation">;</span>
			<span class="token keyword">break</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
	<span class="token comment">// Familiares</span>
	<span class="token variable">$Familiares</span> <span class="token operator">=</span> <span class="token function">is_null</span><span class="token punctuation">(</span><span class="token variable">$nombre_f</span><span class="token punctuation">)</span> <span class="token operator">?</span> <span class="token constant">NULL</span> <span class="token punctuation">:</span> <span class="token string single-quoted-string">'Si'</span><span class="token punctuation">;</span>
	<span class="token comment">// Fecha de nacimiento</span>
	<span class="token variable">$AnhoNac</span> <span class="token operator">=</span> <span class="token function">date</span><span class="token punctuation">(</span><span class="token string double-quoted-string">&quot;Y&quot;</span><span class="token punctuation">,</span> <span class="token function">strtotime</span><span class="token punctuation">(</span><span class="token variable">$fnacimiento</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token variable">$MesNac</span> <span class="token operator">=</span> <span class="token function">date</span><span class="token punctuation">(</span><span class="token string double-quoted-string">&quot;m&quot;</span><span class="token punctuation">,</span> <span class="token function">strtotime</span><span class="token punctuation">(</span><span class="token variable">$fnacimiento</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token variable">$DiaNac</span> <span class="token operator">=</span> <span class="token function">date</span><span class="token punctuation">(</span><span class="token string double-quoted-string">&quot;d&quot;</span><span class="token punctuation">,</span> <span class="token function">strtotime</span><span class="token punctuation">(</span><span class="token variable">$fnacimiento</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token delimiter important">?&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>x-guest-layout</span><span class="token punctuation">&gt;</span></span>
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>x-jet-authentication-card</span><span class="token punctuation">&gt;</span></span>
		<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>x-slot</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>logo<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
			{{-- <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>x-jet-authentication-card-logo</span> <span class="token punctuation">/&gt;</span></span> --}}
			@include('layouts.logos.logo')
		<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>x-slot</span><span class="token punctuation">&gt;</span></span>

		<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>x-jet-validation-errors</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>mb-4<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span>

		<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>form</span> <span class="token attr-name">method</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>POST<span class="token punctuation">&quot;</span></span> <span class="token attr-name">action</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>{{ route('register') }}<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
			@csrf

			{{-- Campos ocultos --}}
			<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>hidden<span class="token punctuation">&quot;</span></span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>nombres<span class="token punctuation">&quot;</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>{{ $nombres }}<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span>
			<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>hidden<span class="token punctuation">&quot;</span></span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>apellidos<span class="token punctuation">&quot;</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>{{ $apellidos }}<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span>
			<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>hidden<span class="token punctuation">&quot;</span></span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>fnacimiento<span class="token punctuation">&quot;</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>{{ $fnacimiento }}<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span>
			<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>hidden<span class="token punctuation">&quot;</span></span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>cnacimiento<span class="token punctuation">&quot;</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>{{ $cnacimiento }}<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span>
			<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>hidden<span class="token punctuation">&quot;</span></span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>pnacimiento<span class="token punctuation">&quot;</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>{{ $pnacimiento }}<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span>
			<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>hidden<span class="token punctuation">&quot;</span></span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>sexo<span class="token punctuation">&quot;</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>{{ $sexo }}<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span>
			<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>hidden<span class="token punctuation">&quot;</span></span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>nombre_f<span class="token punctuation">&quot;</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>{{ $nombre_f }}<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span>
			<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>hidden<span class="token punctuation">&quot;</span></span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>pasaporte_f<span class="token punctuation">&quot;</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>{{ $pasaporte_f }}<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span>
			<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>hidden<span class="token punctuation">&quot;</span></span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>rol<span class="token punctuation">&quot;</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>{{ $rol }}<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span>
			<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>hidden<span class="token punctuation">&quot;</span></span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>referido<span class="token punctuation">&quot;</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>{{ $referido }}<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span>
			<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">&gt;</span></span>
				<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>x-jet-label</span> <span class="token attr-name">for</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>name<span class="token punctuation">&quot;</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>{{ __('Name') }}<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span>
				<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>x-jet-input</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>name<span class="token punctuation">&quot;</span></span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>block mt-1 w-full<span class="token punctuation">&quot;</span></span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>text<span class="token punctuation">&quot;</span></span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>name<span class="token punctuation">&quot;</span></span> <span class="token attr-name">:value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>old('name',$name)<span class="token punctuation">&quot;</span></span> <span class="token attr-name">required</span> <span class="token attr-name">autofocus</span> <span class="token attr-name">autocomplete</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>name<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span>
			<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>

			<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>mt-4<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
				<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>x-jet-label</span> <span class="token attr-name">for</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>email<span class="token punctuation">&quot;</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>{{ __('Email') }}<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span>
				<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>x-jet-input</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>email<span class="token punctuation">&quot;</span></span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>block mt-1 w-full<span class="token punctuation">&quot;</span></span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>email<span class="token punctuation">&quot;</span></span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>email<span class="token punctuation">&quot;</span></span> <span class="token attr-name">:value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>old('email',$email)<span class="token punctuation">&quot;</span></span> <span class="token attr-name">required</span> <span class="token punctuation">/&gt;</span></span>
			<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>

			@if ($rol == 'cliente')
			<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>mt-4<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
				<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>x-jet-label</span> <span class="token attr-name">for</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>passport<span class="token punctuation">&quot;</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>{{ __('Passport') }}<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span>
				<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>x-jet-input</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>passport<span class="token punctuation">&quot;</span></span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>block mt-1 w-full<span class="token punctuation">&quot;</span></span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>text<span class="token punctuation">&quot;</span></span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>passport<span class="token punctuation">&quot;</span></span> <span class="token attr-name">:value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>old('passport',$passport)<span class="token punctuation">&quot;</span></span> <span class="token attr-name">required</span> <span class="token punctuation">/&gt;</span></span>
			<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
			@else
			<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>hidden<span class="token punctuation">&quot;</span></span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>passport<span class="token punctuation">&quot;</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>{{ $passport }}<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span>
			@endif

			<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>mt-4<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
				<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>x-jet-label</span> <span class="token attr-name">for</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>password<span class="token punctuation">&quot;</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>{{ __('Password') }}<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span>
				<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>x-jet-input</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>password<span class="token punctuation">&quot;</span></span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>block mt-1 w-full<span class="token punctuation">&quot;</span></span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>password<span class="token punctuation">&quot;</span></span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>password<span class="token punctuation">&quot;</span></span> <span class="token attr-name">required</span> <span class="token attr-name">autocomplete</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>new-password<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span>
			<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>

			<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>mt-4<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
				<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>x-jet-label</span> <span class="token attr-name">for</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>password_confirmation<span class="token punctuation">&quot;</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>{{ __('Confirm Password') }}<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span>
				<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>x-jet-input</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>password_confirmation<span class="token punctuation">&quot;</span></span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>block mt-1 w-full<span class="token punctuation">&quot;</span></span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>password<span class="token punctuation">&quot;</span></span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>password_confirmation<span class="token punctuation">&quot;</span></span> <span class="token attr-name">required</span> <span class="token attr-name">autocomplete</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>new-password<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span>
			<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>

			@if (Laravel\Jetstream\Jetstream::hasTermsAndPrivacyPolicyFeature())
				<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>mt-4<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
					<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>x-jet-label</span> <span class="token attr-name">for</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>terms<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
						<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>flex items-center<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
							<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>x-jet-checkbox</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>terms<span class="token punctuation">&quot;</span></span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>terms<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>

							<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>ml-2<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
								{!! __('I agree to the :terms_of_service and :privacy_policy', [
										'terms_of_service' =&gt; '<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>a</span> <span class="token attr-name">target</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>_blank<span class="token punctuation">&quot;</span></span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span><span class="token punctuation">'</span>.route('terms.show').'<span class="token punctuation">&quot;</span></span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>underline text-sm text-gray-600 hover:text-gray-900<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>'.__('Terms of Service').'<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>a</span><span class="token punctuation">&gt;</span></span>',
										'privacy_policy' =&gt; '<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>a</span> <span class="token attr-name">target</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>_blank<span class="token punctuation">&quot;</span></span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span><span class="token punctuation">'</span>.route('policy.show').'<span class="token punctuation">&quot;</span></span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>underline text-sm text-gray-600 hover:text-gray-900<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>'.__('Privacy Policy').'<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>a</span><span class="token punctuation">&gt;</span></span>',
								]) !!}
							<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
						<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
					<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>x-jet-label</span><span class="token punctuation">&gt;</span></span>
				<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
			@endif

			<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>flex items-center justify-end mt-4<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
				<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>a</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>underline text-sm text-gray-600 hover:text-gray-900<span class="token punctuation">&quot;</span></span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>{{ route('login') }}<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
					{{ __('Already registered?') }}
				<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>a</span><span class="token punctuation">&gt;</span></span>

				<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>x-jet-button</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>ml-4 cfrSefar<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
					{{ __('Register') }}
				<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>x-jet-button</span><span class="token punctuation">&gt;</span></span>
			<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
		<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>form</span><span class="token punctuation">&gt;</span></span>
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>x-jet-authentication-card</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>x-guest-layout</span><span class="token punctuation">&gt;</span></span>
</code></pre></div></li> <li>Modificar método create del controlador <strong>app\Actions\Fortify\CreateNewUser.php</strong>:<div class="language-php extra-class"><pre class="language-php"><code><span class="token php language-php"><span class="token delimiter important">&lt;?php</span>

<span class="token keyword">namespace</span> <span class="token package">App<span class="token punctuation">\</span>Actions<span class="token punctuation">\</span>Fortify</span><span class="token punctuation">;</span>

<span class="token keyword">use</span> <span class="token package">App<span class="token punctuation">\</span>Mail<span class="token punctuation">\</span>RegistroCliente</span><span class="token punctuation">;</span>
<span class="token keyword">use</span> <span class="token package">App<span class="token punctuation">\</span>Mail<span class="token punctuation">\</span>RegistroSefar</span><span class="token punctuation">;</span>
<span class="token keyword">use</span> <span class="token package">App<span class="token punctuation">\</span>Models<span class="token punctuation">\</span>Agcliente</span><span class="token punctuation">;</span>
<span class="token keyword">use</span> <span class="token package">App<span class="token punctuation">\</span>Models<span class="token punctuation">\</span>User</span><span class="token punctuation">;</span>
<span class="token keyword">use</span> <span class="token package">Illuminate<span class="token punctuation">\</span>Support<span class="token punctuation">\</span>Facades<span class="token punctuation">\</span>Auth</span><span class="token punctuation">;</span>
<span class="token comment">// use Illuminate\Support\Facades\Artisan;</span>
<span class="token keyword">use</span> <span class="token package">Illuminate<span class="token punctuation">\</span>Support<span class="token punctuation">\</span>Facades<span class="token punctuation">\</span>Hash</span><span class="token punctuation">;</span>
<span class="token keyword">use</span> <span class="token package">Illuminate<span class="token punctuation">\</span>Support<span class="token punctuation">\</span>Facades<span class="token punctuation">\</span>Mail</span><span class="token punctuation">;</span>
<span class="token keyword">use</span> <span class="token package">Illuminate<span class="token punctuation">\</span>Support<span class="token punctuation">\</span>Facades<span class="token punctuation">\</span>Validator</span><span class="token punctuation">;</span>
<span class="token keyword">use</span> <span class="token package">Laravel<span class="token punctuation">\</span>Fortify<span class="token punctuation">\</span>Contracts<span class="token punctuation">\</span>CreatesNewUsers</span><span class="token punctuation">;</span>
<span class="token keyword">use</span> <span class="token package">Laravel<span class="token punctuation">\</span>Jetstream<span class="token punctuation">\</span>Jetstream</span><span class="token punctuation">;</span>
<span class="token keyword">use</span> <span class="token package">RealRashid<span class="token punctuation">\</span>SweetAlert<span class="token punctuation">\</span>Facades<span class="token punctuation">\</span>Alert</span><span class="token punctuation">;</span>

<span class="token keyword">class</span> <span class="token class-name-definition class-name">CreateNewUser</span> <span class="token keyword">implements</span> <span class="token class-name">CreatesNewUsers</span>
<span class="token punctuation">{</span>
	<span class="token keyword">use</span> <span class="token package">PasswordValidationRules</span><span class="token punctuation">;</span>

	<span class="token comment">/**
	* Validate and create a newly registered user.
	*
	* @param  array  $input
	* @return \App\Models\User
	*/</span>
	<span class="token keyword">public</span> <span class="token keyword">function</span> <span class="token function-definition function">create</span><span class="token punctuation">(</span><span class="token keyword type-hint">array</span> <span class="token variable">$input</span><span class="token punctuation">)</span>
	<span class="token punctuation">{</span>
		<span class="token comment">// Verificar que el número de pasoporte no exista</span>
		<span class="token variable">$rol</span> <span class="token operator">=</span> <span class="token variable">$input</span><span class="token punctuation">[</span><span class="token string single-quoted-string">'rol'</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
		<span class="token variable">$passport</span> <span class="token operator">=</span> <span class="token variable">$input</span><span class="token punctuation">[</span><span class="token string single-quoted-string">'passport'</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
		<span class="token variable">$fnacimiento</span> <span class="token operator">=</span> <span class="token variable">$input</span><span class="token punctuation">[</span><span class="token string single-quoted-string">'fnacimiento'</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
		<span class="token variable">$fnacimiento_entero</span> <span class="token operator">=</span> <span class="token function">strtotime</span><span class="token punctuation">(</span><span class="token variable">$fnacimiento</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token keyword">if</span><span class="token punctuation">(</span><span class="token variable">$rol</span> <span class="token operator">==</span> <span class="token string single-quoted-string">'cliente'</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
			<span class="token variable">$user</span> <span class="token operator">=</span> <span class="token class-name static-context">User</span><span class="token operator">::</span><span class="token function">where</span><span class="token punctuation">(</span><span class="token string single-quoted-string">'passport'</span><span class="token punctuation">,</span><span class="token string single-quoted-string">'LIKE'</span><span class="token punctuation">,</span><span class="token variable">$passport</span><span class="token punctuation">)</span><span class="token operator">-&gt;</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
			<span class="token keyword">if</span><span class="token punctuation">(</span><span class="token keyword">empty</span><span class="token punctuation">(</span><span class="token variable">$user</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token operator">-&gt;</span><span class="token property">passport</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
				<span class="token comment">// Verificar si el usuario esta registrado en agclientes</span>
				<span class="token variable">$agcliente_v</span> <span class="token operator">=</span> <span class="token class-name static-context">Agcliente</span><span class="token operator">::</span><span class="token function">where</span><span class="token punctuation">(</span><span class="token string single-quoted-string">'IDCliente'</span><span class="token punctuation">,</span><span class="token function">trim</span><span class="token punctuation">(</span><span class="token variable">$passport</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token operator">-&gt;</span><span class="token function">where</span><span class="token punctuation">(</span><span class="token string single-quoted-string">'IDPersona'</span><span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token operator">-&gt;</span><span class="token function">count</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
				<span class="token keyword">if</span><span class="token punctuation">(</span><span class="token variable">$agcliente_v</span> <span class="token operator">==</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
					<span class="token comment">// Incluir al cliente en la tabla agclientes</span>
					<span class="token class-name static-context">Agcliente</span><span class="token operator">::</span><span class="token function">create</span><span class="token punctuation">(</span><span class="token punctuation">[</span>
						<span class="token string single-quoted-string">'IDCliente'</span> <span class="token operator">=&gt;</span> <span class="token function">trim</span><span class="token punctuation">(</span><span class="token variable">$input</span><span class="token punctuation">[</span><span class="token string single-quoted-string">'passport'</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
						<span class="token string single-quoted-string">'IDPersona'</span> <span class="token operator">=&gt;</span> <span class="token number">1</span><span class="token punctuation">,</span>
						<span class="token string single-quoted-string">'Nombres'</span> <span class="token operator">=&gt;</span> <span class="token function">trim</span><span class="token punctuation">(</span><span class="token variable">$input</span><span class="token punctuation">[</span><span class="token string single-quoted-string">'nombres'</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
						<span class="token string single-quoted-string">'Apellidos'</span> <span class="token operator">=&gt;</span> <span class="token function">trim</span><span class="token punctuation">(</span><span class="token variable">$input</span><span class="token punctuation">[</span><span class="token string single-quoted-string">'apellidos'</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
						<span class="token string single-quoted-string">'NPasaporte'</span> <span class="token operator">=&gt;</span> <span class="token function">trim</span><span class="token punctuation">(</span><span class="token variable">$input</span><span class="token punctuation">[</span><span class="token string single-quoted-string">'passport'</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
						<span class="token string single-quoted-string">'Sexo'</span> <span class="token operator">=&gt;</span> <span class="token function">trim</span><span class="token punctuation">(</span><span class="token variable">$input</span><span class="token punctuation">[</span><span class="token string single-quoted-string">'sexo'</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
						<span class="token string single-quoted-string">'AnhoNac'</span> <span class="token operator">=&gt;</span> <span class="token function">date</span><span class="token punctuation">(</span><span class="token string double-quoted-string">&quot;Y&quot;</span><span class="token punctuation">,</span> <span class="token variable">$fnacimiento_entero</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
						<span class="token string single-quoted-string">'MesNac'</span> <span class="token operator">=&gt;</span> <span class="token function">date</span><span class="token punctuation">(</span><span class="token string double-quoted-string">&quot;m&quot;</span><span class="token punctuation">,</span> <span class="token variable">$fnacimiento_entero</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
						<span class="token string single-quoted-string">'DiaNac'</span> <span class="token operator">=&gt;</span> <span class="token function">date</span><span class="token punctuation">(</span><span class="token string double-quoted-string">&quot;d&quot;</span><span class="token punctuation">,</span> <span class="token variable">$fnacimiento_entero</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
						<span class="token string single-quoted-string">'LugarNac'</span> <span class="token operator">=&gt;</span> <span class="token function">trim</span><span class="token punctuation">(</span><span class="token variable">$input</span><span class="token punctuation">[</span><span class="token string single-quoted-string">'cnacimiento'</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
						<span class="token string single-quoted-string">'PaisNac'</span> <span class="token operator">=&gt;</span> <span class="token function">trim</span><span class="token punctuation">(</span><span class="token variable">$input</span><span class="token punctuation">[</span><span class="token string single-quoted-string">'pnacimiento'</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
						<span class="token string single-quoted-string">'NombresF'</span> <span class="token operator">=&gt;</span> <span class="token function">trim</span><span class="token punctuation">(</span><span class="token variable">$input</span><span class="token punctuation">[</span><span class="token string single-quoted-string">'nombre_f'</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
						<span class="token string single-quoted-string">'NPasaporteF'</span> <span class="token operator">=&gt;</span> <span class="token function">trim</span><span class="token punctuation">(</span><span class="token variable">$input</span><span class="token punctuation">[</span><span class="token string single-quoted-string">'pasaporte_f'</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
						<span class="token string single-quoted-string">'FRegistro'</span> <span class="token operator">=&gt;</span> <span class="token function">date</span><span class="token punctuation">(</span><span class="token string single-quoted-string">'Y-m-d H:i:s'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
						<span class="token string single-quoted-string">'PNacimiento'</span> <span class="token operator">=&gt;</span> <span class="token function">trim</span><span class="token punctuation">(</span><span class="token variable">$input</span><span class="token punctuation">[</span><span class="token string single-quoted-string">'pnacimiento'</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
						<span class="token string single-quoted-string">'LNacimiento'</span> <span class="token operator">=&gt;</span> <span class="token function">trim</span><span class="token punctuation">(</span><span class="token variable">$input</span><span class="token punctuation">[</span><span class="token string single-quoted-string">'cnacimiento'</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
						<span class="token string single-quoted-string">'FUpdate'</span> <span class="token operator">=&gt;</span> <span class="token function">date</span><span class="token punctuation">(</span><span class="token string single-quoted-string">'Y-m-d H:i:s'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
						<span class="token string single-quoted-string">'referido'</span> <span class="token operator">=&gt;</span> <span class="token function">trim</span><span class="token punctuation">(</span><span class="token variable">$input</span><span class="token punctuation">[</span><span class="token string single-quoted-string">'referido'</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
						<span class="token string single-quoted-string">'Usuario'</span> <span class="token operator">=&gt;</span> <span class="token function">trim</span><span class="token punctuation">(</span><span class="token variable">$input</span><span class="token punctuation">[</span><span class="token string single-quoted-string">'email'</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
					<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
				<span class="token punctuation">}</span>
			<span class="token punctuation">}</span>
			<span class="token class-name static-context">Validator</span><span class="token operator">::</span><span class="token function">make</span><span class="token punctuation">(</span><span class="token variable">$input</span><span class="token punctuation">,</span> <span class="token punctuation">[</span>
				<span class="token string single-quoted-string">'name'</span> <span class="token operator">=&gt;</span> <span class="token punctuation">[</span><span class="token string single-quoted-string">'required'</span><span class="token punctuation">,</span> <span class="token string single-quoted-string">'string'</span><span class="token punctuation">,</span> <span class="token string single-quoted-string">'max:255'</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
				<span class="token string single-quoted-string">'email'</span> <span class="token operator">=&gt;</span> <span class="token punctuation">[</span><span class="token string single-quoted-string">'required'</span><span class="token punctuation">,</span> <span class="token string single-quoted-string">'string'</span><span class="token punctuation">,</span> <span class="token string single-quoted-string">'email'</span><span class="token punctuation">,</span> <span class="token string single-quoted-string">'max:255'</span><span class="token punctuation">,</span> <span class="token string single-quoted-string">'unique:users'</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
				<span class="token string single-quoted-string">'passport'</span> <span class="token operator">=&gt;</span> <span class="token punctuation">[</span><span class="token string single-quoted-string">'required'</span><span class="token punctuation">,</span><span class="token string single-quoted-string">'unique:users'</span><span class="token punctuation">,</span> <span class="token string single-quoted-string">'min:5'</span><span class="token punctuation">,</span> <span class="token string single-quoted-string">'max:170'</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
				<span class="token string single-quoted-string">'password'</span> <span class="token operator">=&gt;</span> <span class="token variable">$this</span><span class="token operator">-&gt;</span><span class="token function">passwordRules</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
				<span class="token string single-quoted-string">'terms'</span> <span class="token operator">=&gt;</span> <span class="token class-name static-context">Jetstream</span><span class="token operator">::</span><span class="token function">hasTermsAndPrivacyPolicyFeature</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">?</span> <span class="token punctuation">[</span><span class="token string single-quoted-string">'required'</span><span class="token punctuation">,</span> <span class="token string single-quoted-string">'accepted'</span><span class="token punctuation">]</span> <span class="token punctuation">:</span> <span class="token string single-quoted-string">''</span><span class="token punctuation">,</span>
			<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token operator">-&gt;</span><span class="token function">validate</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> 
		<span class="token punctuation">}</span><span class="token keyword">else</span><span class="token punctuation">{</span>
			<span class="token class-name static-context">Validator</span><span class="token operator">::</span><span class="token function">make</span><span class="token punctuation">(</span><span class="token variable">$input</span><span class="token punctuation">,</span> <span class="token punctuation">[</span>
				<span class="token string single-quoted-string">'name'</span> <span class="token operator">=&gt;</span> <span class="token punctuation">[</span><span class="token string single-quoted-string">'required'</span><span class="token punctuation">,</span> <span class="token string single-quoted-string">'string'</span><span class="token punctuation">,</span> <span class="token string single-quoted-string">'max:255'</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
				<span class="token string single-quoted-string">'email'</span> <span class="token operator">=&gt;</span> <span class="token punctuation">[</span><span class="token string single-quoted-string">'required'</span><span class="token punctuation">,</span> <span class="token string single-quoted-string">'string'</span><span class="token punctuation">,</span> <span class="token string single-quoted-string">'email'</span><span class="token punctuation">,</span> <span class="token string single-quoted-string">'max:255'</span><span class="token punctuation">,</span> <span class="token string single-quoted-string">'unique:users'</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
				<span class="token string single-quoted-string">'password'</span> <span class="token operator">=&gt;</span> <span class="token variable">$this</span><span class="token operator">-&gt;</span><span class="token function">passwordRules</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
				<span class="token string single-quoted-string">'terms'</span> <span class="token operator">=&gt;</span> <span class="token class-name static-context">Jetstream</span><span class="token operator">::</span><span class="token function">hasTermsAndPrivacyPolicyFeature</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">?</span> <span class="token punctuation">[</span><span class="token string single-quoted-string">'required'</span><span class="token punctuation">,</span> <span class="token string single-quoted-string">'accepted'</span><span class="token punctuation">]</span> <span class="token punctuation">:</span> <span class="token string single-quoted-string">''</span><span class="token punctuation">,</span>
			<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token operator">-&gt;</span><span class="token function">validate</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> 
		<span class="token punctuation">}</span> 
		<span class="token variable">$user</span> <span class="token operator">=</span> <span class="token class-name static-context">User</span><span class="token operator">::</span><span class="token function">create</span><span class="token punctuation">(</span><span class="token punctuation">[</span>
			<span class="token string single-quoted-string">'name'</span> <span class="token operator">=&gt;</span> <span class="token variable">$input</span><span class="token punctuation">[</span><span class="token string single-quoted-string">'name'</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
			<span class="token string single-quoted-string">'email'</span> <span class="token operator">=&gt;</span> <span class="token variable">$input</span><span class="token punctuation">[</span><span class="token string single-quoted-string">'email'</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
			<span class="token string single-quoted-string">'password'</span> <span class="token operator">=&gt;</span> <span class="token class-name static-context">Hash</span><span class="token operator">::</span><span class="token function">make</span><span class="token punctuation">(</span><span class="token variable">$input</span><span class="token punctuation">[</span><span class="token string single-quoted-string">'password'</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
			<span class="token string single-quoted-string">'passport'</span> <span class="token operator">=&gt;</span> <span class="token variable">$input</span><span class="token punctuation">[</span><span class="token string single-quoted-string">'passport'</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
			<span class="token string single-quoted-string">'email_verified_at'</span> <span class="token operator">=&gt;</span> <span class="token function">date</span><span class="token punctuation">(</span><span class="token string single-quoted-string">'Y-m-d H:i:s'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
		<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token keyword">if</span><span class="token punctuation">(</span><span class="token variable">$rol</span> <span class="token operator">==</span> <span class="token string single-quoted-string">'cliente'</span><span class="token punctuation">)</span><span class="token punctuation">{</span>  
			<span class="token comment">//$user-&gt;email_verified_at = date('Y-m-d H:i:s');     </span>
			<span class="token comment">//Artisan::call('view:clear');</span>
			<span class="token comment">// Enviar un correo al cliente indicando que se ha registrado con exito</span>
			<span class="token variable">$mail_cliente</span> <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">RegistroCliente</span><span class="token punctuation">(</span><span class="token variable">$user</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
			<span class="token class-name static-context">Mail</span><span class="token operator">::</span><span class="token function">to</span><span class="token punctuation">(</span><span class="token variable">$user</span><span class="token operator">-&gt;</span><span class="token property">email</span><span class="token punctuation">)</span><span class="token operator">-&gt;</span><span class="token function">send</span><span class="token punctuation">(</span><span class="token variable">$mail_cliente</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
			<span class="token comment">// Enviar un correo al equipo se Sefar indicando que se ha registrado un cliente</span>
			<span class="token variable">$mail_sefar</span> <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">RegistroSefar</span><span class="token punctuation">(</span><span class="token variable">$user</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
			<span class="token class-name static-context">Mail</span><span class="token operator">::</span><span class="token function">to</span><span class="token punctuation">(</span><span class="token punctuation">[</span>
				<span class="token string single-quoted-string">'pedro.bazo@sefarvzla.com'</span><span class="token punctuation">,</span>
				<span class="token string single-quoted-string">'gerenciait@sefarvzla.com'</span><span class="token punctuation">,</span>
				<span class="token comment">/* 'egonzalez@sefarvzla.com', */</span>
				<span class="token string single-quoted-string">'analisisgenealogico@sefarvzla.com'</span><span class="token punctuation">,</span>
				<span class="token string single-quoted-string">'asistentedeproduccion@sefarvzla.com'</span><span class="token punctuation">,</span>
				<span class="token string single-quoted-string">'arosales@sefarvzla.com'</span><span class="token punctuation">,</span>
				<span class="token string single-quoted-string">'czanella@sefarvzla.com'</span><span class="token punctuation">,</span>
				<span class="token string single-quoted-string">'organizacionrrhh@sefarvzla.com'</span><span class="token punctuation">,</span>
				<span class="token string single-quoted-string">'gcuriel@sefarvzla.com'</span>
			<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token operator">-&gt;</span><span class="token function">send</span><span class="token punctuation">(</span><span class="token variable">$mail_sefar</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
			<span class="token keyword">return</span> <span class="token variable">$user</span><span class="token operator">-&gt;</span><span class="token function">assignRole</span><span class="token punctuation">(</span><span class="token string single-quoted-string">'Cliente'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span><span class="token keyword">else</span><span class="token punctuation">{</span>
			<span class="token keyword">return</span> <span class="token variable">$user</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span>
	<span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</span></code></pre></div>Incluir la biblioteca:<div class="language-php extra-class"><pre class="language-php"><code><span class="token keyword">use</span> <span class="token package">RealRashid<span class="token punctuation">\</span>SweetAlert<span class="token punctuation">\</span>Facades<span class="token punctuation">\</span>Alert</span><span class="token punctuation">;</span>
</code></pre></div></li> <li>Agregar el campo <strong>email_verified_at</strong> a la variable $fillable del modelo <strong>User</strong> (app\Models\User.php):<div class="language-php extra-class"><pre class="language-php"><code><span class="token keyword">protected</span> <span class="token variable">$fillable</span> <span class="token operator">=</span> <span class="token punctuation">[</span>
	<span class="token string single-quoted-string">'name'</span><span class="token punctuation">,</span>
	<span class="token string single-quoted-string">'email'</span><span class="token punctuation">,</span>
	<span class="token string single-quoted-string">'password'</span><span class="token punctuation">,</span>
	<span class="token string single-quoted-string">'password_md5'</span><span class="token punctuation">,</span>
	<span class="token string single-quoted-string">'passport'</span><span class="token punctuation">,</span>
	<span class="token string single-quoted-string">'email_verified_at'</span><span class="token punctuation">,</span>
<span class="token punctuation">]</span><span class="token punctuation">;</span>
</code></pre></div></li> <li>Adaptar controlador <strong>app\Http\Controllers\Controller.php</strong> para administrar la vista de clientes:<div class="language-php extra-class"><pre class="language-php"><code>≡
<span class="token keyword">class</span> <span class="token class-name-definition class-name">Controller</span> <span class="token keyword">extends</span> <span class="token class-name">BaseController</span>
<span class="token punctuation">{</span>
	≡
	<span class="token keyword">public</span> <span class="token keyword">function</span> <span class="token function-definition function">index</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
		≡
		<span class="token keyword">if</span><span class="token punctuation">(</span><span class="token class-name static-context">Auth</span><span class="token operator">::</span><span class="token function">user</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">-&gt;</span><span class="token function">hasRole</span><span class="token punctuation">(</span><span class="token string single-quoted-string">'Cliente'</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
			<span class="token variable">$IDCliente</span> <span class="token operator">=</span> <span class="token class-name static-context">Auth</span><span class="token operator">::</span><span class="token function">user</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">-&gt;</span><span class="token property">passport</span><span class="token punctuation">;</span>
			<span class="token keyword">return</span> <span class="token function">view</span><span class="token punctuation">(</span><span class="token string single-quoted-string">'arboles.tree'</span><span class="token punctuation">,</span> <span class="token function">compact</span><span class="token punctuation">(</span><span class="token string single-quoted-string">'IDCliente'</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span>

		<span class="token variable">$countries</span> <span class="token operator">=</span> <span class="token class-name static-context">Country</span><span class="token operator">::</span><span class="token function">where</span><span class="token punctuation">(</span><span class="token string single-quoted-string">'pais'</span><span class="token punctuation">,</span><span class="token string single-quoted-string">'!='</span><span class="token punctuation">,</span><span class="token string single-quoted-string">'aanull'</span><span class="token punctuation">)</span>
						<span class="token operator">-&gt;</span><span class="token function">orderBy</span><span class="token punctuation">(</span><span class="token string single-quoted-string">'pais'</span><span class="token punctuation">,</span><span class="token string single-quoted-string">'ASC'</span><span class="token punctuation">)</span><span class="token operator">-&gt;</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token variable">$user</span> <span class="token operator">=</span> <span class="token function">Auth</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">-&gt;</span><span class="token function">user</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token keyword">return</span> <span class="token function">view</span><span class="token punctuation">(</span><span class="token string single-quoted-string">'inicio'</span><span class="token punctuation">,</span> <span class="token function">compact</span><span class="token punctuation">(</span><span class="token string single-quoted-string">'countries'</span><span class="token punctuation">,</span> <span class="token string single-quoted-string">'user'</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div></li> <li>Configurar <strong>config\adminlte.php</strong> para el menú de los clientes:<div class="language-php extra-class"><pre class="language-php"><code>≡
<span class="token keyword">return</span> <span class="token punctuation">[</span>
	≡
	<span class="token string single-quoted-string">'menu'</span> <span class="token operator">=&gt;</span> <span class="token punctuation">[</span>
		≡
		<span class="token comment">/* *** ACCESOS *** */</span>
		<span class="token punctuation">[</span>
			≡
		<span class="token punctuation">]</span><span class="token punctuation">,</span>

		<span class="token comment">/* *** MENÚ PARA GENEALOGISTAS E INVESTIGADORES *** */</span>
		<span class="token punctuation">[</span>
			≡
		<span class="token punctuation">]</span><span class="token punctuation">,</span>

		<span class="token comment">/* *** REGISTROS ONIDEX, DIEX Y MAISANTA *** */</span>
		<span class="token punctuation">[</span>
			≡
		<span class="token punctuation">]</span><span class="token punctuation">,</span>

		<span class="token comment">/* *** MENÚ PARA DOCUMENTALISTAS *** */</span>
		<span class="token punctuation">[</span>
			≡
		<span class="token punctuation">]</span><span class="token punctuation">,</span>

		<span class="token comment">/* *** TABLAS GENERALES *** */</span>
		<span class="token punctuation">[</span>
			≡
		<span class="token punctuation">]</span><span class="token punctuation">,</span>

		<span class="token comment">/* *** CLIENTES *** */</span>
		<span class="token punctuation">[</span>
			<span class="token string single-quoted-string">'text'</span>        <span class="token operator">=&gt;</span> <span class="token string single-quoted-string">'Menú de opciones'</span><span class="token punctuation">,</span>
			<span class="token string single-quoted-string">'icon'</span>        <span class="token operator">=&gt;</span> <span class="token string single-quoted-string">'fas fa-caret-square-down'</span><span class="token punctuation">,</span>
			<span class="token string single-quoted-string">'icon_color'</span>  <span class="token operator">=&gt;</span> <span class="token string single-quoted-string">'blue'</span><span class="token punctuation">,</span>
			<span class="token string single-quoted-string">'can'</span>  <span class="token operator">=&gt;</span> <span class="token string single-quoted-string">'cliente'</span><span class="token punctuation">,</span>
			<span class="token string single-quoted-string">'submenu'</span> <span class="token operator">=&gt;</span> <span class="token punctuation">[</span>
				<span class="token punctuation">[</span>
					<span class="token string single-quoted-string">'text'</span>          <span class="token operator">=&gt;</span> <span class="token string single-quoted-string">'Cargar árbol'</span><span class="token punctuation">,</span>
					<span class="token string single-quoted-string">'icon'</span>          <span class="token operator">=&gt;</span> <span class="token string single-quoted-string">'fas fa-sitemap'</span><span class="token punctuation">,</span>
					<span class="token string single-quoted-string">'icon_color'</span>    <span class="token operator">=&gt;</span> <span class="token string single-quoted-string">'yellow'</span><span class="token punctuation">,</span>
					<span class="token string single-quoted-string">'route'</span>         <span class="token operator">=&gt;</span> <span class="token string single-quoted-string">'clientes.tree'</span><span class="token punctuation">,</span>
					<span class="token string single-quoted-string">'can'</span>           <span class="token operator">=&gt;</span> <span class="token string single-quoted-string">'cliente'</span><span class="token punctuation">,</span>
				<span class="token punctuation">]</span><span class="token punctuation">,</span>
				<span class="token punctuation">[</span>
					<span class="token string single-quoted-string">'text'</span>          <span class="token operator">=&gt;</span> <span class="token string single-quoted-string">'Perfil de usuario'</span><span class="token punctuation">,</span>
					<span class="token string single-quoted-string">'icon'</span>          <span class="token operator">=&gt;</span> <span class="token string single-quoted-string">'fas fa-user-cog'</span><span class="token punctuation">,</span>
					<span class="token string single-quoted-string">'icon_color'</span>    <span class="token operator">=&gt;</span> <span class="token string single-quoted-string">'yellow'</span><span class="token punctuation">,</span>
					<span class="token string single-quoted-string">'url'</span>           <span class="token operator">=&gt;</span> <span class="token string single-quoted-string">'user/profile'</span><span class="token punctuation">,</span>
					<span class="token string single-quoted-string">'can'</span>           <span class="token operator">=&gt;</span> <span class="token string single-quoted-string">'cliente'</span><span class="token punctuation">,</span>
				<span class="token punctuation">]</span><span class="token punctuation">,</span>
			<span class="token punctuation">]</span><span class="token punctuation">,</span>
		<span class="token punctuation">]</span><span class="token punctuation">,</span>
		<span class="token punctuation">[</span>
			<span class="token string single-quoted-string">'text'</span>          <span class="token operator">=&gt;</span> <span class="token string single-quoted-string">'Finalizar carga'</span><span class="token punctuation">,</span>
			<span class="token string single-quoted-string">'icon'</span>          <span class="token operator">=&gt;</span> <span class="token string single-quoted-string">'fas fa-sign-out-alt'</span><span class="token punctuation">,</span>
			<span class="token string single-quoted-string">'icon_color'</span>    <span class="token operator">=&gt;</span> <span class="token string single-quoted-string">'blue'</span><span class="token punctuation">,</span>
			<span class="token string single-quoted-string">'route'</span>         <span class="token operator">=&gt;</span> <span class="token string single-quoted-string">'clientes.salir'</span><span class="token punctuation">,</span>
			<span class="token string single-quoted-string">'can'</span>           <span class="token operator">=&gt;</span> <span class="token string single-quoted-string">'cliente'</span><span class="token punctuation">,</span>
		<span class="token punctuation">]</span><span class="token punctuation">,</span>
		
		<span class="token comment">/* *** PRUEBAS *** */</span>
		<span class="token punctuation">[</span>
			≡
		<span class="token punctuation">]</span><span class="token punctuation">,</span>
		≡
	<span class="token punctuation">]</span><span class="token punctuation">,</span>
	≡
<span class="token punctuation">]</span><span class="token punctuation">;</span>
</code></pre></div></li> <li>Crear controlador para administrar las vistas de clientes:
<ul><li>$ php artisan make:controller ClienteController</li></ul></li> <li>Crear grupo de rutas para vistas de clientes en <strong>routes\web.php</strong>:<div class="language-php extra-class"><pre class="language-php"><code>≡
<span class="token comment">// Grupo de rutas para vistas de clientes</span>
<span class="token class-name static-context">Route</span><span class="token operator">::</span><span class="token function">group</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token string single-quoted-string">'middleware'</span> <span class="token operator">=&gt;</span> <span class="token punctuation">[</span><span class="token string single-quoted-string">'auth'</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token string single-quoted-string">'as'</span> <span class="token operator">=&gt;</span> <span class="token string single-quoted-string">'clientes.'</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
	<span class="token class-name static-context">Route</span><span class="token operator">::</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string single-quoted-string">'tree'</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token class-name static-context">ClienteController</span><span class="token operator">::</span><span class="token keyword">class</span><span class="token punctuation">,</span> <span class="token string single-quoted-string">'tree'</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token operator">-&gt;</span><span class="token function">name</span><span class="token punctuation">(</span><span class="token string single-quoted-string">'tree'</span><span class="token punctuation">)</span>
		<span class="token operator">-&gt;</span><span class="token function">middleware</span><span class="token punctuation">(</span><span class="token string single-quoted-string">'can:cliente'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token class-name static-context">Route</span><span class="token operator">::</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string single-quoted-string">'salir'</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token class-name static-context">ClienteController</span><span class="token operator">::</span><span class="token keyword">class</span><span class="token punctuation">,</span> <span class="token string single-quoted-string">'salir'</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token operator">-&gt;</span><span class="token function">name</span><span class="token punctuation">(</span><span class="token string single-quoted-string">'salir'</span><span class="token punctuation">)</span>
		<span class="token operator">-&gt;</span><span class="token function">middleware</span><span class="token punctuation">(</span><span class="token string single-quoted-string">'can:cliente'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token class-name static-context">Route</span><span class="token operator">::</span><span class="token function">post</span><span class="token punctuation">(</span><span class="token string single-quoted-string">'procesar'</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token class-name static-context">ClienteController</span><span class="token operator">::</span><span class="token keyword">class</span><span class="token punctuation">,</span> <span class="token string single-quoted-string">'procesar'</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token operator">-&gt;</span><span class="token function">name</span><span class="token punctuation">(</span><span class="token string single-quoted-string">'procesar'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
≡
</code></pre></div></li> <li>Modificar la vista resources\views\livewire\vistas\arbol\tree-vista.blade.php:<div class="language-php extra-class"><pre class="language-php"><code>≡
<span class="token operator">&lt;</span>div <span class="token keyword">class</span><span class="token operator">=</span><span class="token string double-quoted-string">&quot;container overflow-x-scroll&quot;</span><span class="token operator">&gt;</span>
	<span class="token operator">&lt;</span>div <span class="token keyword">class</span><span class="token operator">=</span><span class="token string double-quoted-string">&quot;flex justify-between&quot;</span><span class="token operator">&gt;</span>
		<span class="token operator">&lt;</span>div <span class="token keyword">class</span><span class="token operator">=</span><span class="token string double-quoted-string">&quot;px-4 py-2 m-2&quot;</span><span class="token operator">&gt;</span>
			<span class="token punctuation">{</span><span class="token punctuation">{</span><span class="token operator">--</span> Á<span class="token constant">RBOL</span> <span class="token constant">EXPANDIDO</span> <span class="token constant">O</span> <span class="token constant">COMPACTO</span> <span class="token operator">--</span><span class="token punctuation">}</span><span class="token punctuation">}</span>
			<span class="token operator">&lt;</span>div <span class="token keyword">class</span><span class="token operator">=</span><span class="token string double-quoted-string">&quot;text-left&quot;</span><span class="token operator">&gt;</span>
				<span class="token operator">&lt;</span>label <span class="token keyword">for</span><span class="token operator">=</span><span class="token string double-quoted-string">&quot;Modo&quot;</span> <span class="token keyword">class</span><span class="token operator">=</span><span class="token string double-quoted-string">&quot;px-3 block text-sm font-medium text-gray-700&quot;</span> title<span class="token operator">=</span><span class="token string double-quoted-string">&quot;Indicar línea genealógica&quot;</span><span class="token operator">&gt;</span>Modo<span class="token operator">&lt;</span><span class="token operator">/</span>label<span class="token operator">&gt;</span>
				<span class="token operator">&lt;</span>select wire<span class="token punctuation">:</span>model<span class="token operator">=</span><span class="token string double-quoted-string">&quot;Modo&quot;</span> name<span class="token operator">=</span><span class="token string double-quoted-string">&quot;Modo&quot;</span><span class="token keyword">class</span><span class="token operator">=</span><span class="token string double-quoted-string">&quot;w-44 mt-1 block py-2 px-3 border border-gray-300 bg-white rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm&quot;</span><span class="token operator">&gt;</span>
					<span class="token operator">&lt;</span>option value<span class="token operator">=</span><span class="token string double-quoted-string">&quot;0&quot;</span><span class="token operator">&gt;</span>Expandido<span class="token operator">&lt;</span><span class="token operator">/</span>option<span class="token operator">&gt;</span>
					<span class="token operator">&lt;</span>option value<span class="token operator">=</span><span class="token string double-quoted-string">&quot;1&quot;</span><span class="token operator">&gt;</span>Compacto<span class="token operator">&lt;</span><span class="token operator">/</span>option<span class="token operator">&gt;</span>
				<span class="token operator">&lt;</span><span class="token operator">/</span>select<span class="token operator">&gt;</span>
			<span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
		<span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
		@<span class="token function">can</span><span class="token punctuation">(</span><span class="token string single-quoted-string">'genealogista'</span><span class="token punctuation">)</span>
		<span class="token operator">&lt;</span>div <span class="token keyword">class</span><span class="token operator">=</span><span class="token string double-quoted-string">&quot;px-4 py-2 m-2&quot;</span><span class="token operator">&gt;</span>
			<span class="token punctuation">{</span><span class="token punctuation">{</span><span class="token operator">--</span> <span class="token constant">FAMILIARES</span> <span class="token operator">--</span><span class="token punctuation">}</span><span class="token punctuation">}</span>
			<span class="token operator">&lt;</span>div <span class="token keyword">class</span><span class="token operator">=</span><span class="token string double-quoted-string">&quot;justify-center&quot;</span><span class="token operator">&gt;</span>
				<span class="token operator">&lt;</span>label <span class="token keyword">for</span><span class="token operator">=</span><span class="token string double-quoted-string">&quot;Familiares&quot;</span> <span class="token keyword">class</span><span class="token operator">=</span><span class="token string double-quoted-string">&quot;px-3 block text-sm font-medium text-gray-700&quot;</span> title<span class="token operator">=</span><span class="token string double-quoted-string">&quot;Familiares en el proceso&quot;</span><span class="token operator">&gt;</span>Familiares<span class="token operator">&lt;</span><span class="token operator">/</span>label<span class="token operator">&gt;</span>
				<span class="token operator">&lt;</span>select wire<span class="token punctuation">:</span>model<span class="token operator">=</span><span class="token string double-quoted-string">&quot;IDFamiliar&quot;</span> style<span class="token operator">=</span><span class="token string double-quoted-string">&quot;width:450px&quot;</span> name<span class="token operator">=</span><span class="token string double-quoted-string">&quot;Familiares&quot;</span> <span class="token keyword">class</span><span class="token operator">=</span><span class="token string double-quoted-string">&quot;w-44 mt-1 block py-2 px-3 border border-gray-300 bg-white rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm&quot;</span><span class="token operator">&gt;</span>
					<span class="token operator">&lt;</span>option value<span class="token operator">=</span><span class="token string double-quoted-string">&quot;{{ null }}&quot;</span><span class="token operator">&gt;</span><span class="token operator">-</span><span class="token operator">&lt;</span><span class="token operator">/</span>option<span class="token operator">&gt;</span>
					@<span class="token keyword">foreach</span> <span class="token punctuation">(</span><span class="token variable">$families</span> <span class="token keyword">as</span> <span class="token variable">$family</span><span class="token punctuation">)</span>
						<span class="token operator">&lt;</span>option value<span class="token operator">=</span><span class="token string double-quoted-string">&quot;{{ <span class="token interpolation"><span class="token variable">$family</span><span class="token operator">-&gt;</span><span class="token property">IDFamiliar</span></span> }}&quot;</span><span class="token operator">&gt;</span><span class="token punctuation">{</span><span class="token punctuation">{</span> <span class="token variable">$family</span><span class="token operator">-&gt;</span><span class="token property">Familiar</span><span class="token operator">.</span><span class="token string single-quoted-string">' - '</span><span class="token operator">.</span><span class="token variable">$family</span><span class="token operator">-&gt;</span><span class="token property">Parentesco</span> <span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>option<span class="token operator">&gt;</span>
					@<span class="token keyword">endforeach</span>
				<span class="token operator">&lt;</span><span class="token operator">/</span>select<span class="token operator">&gt;</span>
				@<span class="token keyword">if</span><span class="token punctuation">(</span><span class="token variable">$IDFamiliar</span><span class="token punctuation">)</span>
				<span class="token operator">&lt;</span>div <span class="token keyword">class</span><span class="token operator">=</span><span class="token string double-quoted-string">&quot;pt-2&quot;</span><span class="token operator">&gt;</span>
					<span class="token operator">&lt;</span>div <span class="token keyword">class</span><span class="token operator">=</span><span class="token string double-quoted-string">&quot;px-4 py-3 bg-gray-50 text-left sm:px-6&quot;</span><span class="token operator">&gt;</span>
						<span class="token operator">&lt;</span>a href<span class="token operator">=</span><span class="token string double-quoted-string">&quot;{{ route('arboles.tree.index', <span class="token interpolation"><span class="token variable">$IDFamiliar</span></span>) }}&quot;</span> target<span class="token operator">=</span><span class="token string double-quoted-string">&quot;_blank&quot;</span> <span class="token keyword">class</span><span class="token operator">=</span><span class="token string double-quoted-string">&quot;cfrSefar inline-flex justify-center py-2 px-4 border border-transparent shadow-sm text-sm font-medium rounded-md text-white bg-indigo-600 hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500&quot;</span><span class="token operator">&gt;</span>
							Ir a familiar seleccionado
						<span class="token operator">&lt;</span><span class="token operator">/</span>a<span class="token operator">&gt;</span>
					<span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
				<span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
				@<span class="token keyword">endif</span>
			<span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
		<span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
		@endcan
	<span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
≡
</code></pre></div></li> <li>Crear un <strong>maillable</strong> para notificar registros y carga de árbol tanto al cliente como a Sefar:
<ul><li>$ php artisan make:mail RegistroCliente</li> <li>$ php artisan make:mail RegistroSefar</li> <li>$ php artisan make:mail CargaCliente</li> <li>$ php artisan make:mail CargaSefar</li></ul></li> <li>Programar el método <strong>build</strong> de los archivos controladores de los maillables:
<ul><li><strong>app\Mail\CargaCliente.php</strong>:<div class="language-php extra-class"><pre class="language-php"><code>≡
<span class="token keyword">class</span> <span class="token class-name-definition class-name">CargaCliente</span> <span class="token keyword">extends</span> <span class="token class-name">Mailable</span>
<span class="token punctuation">{</span>
	≡
	<span class="token keyword">public</span> <span class="token keyword">function</span> <span class="token function-definition function">build</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
	<span class="token punctuation">{</span>
		<span class="token variable">$passport</span> <span class="token operator">=</span> <span class="token class-name static-context">Auth</span><span class="token operator">::</span><span class="token function">user</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">-&gt;</span><span class="token property">passport</span><span class="token punctuation">;</span>
		<span class="token variable">$agclientes</span> <span class="token operator">=</span> <span class="token class-name static-context">Agcliente</span><span class="token operator">::</span><span class="token function">where</span><span class="token punctuation">(</span><span class="token string single-quoted-string">'IDCliente'</span><span class="token punctuation">,</span><span class="token string single-quoted-string">'LIKE'</span><span class="token punctuation">,</span><span class="token string double-quoted-string">&quot;%<span class="token interpolation"><span class="token variable">$passport</span></span>%&quot;</span><span class="token punctuation">)</span><span class="token operator">-&gt;</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token keyword">return</span> <span class="token variable">$this</span><span class="token operator">-&gt;</span><span class="token function">view</span><span class="token punctuation">(</span><span class="token string single-quoted-string">'mail.carga-cliente'</span><span class="token punctuation">,</span> <span class="token function">compact</span><span class="token punctuation">(</span><span class="token string single-quoted-string">'agclientes'</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
			<span class="token operator">-&gt;</span><span class="token function">subject</span><span class="token punctuation">(</span><span class="token string single-quoted-string">'GRACIAS '</span> <span class="token operator">.</span> <span class="token function">strtoupper</span><span class="token punctuation">(</span><span class="token variable">$this</span><span class="token operator">-&gt;</span><span class="token property">user</span><span class="token operator">-&gt;</span><span class="token property">name</span><span class="token punctuation">)</span> <span class="token operator">.</span> <span class="token string single-quoted-string">' POR ACTUALIZAR SU ÁRBOL GENEALÓGICO'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div></li> <li><strong>app\Mail\CargaSefar.php</strong>:<div class="language-php extra-class"><pre class="language-php"><code>≡
<span class="token keyword">class</span> <span class="token class-name-definition class-name">CargaSefar</span> <span class="token keyword">extends</span> <span class="token class-name">Mailable</span>
<span class="token punctuation">{</span>
	≡
	<span class="token keyword">public</span> <span class="token keyword">function</span> <span class="token function-definition function">build</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
	<span class="token punctuation">{</span>
		<span class="token keyword">return</span> <span class="token variable">$this</span><span class="token operator">-&gt;</span><span class="token function">view</span><span class="token punctuation">(</span><span class="token string single-quoted-string">'mail.carga-sefar'</span><span class="token punctuation">)</span>
			<span class="token operator">-&gt;</span><span class="token function">subject</span><span class="token punctuation">(</span><span class="token function">strtoupper</span><span class="token punctuation">(</span><span class="token variable">$this</span><span class="token operator">-&gt;</span><span class="token property">user</span><span class="token operator">-&gt;</span><span class="token property">name</span><span class="token punctuation">)</span> <span class="token operator">.</span> <span class="token string single-quoted-string">' (ID: '</span> <span class="token operator">.</span> 
				<span class="token function">strtoupper</span><span class="token punctuation">(</span><span class="token variable">$this</span><span class="token operator">-&gt;</span><span class="token property">user</span><span class="token operator">-&gt;</span><span class="token property">passport</span><span class="token punctuation">)</span> <span class="token operator">.</span> <span class="token string single-quoted-string">') HA ACTUALIZADO SU CARGA GENEALÓGICA'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div></li> <li><strong>app\Mail\RegistroCliente.php</strong>:<div class="language-php extra-class"><pre class="language-php"><code>≡
<span class="token keyword">class</span> <span class="token class-name-definition class-name">RegistroCliente</span> <span class="token keyword">extends</span> <span class="token class-name">Mailable</span>
<span class="token punctuation">{</span>
	≡
	<span class="token keyword">public</span> <span class="token keyword">function</span> <span class="token function-definition function">build</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
	<span class="token punctuation">{</span>
		<span class="token keyword">return</span> <span class="token variable">$this</span><span class="token operator">-&gt;</span><span class="token function">view</span><span class="token punctuation">(</span><span class="token string single-quoted-string">'mail.registro-cliente'</span><span class="token punctuation">)</span>
			<span class="token operator">-&gt;</span><span class="token function">subject</span><span class="token punctuation">(</span><span class="token string single-quoted-string">'¡BIENVENIDO '</span> <span class="token operator">.</span> <span class="token function">strtoupper</span><span class="token punctuation">(</span><span class="token variable">$this</span><span class="token operator">-&gt;</span><span class="token property">user</span><span class="token operator">-&gt;</span><span class="token property">name</span><span class="token punctuation">)</span> <span class="token operator">.</span> <span class="token string single-quoted-string">'! SE HA REGISTRADO EXITOSAMENTE'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div></li> <li><strong>app\Mail\RegistroSefar.php</strong>:<div class="language-php extra-class"><pre class="language-php"><code>≡
<span class="token keyword">class</span> <span class="token class-name-definition class-name">RegistroSefar</span> <span class="token keyword">extends</span> <span class="token class-name">Mailable</span>
<span class="token punctuation">{</span>
	≡
	<span class="token keyword">public</span> <span class="token keyword">function</span> <span class="token function-definition function">build</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
	<span class="token punctuation">{</span>
		<span class="token keyword">return</span> <span class="token variable">$this</span><span class="token operator">-&gt;</span><span class="token function">view</span><span class="token punctuation">(</span><span class="token string single-quoted-string">'mail.registro-sefar'</span><span class="token punctuation">)</span>
			<span class="token operator">-&gt;</span><span class="token function">subject</span><span class="token punctuation">(</span><span class="token function">strtoupper</span><span class="token punctuation">(</span><span class="token variable">$this</span><span class="token operator">-&gt;</span><span class="token property">user</span><span class="token operator">-&gt;</span><span class="token property">name</span><span class="token punctuation">)</span> <span class="token operator">.</span> <span class="token string single-quoted-string">' (ID: '</span> <span class="token operator">.</span> 
				<span class="token function">strtoupper</span><span class="token punctuation">(</span><span class="token variable">$this</span><span class="token operator">-&gt;</span><span class="token property">user</span><span class="token operator">-&gt;</span><span class="token property">passport</span><span class="token punctuation">)</span> <span class="token operator">.</span> <span class="token string single-quoted-string">') SE HA REGISTRADO EN App Sefar Universal'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div></li></ul> <div class="custom-block warning"><p class="custom-block-title">Advertencia</p> <ul><li>En todos los archivos incluir en la clase la variable publica:<div class="language-php extra-class"><pre class="language-php"><code><span class="token keyword">public</span> <span class="token variable">$user</span><span class="token punctuation">;</span>
</code></pre></div></li> <li>En todos los archivos programar el método <strong>__construct</strong>:<div class="language-php extra-class"><pre class="language-php"><code><span class="token keyword">public</span> <span class="token keyword">function</span> <span class="token function-definition function">__construct</span><span class="token punctuation">(</span><span class="token class-name type-declaration">User</span> <span class="token variable">$user</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
	<span class="token variable">$this</span><span class="token operator">-&gt;</span><span class="token property">user</span> <span class="token operator">=</span> <span class="token variable">$user</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>	
</code></pre></div></li> <li>En todos los archivos importar el modelo <strong>User</strong>:<div class="language-php extra-class"><pre class="language-php"><code><span class="token keyword">use</span> <span class="token package">App<span class="token punctuation">\</span>Models<span class="token punctuation">\</span>User</span><span class="token punctuation">;</span>
</code></pre></div></li></ul> <p></p></div></li> <li>Diseñar las vistas respectivas para los correos de notificación:
<ul><li><strong>resources\views\mail\carga-cliente.blade.php</strong></li> <li><strong>resources\views\mail\carga-sefar.blade.php</strong></li> <li><strong>resources\views\mail\registro-cliente.blade.php</strong></li> <li><strong>resources\views\mail\registro-sefar.blade.php</strong></li></ul> <div class="custom-block tip"><p class="custom-block-title">Nota</p> <p>Ver código en repositorio</p></div></li> <li>Rediseñar la vista <strong>resources\views\inicio.blade.php</strong>:<div class="custom-block tip"><p class="custom-block-title">Nota</p> <p>Ver código en repositorio</p></div></li> <li>Crear método <strong>procesar</strong> en el controlador <strong>app\Http\Controllers\ClienteController.php</strong>:<div class="language-php extra-class"><pre class="language-php"><code>≡
<span class="token keyword">class</span> <span class="token class-name-definition class-name">ClienteController</span> <span class="token keyword">extends</span> <span class="token class-name">Controller</span>
<span class="token punctuation">{</span>
	≡
	<span class="token keyword">public</span> <span class="token keyword">function</span> <span class="token function-definition function">procesar</span><span class="token punctuation">(</span><span class="token class-name type-declaration">Request</span> <span class="token variable">$request</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
		<span class="token variable">$user</span> <span class="token operator">=</span> <span class="token function">Auth</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">-&gt;</span><span class="token function">user</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token comment">// Validación</span>
		<span class="token variable">$request</span><span class="token operator">-&gt;</span><span class="token function">validate</span><span class="token punctuation">(</span><span class="token punctuation">[</span>
			<span class="token string single-quoted-string">'passport'</span> <span class="token operator">=&gt;</span> <span class="token string single-quoted-string">'required|min:6|unique:users,passport,'</span><span class="token operator">.</span><span class="token variable">$user</span><span class="token operator">-&gt;</span><span class="token property">id</span><span class="token punctuation">,</span>
			<span class="token string single-quoted-string">'nombres'</span> <span class="token operator">=&gt;</span> <span class="token string single-quoted-string">'required'</span><span class="token punctuation">,</span>
			<span class="token string single-quoted-string">'apellidos'</span> <span class="token operator">=&gt;</span> <span class="token string single-quoted-string">'required'</span><span class="token punctuation">,</span>
			<span class="token string single-quoted-string">'email'</span> <span class="token operator">=&gt;</span> <span class="token string single-quoted-string">'email|required|unique:users,email,'</span><span class="token operator">.</span><span class="token variable">$user</span><span class="token operator">-&gt;</span><span class="token property">id</span><span class="token punctuation">,</span>
			<span class="token string single-quoted-string">'fnacimiento'</span> <span class="token operator">=&gt;</span> <span class="token string single-quoted-string">'required'</span><span class="token punctuation">,</span>
			<span class="token string single-quoted-string">'cnacimiento'</span> <span class="token operator">=&gt;</span> <span class="token string single-quoted-string">'required'</span><span class="token punctuation">,</span>
			<span class="token string single-quoted-string">'pnacimiento'</span> <span class="token operator">=&gt;</span> <span class="token string single-quoted-string">'required'</span><span class="token punctuation">,</span>
			<span class="token string single-quoted-string">'sexo'</span> <span class="token operator">=&gt;</span> <span class="token string single-quoted-string">'required'</span>
		<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

		<span class="token comment">// Actualizar usuario</span>
		<span class="token variable">$user</span><span class="token operator">-&gt;</span><span class="token property">name</span> <span class="token operator">=</span> <span class="token function">trim</span><span class="token punctuation">(</span><span class="token variable">$request</span><span class="token operator">-&gt;</span><span class="token property">nombres</span><span class="token punctuation">)</span> <span class="token operator">.</span> <span class="token string single-quoted-string">' '</span> <span class="token operator">.</span> <span class="token function">trim</span><span class="token punctuation">(</span><span class="token variable">$request</span><span class="token operator">-&gt;</span><span class="token property">apellidos</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token variable">$user</span><span class="token operator">-&gt;</span><span class="token property">email</span> <span class="token operator">=</span> <span class="token variable">$request</span><span class="token operator">-&gt;</span><span class="token property">email</span><span class="token punctuation">;</span>
		<span class="token variable">$user</span><span class="token operator">-&gt;</span><span class="token property">passport</span> <span class="token operator">=</span> <span class="token function">trim</span><span class="token punctuation">(</span><span class="token variable">$request</span><span class="token operator">-&gt;</span><span class="token property">passport</span><span class="token punctuation">)</span><span class="token punctuation">;</span>      
		<span class="token variable">$user</span><span class="token operator">-&gt;</span><span class="token function">save</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

		<span class="token comment">// Verificar si el usuario esta registrado en agclientes</span>
		<span class="token variable">$agcliente</span> <span class="token operator">=</span> <span class="token class-name static-context">Agcliente</span><span class="token operator">::</span><span class="token function">where</span><span class="token punctuation">(</span><span class="token string single-quoted-string">'IDCliente'</span><span class="token punctuation">,</span><span class="token variable">$user</span><span class="token operator">-&gt;</span><span class="token property">passport</span><span class="token punctuation">)</span><span class="token operator">-&gt;</span><span class="token function">where</span><span class="token punctuation">(</span><span class="token string single-quoted-string">'IDPersona'</span><span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token operator">-&gt;</span><span class="token function">count</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token keyword">if</span><span class="token punctuation">(</span><span class="token variable">$agcliente</span> <span class="token operator">==</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
			<span class="token comment">// Si no existe crea el árbol del cliente</span>
			<span class="token variable">$fnacimiento</span> <span class="token operator">=</span> <span class="token variable">$request</span><span class="token operator">-&gt;</span><span class="token property">fnacimiento</span><span class="token punctuation">;</span>
			<span class="token variable">$fnacimiento_entero</span> <span class="token operator">=</span> <span class="token function">strtotime</span><span class="token punctuation">(</span><span class="token variable">$fnacimiento</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
			<span class="token class-name static-context">Agcliente</span><span class="token operator">::</span><span class="token function">create</span><span class="token punctuation">(</span><span class="token punctuation">[</span>
				<span class="token string single-quoted-string">'IDCliente'</span> <span class="token operator">=&gt;</span> <span class="token function">trim</span><span class="token punctuation">(</span><span class="token variable">$user</span><span class="token operator">-&gt;</span><span class="token property">passport</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
				<span class="token string single-quoted-string">'IDPersona'</span> <span class="token operator">=&gt;</span> <span class="token number">1</span><span class="token punctuation">,</span>
				<span class="token string single-quoted-string">'Nombres'</span> <span class="token operator">=&gt;</span> <span class="token function">trim</span><span class="token punctuation">(</span><span class="token variable">$request</span><span class="token operator">-&gt;</span><span class="token property">nombres</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
				<span class="token string single-quoted-string">'Apellidos'</span> <span class="token operator">=&gt;</span> <span class="token function">trim</span><span class="token punctuation">(</span><span class="token variable">$request</span><span class="token operator">-&gt;</span><span class="token property">apellidos</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
				<span class="token string single-quoted-string">'NPasaporte'</span> <span class="token operator">=&gt;</span> <span class="token function">trim</span><span class="token punctuation">(</span><span class="token variable">$user</span><span class="token operator">-&gt;</span><span class="token property">passport</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
				<span class="token string single-quoted-string">'Sexo'</span> <span class="token operator">=&gt;</span> <span class="token function">trim</span><span class="token punctuation">(</span><span class="token variable">$request</span><span class="token operator">-&gt;</span><span class="token property">sexo</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
				<span class="token string single-quoted-string">'AnhoNac'</span> <span class="token operator">=&gt;</span> <span class="token function">date</span><span class="token punctuation">(</span><span class="token string double-quoted-string">&quot;Y&quot;</span><span class="token punctuation">,</span> <span class="token variable">$fnacimiento_entero</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
				<span class="token string single-quoted-string">'MesNac'</span> <span class="token operator">=&gt;</span> <span class="token function">date</span><span class="token punctuation">(</span><span class="token string double-quoted-string">&quot;m&quot;</span><span class="token punctuation">,</span> <span class="token variable">$fnacimiento_entero</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
				<span class="token string single-quoted-string">'DiaNac'</span> <span class="token operator">=&gt;</span> <span class="token function">date</span><span class="token punctuation">(</span><span class="token string double-quoted-string">&quot;d&quot;</span><span class="token punctuation">,</span> <span class="token variable">$fnacimiento_entero</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
				<span class="token string single-quoted-string">'LugarNac'</span> <span class="token operator">=&gt;</span> <span class="token function">trim</span><span class="token punctuation">(</span><span class="token variable">$request</span><span class="token operator">-&gt;</span><span class="token property">cnacimiento</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
				<span class="token string single-quoted-string">'PaisNac'</span> <span class="token operator">=&gt;</span> <span class="token function">trim</span><span class="token punctuation">(</span><span class="token variable">$request</span><span class="token operator">-&gt;</span><span class="token property">pnacimiento</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
				<span class="token string single-quoted-string">'NombresF'</span> <span class="token operator">=&gt;</span> <span class="token function">trim</span><span class="token punctuation">(</span><span class="token variable">$request</span><span class="token operator">-&gt;</span><span class="token property">nombre_f</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
				<span class="token string single-quoted-string">'NPasaporteF'</span> <span class="token operator">=&gt;</span> <span class="token function">trim</span><span class="token punctuation">(</span><span class="token variable">$request</span><span class="token operator">-&gt;</span><span class="token property">pasaporte_f</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
				<span class="token string single-quoted-string">'FRegistro'</span> <span class="token operator">=&gt;</span> <span class="token function">date</span><span class="token punctuation">(</span><span class="token string single-quoted-string">'Y-m-d H:i:s'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
				<span class="token string single-quoted-string">'PNacimiento'</span> <span class="token operator">=&gt;</span> <span class="token function">trim</span><span class="token punctuation">(</span><span class="token variable">$request</span><span class="token operator">-&gt;</span><span class="token property">pnacimiento</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
				<span class="token string single-quoted-string">'LNacimiento'</span> <span class="token operator">=&gt;</span> <span class="token function">trim</span><span class="token punctuation">(</span><span class="token variable">$request</span><span class="token operator">-&gt;</span><span class="token property">cnacimiento</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
				<span class="token string single-quoted-string">'FUpdate'</span> <span class="token operator">=&gt;</span> <span class="token function">date</span><span class="token punctuation">(</span><span class="token string single-quoted-string">'Y-m-d H:i:s'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
				<span class="token string single-quoted-string">'referido'</span> <span class="token operator">=&gt;</span> <span class="token function">trim</span><span class="token punctuation">(</span><span class="token variable">$request</span><span class="token operator">-&gt;</span><span class="token property">referido</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
				<span class="token string single-quoted-string">'Usuario'</span> <span class="token operator">=&gt;</span> <span class="token function">trim</span><span class="token punctuation">(</span><span class="token variable">$request</span><span class="token operator">-&gt;</span><span class="token property">email</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
			<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span>

		<span class="token comment">// Asignar rol de cliente</span>
		<span class="token variable">$user</span><span class="token operator">-&gt;</span><span class="token function">assignRole</span><span class="token punctuation">(</span><span class="token string single-quoted-string">'Cliente'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>	
		<span class="token keyword">return</span> <span class="token function">redirect</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">-&gt;</span><span class="token function">route</span><span class="token punctuation">(</span><span class="token string single-quoted-string">'clientes.tree'</span><span class="token punctuation">,</span> <span class="token variable">$user</span><span class="token operator">-&gt;</span><span class="token property">passport</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div></li> <li>Realizar commit:
<ul><li>$ git add .</li> <li>$ git commit -m &quot;Carga de clientes&quot;</li></ul></li></ol></div> <footer class="page-edit"><!----> <!----></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/guide/laravel/sefar2021/sefar2021-P03.html" class="prev">
        Proyecto App Sefar Universal 2021 (Parte III)
      </a></span> <span class="next"><a href="/guide/laravel/sefar2021/sefar2021-P05.html">
        Proyecto App Sefar Universal 2021 (Parte V)
      </a>
      →
    </span></p></div> </main></div><div class="global-ui"></div></div>
    <script src="/assets/js/app.5b50b18c.js" defer></script><script src="/assets/js/2.63c13255.js" defer></script><script src="/assets/js/18.d9651679.js" defer></script>
  </body>
</html>
