<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Proyecto App Sefar Universal 2021 (Parte VII) | Docs S++</title>
    <meta name="generator" content="VuePress 1.9.7">
    <link rel="icon" type="image/png" href="https://raw.githubusercontent.com/petrix12/imagenes2022/main/Soluciones%2B%2B/S%2B%2B.ico">
    <meta name="description" content="Documentación General">
    <meta name="theme-color" content="#3eaf7c">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    
    <link rel="preload" href="/assets/css/0.styles.cf1f87b2.css" as="style"><link rel="preload" href="/assets/js/app.271db0af.js" as="script"><link rel="preload" href="/assets/js/2.63c13255.js" as="script"><link rel="preload" href="/assets/js/23.c2d1c2e9.js" as="script"><link rel="prefetch" href="/assets/js/10.48929f7d.js"><link rel="prefetch" href="/assets/js/11.d19bb8e6.js"><link rel="prefetch" href="/assets/js/12.5220d855.js"><link rel="prefetch" href="/assets/js/13.63118c27.js"><link rel="prefetch" href="/assets/js/14.de416fbc.js"><link rel="prefetch" href="/assets/js/15.6c40b102.js"><link rel="prefetch" href="/assets/js/16.50046b07.js"><link rel="prefetch" href="/assets/js/17.246601f6.js"><link rel="prefetch" href="/assets/js/18.e29c4ef8.js"><link rel="prefetch" href="/assets/js/19.51805c4e.js"><link rel="prefetch" href="/assets/js/20.885520a9.js"><link rel="prefetch" href="/assets/js/21.110ef84e.js"><link rel="prefetch" href="/assets/js/22.89bec5c9.js"><link rel="prefetch" href="/assets/js/24.0d8bae3c.js"><link rel="prefetch" href="/assets/js/25.e45536d4.js"><link rel="prefetch" href="/assets/js/26.3613333a.js"><link rel="prefetch" href="/assets/js/27.38ce7268.js"><link rel="prefetch" href="/assets/js/28.83292aca.js"><link rel="prefetch" href="/assets/js/29.8f22e9de.js"><link rel="prefetch" href="/assets/js/3.24a329a2.js"><link rel="prefetch" href="/assets/js/30.191f2466.js"><link rel="prefetch" href="/assets/js/31.ee5c7176.js"><link rel="prefetch" href="/assets/js/32.f6629035.js"><link rel="prefetch" href="/assets/js/33.235a8790.js"><link rel="prefetch" href="/assets/js/34.efba546f.js"><link rel="prefetch" href="/assets/js/35.0a6ca200.js"><link rel="prefetch" href="/assets/js/36.631dd507.js"><link rel="prefetch" href="/assets/js/4.6d32e573.js"><link rel="prefetch" href="/assets/js/5.e457cf98.js"><link rel="prefetch" href="/assets/js/6.8d81f0ec.js"><link rel="prefetch" href="/assets/js/7.159f2f50.js"><link rel="prefetch" href="/assets/js/8.4dc47d25.js"><link rel="prefetch" href="/assets/js/9.6a63ad8e.js">
    <link rel="stylesheet" href="/assets/css/0.styles.cf1f87b2.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><!----> <span class="site-name">Docs S++</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/guide/" class="nav-link router-link-active">
  Guías
</a></div><div class="nav-item"><a href="/config/" class="nav-link">
  Doc
</a></div><div class="nav-item"><a href="https://github.com/petrix12" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Mi GitHub
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/guide/" class="nav-link router-link-active">
  Guías
</a></div><div class="nav-item"><a href="/config/" class="nav-link">
  Doc
</a></div><div class="nav-item"><a href="https://github.com/petrix12" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Mi GitHub
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div> <!----></nav>  <ul class="sidebar-links"><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Soluciones++</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>AWS</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Docker</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Herramientas</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading open"><span>Laravel</span> <span class="arrow down"></span></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/guide/laravel/sefar2022/sefar2022-P01.html" class="sidebar-link">Proyecto Sefar 2022 (PARTE I)</a></li><li><a href="/guide/laravel/sefar2022/sefar2022-P02.html" class="sidebar-link">Proyecto Sefar 2022 (PARTE II)</a></li><li><a href="/guide/laravel/sefar2022/sefar2022-P03.html" class="sidebar-link">Proyecto Sefar 2022 (PARTE III)</a></li><li><a href="/guide/laravel/sefar2021/sefar2021-P01.html" class="sidebar-link">Proyecto App Sefar Universal 2021 (Parte I)</a></li><li><a href="/guide/laravel/sefar2021/sefar2021-P02.html" class="sidebar-link">Proyecto App Sefar Universal 2021 (Parte II)</a></li><li><a href="/guide/laravel/sefar2021/sefar2021-P03.html" class="sidebar-link">Proyecto App Sefar Universal 2021 (Parte III)</a></li><li><a href="/guide/laravel/sefar2021/sefar2021-P04.html" class="sidebar-link">Proyecto App Sefar Universal 2021 (Parte IV)</a></li><li><a href="/guide/laravel/sefar2021/sefar2021-P05.html" class="sidebar-link">Proyecto App Sefar Universal 2021 (Parte V)</a></li><li><a href="/guide/laravel/sefar2021/sefar2021-P06.html" class="sidebar-link">Proyecto App Sefar Universal 2021 (Parte VI)</a></li><li><a href="/guide/laravel/sefar2021/sefar2021-P07.html" aria-current="page" class="active sidebar-link">Proyecto App Sefar Universal 2021 (Parte VII)</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/guide/laravel/sefar2021/sefar2021-P07.html#deploy-de-app-sefar-universal-en-aws" class="sidebar-link">Deploy de App Sefar Universal en AWS:</a></li><li class="sidebar-sub-header"><a href="/guide/laravel/sefar2021/sefar2021-P07.html#configurar-aws-s3" class="sidebar-link">Configurar AWS S3</a></li><li class="sidebar-sub-header"><a href="/guide/laravel/sefar2021/sefar2021-P07.html#comandos-git-para-crear-rama-y-luego-hacer-merge-en-la-principal" class="sidebar-link">Comandos Git para crear rama y luego hacer merge en la principal</a></li><li class="sidebar-sub-header"><a href="/guide/laravel/sefar2021/sefar2021-P07.html#configuracion-del-archivo-htaccess" class="sidebar-link">Configuración del archivo .htaccess:</a></li><li class="sidebar-sub-header"><a href="/guide/laravel/sefar2021/sefar2021-P07.html#modulo-cursos" class="sidebar-link">Módulo cursos</a></li><li class="sidebar-sub-header"><a href="/guide/laravel/sefar2021/sefar2021-P07.html#modificacion-registro-de-clientes-dic-2022" class="sidebar-link">Modificación Registro de clientes (DIC 2022)</a></li><li class="sidebar-sub-header"><a href="/guide/laravel/sefar2021/sefar2021-P07.html#deploy-en-hostinger" class="sidebar-link">Deploy en Hostinger</a></li></ul></li><li><a href="/guide/laravel/laravel2021/laravel2021.html" class="sidebar-link">Curso Laravel 8 desde cero</a></li></ul></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Lógica</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>PWA</span> <span class="arrow right"></span></p> <!----></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="proyecto-app-sefar-universal-2021-parte-vii"><a href="#proyecto-app-sefar-universal-2021-parte-vii" class="header-anchor">#</a> Proyecto App Sefar Universal 2021 (Parte VII)</h1> <ul><li>Versión: <strong>Laravel Framework 8.31.0</strong></li></ul> <h2 id="deploy-de-app-sefar-universal-en-aws"><a href="#deploy-de-app-sefar-universal-en-aws" class="header-anchor">#</a> Deploy de App Sefar Universal en AWS:</h2> <h3 id="lanzar-instancia-en-ec2"><a href="#lanzar-instancia-en-ec2" class="header-anchor">#</a> Lanzar instancia en EC2:</h3> <ol><li>Ir a https://aws.amazon.com/es</li> <li>Ir a <strong>Mi cuenta</strong> &gt; <strong>Consola de administración de AWS</strong> e iniciar sesión.</li> <li>Ir al servicio <strong>EC2</strong> y dar clic en <strong>Instancias New</strong>.</li> <li>Dar clic en el botón de <strong>Lanzar instancia</strong>.</li> <li>Seleccionar:
<ul><li>Ubuntu Server 18.04 LTS (HVM), SSD Volume Type - ami-0747bdcabd34c712a (64 bits x86) / ami-08353a25e80beea3e (64 bits Arm)</li></ul></li> <li>Seleccionar el de tipo t2.2xlarge.</li> <li>Dar clic en el botón <strong>Siguiente: Página Configuración de los detalles de la instancia</strong>.</li> <li>Dejar todo como está y dar clic en el botón <strong>Siguiente: Adición de almacenamiento</strong>.</li> <li>Establecer <strong>Tamaño (GiB)</strong> en <strong>120</strong>.</li> <li>Dar clic en el botón <strong>Siguiente: Agregar etiquetas</strong>.</li> <li>Dejar todo como está y dar clic en el botón <strong>Siguiente: Página Configure Security Group</strong>.</li> <li>Ajustar parámetros:
<ul><li>Dejar regla: <strong>SSH</strong></li> <li>Añadir regla: <strong>HTTP</strong></li> <li>Añadir regla: <strong>HTTPS</strong></li> <li>Para la regla <strong>SSH</strong> establecer <strong>Origen</strong> como <strong>Mi IP</strong></li> <li>Para las reglas <strong>HTTP</strong> y <strong>HTTPS</strong> establecer <strong>Origen</strong> como <strong>Cualquier lugar</strong></li></ul></li> <li>Dar clic en el botón <strong>Revisar y lanzar</strong>.</li> <li>Dejar todo como está y dar clic en el botón <strong>Lanzar</strong>.</li> <li>En el cuadro de diálogo para claves seleccionar <strong>Crear un nuevo par de claves</strong>.
<ul><li>Nombre del par de claves: <strong>appsefar</strong>.</li> <li>Dar clic en el botón: Descargar par de claves
<strong>Nota</strong>: Guardar en un lugar seguro y evitar que se suba a GitHub, en este caso lo guardaré en la raíz de la carpeta del proyecto, y editaremos el archivo .<strong>gitignore</strong> para evitar que se incluya en los repositorios:</li></ul> <div class="language- extra-class"><pre class="language-text"><code>/node_modules
/public/hot
/public/storage
/storage/*.key
/vendor
/a1_soportes
.env
.env.backup
.phpunit.result.cache
docker-compose.override.yml
Homestead.json
Homestead.yaml
npm-debug.log
yarn-error.log
appsefar.pem
</code></pre></div></li> <li>Dar clic en el botón <strong>Lanzar instancias</strong>.
<strong>Nota</strong>: Para revisar la nueva instancia se le puede dar clic en el botón <strong>Ver instancias</strong>.</li></ol> <h3 id="conectar-con-la-instancia-aws-appsefar-via-ssh"><a href="#conectar-con-la-instancia-aws-appsefar-via-ssh" class="header-anchor">#</a> Conectar con la instancia AWS appsefar vía SSH:</h3> <ol><li>Para los sistemas operativos Mac o Linux ejecutar:
<ul><li>$ chmod 400 appsefar.pem</li></ul></li> <li>Para el sistema operativo Windows:
<ul><li>Ubicar el archivo <strong>appsefar.pem</strong> en disco, presionar sobre el el botón derecho y dar clic en <strong>Propiedades</strong>.</li> <li>Seleccionar la pestaña de <strong>Seguridad</strong>.</li> <li>Presionar el botón: <strong>Opciones avanzadas</strong>.</li> <li>Presionar el botón: <strong>Deshabilitar herencia</strong>.</li> <li>Dar clic: <strong>Quitar todos los permisos heredados de este objeto</strong>.</li> <li>Copiar el nombre del <strong>Propietario</strong> que está entre los paréntesis del usuario (Pedro Bazo).</li> <li>Presionar el botón: <strong>Agregar</strong>.</li> <li>Dar clic: <strong>Seleccionar una entidad de seguridad</strong>.</li> <li>En <strong>Escriba el nombre de objeto para seleccionar</strong> escribrir el nombre copiado en los pasos anteriores.</li> <li>Presionar el botón: <strong>Comprobar nombres</strong>.</li> <li>Presionar el botón: <strong>Aceptar</strong>.</li> <li>Verificar que los permisos que tienen que estar habilitados son:
<ul><li>Lectura y ejecución</li> <li>Lectura</li></ul></li> <li>Presionar el botón: <strong>Aceptar</strong> (Cuadro de diálog: <strong>Entrada de permiso para appsefar.com</strong>).</li> <li>Presionar el botón: <strong>Aceptar</strong> (Cuadro de diálog: <strong>Configuración de seguridad avanzada para appsefar.pem</strong>).</li> <li>Presionar el botón: <strong>Aceptar</strong> (Cuadro de diálog: <strong>Propiedades: appsefar.pem</strong>).</li></ul></li> <li>En el navegador ingresar a la instancias presionando abajo de <strong>ID de la instancia</strong> y dar clic en el botón <strong>Conectar</strong>.</li> <li>Ir a <strong>Cliente SSH</strong> y copiar el comando de ejemplo: <strong>ssh -i &quot;appsefar.pem&quot; ubuntu@ec2-3-239-101-245.compute-1.amazonaws.com</strong>.</li> <li>En local ejecutar (en la ruta que se encuentre el archivo <strong>appsefar.pem</strong>):
<ul><li>$ ssh -i &quot;appsefar.pem&quot; ubuntu@ec2-3-239-101-245.compute-1.amazonaws.com</li> <li>A la pregunta: Are you sure you want to continue connecting (yes/no/[fingerprint])?
<ul><li>Respondemos: yes
<strong>Nota</strong>: Con esta acción hemos ingresado en el servidor de AWS.</li></ul></li></ul></li></ol> <h3 id="configurar-nuestro-servidor"><a href="#configurar-nuestro-servidor" class="header-anchor">#</a> Configurar nuestro servidor</h3> <ol><li>En la terminal del servidor de AWS:
<ul><li>Actualizar servidor:
<ul><li>$ sudo apt-get update</li> <li>$ sudo apt-get upgrade</li> <li>Cuando pregunte: Do you want to continue? [Y/n]
<ul><li>Responder: y</li></ul></li></ul></li> <li>Actualizar nuevamente el servidor:
<ul><li>$ sudo apt-get update</li></ul></li> <li>Configurar entorno para ejecutar Laravel:
<ul><li>$ sudo apt-get install software-properties-common</li> <li>$ sudo add-apt-repository ppa:ondrej/php</li> <li>Cuando pregunte: Press [ENTER] to continue or Ctrl-c to cancel adding it.
<ul><li>Presionamos ENTER.</li></ul></li> <li>Actualizar nuevamente el servidor:
<ul><li>$ sudo apt-get update</li></ul></li> <li>Instalar php:
<ul><li>$ sudo apt-get install php7.4</li> <li>Cuando pregunte: Do you want to continue? [Y/n]
<ul><li>Responder: y</li></ul></li></ul></li> <li>Instalar el servidor apache:
<ul><li>$ sudo apt-get install apache2</li> <li>$ sudo apt-get install libapache2-mod-php7.4
<strong>Nota</strong>: para ver la versión de php:
<ul><li>$ php -v</li></ul></li></ul></li> <li>Para saber los modulos instalados en php:
<ul><li>$ php -m</li> <li>Resultados:<div class="language- extra-class"><pre class="language-text"><code>[PHP Modules]
calendar
Core
ctype
date
exif
FFI
fileinfo
filter
ftp
gettext
hash
iconv
json
libxml
openssl
pcntl
pcre
PDO
Phar
posix
readline
Reflection
session
shmop
sockets
sodium
SPL
standard
sysvmsg
sysvsem
sysvshm
tokenizer
Zend OPcache
zlib

[Zend Modules]
Zend OPcache			
</code></pre></div></li></ul> <strong>Nota</strong>: Constrastar contra https://laravel.com/docs/8.x/deployment#server-requirements y verificar cuales son necesarias.</li> <li>Instalar extensiones de php necesarias para Laravel:
<ul><li>$ sudo apt-get install php7.4-bcmath</li> <li>$ sudo apt-get install php7.4-mbstring
<ul><li>En: Do you want to continue? [Y/n]
Responder: y</li></ul></li> <li>$ sudo apt-get install php7.4-xml</li></ul></li> <li>Instalar paquetes que necesitaremos más adelante:
<ul><li>$ sudo apt-get install unzip</li> <li>$ sudo apt-get install php7.4-zip
<ul><li>En: Do you want to continue? [Y/n]
Responder: y</li></ul></li> <li>$ sudo apt-get install php7.4-mysql</li> <li>$ sudo apt-get install php7.4-curl</li></ul></li></ul></li></ul></li> <li>En el navegador:
<ul><li>Ir: <strong>Servicios</strong> &gt; <strong>EC2</strong> &gt; <strong>Recursos</strong> &gt; <strong>Instancias</strong>.</li> <li>Seleccionar nuestra instancia en ejecución.</li> <li>Ubicar: Dirección IPv4 pública: <strong>3.239.101.245</strong>.
<strong>Nota</strong>: esta será la dirección de nuestro sitio web.</li></ul></li> <li>En la terminal del servidor de AWS:
<ul><li>Reiniciar el servidor apache:
<ul><li>$ sudo service apache2 restart
<strong>Nota</strong>: Para verificar que no tengamos ningún error:</li> <li>$ sudo service apache2 status</li></ul></li> <li>Habilitar el modulo rewrite
<ul><li>$ sudo a2enmod rewrite</li></ul></li> <li>Reiniciar el servidor apache:
<ul><li>$ sudo service apache2 restart</li></ul></li> <li>Definir punto de acceso a nuestra aplicación web:
<ul><li>Ingresar a la ruta: /var/www/html
<ul><li>$ cd /var/www/html
<strong>Nota</strong>: para ver los archivos contenidos en una ruta:</li> <li>$ ls</li></ul></li> <li>Editar el archivo index.html:
<ul><li>$ sudo nano index.html</li> <li>Cambiar la etiqueta title del head por:<div class="language-html extra-class"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>title</span><span class="token punctuation">&gt;</span></span>App Sefar<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>title</span><span class="token punctuation">&gt;</span></span>
</code></pre></div></li> <li>Para guardar, presionar:
<ul><li>Ctrl + X</li> <li>y</li> <li>ENTER</li></ul></li></ul></li> <li>Editar archivo de configuración de punto de acceso:
<ul><li>$ sudo nano /etc/apache2/sites-enabled/000-default.conf</li> <li>Cambiar línea:<div class="language- extra-class"><pre class="language-text"><code>DocumentRoot /var/www/html
</code></pre></div>Por:<div class="language- extra-class"><pre class="language-text"><code>DocumentRoot /var/www/AppSefarUniversal/public
</code></pre></div></li> <li>Para guardar, presionar:
<ul><li>Ctrl + X</li> <li>y</li> <li>ENTER</li></ul></li></ul></li></ul></li> <li>Reiniciar el servidor apache:
<ul><li>$ sudo service apache2 restart</li></ul></li></ul></li></ol> <h3 id="instalacion-de-composer"><a href="#instalacion-de-composer" class="header-anchor">#</a> Instalación de Composer</h3> <ol><li>Copiar de la página: https://getcomposer.org/download, el bloque de <strong>Command-line installation</strong>:<div class="language- extra-class"><pre class="language-text"><code>php -r &quot;copy('https://getcomposer.org/installer', 'composer-setup.php');&quot;
php -r &quot;if (hash_file('sha384', 'composer-setup.php') === '756890a4488ce9024fc62c56153228907f1545c228516cbf63f885e036d37e9a59d27d63f46af1d4d07ee0f76181c7d3') { echo 'Installer verified'; } else { echo 'Installer corrupt'; unlink('composer-setup.php'); } echo PHP_EOL;&quot;
php composer-setup.php
php -r &quot;unlink('composer-setup.php');&quot;
</code></pre></div></li> <li>En la terminal del servidor de AWS pegar las líneas de comandos que acabamos de copiar y presionar ENTER.</li> <li>Realizar la instalación global de composer:
<ul><li>$ sudo mv composer.phar /usr/local/bin/composer
<strong>Nota 1</strong>: Este comando se encuentra en https://getcomposer.org/doc/00-intro.md
<strong>Nota 2</strong>: Para comprobar que tenemos instalado composer, ejecutar:</li> <li>$ composer</li></ul></li></ol> <h3 id="clonar-repositorio-de-github-app-sefar"><a href="#clonar-repositorio-de-github-app-sefar" class="header-anchor">#</a> Clonar repositorio de GitHUb App Sefar:</h3> <ol><li>Ir a la ruta <strong>/var/www</strong>:
<ul><li>$ cd /var/www</li></ul></li> <li>Clonar el repositorio del proyecto:
<ul><li>$ sudo git clone https://github.com/petrix12/AppSefarUniversal.git</li></ul></li> <li>Ir a la ruta <strong>/var/www/AppSefarUniversal</strong>:
<ul><li>$ cd /var/www/AppSefarUniversal</li></ul></li> <li>Para poder instalar las dependencias de <strong>Composer</strong>, ejecutar:
<ul><li>$ sudo chown -R ubuntu:www-data .</li></ul></li> <li>Ejecutar permisos para la carpeta de laravel:
<ul><li>$ chmod -R 755 .</li> <li>$ chmod -R 777 ./storage</li></ul></li> <li>Instalar composer:
<ul><li>$ composer install</li></ul></li> <li>Crear el archivo <strong>.env</strong> a partir de <strong>.env.example</strong>:
<ul><li>$ cp .env.example .env
&lt;!-- 8. Generar llave del proyecto:</li> <li>$ php artisan key:generate --&gt;</li></ul></li> <li>Instalar NodeJs:
<ul><li>$ sudo apt install nodejs
<ul><li>Do you want to continue? [Y/n]
Responder: y</li></ul></li></ul></li> <li>Para ver la versión de NodeJs:
<ul><li>$ nodejs -v</li></ul></li> <li>Actualizar NodeJs:
<ul><li>$ curl -sL https://deb.nodesource.com/setup_14.x | sudo -E bash -</li></ul></li> <li>Ejecutar:
<ul><li>$ sudo apt-get install -y nodejs
<strong>Nota</strong>: Para ver la versión de npm:</li> <li>$ npm -v</li></ul></li> <li>Ejecutar:
<ul><li>$ npm install</li> <li>$ npm run dev</li></ul></li></ol> <h3 id="crear-base-de-datos"><a href="#crear-base-de-datos" class="header-anchor">#</a> Crear base de datos</h3> <ol><li>En la página de AWS buscar el servicio <strong>RDS</strong> (https://console.aws.amazon.com/rds/home?region=us-east-1):
<ul><li>Dar clic en el botón: <strong>Crear base de datos</strong>.</li> <li>En <strong>Elegir un método de creación de base de datos</strong>:
<ul><li>Seleccionar la opción: <strong>Creación estándar</strong>.</li></ul></li> <li>En <strong>Opciones del motor</strong>:
<ul><li>Seleccionar la opción: <strong>MySQL</strong>.</li> <li>Seleccionar la versión: <strong>MySQL 8.0.23</strong>.</li></ul></li> <li>En <strong>Plantillas</strong>:
<ul><li>Seleccionar la opción: <strong>Producción</strong>.</li></ul></li> <li>En <strong>Configuración</strong> &gt; <strong>Identificador de instancias de bases de datos</strong>:
<ul><li>Escribir: appsefar-db</li></ul></li> <li>En <strong>Configuración</strong> &gt; <strong>Configuración de credenciales</strong> &gt; <strong>Nombre de usuario maestro</strong>:
<ul><li>Escribir: appsefar_usr</li></ul></li> <li>En <strong>Configuración</strong> &gt; <strong>Configuración de credenciales</strong> &gt; <strong>Generación automática de contraseña</strong>: Seleccionar.</li> <li>En <strong>Conectividad</strong> &gt; <strong>Acceso público</strong>: Seleccionar <strong>Si</strong>.</li> <li>En <strong>Configuración adicional</strong> &gt; <strong>Opciones de base de datos</strong> &gt; <strong>Nombre de base de datos inicial</strong>:
<ul><li>Escribir: appsefar_db</li></ul></li> <li>Presionar botón: <strong>Crear base de datos</strong>.</li> <li>Cuando finalice la creación de la base de datos, presionar el botón: <strong>View credential details</strong> y anotar credenciales en un lugar seguro.</li></ul></li></ol> <h3 id="editar-los-security-group"><a href="#editar-los-security-group" class="header-anchor">#</a> Editar los &quot;Security Group&quot;</h3> <ol><li>En la página de AWS seleccionar la base de datos <strong>appsefar-db</strong>: <strong>Amazon RDS</strong> &gt; <strong>Databases</strong>.</li> <li>Seleccionar <strong>Conectividad y seguridad</strong> &gt; <strong>Seguridad</strong> &gt; <strong>Grupos de seguridad de la VPC</strong> &gt; <strong>default (sg-09f6e23a)</strong>.</li> <li>Seleccionar <strong>Grupos de seguridad</strong> &gt; <strong>ID del grupo de seguridad</strong> &gt; <strong>sg-09f6e23a</strong>.</li> <li>Seleccionar <strong>Reglas de entrada</strong> y presionar botón <strong>Edit inbound rules</strong>.</li> <li>Presionar el botón <strong>Agregar regla</strong> y seleccionar el tipo <strong>MySQL/Aurora</strong> y seleccionar como origen <strong>Mi IP</strong>.</li> <li>Presionar botón <strong>Guardar reglas</strong>.</li></ol> <h3 id="conectar-base-de-datos-de-aws-con-local-mysql-workbench"><a href="#conectar-base-de-datos-de-aws-con-local-mysql-workbench" class="header-anchor">#</a> Conectar base de datos de AWS con local MySQL Workbench</h3> <ol><li>En caso de no tener instalado <strong>MySQL Workbench</strong>:
<ul><li>Ir a https://www.mysql.com/products/workbench</li> <li>Presionar el botón <strong>Download Now »</strong>.</li> <li>En la siguiente página presionar el botón <strong>Download</strong> y luego en el enlace <strong>No thanks, just start my download</strong>.</li> <li>Instalar <strong>MySQL Workbench</strong>.</li></ul></li> <li>En <strong>MySQL Workbench</strong>:
<ul><li>Seleccionar <strong>Database</strong> &gt; <strong>Manage Connections...</strong>.</li> <li>En el cuadro de diálogo <strong>Manage Server Connections</strong> suministrar la siguiente información:
<ul><li>Presionar botón: New</li> <li>Connection Name: appsefar</li> <li>Hostname: appsefar-db.cgfry9dn7zav.us-east-1.rds.amazonaws.com
<strong>Nota</strong>: Es el punto de enlace que aparece en la página de AWS: <strong>RDS</strong> &gt; <strong>Databases</strong> &gt; <strong>appsefar-db</strong>.</li> <li>Port: 3306</li> <li>Username: appsefar_usr</li> <li>Password: ************</li></ul></li> <li>Presionar botón: <strong>Test Connection</strong> para comprobar el estado de la conección.</li> <li>Presionar botón: <strong>Close</strong>.</li> <li>Seleccionar <strong>Database</strong> &gt; <strong>Connect to Database</strong>.</li> <li>En el cuadro de diálogo <strong>Connect to Database</strong> seleccionamos la conección <strong>appsefar</strong> y presionamos el botón <strong>OK</strong>.
<strong>Nota</strong>: También se puede conectar con la extensión de VSC <strong>MySQL cwejan</strong>.</li></ul></li></ol> <h3 id="configuracion-de-credenciales-en-laravel"><a href="#configuracion-de-credenciales-en-laravel" class="header-anchor">#</a> Configuración de credenciales en Laravel</h3> <ol><li>En la terminal de AWS ir a la ruta <strong>/var/www/AppSefarUniversal</strong>:
<ul><li>$ cd /var/www/AppSefarUniversal</li></ul></li> <li>En la terminal de AWS editar el archivo <strong>.env</strong>:
<ul><li>$ nano .env</li></ul></li> <li>Modificar los siguientes parámetros en el archivo <strong>.env</strong>:<div class="language- extra-class"><pre class="language-text"><code>APP_NAME=&quot;App Sefar Universal&quot;
APP_ENV=production
APP_KEY=
APP_DEBUG=false
APP_URL=http://3.239.101.245

LOG_LEVEL=debug

DB_CONNECTION=mysql
DB_HOST=appsefar-db.cgfry9dn7zav.us-east-1.rds.amazonaws.com
DB_PORT=3306
DB_DATABASE=appsefar_db
DB_USERNAME=appsefar_usr
DB_PASSWORD=*************

ONIDEX_CONNECTION=mysql
ONIDEX_HOST=107.180.2.195
ONIDEX_PORT=3306
ONIDEX_DATABASE=onidex
ONIDEX_USERNAME=pxvim6av41qx
ONIDEX_PASSWORD=**********

BROADCAST_DRIVER=log
CACHE_DRIVER=file
QUEUE_CONNECTION=sync
SESSION_DRIVER=database
SESSION_LIFETIME=120

MEMCACHED_HOST=127.0.0.1

REDIS_HOST=127.0.0.1
REDIS_PASSWORD=null
REDIS_PORT=6379

MAIL_DRIVER=smtp
MAIL_HOST=smtp.gmail.com
MAIL_PORT=587
MAIL_USERNAME=info@sefarvzla.com
MAIL_PASSWORD=**************
MAIL_ENCRYPTION=tls
MAIL_FROM_ADDRESS=info@sefarvzla.com
MAIL_FROM_NAME=&quot;${APP_NAME}&quot;

AWS_ACCESS_KEY_ID=
AWS_SECRET_ACCESS_KEY=
AWS_DEFAULT_REGION=eu-west-1
AWS_BUCKET=

PUSHER_APP_ID=
PUSHER_APP_KEY=
PUSHER_APP_SECRET=
PUSHER_APP_CLUSTER=mt1

MIX_PUSHER_APP_KEY=&quot;${PUSHER_APP_KEY}&quot;
MIX_PUSHER_APP_CLUSTER=&quot;${PUSHER_APP_CLUSTER}&quot;
</code></pre></div><ul><li><strong>Nota 1</strong>: Luego que se configure el nombre del dominio correspondiente cambiar la variable de entorno:<div class="language- extra-class"><pre class="language-text"><code>APP_URL=http://3.239.101.245
</code></pre></div>Por:<div class="language- extra-class"><pre class="language-text"><code>APP_URL=https://app.sefaruniversal.com
</code></pre></div></li> <li><strong>Nota 2</strong>: El valor de la variable de entorno <strong>DB_HOST</strong> proviene de la página de AWS en: <strong>RDS</strong> &gt; <strong>Databases</strong> &gt; <strong>appsefar-db</strong> en <strong>Conectividad y seguridad</strong> -&gt; <strong>Punto de enlace y puerto</strong> -&gt; <strong>Punto de enlace</strong>.</li> <li><strong>Nota 3</strong>: Los valores de las variables de entorno correspondiente a <strong>MAIL_</strong> están configurados con la cuenta de <strong>info@sefarvzla.com</strong>, también se podría configurar con una cuenta de <strong>AWS</strong>.</li></ul></li> <li>Para guardar el archivo <strong>.env</strong>:
<ul><li>$ Ctrl + X</li> <li>$ y</li> <li>$ ENTER</li></ul></li> <li>Generar llave del proyecto:
<ul><li>$ php artisan key:generate</li></ul></li> <li>Para verificar que podemos establecer una conexión con la base de datos, ir a la terminal AWS y ejecutar:
<ul><li>$ php artisan tinker</li> <li>/&gt;&gt;&gt; DB::connection()-&gt;getPdo();</li> <li><strong>Nota</strong>: si el resultado de la ejecución es parecida a la que se muestra a continuación es que logramos establecer la conexión:</li></ul> <div class="language-json extra-class"><pre class="language-json"><code>=&gt; PDO <span class="token punctuation">{</span>#<span class="token number">4731</span>
	inTransaction<span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
	attributes<span class="token operator">:</span> <span class="token punctuation">{</span>
	CASE<span class="token operator">:</span> NATURAL<span class="token punctuation">,</span>
	ERRMODE<span class="token operator">:</span> EXCEPTION<span class="token punctuation">,</span>
	AUTOCOMMIT<span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span>
	PERSISTENT<span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
	DRIVER_NAME<span class="token operator">:</span> <span class="token string">&quot;mysql&quot;</span><span class="token punctuation">,</span>
	SERVER_INFO<span class="token operator">:</span> <span class="token string">&quot;Uptime: 104373  Threads: 6  Questions: 488396  Slow queries: 0  Opens: 337  Flush tables: 3  Open tables: 238  Queries per second avg: 4.679&quot;</span><span class="token punctuation">,</span>
	ORACLE_NULLS<span class="token operator">:</span> NATURAL<span class="token punctuation">,</span>
	CLIENT_VERSION<span class="token operator">:</span> <span class="token string">&quot;mysqlnd 7.4.22&quot;</span><span class="token punctuation">,</span>
	SERVER_VERSION<span class="token operator">:</span> <span class="token string">&quot;8.0.23&quot;</span><span class="token punctuation">,</span>
	STATEMENT_CLASS<span class="token operator">:</span> <span class="token punctuation">[</span>
		<span class="token string">&quot;PDOStatement&quot;</span><span class="token punctuation">,</span>
	<span class="token punctuation">]</span><span class="token punctuation">,</span>
	EMULATE_PREPARES<span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span>
	CONNECTION_STATUS<span class="token operator">:</span> <span class="token string">&quot;appsefar-db.cgfry9dn7zav.us-east-1.rds.amazonaws.com via TCP/IP&quot;</span><span class="token punctuation">,</span>
	DEFAULT_FETCH_MODE<span class="token operator">:</span> BOTH<span class="token punctuation">,</span>
	<span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span>	
</code></pre></div></li> <li>Salir de tinker:
<ul><li>/&gt;&gt;&gt; Ctrl + C</li></ul></li> <li>Ejecutar las migraciones en la terminal de AWS:
<ul><li>$ php artisan migrate
<ul><li>Do you really wish to run this command? (yes/no) [no]: yes</li></ul></li></ul></li></ol> <h3 id="fix-configuracion-del-servidor"><a href="#fix-configuracion-del-servidor" class="header-anchor">#</a> Fix: Configuración del servidor</h3> <ol><li>Ingresar al archivo de configuración de apache en la terminal de AWS:
<ul><li>$ sudo nano /etc/apache2/apache2.conf</li> <li>$ sudo nano /etc/apache2/sites-available/000-default.conf</li></ul></li> <li>Comentar las siguientes líneas con #:<div class="language- extra-class"><pre class="language-text"><code># User ${APACHE_RUN_USER}
# Group ${APACHE_RUN_GROUP}
</code></pre></div></li> <li>A continuación agregar las líneas:<div class="language- extra-class"><pre class="language-text"><code>User ubuntu
Group ubuntu
</code></pre></div></li> <li>Cambiar el siguiente bloque de códgio:<div class="language- extra-class"><pre class="language-text"><code>&lt;Directory /&gt;
		Options FollowSymLinks
		AllowOverride None
		Require all denied
&lt;/Directory&gt;

&lt;Directory /usr/share&gt;
		AllowOverride None
		Require all granted
&lt;/Directory&gt;

&lt;Directory /var/www/&gt;
		Options Indexes FollowSymLinks
		AllowOverride None
		Require all granted
&lt;/Directory&gt;
</code></pre></div>Por:<div class="language- extra-class"><pre class="language-text"><code>&lt;Directory /&gt;
		Options FollowSymLinks
		AllowOverride All
		Require all denied
&lt;/Directory&gt;

&lt;Directory /usr/share&gt;
		AllowOverride All
		Require all granted
&lt;/Directory&gt;

&lt;Directory /var/www/&gt;
		Options Indexes FollowSymLinks
		AllowOverride All
		Require all granted
&lt;/Directory&gt;
</code></pre></div></li> <li>Para guardar los cambios:
<ul><li>$ Ctrl + X</li> <li>$ y</li> <li>$ ENTER</li></ul></li> <li>Habilitar modo rewrite:
<ul><li>$ sudo a2enmod rewrite</li></ul></li> <li>Reiniciar el servidor de apache:
<ul><li>$ sudo service apache2 restart</li></ul></li> <li>Para ver el estatus del servidor apache:
<ul><li>$ sudo service apache2 status</li></ul></li></ol> <h3 id="permitir-acceso-a-base-de-datos-onidex-en-servidor-godaddy"><a href="#permitir-acceso-a-base-de-datos-onidex-en-servidor-godaddy" class="header-anchor">#</a> Permitir acceso a base de datos onidex en servidor GoDaddy</h3> <ol><li>Ingresar al cPanel de GoDaddy:
<ul><li>https://a2plcpnl0082.prod.iad2.secureserver.net:2083</li> <li>Introducir las credenciales</li></ul></li> <li>Dentro del cPanel ir a <strong>BASES DE DATOS</strong> &gt; <strong>MySQL remoto®</strong>.</li> <li>En <strong>Añadir anfitrión de acceso</strong> introducir los siguientes valores:
<ul><li>Anfitrión (se permite el comodín %): <strong>3.239.101.245</strong></li> <li>Comment (optional): <strong>AWS appsefar</strong></li></ul></li> <li>Presionar el botón <strong>Añadir anfitrión</strong>.</li></ol> <h3 id="configurar-filezilla-con-nuestra-instancia-ec2"><a href="#configurar-filezilla-con-nuestra-instancia-ec2" class="header-anchor">#</a> Configurar FileZilla con nuestra instancia EC2</h3> <ul><li><strong>URL</strong>: https://filezilla-project.org</li></ul> <ol><li>Ejecutar FileZilla e ir a <strong>Edición</strong> &gt; <strong>Opciones...</strong>.</li> <li>En el cuadro de diálogo <strong>Opciones</strong> en <strong>Selecciones página:</strong> ir a <strong>Conexión</strong> &gt; <strong>SFTP</strong>.</li> <li>Luego en el panel de <strong>Claves privadas:</strong> presionar el botón <strong>Añadir archivo de clave...</strong>.</li> <li>Ubicar el archivo de credenciales <strong>appsefar.pem</strong> y presionar el botón <strong>Abrir</strong>.</li> <li>Presionar el botón <strong>Aceptar</strong> para salir del cuadro de diálogo <strong>Opciones</strong>.</li> <li>Ir a <strong>Archivo</strong> &gt; <strong>Gestor de sitios...</strong>.</li> <li>En el cuadro de diálogo <strong>Gestor de sitios</strong> presionar el botón <strong>Nuevo sitio</strong> nombrarlo <strong>AWS App Sefar</strong> e intruducir los siguientes parámetros:
<ul><li>Protocolo: SFTP - SSH File Transfer Protocol</li> <li>Servidor: 3.239.101.245</li> <li>Modo de acceso: Interactivo</li> <li>Usuario: ubuntu
<strong>Nota 1</strong>: Posibles nombres de usuarios según el sistema operativo en EC-2:
<ul><li>Amazon Linux: ec2-user</li> <li>RHEL5: root o ec2-user.</li> <li>Ubuntu: ubuntu</li> <li>SUSE Linux: root . Para</li> <li>Debian: admin.</li> <li>Otros: consulte el proveedor de AMI.
<strong>Nota 2</strong>: FileZilla determinará automáticamente la clave. No se necesitará especificarla después de haberla importardo.</li></ul></li></ul></li> <li>Presionar el botón <strong>Conectar</strong>.</li></ol> <h3 id="ejemplo-de-registro-de-un-cliente-con-parametros-get"><a href="#ejemplo-de-registro-de-un-cliente-con-parametros-get" class="header-anchor">#</a> Ejemplo de registro de un cliente con parámetros GET</h3> <ul><li>http://3.239.101.245/register?nombre=Detal%20y%20Borrar&amp;cnacimiento=Punto%20Fijo&amp;email=delete.borrar33%40gmail.com&amp;fnacimiento=1977-11-03&amp;nombre_f=Perensejo%20Borrar&amp;nombres=Fulanito&amp;pasaporte=1234567999&amp;pasaporte_f=5555555&amp;pnacimiento=Venezuela&amp;sexo=M</li></ul> <h3 id="actualizar-proyecto-en-aws-desde-github"><a href="#actualizar-proyecto-en-aws-desde-github" class="header-anchor">#</a> Actualizar proyecto en AWS desde GitHub</h3> <ul><li>$ ssh -i &quot;appsefar.pem&quot; ubuntu@ec2-3-239-101-245.compute-1.amazonaws.com</li> <li>$ cd /var/www/AppSefarUniversal</li> <li>$ sudo git pull
<strong>Nota</strong>: en caso de necesitar forzar la actualización:
<ul><li>$ sudo git reset --hard HEAD</li> <li>$ git pull</li></ul></li></ul> <h3 id="puntos-finales-para-finalizar-la-migracion-de-godaddy-a-aws"><a href="#puntos-finales-para-finalizar-la-migracion-de-godaddy-a-aws" class="header-anchor">#</a> Puntos finales para finalizar la migración de GoDaddy a AWS</h3> <ol><li>Migrar todos los registros de todas las tablas de GoDaddy a la instacia de MySQL de AWS.</li> <li>Copiar archivos de la ruta <strong>storage\app\public</strong> de <strong>GoDaddy</strong> a <strong>AWS</strong>.</li> <li>Copiar documentos.</li> <li>Transferir nombre de dominio de GoDaddy a AWS.</li> <li>Estudiar como guardar los documentos directamente en Google Drive.</li></ol> <h2 id="configurar-aws-s3"><a href="#configurar-aws-s3" class="header-anchor">#</a> Configurar AWS S3</h2> <ol><li>Ingresar en: https://aws.amazon.com/es</li> <li>Ir a <strong>IAM</strong> (Administrar el acceso a los recursos de AWS): https://us-east-1.console.aws.amazon.com/iamv2/home?region=us-east-1#/home</li> <li>Crear usuario:
<ul><li>Clic en <strong>Usuarios</strong> y luego en <strong>Agregar usuarios</strong>.</li> <li>Nombre de usuario: <strong>appsefar</strong>.</li> <li>Tipo de credenciales: <strong>Clave de acceso: acceso mediante programación</strong>.</li> <li>Clic en <strong>Siguiente: Permisos</strong>.</li> <li>Clic en <strong>Asociar directamente las políticas existentes</strong>.</li> <li>Seleccionar el permiso:
<ul><li>AmazonS3FullAccess</li></ul></li> <li>Clic en <strong>Siguiente: Etiquetas</strong>.</li> <li>Clic en <strong>Siguiente: Revisar</strong>.</li> <li>Clic en <strong>Crear un usuario</strong>.</li> <li>Obtener los valores:
<ul><li><strong>ID de clave de acceso</strong>.</li> <li><strong>Clave de acceso secreta</strong>.</li></ul></li></ul></li> <li>Crear Bucket:
<ul><li>Ir a <strong>S3</strong> (Almacenamiento escalable en la nube): https://s3.console.aws.amazon.com/s3/get-started?region=us-east-1</li> <li>Clic en <strong>Crear bucket</strong>:
<ul><li>Nombre del bucket: <strong>appsefar-bucket-s3</strong>.</li> <li>Región de AWS: <strong>EE. UU. Est (Norte de Virginia) us-east-1</strong>.</li> <li>Clic en <strong>Crear bucket</strong>.</li></ul></li> <li>Clic en el nuevo bucket: <strong>appsefar-bucket-s3</strong>.</li> <li>Clic en <strong>Permisos</strong>:
<ul><li>En <strong>Propiedad de objetos</strong> clic en <strong>Editar</strong>.</li> <li>Seleccionar <strong>ACL habilitados</strong>.</li> <li>En <strong>Habilitar las ACL desactiva la configuración forzada del propietario del bucket en cuanto a la propiedad del objeto</strong> seleccionar <strong>Reconozco que las ACL se restaurarán.</strong></li> <li>Clic en <strong>Guardar cambios</strong>.</li></ul></li> <li>Clic en <strong>Permisos</strong>:
<ul><li>En <strong>Bloquear acceso público (configuración del bucket)</strong> clic en <strong>Editar</strong>:
<ul><li>Deseleccionar <strong>Bloquear todo el acceso público</strong>.</li> <li>Seleccionar:
<ul><li>Bloquear el acceso público a buckets y objetos concedido a través de políticas de bucket y puntos de acceso públicas nuevas</li> <li>Bloquear el acceso público y entre cuentas a buckets y objetos concedido a través de cualquier política de bucket y puntos de acceso pública</li></ul></li></ul></li> <li>Clic en <strong>Guardar cambios</strong> y confirmar.</li></ul></li> <li><strong>Opcional</strong>: En caso de querer establecer políticas de almacenamiento:
<ul><li>Clic en <strong>Permisos</strong>:
<ul><li>En <strong>Política de bucket</strong> clic en <strong>Editar</strong>.</li> <li>Política:
<ul><li>Obtener <strong>ARN del bucket</strong>: arn:aws:s3:::appsefar-bucket-s3</li></ul> <div class="language-json extra-class"><pre class="language-json"><code><span class="token punctuation">{</span>  
    <span class="token property">&quot;Version&quot;</span><span class="token operator">:</span> <span class="token string">&quot;2012-10-17&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;Statement&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span>
        <span class="token punctuation">{</span>
            <span class="token property">&quot;Sid&quot;</span><span class="token operator">:</span> <span class="token string">&quot;Statement1&quot;</span><span class="token punctuation">,</span>
            <span class="token property">&quot;Principal&quot;</span><span class="token operator">:</span> <span class="token string">&quot;*&quot;</span><span class="token punctuation">,</span>
            <span class="token property">&quot;Effect&quot;</span><span class="token operator">:</span> <span class="token string">&quot;Allow&quot;</span><span class="token punctuation">,</span>
            <span class="token property">&quot;Action&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span>
                <span class="token string">&quot;s3:DeleteObject&quot;</span><span class="token punctuation">,</span>
                <span class="token string">&quot;s3:GetObject&quot;</span><span class="token punctuation">,</span>
                <span class="token string">&quot;s3:PutObject&quot;</span>
            <span class="token punctuation">]</span><span class="token punctuation">,</span>
            <span class="token property">&quot;Resource&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">&quot;arn:aws:s3:::appsefar-bucket-s3/*&quot;</span><span class="token punctuation">]</span>   <span class="token comment">// ARN del bucket concatenado con &quot;/*&quot;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">]</span>
<span class="token punctuation">}</span>
</code></pre></div></li></ul></li></ul></li></ul></li> <li>Dar valores a variables de entorno Laravel en <strong>.env</strong>:<div class="language- extra-class"><pre class="language-text"><code>≡
AWS_ACCESS_KEY_ID=[ID de clave de acceso]
AWS_SECRET_ACCESS_KEY=[Clave de acceso secreta]
AWS_DEFAULT_REGION=us-east-1
AWS_BUCKET=[Nombre del bucket]
≡
</code></pre></div></li> <li>Instalar dependencia para Amazon S3:
<ul><li>$ composer require --with-all-dependencies league/flysystem-aws-s3-v3 &quot;1.0.29&quot;</li> <li>$ composer require league/flysystem-cached-adapter &quot;~1.0&quot;</li> <li><strong>Documentación</strong>: https://laravel.com/docs/8.x/filesystem#the-public-disk</li></ul></li> <li>Limpiar configuración Laravel:
<ul><li>$ php artisan optimize</li> <li>$ php artisan cache:clear</li></ul></li></ol> <h2 id="comandos-git-para-crear-rama-y-luego-hacer-merge-en-la-principal"><a href="#comandos-git-para-crear-rama-y-luego-hacer-merge-en-la-principal" class="header-anchor">#</a> Comandos Git para crear rama y luego hacer merge en la principal</h2> <ol><li>Realizar commit antes de empezar:
<ul><li>$ git add .</li> <li>$ git commit -am &quot;Estado del repositorio actual&quot;</li> <li>$ git push -u origin master</li></ul></li> <li>Crear rama y cambiar a ella:
<ul><li>$ git checkout -b nombre-rama</li></ul></li> <li>Confirmar los cambios en la nueva rama:
<ul><li>$ git add .</li> <li>$ git commit -am &quot;Confirmando los cambios&quot;</li></ul></li> <li>Volver a la rama principal y unir los cambios:
<ul><li>$ git checkout master</li> <li>$ git rebase nombre-rama</li></ul></li></ol> <h2 id="configuracion-del-archivo-htaccess"><a href="#configuracion-del-archivo-htaccess" class="header-anchor">#</a> Configuración del archivo <strong>.htaccess</strong>:</h2> <ul><li>Configuración 1:<div class="language- extra-class"><pre class="language-text"><code># DON NOT REMOVE THIS LINE AND TEN LINES BELLOW SSL_REDIRECT:corporacioncabv.com/appsefar
RewriteEngine on
RewriteCond %{HTTPS} off
RewriteRule (.*) https://%{HTTP_HOST}%{REQUEST_URI} [L,R=301]

SetEnv ENVIRONMENT production

RewriteRule ^(.*)$ public/$1 [L]

# DON NOT REMOVE THIS LINE AND TEN LINES BELLOW SSL_REDIRECT:corporacioncabv.com/appsefar
</code></pre></div></li> <li>Configuración 2:<div class="language- extra-class"><pre class="language-text"><code>&lt;IfModule mod_rewrite.c&gt;
    RewriteEngine on
    RewriteCond %{REQUEST_URI} !^public
    RewriteRule ^(.*)$ public/$1 [L]
&lt;/IfModule&gt;
</code></pre></div></li></ul> <h2 id="modulo-cursos"><a href="#modulo-cursos" class="header-anchor">#</a> Módulo cursos</h2> <ul><li>Entidades:
<ul><li><strong>users</strong> (usuarios):
<ul><li>id</li> <li>name</li> <li>email</li> <li>password</li></ul></li> <li><strong>profiles</strong> (profesores):
<ul><li>id</li> <li>title</li> <li>biography</li> <li>website</li> <li>socialnetwork_name</li> <li>socialnetwork_url</li></ul></li> <li><strong>courses</strong> (cursos):
<ul><li>id</li> <li>title</li> <li>subtitle</li> <li>description</li> <li>status</li></ul></li> <li><strong>reviews</strong> (calificaciones):
<ul><li>id</li> <li>comment</li> <li>rating</li></ul></li> <li><strong>levels</strong> (niveles):
<ul><li>id</li> <li>name</li></ul></li> <li><strong>categories</strong> (categorías):
<ul><li>id</li> <li>name</li></ul></li> <li><strong>prices</strong> (precios):
<ul><li>id</li> <li>name</li> <li>value</li></ul></li> <li><strong>goals</strong> (metas):
<ul><li>id</li> <li>name</li></ul></li> <li><strong>requirements</strong> (requerimientos):
<ul><li>id</li> <li>name</li></ul></li> <li><strong>audiences</strong>:
<ul><li>id</li> <li>name</li></ul></li> <li><strong>sections</strong>:
<ul><li>id</li> <li>name</li></ul></li> <li><strong>lessons</strong>:
<ul><li>id</li> <li>name</li> <li>url</li></ul></li> <li><strong>platforms</strong> (plataformas):
<ul><li>id</li> <li>name</li></ul></li> <li><strong>descriptions</strong> (descripciones):
<ul><li>id</li> <li>name</li></ul></li></ul></li> <li>Tablas polimorficas:
<ul><li><strong>resources</strong> (recursos):
<ul><li>id</li> <li>url</li> <li>resourceable_id</li> <li>resourceable_type</li></ul></li> <li><strong>comments</strong> (comentarios):
<ul><li>id</li> <li>name</li> <li>commentable_id</li> <li>commentable_type</li></ul></li> <li><strong>likes</strong> (me gustan):
<ul><li>id</li> <li>value (0 o 1)</li> <li>likeable_id</li> <li>likeable_type</li></ul></li> <li><strong>images</strong> (imagenes):
<ul><li>id</li> <li>url</li> <li>imageable_id</li> <li>imageable_type</li></ul></li></ul></li> <li>Tablas intermedias (auxiliares):
<ul><li>course_user</li> <li>lesson_user</li></ul></li> <li>Relaciones:
<ul><li><strong>1:1</strong>:
<ul><li>profiles - users</li> <li>descriptions - lessons</li></ul></li> <li><strong>1:n</strong>:
<ul><li>users - courses</li> <li>users - reviews</li> <li>courses - reviews</li> <li>levels - courses</li> <li>categories - courses</li> <li>prices - courses</li> <li>courses - goals</li> <li>courses - requirements</li> <li>courses - audiences</li> <li>courses - sections</li> <li>sections - lessons</li> <li>platforms - lessons</li> <li>users - course_user</li> <li>courses - course_user</li> <li>lessons -lesson_user</li> <li>users - lesson_user</li></ul></li> <li><strong>n:m</strong>:
<ul><li>courses - users</li> <li>lessons - users</li></ul></li></ul></li></ul> <h2 id="modificacion-registro-de-clientes-dic-2022"><a href="#modificacion-registro-de-clientes-dic-2022" class="header-anchor">#</a> Modificación Registro de clientes (DIC 2022)</h2> <ul><li>Esbozo: https://www.figma.com/file/OKMIhE6fyw4jEPLHCJCq5i/Untitled?node-id=0%3A1&amp;t=3ZidiJFV8gPENYZ8-0</li></ul> <div class="custom-block tip"><p class="custom-block-title">Para pruebas en local</p> <ul><li>Iniciar servidor de base de datos con <strong>XAMPP</strong> o <strong>Laragon</strong>.</li> <li>Iniciar servidor web con: <strong>php artisan serve --port=8050</strong></li></ul></div> <ol><li>Creas (e ir) rama <strong>registro_v2</strong>:
<ul><li>$ git checkout -b registro_v2</li></ul> <div class="custom-block warning"><p class="custom-block-title">Advertencia</p> <p>Antes crear un commit:</p> <ul><li>git add .</li> <li>git commit -m &quot;Antes de modificar Registro de clientes (DIC 2022)&quot;</li> <li>git push
<p></p></li></ul></div></li> <li>Instalar dependencia composer:
<ul><li>$ composer require stripe/stripe-php</li></ul></li> <li>Modificar archivo de prueba (resources\views\pruebas\registro.blade.php) para el traspaso de cliente de <strong>JotForm</strong> a <strong>app.sefaruniversal.com</strong>:<div class="language-php extra-class"><pre class="language-php"><code>≡
<span class="token operator">&lt;</span>form action<span class="token operator">=</span><span class="token string double-quoted-string">&quot;{{ route('test.capturar_parametros_get') }}&quot;</span> method <span class="token operator">=</span><span class="token string double-quoted-string">&quot;GET&quot;</span><span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span>div <span class="token keyword">class</span><span class="token operator">=</span><span class="token string double-quoted-string">&quot;shadow overflow-hidden sm:rounded-md&quot;</span><span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>div <span class="token keyword">class</span><span class="token operator">=</span><span class="token string double-quoted-string">&quot;container&quot;</span><span class="token operator">&gt;</span>
            <span class="token operator">&lt;</span>p <span class="token keyword">class</span><span class="token operator">=</span><span class="token string double-quoted-string">&quot;my-2 ml-2 text-bold text-blue-600&quot;</span><span class="token operator">&gt;</span>Datos Clientes<span class="token punctuation">:</span><span class="token operator">&lt;</span><span class="token operator">/</span>p<span class="token operator">&gt;</span>
            <span class="token operator">&lt;</span>div <span class="token keyword">class</span><span class="token operator">=</span><span class="token string double-quoted-string">&quot;md:flex ms:flex-wrap&quot;</span><span class="token operator">&gt;</span>
                <span class="token punctuation">{</span><span class="token punctuation">{</span><span class="token operator">--</span> Ejemplo de <span class="token constant">URL</span> a generar <span class="token operator">--</span><span class="token punctuation">}</span><span class="token punctuation">}</span>
                <span class="token punctuation">{</span><span class="token punctuation">{</span><span class="token operator">--</span> https<span class="token punctuation">:</span><span class="token comment">//app.universalsefar.com/register?apellidos=XXXX&amp;nombres=XXXX&amp;email=XXXX&amp;dni=XXXX&amp;servicio=XXXX --}}</span>
                <span class="token operator">&lt;</span>div <span class="token keyword">class</span><span class="token operator">=</span><span class="token string double-quoted-string">&quot;px-1 py-2 m-2 flex-1&quot;</span><span class="token operator">&gt;</span>    <span class="token punctuation">{</span><span class="token punctuation">{</span><span class="token operator">--</span> firstname <span class="token operator">--</span><span class="token punctuation">}</span><span class="token punctuation">}</span>
                    <span class="token operator">&lt;</span>div<span class="token operator">&gt;</span>
                        <span class="token operator">&lt;</span>label <span class="token keyword">for</span><span class="token operator">=</span><span class="token string double-quoted-string">&quot;firstname&quot;</span> <span class="token keyword">class</span><span class="token operator">=</span><span class="token string double-quoted-string">&quot;block text-sm font-medium text-gray-700&quot;</span><span class="token operator">&gt;</span>Nombres<span class="token operator">&lt;</span><span class="token operator">/</span>label<span class="token operator">&gt;</span>
                        <span class="token operator">&lt;</span>input value<span class="token operator">=</span><span class="token string double-quoted-string">&quot;Fulanito&quot;</span> type<span class="token operator">=</span><span class="token string double-quoted-string">&quot;text&quot;</span> name<span class="token operator">=</span><span class="token string double-quoted-string">&quot;firstname&quot;</span> <span class="token keyword">class</span><span class="token operator">=</span><span class="token string double-quoted-string">&quot;mt-1 focus:ring-indigo-500 focus:border-indigo-500 block w-full shadow-sm sm:text-sm border-gray-300 rounded-md&quot;</span><span class="token operator">&gt;</span>
                    <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
                <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>

                <span class="token operator">&lt;</span>div <span class="token keyword">class</span><span class="token operator">=</span><span class="token string double-quoted-string">&quot;px-1 py-2 m-2 flex-1&quot;</span><span class="token operator">&gt;</span>    <span class="token punctuation">{</span><span class="token punctuation">{</span><span class="token operator">--</span> lastname <span class="token operator">--</span><span class="token punctuation">}</span><span class="token punctuation">}</span>
                    <span class="token operator">&lt;</span>div<span class="token operator">&gt;</span>
                        <span class="token operator">&lt;</span>label <span class="token keyword">for</span><span class="token operator">=</span><span class="token string double-quoted-string">&quot;lastname&quot;</span> <span class="token keyword">class</span><span class="token operator">=</span><span class="token string double-quoted-string">&quot;block text-sm font-medium text-gray-700&quot;</span><span class="token operator">&gt;</span>Apellidos<span class="token operator">&lt;</span><span class="token operator">/</span>label<span class="token operator">&gt;</span>
                        <span class="token operator">&lt;</span>input value<span class="token operator">=</span><span class="token string double-quoted-string">&quot;Detal y Borrar&quot;</span> type<span class="token operator">=</span><span class="token string double-quoted-string">&quot;text&quot;</span> name<span class="token operator">=</span><span class="token string double-quoted-string">&quot;lastname&quot;</span> <span class="token keyword">class</span><span class="token operator">=</span><span class="token string double-quoted-string">&quot;mt-1 focus:ring-indigo-500 focus:border-indigo-500 block w-full shadow-sm sm:text-sm border-gray-300 rounded-md&quot;</span><span class="token operator">&gt;</span>
                    <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
                <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>

                <span class="token operator">&lt;</span>div <span class="token keyword">class</span><span class="token operator">=</span><span class="token string double-quoted-string">&quot;px-1 py-2 m-2 flex-1&quot;</span><span class="token operator">&gt;</span>    <span class="token punctuation">{</span><span class="token punctuation">{</span><span class="token operator">--</span> email <span class="token operator">--</span><span class="token punctuation">}</span><span class="token punctuation">}</span>
                    <span class="token operator">&lt;</span>div<span class="token operator">&gt;</span>
                        <span class="token operator">&lt;</span>label <span class="token keyword">for</span><span class="token operator">=</span><span class="token string double-quoted-string">&quot;email&quot;</span> <span class="token keyword">class</span><span class="token operator">=</span><span class="token string double-quoted-string">&quot;block text-sm font-medium text-gray-700&quot;</span><span class="token operator">&gt;</span>e<span class="token operator">-</span>mail<span class="token operator">&lt;</span><span class="token operator">/</span>label<span class="token operator">&gt;</span>
                        <span class="token operator">&lt;</span>input value<span class="token operator">=</span><span class="token string double-quoted-string">&quot;delete.borrar@gmail.com&quot;</span> type<span class="token operator">=</span><span class="token string double-quoted-string">&quot;email&quot;</span> name<span class="token operator">=</span><span class="token string double-quoted-string">&quot;email&quot;</span> <span class="token keyword">class</span><span class="token operator">=</span><span class="token string double-quoted-string">&quot;mt-1 focus:ring-indigo-500 focus:border-indigo-500 block w-full shadow-sm sm:text-sm border-gray-300 rounded-md&quot;</span><span class="token operator">&gt;</span>
                    <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
                <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>

                <span class="token operator">&lt;</span>div <span class="token keyword">class</span><span class="token operator">=</span><span class="token string double-quoted-string">&quot;px-1 py-2 m-2 flex-1&quot;</span><span class="token operator">&gt;</span>    <span class="token punctuation">{</span><span class="token punctuation">{</span><span class="token operator">--</span> phone <span class="token operator">--</span><span class="token punctuation">}</span><span class="token punctuation">}</span>
                    <span class="token operator">&lt;</span>div<span class="token operator">&gt;</span>
                        <span class="token operator">&lt;</span>label <span class="token keyword">for</span><span class="token operator">=</span><span class="token string double-quoted-string">&quot;phone&quot;</span> <span class="token keyword">class</span><span class="token operator">=</span><span class="token string double-quoted-string">&quot;block text-sm font-medium text-gray-700&quot;</span><span class="token operator">&gt;</span>Teléfono<span class="token operator">&lt;</span><span class="token operator">/</span>label<span class="token operator">&gt;</span>
                        <span class="token operator">&lt;</span>input value<span class="token operator">=</span><span class="token string double-quoted-string">&quot;+584141249753&quot;</span> type<span class="token operator">=</span><span class="token string double-quoted-string">&quot;text&quot;</span> name<span class="token operator">=</span><span class="token string double-quoted-string">&quot;phone&quot;</span> <span class="token keyword">class</span><span class="token operator">=</span><span class="token string double-quoted-string">&quot;mt-1 focus:ring-indigo-500 focus:border-indigo-500 block w-full shadow-sm sm:text-sm border-gray-300 rounded-md&quot;</span><span class="token operator">&gt;</span>
                    <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
                <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
            <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
            <span class="token operator">&lt;</span>div <span class="token keyword">class</span><span class="token operator">=</span><span class="token string double-quoted-string">&quot;md:flex ms:flex-wrap&quot;</span><span class="token operator">&gt;</span>
                <span class="token operator">&lt;</span>div <span class="token keyword">class</span><span class="token operator">=</span><span class="token string double-quoted-string">&quot;px-1 py-2 m-2 flex-1&quot;</span><span class="token operator">&gt;</span>    <span class="token punctuation">{</span><span class="token punctuation">{</span><span class="token operator">--</span> numero_de_pasaporte <span class="token operator">--</span><span class="token punctuation">}</span><span class="token punctuation">}</span>
                    <span class="token operator">&lt;</span>div<span class="token operator">&gt;</span>
                        <span class="token operator">&lt;</span>label <span class="token keyword">for</span><span class="token operator">=</span><span class="token string double-quoted-string">&quot;numero_de_pasaporte&quot;</span> <span class="token keyword">class</span><span class="token operator">=</span><span class="token string double-quoted-string">&quot;block text-sm font-medium text-gray-700&quot;</span><span class="token operator">&gt;</span><span class="token constant">DNI</span><span class="token operator">&lt;</span><span class="token operator">/</span>label<span class="token operator">&gt;</span>
                        <span class="token operator">&lt;</span>input value<span class="token operator">=</span><span class="token string double-quoted-string">&quot;BORRAR123&quot;</span> type<span class="token operator">=</span><span class="token string double-quoted-string">&quot;text&quot;</span> name<span class="token operator">=</span><span class="token string double-quoted-string">&quot;numero_de_pasaporte&quot;</span> <span class="token keyword">class</span><span class="token operator">=</span><span class="token string double-quoted-string">&quot;mt-1 focus:ring-indigo-500 focus:border-indigo-500 block w-full shadow-sm sm:text-sm border-gray-300 rounded-md&quot;</span><span class="token operator">&gt;</span>
                    <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
                <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>

                <span class="token operator">&lt;</span>div <span class="token keyword">class</span><span class="token operator">=</span><span class="token string double-quoted-string">&quot;px-1 py-2 m-2 flex-1&quot;</span><span class="token operator">&gt;</span>    <span class="token punctuation">{</span><span class="token punctuation">{</span><span class="token operator">--</span> nacionalidad_solicitada <span class="token operator">--</span><span class="token punctuation">}</span><span class="token punctuation">}</span>
                    <span class="token operator">&lt;</span>div<span class="token operator">&gt;</span>
                        <span class="token operator">&lt;</span>label <span class="token keyword">for</span><span class="token operator">=</span><span class="token string double-quoted-string">&quot;nacionalidad_solicitada&quot;</span> <span class="token keyword">class</span><span class="token operator">=</span><span class="token string double-quoted-string">&quot;block text-sm font-medium text-gray-700&quot;</span><span class="token operator">&gt;</span>Servicio<span class="token operator">&lt;</span><span class="token operator">/</span>label<span class="token operator">&gt;</span>
                        <span class="token operator">&lt;</span>input value<span class="token operator">=</span><span class="token string double-quoted-string">&quot;Española LMD&quot;</span> type<span class="token operator">=</span><span class="token string double-quoted-string">&quot;text&quot;</span> name<span class="token operator">=</span><span class="token string double-quoted-string">&quot;nacionalidad_solicitada&quot;</span> <span class="token keyword">class</span><span class="token operator">=</span><span class="token string double-quoted-string">&quot;mt-1 focus:ring-indigo-500 focus:border-indigo-500 block w-full shadow-sm sm:text-sm border-gray-300 rounded-md&quot;</span><span class="token operator">&gt;</span>
                    <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
                <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>

                <span class="token operator">&lt;</span>div <span class="token keyword">class</span><span class="token operator">=</span><span class="token string double-quoted-string">&quot;px-1 py-2 m-2 flex-1&quot;</span><span class="token operator">&gt;</span>    <span class="token punctuation">{</span><span class="token punctuation">{</span><span class="token operator">--</span> n000__referido_por__clonado_ <span class="token operator">--</span><span class="token punctuation">}</span><span class="token punctuation">}</span>
                    <span class="token operator">&lt;</span>div<span class="token operator">&gt;</span>
                        <span class="token operator">&lt;</span>label <span class="token keyword">for</span><span class="token operator">=</span><span class="token string double-quoted-string">&quot;n000__referido_por__clonado_&quot;</span> <span class="token keyword">class</span><span class="token operator">=</span><span class="token string double-quoted-string">&quot;block text-sm font-medium text-gray-700&quot;</span><span class="token operator">&gt;</span>Referido por<span class="token operator">&lt;</span><span class="token operator">/</span>label<span class="token operator">&gt;</span>
                        <span class="token operator">&lt;</span>input value<span class="token operator">=</span><span class="token string double-quoted-string">&quot;Yeinson Diaz&quot;</span> type<span class="token operator">=</span><span class="token string double-quoted-string">&quot;text&quot;</span> name<span class="token operator">=</span><span class="token string double-quoted-string">&quot;n000__referido_por__clonado_&quot;</span> <span class="token keyword">class</span><span class="token operator">=</span><span class="token string double-quoted-string">&quot;mt-1 focus:ring-indigo-500 focus:border-indigo-500 block w-full shadow-sm sm:text-sm border-gray-300 rounded-md&quot;</span><span class="token operator">&gt;</span>
                    <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
                <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>

                <span class="token operator">&lt;</span>div <span class="token keyword">class</span><span class="token operator">=</span><span class="token string double-quoted-string">&quot;px-1 py-2 m-2 flex-1&quot;</span><span class="token operator">&gt;</span>    <span class="token punctuation">{</span><span class="token punctuation">{</span><span class="token operator">--</span> aplicar_cupon <span class="token operator">--</span><span class="token punctuation">}</span><span class="token punctuation">}</span>
                    <span class="token operator">&lt;</span>div<span class="token operator">&gt;</span>
                        <span class="token operator">&lt;</span>label <span class="token keyword">for</span><span class="token operator">=</span><span class="token string double-quoted-string">&quot;aplicar_cupon&quot;</span> <span class="token keyword">class</span><span class="token operator">=</span><span class="token string double-quoted-string">&quot;block text-sm font-medium text-gray-700&quot;</span><span class="token operator">&gt;</span>Cupón<span class="token operator">&lt;</span><span class="token operator">/</span>label<span class="token operator">&gt;</span>
                        <span class="token operator">&lt;</span>input value<span class="token operator">=</span><span class="token string double-quoted-string">&quot;55677&quot;</span> type<span class="token operator">=</span><span class="token string double-quoted-string">&quot;text&quot;</span> name<span class="token operator">=</span><span class="token string double-quoted-string">&quot;aplicar_cupon&quot;</span> <span class="token keyword">class</span><span class="token operator">=</span><span class="token string double-quoted-string">&quot;mt-1 focus:ring-indigo-500 focus:border-indigo-500 block w-full shadow-sm sm:text-sm border-gray-300 rounded-md&quot;</span><span class="token operator">&gt;</span>
                    <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
                <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
            <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
            <span class="token operator">&lt;</span>div <span class="token keyword">class</span><span class="token operator">=</span><span class="token string double-quoted-string">&quot;md:flex ms:flex-wrap&quot;</span><span class="token operator">&gt;</span>
                <span class="token operator">&lt;</span>div <span class="token keyword">class</span><span class="token operator">=</span><span class="token string double-quoted-string">&quot;px-1 py-2 m-2 flex-1&quot;</span><span class="token operator">&gt;</span>    <span class="token punctuation">{</span><span class="token punctuation">{</span><span class="token operator">--</span> numero_de_pasaporte <span class="token operator">--</span><span class="token punctuation">}</span><span class="token punctuation">}</span>
                    <span class="token operator">&lt;</span>div<span class="token operator">&gt;</span>
                        <span class="token operator">&lt;</span>label <span class="token keyword">for</span><span class="token operator">=</span><span class="token string double-quoted-string">&quot;pais_de_nacimiento&quot;</span> <span class="token keyword">class</span><span class="token operator">=</span><span class="token string double-quoted-string">&quot;block text-sm font-medium text-gray-700&quot;</span><span class="token operator">&gt;</span>País de nacimiento<span class="token operator">&lt;</span><span class="token operator">/</span>label<span class="token operator">&gt;</span>
                        <span class="token operator">&lt;</span>input value<span class="token operator">=</span><span class="token string double-quoted-string">&quot;Venezuela&quot;</span> type<span class="token operator">=</span><span class="token string double-quoted-string">&quot;text&quot;</span> name<span class="token operator">=</span><span class="token string double-quoted-string">&quot;pais_de_nacimiento&quot;</span> <span class="token keyword">class</span><span class="token operator">=</span><span class="token string double-quoted-string">&quot;mt-1 focus:ring-indigo-500 focus:border-indigo-500 block w-full shadow-sm sm:text-sm border-gray-300 rounded-md&quot;</span><span class="token operator">&gt;</span>
                    <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
                <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
            <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>div <span class="token keyword">class</span><span class="token operator">=</span><span class="token string double-quoted-string">&quot;px-4 py-3 bg-gray-50 text-right sm:px-6&quot;</span><span class="token operator">&gt;</span>
            <span class="token operator">&lt;</span>button type<span class="token operator">=</span><span class="token string double-quoted-string">&quot;submit&quot;</span> <span class="token keyword">class</span><span class="token operator">=</span><span class="token string double-quoted-string">&quot;cfrSefar inline-flex justify-center py-2 px-4 border border-transparent shadow-sm text-sm font-medium rounded-md text-white bg-indigo-600 hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500&quot;</span><span class="token operator">&gt;</span>
                Generar <span class="token constant">URL</span>
            <span class="token operator">&lt;</span><span class="token operator">/</span>button<span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>form<span class="token operator">&gt;</span>
≡
</code></pre></div></li> <li>Modificar controlador <strong>app\Http\Controllers\GetController.php</strong>:<div class="language-php extra-class"><pre class="language-php"><code>≡
<span class="token keyword">public</span> <span class="token keyword">function</span> <span class="token function-definition function">capturar_parametros_get</span><span class="token punctuation">(</span><span class="token class-name type-declaration">Request</span> <span class="token variable">$request</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token variable">$pos</span> <span class="token operator">=</span> <span class="token function">strpos</span><span class="token punctuation">(</span><span class="token variable">$request</span><span class="token operator">-&gt;</span><span class="token function">fullUrl</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token string single-quoted-string">'?'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token variable">$parametros</span> <span class="token operator">=</span> <span class="token function">substr</span><span class="token punctuation">(</span><span class="token variable">$request</span><span class="token operator">-&gt;</span><span class="token function">fullUrl</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token variable">$pos</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name static-context">Alert</span><span class="token operator">::</span><span class="token function">info</span><span class="token punctuation">(</span><span class="token string single-quoted-string">'Enlaces para registrar cliente'</span><span class="token punctuation">,</span> <span class="token string single-quoted-string">'
        &lt;small&gt;
            &lt;p&gt;&lt;strong&gt;http://sefar.test/register&lt;/strong&gt;'</span><span class="token operator">.</span><span class="token variable">$parametros</span><span class="token operator">.</span><span class="token string single-quoted-string">'&lt;/p&gt;
            &lt;br&gt;&lt;hr&gt;&lt;br&gt;
            &lt;p&gt;&lt;strong&gt;https://app.sefaruniversal.com/register&lt;/strong&gt;'</span><span class="token operator">.</span><span class="token variable">$parametros</span><span class="token operator">.</span><span class="token string single-quoted-string">'&lt;/p&gt;
            &lt;br&gt;&lt;hr&gt;&lt;br&gt;
            &lt;p&gt;&lt;strong&gt;http://127.0.0.1:8080/register&lt;/strong&gt;'</span><span class="token operator">.</span><span class="token variable">$parametros</span><span class="token operator">.</span><span class="token string single-quoted-string">'&lt;/p&gt;
        &lt;/small&gt;'</span>
    <span class="token punctuation">)</span><span class="token operator">-&gt;</span><span class="token function">toHtml</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">-&gt;</span><span class="token function">persistent</span><span class="token punctuation">(</span><span class="token constant boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span> <span class="token function">back</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
≡	
</code></pre></div></li> <li>Modificar vista <strong>resources\views\auth\register.blade.php</strong>:<div class="language-php extra-class"><pre class="language-php"><code><span class="token operator">**</span><span class="token operator">*</span>
</code></pre></div></li> <li>Tanto en la aplicación local como en producción crear permisos <strong>pay.services</strong> y <strong>finish.register</strong>.<div class="custom-block tip"><p class="custom-block-title">Nota</p> <ul><li>Ruta para crear permiso: <strong>URL-LOCAL-O-PRODUCCIÓN/permissions/create</strong></li></ul></div></li> <li>Agregar campos <strong>phone</strong>, <strong>servicio</strong>, <strong>pay</strong> en la migración <strong>database\migrations\2014_10_12_000000_create_users_table.php</strong>:<div class="language-php extra-class"><div class="highlight-lines"><br><br><br><br><br><br><br><br><br><br><br><br><div class="highlighted"> </div><div class="highlighted"> </div><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br></div><pre class="language-php"><code>≡
<span class="token class-name static-context">Schema</span><span class="token operator">::</span><span class="token function">create</span><span class="token punctuation">(</span><span class="token string single-quoted-string">'users'</span><span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token class-name type-declaration">Blueprint</span> <span class="token variable">$table</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
	<span class="token variable">$table</span><span class="token operator">-&gt;</span><span class="token function">id</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token variable">$table</span><span class="token operator">-&gt;</span><span class="token keyword type-declaration">string</span><span class="token punctuation">(</span><span class="token string single-quoted-string">'name'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token variable">$table</span><span class="token operator">-&gt;</span><span class="token keyword type-declaration">string</span><span class="token punctuation">(</span><span class="token string single-quoted-string">'email'</span><span class="token punctuation">,</span><span class="token number">175</span><span class="token punctuation">)</span><span class="token operator">-&gt;</span><span class="token function">unique</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

	<span class="token variable">$table</span><span class="token operator">-&gt;</span><span class="token keyword type-declaration">string</span><span class="token punctuation">(</span><span class="token string single-quoted-string">'passport'</span><span class="token punctuation">,</span><span class="token number">175</span><span class="token punctuation">)</span><span class="token operator">-&gt;</span><span class="token function">nullable</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">-&gt;</span><span class="token function">unique</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token variable">$table</span><span class="token operator">-&gt;</span><span class="token function">integer</span><span class="token punctuation">(</span><span class="token string single-quoted-string">'user_id'</span><span class="token punctuation">)</span><span class="token operator">-&gt;</span><span class="token function">nullable</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token variable">$table</span><span class="token operator">-&gt;</span><span class="token keyword type-declaration">string</span><span class="token punctuation">(</span><span class="token string single-quoted-string">'social_id'</span><span class="token punctuation">)</span><span class="token operator">-&gt;</span><span class="token function">nullable</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token variable">$table</span><span class="token operator">-&gt;</span><span class="token keyword type-declaration">string</span><span class="token punctuation">(</span><span class="token string single-quoted-string">'picture'</span><span class="token punctuation">)</span><span class="token operator">-&gt;</span><span class="token function">nullable</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token variable">$table</span><span class="token operator">-&gt;</span><span class="token function">dateTime</span><span class="token punctuation">(</span><span class="token string single-quoted-string">'created'</span><span class="token punctuation">)</span><span class="token operator">-&gt;</span><span class="token function">nullable</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token variable">$table</span><span class="token operator">-&gt;</span><span class="token keyword type-declaration">string</span><span class="token punctuation">(</span><span class="token string single-quoted-string">'password_md5'</span><span class="token punctuation">)</span><span class="token operator">-&gt;</span><span class="token function">nullable</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

	<span class="token variable">$table</span><span class="token operator">-&gt;</span><span class="token keyword type-declaration">string</span><span class="token punctuation">(</span><span class="token string single-quoted-string">'phone'</span><span class="token punctuation">)</span><span class="token operator">-&gt;</span><span class="token function">nullable</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token variable">$table</span><span class="token operator">-&gt;</span><span class="token keyword type-declaration">string</span><span class="token punctuation">(</span><span class="token string single-quoted-string">'servicio'</span><span class="token punctuation">)</span><span class="token operator">-&gt;</span><span class="token function">nullable</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token variable">$table</span><span class="token operator">-&gt;</span><span class="token function">integer</span><span class="token punctuation">(</span><span class="token string single-quoted-string">'pay'</span><span class="token punctuation">)</span><span class="token operator">-&gt;</span><span class="token function">nullable</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>		<span class="token comment">// 0: no ha pagado, 1: Pagó y no ha completado información, 2: pagó y completó información</span>

	<span class="token variable">$table</span><span class="token operator">-&gt;</span><span class="token function">double</span><span class="token punctuation">(</span><span class="token string single-quoted-string">'pago_registro'</span><span class="token punctuation">)</span><span class="token operator">-&gt;</span><span class="token function">nullable</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token variable">$table</span><span class="token operator">-&gt;</span><span class="token keyword type-declaration">string</span><span class="token punctuation">(</span><span class="token string single-quoted-string">'pago_cupon'</span><span class="token punctuation">)</span><span class="token operator">-&gt;</span><span class="token function">nullable</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token variable">$table</span><span class="token operator">-&gt;</span><span class="token keyword type-declaration">string</span><span class="token punctuation">(</span><span class="token string single-quoted-string">'id_pago'</span><span class="token punctuation">)</span><span class="token operator">-&gt;</span><span class="token function">nullable</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

	<span class="token variable">$table</span><span class="token operator">-&gt;</span><span class="token function">dateTime</span><span class="token punctuation">(</span><span class="token string single-quoted-string">'date_of_birth'</span><span class="token punctuation">)</span><span class="token operator">-&gt;</span><span class="token function">nullable</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token variable">$table</span><span class="token operator">-&gt;</span><span class="token keyword type-declaration">string</span><span class="token punctuation">(</span><span class="token string single-quoted-string">'nombres'</span><span class="token punctuation">)</span><span class="token operator">-&gt;</span><span class="token function">nullable</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token variable">$table</span><span class="token operator">-&gt;</span><span class="token keyword type-declaration">string</span><span class="token punctuation">(</span><span class="token string single-quoted-string">'apellidos'</span><span class="token punctuation">)</span><span class="token operator">-&gt;</span><span class="token function">nullable</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token variable">$table</span><span class="token operator">-&gt;</span><span class="token keyword type-declaration">string</span><span class="token punctuation">(</span><span class="token string single-quoted-string">'genero'</span><span class="token punctuation">)</span><span class="token operator">-&gt;</span><span class="token function">nullable</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token variable">$table</span><span class="token operator">-&gt;</span><span class="token keyword type-declaration">string</span><span class="token punctuation">(</span><span class="token string single-quoted-string">'pais_de_nacimiento'</span><span class="token punctuation">)</span><span class="token operator">-&gt;</span><span class="token function">nullable</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token variable">$table</span><span class="token operator">-&gt;</span><span class="token keyword type-declaration">string</span><span class="token punctuation">(</span><span class="token string single-quoted-string">'ciudad_de_nacimiento'</span><span class="token punctuation">)</span><span class="token operator">-&gt;</span><span class="token function">nullable</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token variable">$table</span><span class="token operator">-&gt;</span><span class="token keyword type-declaration">string</span><span class="token punctuation">(</span><span class="token string single-quoted-string">'referido_por'</span><span class="token punctuation">)</span><span class="token operator">-&gt;</span><span class="token function">nullable</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

	<span class="token variable">$table</span><span class="token operator">-&gt;</span><span class="token function">timestamp</span><span class="token punctuation">(</span><span class="token string single-quoted-string">'email_verified_at'</span><span class="token punctuation">)</span><span class="token operator">-&gt;</span><span class="token function">nullable</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token variable">$table</span><span class="token operator">-&gt;</span><span class="token keyword type-declaration">string</span><span class="token punctuation">(</span><span class="token string single-quoted-string">'password'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token variable">$table</span><span class="token operator">-&gt;</span><span class="token function">rememberToken</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token variable">$table</span><span class="token operator">-&gt;</span><span class="token function">foreignId</span><span class="token punctuation">(</span><span class="token string single-quoted-string">'current_team_id'</span><span class="token punctuation">)</span><span class="token operator">-&gt;</span><span class="token function">nullable</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token variable">$table</span><span class="token operator">-&gt;</span><span class="token function">text</span><span class="token punctuation">(</span><span class="token string single-quoted-string">'profile_photo_path'</span><span class="token punctuation">)</span><span class="token operator">-&gt;</span><span class="token function">nullable</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token variable">$table</span><span class="token operator">-&gt;</span><span class="token function">timestamps</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
≡
</code></pre></div></li> <li>Agregar los campos <strong>phone</strong>, <strong>servicio</strong>, <strong>date_of_birth</strong>, <strong>nombres</strong>, <strong>apellidos</strong>, <strong>genero</strong>, <strong>pais_de_nacimiento</strong>, <strong>ciudad_de_nacimiento</strong> y <strong>referido_por</strong> en la asignación masiva del modelo <strong>app\Models\User.php</strong>:<div class="language-php extra-class"><div class="highlight-lines"><br><br><br><br><br><br><br><br><div class="highlighted"> </div><div class="highlighted"> </div><br><br><br><br><br><br><br><br><br><br><br><br><br></div><pre class="language-php"><code>≡
<span class="token keyword">protected</span> <span class="token variable">$fillable</span> <span class="token operator">=</span> <span class="token punctuation">[</span>
    <span class="token string single-quoted-string">'name'</span><span class="token punctuation">,</span>
    <span class="token string single-quoted-string">'email'</span><span class="token punctuation">,</span>
    <span class="token string single-quoted-string">'password'</span><span class="token punctuation">,</span>
    <span class="token string single-quoted-string">'password_md5'</span><span class="token punctuation">,</span>
    <span class="token string single-quoted-string">'passport'</span><span class="token punctuation">,</span>
    <span class="token string single-quoted-string">'email_verified_at'</span><span class="token punctuation">,</span>
    <span class="token string single-quoted-string">'phone'</span><span class="token punctuation">,</span>
    <span class="token string single-quoted-string">'servicio'</span><span class="token punctuation">,</span>
	<span class="token string single-quoted-string">'pay'</span><span class="token punctuation">,</span>
	<span class="token string single-quoted-string">'date_of_birth'</span><span class="token punctuation">,</span>
	<span class="token string single-quoted-string">'nombres'</span><span class="token punctuation">,</span>
	<span class="token string single-quoted-string">'apellidos'</span><span class="token punctuation">,</span>
	<span class="token string single-quoted-string">'genero'</span><span class="token punctuation">,</span>
	<span class="token string single-quoted-string">'pais_de_nacimiento'</span><span class="token punctuation">,</span>
	<span class="token string single-quoted-string">'ciudad_de_nacimiento'</span><span class="token punctuation">,</span>
	<span class="token string single-quoted-string">'referido_por'</span><span class="token punctuation">,</span>
	<span class="token string single-quoted-string">'pago_registro'</span><span class="token punctuation">,</span>
	<span class="token string single-quoted-string">'pago_cupon'</span><span class="token punctuation">,</span>
	<span class="token string single-quoted-string">'id_pago'</span>
<span class="token punctuation">]</span>
</code></pre></div></li> <li>Agregar los campos <strong>phone</strong>, <strong>servicio</strong>, <strong>date_of_birth</strong>, <strong>nombres</strong>, <strong>apellidos</strong>, <strong>genero</strong>, <strong>pais_de_nacimiento</strong>, <strong>ciudad_de_nacimiento</strong> y <strong>referido_por</strong> en la tabla <strong>users</strong> en la base de datos local y la de producción:<div class="language- extra-class"><pre class="language-text"><code>Nombre					Tipo		Longitud/Valores 	Predeterminado
phone					VARCHAR		32					NULL
servicio				VARCHAR		32					NULL
pay						INT								NULL
date_of_birth			DATETIME						NULL
nombres					VARCHAR		100					NULL
apellidos				VARCHAR		100					NULL
genero					VARCHAR		10					NULL
pais_de_nacimiento		VARCHAR		100					NULL
ciudad_de_nacimiento	VARCHAR		100					NULL
referido_por			VARCHAR		100					NULL
pago_registro			DOUBLE							NULL
pago_cupon				VARCHAR		100					NULL
id_pago					VARCHAR		100					NULL
</code></pre></div></li> <li>Modificar método create del controlador <strong>app\Actions\Fortify\CreateNewUser.php</strong>:<div class="language-php extra-class"><pre class="language-php"><code>≡
<span class="token keyword">public</span> <span class="token keyword">function</span> <span class="token function-definition function">create</span><span class="token punctuation">(</span><span class="token keyword type-hint">array</span> <span class="token variable">$input</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    <span class="token comment">// Verificar que el número de pasoporte no exista</span>
    <span class="token variable">$rol</span> <span class="token operator">=</span> <span class="token variable">$input</span><span class="token punctuation">[</span><span class="token string single-quoted-string">'rol'</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
    <span class="token variable">$passport</span> <span class="token operator">=</span> <span class="token variable">$input</span><span class="token punctuation">[</span><span class="token string single-quoted-string">'passport'</span><span class="token punctuation">]</span><span class="token punctuation">;</span>

    <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token variable">$rol</span> <span class="token operator">==</span> <span class="token string single-quoted-string">'cliente'</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token variable">$user</span> <span class="token operator">=</span> <span class="token class-name static-context">User</span><span class="token operator">::</span><span class="token function">where</span><span class="token punctuation">(</span><span class="token string single-quoted-string">'passport'</span><span class="token punctuation">,</span><span class="token string single-quoted-string">'LIKE'</span><span class="token punctuation">,</span><span class="token variable">$passport</span><span class="token punctuation">)</span><span class="token operator">-&gt;</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token keyword">empty</span><span class="token punctuation">(</span><span class="token variable">$user</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token operator">-&gt;</span><span class="token property">passport</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
            <span class="token comment">// Verificar si el usuario esta registrado en agclientes</span>
            <span class="token variable">$agcliente_v</span> <span class="token operator">=</span> <span class="token class-name static-context">Agcliente</span><span class="token operator">::</span><span class="token function">where</span><span class="token punctuation">(</span><span class="token string single-quoted-string">'IDCliente'</span><span class="token punctuation">,</span><span class="token function">trim</span><span class="token punctuation">(</span><span class="token variable">$passport</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token operator">-&gt;</span><span class="token function">where</span><span class="token punctuation">(</span><span class="token string single-quoted-string">'IDPersona'</span><span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token operator">-&gt;</span><span class="token function">count</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token variable">$agcliente_v</span> <span class="token operator">==</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
                <span class="token comment">// Incluir al cliente en la tabla agclientes</span>
                <span class="token class-name static-context">Agcliente</span><span class="token operator">::</span><span class="token function">create</span><span class="token punctuation">(</span><span class="token punctuation">[</span>
                    <span class="token string single-quoted-string">'IDCliente'</span> <span class="token operator">=&gt;</span> <span class="token function">trim</span><span class="token punctuation">(</span><span class="token variable">$input</span><span class="token punctuation">[</span><span class="token string single-quoted-string">'passport'</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
                    <span class="token string single-quoted-string">'IDPersona'</span> <span class="token operator">=&gt;</span> <span class="token number">1</span><span class="token punctuation">,</span>
                    <span class="token string single-quoted-string">'Nombres'</span> <span class="token operator">=&gt;</span> <span class="token function">trim</span><span class="token punctuation">(</span><span class="token variable">$input</span><span class="token punctuation">[</span><span class="token string single-quoted-string">'nombres'</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
                    <span class="token string single-quoted-string">'Apellidos'</span> <span class="token operator">=&gt;</span> <span class="token function">trim</span><span class="token punctuation">(</span><span class="token variable">$input</span><span class="token punctuation">[</span><span class="token string single-quoted-string">'apellidos'</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
                    <span class="token string single-quoted-string">'NPasaporte'</span> <span class="token operator">=&gt;</span> <span class="token function">trim</span><span class="token punctuation">(</span><span class="token variable">$input</span><span class="token punctuation">[</span><span class="token string single-quoted-string">'passport'</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
                    <span class="token string single-quoted-string">'PNacimiento'</span> <span class="token operator">=&gt;</span> <span class="token function">trim</span><span class="token punctuation">(</span><span class="token variable">$input</span><span class="token punctuation">[</span><span class="token string single-quoted-string">'pais_de_nacimiento'</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
                    <span class="token string single-quoted-string">'PaisNac'</span> <span class="token operator">=&gt;</span> <span class="token function">trim</span><span class="token punctuation">(</span><span class="token variable">$input</span><span class="token punctuation">[</span><span class="token string single-quoted-string">'pais_de_nacimiento'</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
                    <span class="token string single-quoted-string">'referido'</span> <span class="token operator">=&gt;</span> <span class="token function">trim</span><span class="token punctuation">(</span><span class="token variable">$input</span><span class="token punctuation">[</span><span class="token string single-quoted-string">'referido'</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
                    <span class="token string single-quoted-string">'FRegistro'</span> <span class="token operator">=&gt;</span> <span class="token function">date</span><span class="token punctuation">(</span><span class="token string single-quoted-string">'Y-m-d H:i:s'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
                    <span class="token string single-quoted-string">'FUpdate'</span> <span class="token operator">=&gt;</span> <span class="token function">date</span><span class="token punctuation">(</span><span class="token string single-quoted-string">'Y-m-d H:i:s'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
                    <span class="token string single-quoted-string">'Usuario'</span> <span class="token operator">=&gt;</span> <span class="token function">trim</span><span class="token punctuation">(</span><span class="token variable">$input</span><span class="token punctuation">[</span><span class="token string single-quoted-string">'email'</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
                <span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>
        <span class="token class-name static-context">Validator</span><span class="token operator">::</span><span class="token function">make</span><span class="token punctuation">(</span><span class="token variable">$input</span><span class="token punctuation">,</span> <span class="token punctuation">[</span>
            <span class="token string single-quoted-string">'name'</span> <span class="token operator">=&gt;</span> <span class="token punctuation">[</span><span class="token string single-quoted-string">'required'</span><span class="token punctuation">,</span> <span class="token string single-quoted-string">'string'</span><span class="token punctuation">,</span> <span class="token string single-quoted-string">'max:255'</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
            <span class="token string single-quoted-string">'email'</span> <span class="token operator">=&gt;</span> <span class="token punctuation">[</span><span class="token string single-quoted-string">'required'</span><span class="token punctuation">,</span> <span class="token string single-quoted-string">'string'</span><span class="token punctuation">,</span> <span class="token string single-quoted-string">'email'</span><span class="token punctuation">,</span> <span class="token string single-quoted-string">'max:255'</span><span class="token punctuation">,</span> <span class="token string single-quoted-string">'unique:users'</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
            <span class="token string single-quoted-string">'passport'</span> <span class="token operator">=&gt;</span> <span class="token punctuation">[</span><span class="token string single-quoted-string">'required'</span><span class="token punctuation">,</span><span class="token string single-quoted-string">'unique:users'</span><span class="token punctuation">,</span> <span class="token string single-quoted-string">'min:5'</span><span class="token punctuation">,</span> <span class="token string single-quoted-string">'max:170'</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
            <span class="token string single-quoted-string">'password'</span> <span class="token operator">=&gt;</span> <span class="token variable">$this</span><span class="token operator">-&gt;</span><span class="token function">passwordRules</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
            <span class="token string single-quoted-string">'terms'</span> <span class="token operator">=&gt;</span> <span class="token class-name static-context">Jetstream</span><span class="token operator">::</span><span class="token function">hasTermsAndPrivacyPolicyFeature</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">?</span> <span class="token punctuation">[</span><span class="token string single-quoted-string">'required'</span><span class="token punctuation">,</span> <span class="token string single-quoted-string">'accepted'</span><span class="token punctuation">]</span> <span class="token punctuation">:</span> <span class="token string single-quoted-string">''</span><span class="token punctuation">,</span>
        <span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token operator">-&gt;</span><span class="token function">validate</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token keyword">else</span><span class="token punctuation">{</span>
        <span class="token class-name static-context">Validator</span><span class="token operator">::</span><span class="token function">make</span><span class="token punctuation">(</span><span class="token variable">$input</span><span class="token punctuation">,</span> <span class="token punctuation">[</span>
            <span class="token string single-quoted-string">'name'</span> <span class="token operator">=&gt;</span> <span class="token punctuation">[</span><span class="token string single-quoted-string">'required'</span><span class="token punctuation">,</span> <span class="token string single-quoted-string">'string'</span><span class="token punctuation">,</span> <span class="token string single-quoted-string">'max:255'</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
            <span class="token string single-quoted-string">'email'</span> <span class="token operator">=&gt;</span> <span class="token punctuation">[</span><span class="token string single-quoted-string">'required'</span><span class="token punctuation">,</span> <span class="token string single-quoted-string">'string'</span><span class="token punctuation">,</span> <span class="token string single-quoted-string">'email'</span><span class="token punctuation">,</span> <span class="token string single-quoted-string">'max:255'</span><span class="token punctuation">,</span> <span class="token string single-quoted-string">'unique:users'</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
            <span class="token string single-quoted-string">'password'</span> <span class="token operator">=&gt;</span> <span class="token variable">$this</span><span class="token operator">-&gt;</span><span class="token function">passwordRules</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
            <span class="token string single-quoted-string">'terms'</span> <span class="token operator">=&gt;</span> <span class="token class-name static-context">Jetstream</span><span class="token operator">::</span><span class="token function">hasTermsAndPrivacyPolicyFeature</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">?</span> <span class="token punctuation">[</span><span class="token string single-quoted-string">'required'</span><span class="token punctuation">,</span> <span class="token string single-quoted-string">'accepted'</span><span class="token punctuation">]</span> <span class="token punctuation">:</span> <span class="token string single-quoted-string">''</span><span class="token punctuation">,</span>
        <span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token operator">-&gt;</span><span class="token function">validate</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token variable">$user</span> <span class="token operator">=</span> <span class="token class-name static-context">User</span><span class="token operator">::</span><span class="token function">create</span><span class="token punctuation">(</span><span class="token punctuation">[</span>
        <span class="token string single-quoted-string">'name'</span> <span class="token operator">=&gt;</span> <span class="token variable">$input</span><span class="token punctuation">[</span><span class="token string single-quoted-string">'name'</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
        <span class="token string single-quoted-string">'email'</span> <span class="token operator">=&gt;</span> <span class="token variable">$input</span><span class="token punctuation">[</span><span class="token string single-quoted-string">'email'</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
        <span class="token string single-quoted-string">'password'</span> <span class="token operator">=&gt;</span> <span class="token class-name static-context">Hash</span><span class="token operator">::</span><span class="token function">make</span><span class="token punctuation">(</span><span class="token variable">$input</span><span class="token punctuation">[</span><span class="token string single-quoted-string">'password'</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
        <span class="token string single-quoted-string">'passport'</span> <span class="token operator">=&gt;</span> <span class="token variable">$input</span><span class="token punctuation">[</span><span class="token string single-quoted-string">'passport'</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
        <span class="token string single-quoted-string">'email_verified_at'</span> <span class="token operator">=&gt;</span> <span class="token function">date</span><span class="token punctuation">(</span><span class="token string single-quoted-string">'Y-m-d H:i:s'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
        <span class="token string single-quoted-string">'phone'</span> <span class="token operator">=&gt;</span> <span class="token variable">$input</span><span class="token punctuation">[</span><span class="token string single-quoted-string">'phone'</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
        <span class="token string single-quoted-string">'servicio'</span> <span class="token operator">=&gt;</span> <span class="token variable">$input</span><span class="token punctuation">[</span><span class="token string single-quoted-string">'servicio'</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
        <span class="token string single-quoted-string">'pay'</span> <span class="token operator">=&gt;</span> <span class="token number">0</span><span class="token punctuation">,</span>
        <span class="token string single-quoted-string">'nombres'</span> <span class="token operator">=&gt;</span> <span class="token variable">$input</span><span class="token punctuation">[</span><span class="token string single-quoted-string">'nombres'</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
        <span class="token string single-quoted-string">'apellidos'</span> <span class="token operator">=&gt;</span> <span class="token variable">$input</span><span class="token punctuation">[</span><span class="token string single-quoted-string">'apellidos'</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
        <span class="token string single-quoted-string">'pais_de_nacimiento'</span> <span class="token operator">=&gt;</span> <span class="token variable">$input</span><span class="token punctuation">[</span><span class="token string single-quoted-string">'pais_de_nacimiento'</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
        <span class="token string single-quoted-string">'referido_por'</span> <span class="token operator">=&gt;</span> <span class="token variable">$input</span><span class="token punctuation">[</span><span class="token string single-quoted-string">'referido'</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
    <span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token variable">$rol</span> <span class="token operator">==</span> <span class="token string single-quoted-string">'cliente'</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token comment">//$user-&gt;email_verified_at = date('Y-m-d H:i:s');</span>
        <span class="token comment">//Artisan::call('view:clear');</span>
        <span class="token comment">// Enviar un correo al cliente indicando que se ha registrado con exito</span>
        <span class="token variable">$mail_cliente</span> <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">RegistroCliente</span><span class="token punctuation">(</span><span class="token variable">$user</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name static-context">Mail</span><span class="token operator">::</span><span class="token function">to</span><span class="token punctuation">(</span><span class="token variable">$user</span><span class="token operator">-&gt;</span><span class="token property">email</span><span class="token punctuation">)</span><span class="token operator">-&gt;</span><span class="token function">send</span><span class="token punctuation">(</span><span class="token variable">$mail_cliente</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">// Enviar un correo al equipo se Sefar indicando que se ha registrado un cliente</span>
        <span class="token variable">$mail_sefar</span> <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">RegistroSefar</span><span class="token punctuation">(</span><span class="token variable">$user</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name static-context">Mail</span><span class="token operator">::</span><span class="token function">to</span><span class="token punctuation">(</span><span class="token punctuation">[</span>
            <span class="token string single-quoted-string">'pedro.bazo@sefarvzla.com'</span><span class="token punctuation">,</span>
            <span class="token string single-quoted-string">'gerenciait@sefarvzla.com'</span><span class="token punctuation">,</span>
            <span class="token comment">/* 'egonzalez@sefarvzla.com', */</span>
            <span class="token string single-quoted-string">'analisisgenealogico@sefarvzla.com'</span><span class="token punctuation">,</span>
            <span class="token string single-quoted-string">'asistentedeproduccion@sefarvzla.com'</span><span class="token punctuation">,</span>
            <span class="token comment">/* 'arosales@sefarvzla.com', */</span>
            <span class="token comment">/* 'czanella@sefarvzla.com', */</span>
            <span class="token string single-quoted-string">'organizacionrrhh@sefarvzla.com'</span><span class="token punctuation">,</span>
            <span class="token string single-quoted-string">'gcuriel@sefarvzla.com'</span>
        <span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token operator">-&gt;</span><span class="token function">send</span><span class="token punctuation">(</span><span class="token variable">$mail_sefar</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token keyword">return</span> <span class="token variable">$user</span><span class="token operator">-&gt;</span><span class="token function">assignRole</span><span class="token punctuation">(</span><span class="token string single-quoted-string">'Cliente'</span><span class="token punctuation">)</span><span class="token operator">-&gt;</span><span class="token function">givePermissionTo</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token string single-quoted-string">'pay.services'</span><span class="token punctuation">,</span> <span class="token string single-quoted-string">'finish.register'</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token keyword">else</span><span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token variable">$user</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
≡
</code></pre></div></li> <li>Modificar vista <strong>resources\views\mail\registro-cliente.blade.php</strong>:<div class="language-php extra-class"><pre class="language-php"><code>≡
<span class="token operator">&lt;</span>table <span class="token keyword">class</span><span class="token operator">=</span><span class="token string double-quoted-string">&quot;inner-body&quot;</span> align<span class="token operator">=</span><span class="token string double-quoted-string">&quot;center&quot;</span> width<span class="token operator">=</span><span class="token string double-quoted-string">&quot;570&quot;</span> cellpadding<span class="token operator">=</span><span class="token string double-quoted-string">&quot;0&quot;</span> cellspacing<span class="token operator">=</span><span class="token string double-quoted-string">&quot;0&quot;</span> role<span class="token operator">=</span><span class="token string double-quoted-string">&quot;presentation&quot;</span> style<span class="token operator">=</span><span class="token string double-quoted-string">&quot;box-sizing: border-box; font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Helvetica, Arial, sans-serif, 'Apple Color Emoji', 'Segoe UI Emoji', 'Segoe UI Symbol'; position: relative; -premailer-cellpadding: 0; -premailer-cellspacing: 0; -premailer-width: 570px; background-color: #ffffff; border-color: #e8e5ef; border-radius: 2px; border-width: 1px; box-shadow: 0 2px 0 rgba(0, 0, 150, 0.025), 2px 4px 0 rgba(0, 0, 150, 0.015); margin: 0 auto; padding: 0; width: 570px;&quot;</span><span class="token operator">&gt;</span>
	<span class="token operator">&lt;</span><span class="token operator">!</span><span class="token operator">--</span> Body content <span class="token operator">--</span><span class="token operator">&gt;</span>
	<span class="token operator">&lt;</span>tr<span class="token operator">&gt;</span>
		<span class="token operator">&lt;</span>td <span class="token keyword">class</span><span class="token operator">=</span><span class="token string double-quoted-string">&quot;content-cell&quot;</span> style<span class="token operator">=</span><span class="token string double-quoted-string">&quot;box-sizing: border-box; font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Helvetica, Arial, sans-serif, 'Apple Color Emoji', 'Segoe UI Emoji', 'Segoe UI Symbol'; position: relative; max-width: 100vw; padding: 32px;&quot;</span><span class="token operator">&gt;</span>
			<span class="token operator">&lt;</span>h1 style<span class="token operator">=</span><span class="token string double-quoted-string">&quot;box-sizing: border-box; font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Helvetica, Arial, sans-serif, 'Apple Color Emoji', 'Segoe UI Emoji', 'Segoe UI Symbol'; position: relative; color: #3d4852; font-size: 18px; font-weight: bold; margin-top: 0; text-align: left;&quot;</span><span class="token operator">&gt;</span>
				¡Bienvenido a Sefar Universal<span class="token operator">!</span>
			<span class="token operator">&lt;</span><span class="token operator">/</span>h1<span class="token operator">&gt;</span>
			<span class="token operator">&lt;</span>p style<span class="token operator">=</span><span class="token string double-quoted-string">&quot;box-sizing: border-box; font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Helvetica, Arial, sans-serif, 'Apple Color Emoji', 'Segoe UI Emoji', 'Segoe UI Symbol'; position: relative; font-size: 16px; line-height: 1.5em; margin-top: 0; text-align: left;&quot;</span><span class="token operator">&gt;</span>
				<span class="token function">Estimado</span><span class="token punctuation">(</span>a<span class="token punctuation">)</span> <span class="token operator">&lt;</span>strong<span class="token operator">&gt;</span><span class="token punctuation">{</span><span class="token punctuation">{</span> <span class="token variable">$user</span><span class="token operator">-&gt;</span><span class="token property">name</span> <span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>strong<span class="token operator">&gt;</span> hemos recibido el inicio de su proceso<span class="token operator">.</span>
			<span class="token operator">&lt;</span><span class="token operator">/</span>p<span class="token operator">&gt;</span>
			<span class="token operator">&lt;</span>p style<span class="token operator">=</span><span class="token string double-quoted-string">&quot;box-sizing: border-box; font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Helvetica, Arial, sans-serif, 'Apple Color Emoji', 'Segoe UI Emoji', 'Segoe UI Symbol'; position: relative; font-size: 16px; line-height: 1.5em; margin-top: 0; text-align: left;&quot;</span><span class="token operator">&gt;</span>
				En estos momentos su información será remitida al departamento de genealogía e historia para el respectivo análisis de su árbol genealógico<span class="token operator">.</span>
			<span class="token operator">&lt;</span><span class="token operator">/</span>p<span class="token operator">&gt;</span>
			@<span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token variable">$user</span><span class="token operator">-&gt;</span><span class="token property">servicio</span> <span class="token operator">==</span> <span class="token string double-quoted-string">&quot;Española LMD&quot;</span><span class="token punctuation">)</span>
				<span class="token operator">&lt;</span>p style<span class="token operator">=</span><span class="token string double-quoted-string">&quot;box-sizing: border-box; font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Helvetica, Arial, sans-serif, 'Apple Color Emoji', 'Segoe UI Emoji', 'Segoe UI Symbol'; position: relative; font-size: 16px; line-height: 1.5em; margin-top: 0; text-align: left;&quot;</span><span class="token operator">&gt;</span>
					Para acelerar la gestión de alguno de los supuestos que establece la
					Ley de Memoria Democrática y preparar un expediente
					<span class="token operator">&lt;</span>strong<span class="token operator">&gt;</span>completamente blindado<span class="token operator">&lt;</span><span class="token operator">/</span>strong<span class="token operator">&gt;</span> que nos permita tener <span class="token keyword">as</span>í la certeza de
					obtener su nacionalidad española<span class="token punctuation">,</span> necesitamos que entre al siguiente enlace y complete
					la mayor cantidad de información posible<span class="token operator">.</span>
				<span class="token operator">&lt;</span><span class="token operator">/</span>p<span class="token operator">&gt;</span>
				<span class="token operator">&lt;</span>p style<span class="token operator">=</span><span class="token string double-quoted-string">&quot;box-sizing: border-box; font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Helvetica, Arial, sans-serif, 'Apple Color Emoji', 'Segoe UI Emoji', 'Segoe UI Symbol'; position: relative; font-size: 16px; line-height: 1.5em; margin-top: 0; text-align: left;&quot;</span><span class="token operator">&gt;</span>
					<span class="token operator">&lt;</span>a href<span class="token operator">=</span><span class="token string double-quoted-string">&quot;https://survey.hsforms.com/19Zypb99_QFyCrbM8-V0fzQbxtdk&quot;</span> target<span class="token operator">=</span><span class="token string double-quoted-string">&quot;_blank&quot;</span><span class="token operator">&gt;</span><span class="token constant">FORMULARIO</span> <span class="token constant">LEY</span> <span class="token constant">DE</span> <span class="token constant">MEMORIA</span> <span class="token constant">DEMOCR</span>Á<span class="token constant">TICA</span><span class="token operator">&lt;</span><span class="token operator">/</span>a<span class="token operator">&gt;</span>
				<span class="token operator">&lt;</span><span class="token operator">/</span>p<span class="token operator">&gt;</span>
			@<span class="token keyword">endif</span>
			<span class="token operator">&lt;</span>p style<span class="token operator">=</span><span class="token string double-quoted-string">&quot;box-sizing: border-box; font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Helvetica, Arial, sans-serif, 'Apple Color Emoji', 'Segoe UI Emoji', 'Segoe UI Symbol'; position: relative; font-size: 16px; line-height: 1.5em; margin-top: 0; text-align: left;&quot;</span><span class="token operator">&gt;</span>
				Si no ha podido cargar los datos de su árbol<span class="token punctuation">,</span> puede hacerlo entrando a nuestra plataforma en este momento o cuando lo desee<span class="token punctuation">,</span> mediante el siguiente enlace<span class="token punctuation">:</span>
				<span class="token operator">&lt;</span>a href<span class="token operator">=</span><span class="token string double-quoted-string">&quot;https://app.universalsefar.com/login&quot;</span> target<span class="token operator">=</span><span class="token string double-quoted-string">&quot;_blank&quot;</span><span class="token operator">&gt;</span>https<span class="token punctuation">:</span><span class="token comment">//app.universalsefar.com/login&lt;/a&gt;</span>
				con su correo <span class="token punctuation">{</span><span class="token punctuation">{</span> <span class="token variable">$user</span><span class="token operator">-&gt;</span><span class="token property">email</span> <span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token punctuation">,</span> y cuando finalice presione en <span class="token operator">&lt;</span>strong<span class="token operator">&gt;</span>finalizar carga<span class="token operator">&lt;</span><span class="token operator">/</span>strong<span class="token operator">&gt;</span><span class="token operator">.</span>
			<span class="token operator">&lt;</span><span class="token operator">/</span>p<span class="token operator">&gt;</span>
			<span class="token operator">&lt;</span>p style<span class="token operator">=</span><span class="token string double-quoted-string">&quot;box-sizing: border-box; font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Helvetica, Arial, sans-serif, 'Apple Color Emoji', 'Segoe UI Emoji', 'Segoe UI Symbol'; position: relative; font-size: 16px; line-height: 1.5em; margin-top: 0; text-align: left;&quot;</span><span class="token operator">&gt;</span>
				Mientras más datos proporciones más fácil y rápido será la realización de tu estudio genealógico<span class="token operator">.</span>
			<span class="token operator">&lt;</span><span class="token operator">/</span>p<span class="token operator">&gt;</span>
			<span class="token operator">&lt;</span>p style<span class="token operator">=</span><span class="token string double-quoted-string">&quot;box-sizing: border-box; font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Helvetica, Arial, sans-serif, 'Apple Color Emoji', 'Segoe UI Emoji', 'Segoe UI Symbol'; position: relative; font-size: 16px; line-height: 1.5em; margin-top: 0; text-align: left;&quot;</span><span class="token operator">&gt;</span>
				Una vez tengamos respuesta sobre el análisis de sus datos le comunicaremos<span class="token operator">.</span>
			<span class="token operator">&lt;</span><span class="token operator">/</span>p<span class="token operator">&gt;</span>
			<span class="token operator">&lt;</span>p style<span class="token operator">=</span><span class="token string double-quoted-string">&quot;box-sizing: border-box; font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Helvetica, Arial, sans-serif, 'Apple Color Emoji', 'Segoe UI Emoji', 'Segoe UI Symbol'; position: relative; font-size: 16px; line-height: 1.5em; margin-top: 0; text-align: left;&quot;</span><span class="token operator">&gt;</span>
				En caso de requerir alguna información adicional relacionada con este asunto
				o cualquier otro relacionado con el proceso<span class="token punctuation">,</span> por favor no dude en comunicarse con nosotros por el
				correo electrónico <span class="token operator">&lt;</span>strong<span class="token operator">&gt;</span><span class="token operator">&lt;</span>a href<span class="token operator">=</span><span class="token string double-quoted-string">&quot;mailto:info@sefaruniversal.com&quot;</span><span class="token operator">&gt;</span>info@sefaruniversal<span class="token operator">.</span>com<span class="token operator">&lt;</span><span class="token operator">/</span>a<span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>strong<span class="token operator">&gt;</span> y<span class="token operator">/</span>o por los siguientes números de teléfono de atención al cliente<span class="token punctuation">:</span>
				<span class="token operator">&lt;</span>br<span class="token operator">&gt;</span>
				<span class="token operator">&lt;</span>ul<span class="token operator">&gt;</span>
					<span class="token operator">&lt;</span>li<span class="token operator">&gt;</span><span class="token constant">USA</span><span class="token punctuation">:</span> <span class="token operator">&lt;</span>a href<span class="token operator">=</span><span class="token string double-quoted-string">&quot;tel:+16032621727&quot;</span><span class="token operator">&gt;</span><span class="token operator">+</span><span class="token number">1</span> <span class="token number">603</span> <span class="token number">2621727</span><span class="token operator">&lt;</span><span class="token operator">/</span>a<span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>li<span class="token operator">&gt;</span>
					<span class="token operator">&lt;</span>li<span class="token operator">&gt;</span>España<span class="token punctuation">:</span> <span class="token operator">&lt;</span>a href<span class="token operator">=</span><span class="token string double-quoted-string">&quot;tel:+34911980993&quot;</span><span class="token operator">&gt;</span><span class="token operator">+</span><span class="token number">34</span> <span class="token number">911</span> <span class="token number">980993</span><span class="token operator">&lt;</span><span class="token operator">/</span>a<span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>li<span class="token operator">&gt;</span>
					<span class="token operator">&lt;</span>li<span class="token operator">&gt;</span>Venezuela<span class="token punctuation">:</span> <span class="token operator">&lt;</span>a href<span class="token operator">=</span><span class="token string double-quoted-string">&quot;tel:+582127201170&quot;</span><span class="token operator">&gt;</span><span class="token operator">+</span><span class="token number">58</span> <span class="token number">212</span> <span class="token number">7201170</span><span class="token operator">&lt;</span><span class="token operator">/</span>a<span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>li<span class="token operator">&gt;</span>
					<span class="token operator">&lt;</span>li<span class="token operator">&gt;</span>Colombia<span class="token punctuation">:</span> <span class="token operator">&lt;</span>a href<span class="token operator">=</span><span class="token string double-quoted-string">&quot;tel:+570353195843&quot;</span><span class="token operator">&gt;</span><span class="token operator">+</span><span class="token number">57</span> <span class="token number">035</span> <span class="token number">3195843</span><span class="token operator">&lt;</span><span class="token operator">/</span>a<span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>li<span class="token operator">&gt;</span>
				<span class="token operator">&lt;</span><span class="token operator">/</span>ul<span class="token operator">&gt;</span>
			<span class="token operator">&lt;</span><span class="token operator">/</span>p<span class="token operator">&gt;</span>
			<span class="token operator">&lt;</span>p style<span class="token operator">=</span><span class="token string double-quoted-string">&quot;box-sizing: border-box; font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Helvetica, Arial, sans-serif, 'Apple Color Emoji', 'Segoe UI Emoji', 'Segoe UI Symbol'; position: relative; font-size: 16px; line-height: 1.5em; margin-top: 0; text-align: left;&quot;</span><span class="token operator">&gt;</span>
				Atención de lunes a sábado las <span class="token number">24</span>hrs<span class="token operator">.</span>
			<span class="token operator">&lt;</span><span class="token operator">/</span>p<span class="token operator">&gt;</span>
			<span class="token operator">&lt;</span>p style<span class="token operator">=</span><span class="token string double-quoted-string">&quot;box-sizing: border-box; font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Helvetica, Arial, sans-serif, 'Apple Color Emoji', 'Segoe UI Emoji', 'Segoe UI Symbol'; position: relative; font-size: 16px; line-height: 1.5em; margin-top: 0; text-align: left;&quot;</span><span class="token operator">&gt;</span>
				Huso horario <span class="token function">Colombia</span> <span class="token punctuation">(</span><span class="token constant">GMT</span><span class="token operator">-</span><span class="token number">5</span><span class="token punctuation">)</span><span class="token operator">.</span>
			<span class="token operator">&lt;</span><span class="token operator">/</span>p<span class="token operator">&gt;</span>
			<span class="token operator">&lt;</span>br<span class="token operator">&gt;</span>
			<span class="token operator">&lt;</span>p style<span class="token operator">=</span><span class="token string double-quoted-string">&quot;box-sizing: border-box; font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Helvetica, Arial, sans-serif, 'Apple Color Emoji', 'Segoe UI Emoji', 'Segoe UI Symbol'; position: relative; font-size: 16px; line-height: 1.5em; margin-top: 0; text-align: left;&quot;</span><span class="token operator">&gt;</span>
				Atentamente<span class="token punctuation">,</span>
				<span class="token operator">&lt;</span>br<span class="token operator">&gt;</span>
				Departamento de Atención al Cliente<span class="token operator">.</span>
				<span class="token operator">&lt;</span>br<span class="token operator">&gt;</span>
				<span class="token operator">&lt;</span>img src<span class="token operator">=</span><span class="token string double-quoted-string">&quot;https://raw.githubusercontent.com/petrix12/imagenes2022/main/Sefar/unnamed.png&quot;</span> alt<span class="token operator">=</span><span class="token string double-quoted-string">&quot;Logo Sefar&quot;</span> height<span class="token operator">=</span><span class="token string double-quoted-string">&quot;60&quot;</span><span class="token operator">&gt;</span>
			<span class="token operator">&lt;</span><span class="token operator">/</span>p<span class="token operator">&gt;</span>
		<span class="token operator">&lt;</span><span class="token operator">/</span>td<span class="token operator">&gt;</span>
	<span class="token operator">&lt;</span><span class="token operator">/</span>tr<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>table<span class="token operator">&gt;</span>
≡
</code></pre></div></li> <li>Modificar archivo de rutas <strong>routes\web.php</strong>:<div class="language-php extra-class"><pre class="language-php"><code>≡
<span class="token operator">**</span><span class="token operator">*</span>
</code></pre></div></li> <li>Modificar controlador <strong>app\Http\Controllers\Controller.php</strong> para administrar la vista de clientes:<div class="language-php extra-class"><div class="highlight-lines"><br><br><br><br><br><div class="highlighted"> </div><div class="highlighted"> </div><div class="highlighted"> </div><div class="highlighted"> </div><div class="highlighted"> </div><div class="highlighted"> </div><div class="highlighted"> </div><div class="highlighted"> </div><div class="highlighted"> </div><div class="highlighted"> </div><div class="highlighted"> </div><br><br><br><br><br></div><pre class="language-php"><code>≡
<span class="token keyword">if</span><span class="token punctuation">(</span><span class="token class-name static-context">Auth</span><span class="token operator">::</span><span class="token function">user</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">-&gt;</span><span class="token function">hasRole</span><span class="token punctuation">(</span><span class="token string single-quoted-string">'MG-Tours'</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
	<span class="token keyword">return</span> <span class="token function">view</span><span class="token punctuation">(</span><span class="token string single-quoted-string">'crud.agclientes.index'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment">// Clientes corrientes</span>
<span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token class-name static-context">Auth</span><span class="token operator">::</span><span class="token function">user</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">-&gt;</span><span class="token function">hasRole</span><span class="token punctuation">(</span><span class="token string double-quoted-string">&quot;Cliente&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
	<span class="token keyword">if</span><span class="token punctuation">(</span><span class="token class-name static-context">Auth</span><span class="token operator">::</span><span class="token function">user</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">-&gt;</span><span class="token property">pay</span><span class="token operator">==</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
		<span class="token keyword">return</span> <span class="token function">redirect</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">-&gt;</span><span class="token function">route</span><span class="token punctuation">(</span><span class="token string single-quoted-string">'clientes.pay'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token class-name static-context">Auth</span><span class="token operator">::</span><span class="token function">user</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">-&gt;</span><span class="token property">pay</span><span class="token operator">==</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
		<span class="token keyword">return</span> <span class="token function">redirect</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">-&gt;</span><span class="token function">route</span><span class="token punctuation">(</span><span class="token string single-quoted-string">'clientes.getinfo'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
		<span class="token variable">$IDCliente</span> <span class="token operator">=</span> <span class="token class-name static-context">Auth</span><span class="token operator">::</span><span class="token function">user</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">-&gt;</span><span class="token property">passport</span><span class="token punctuation">;</span>
		<span class="token keyword">return</span> <span class="token function">view</span><span class="token punctuation">(</span><span class="token string single-quoted-string">'arboles.tree'</span><span class="token punctuation">,</span> <span class="token function">compact</span><span class="token punctuation">(</span><span class="token string single-quoted-string">'IDCliente'</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token variable">$countries</span> <span class="token operator">=</span> <span class="token class-name static-context">Country</span><span class="token operator">::</span><span class="token function">where</span><span class="token punctuation">(</span><span class="token string single-quoted-string">'pais'</span><span class="token punctuation">,</span><span class="token string single-quoted-string">'!='</span><span class="token punctuation">,</span><span class="token string single-quoted-string">'aanull'</span><span class="token punctuation">)</span>
				<span class="token operator">-&gt;</span><span class="token function">orderBy</span><span class="token punctuation">(</span><span class="token string single-quoted-string">'pais'</span><span class="token punctuation">,</span><span class="token string single-quoted-string">'ASC'</span><span class="token punctuation">)</span><span class="token operator">-&gt;</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>	
≡
</code></pre></div></li> <li>Configurar <strong>config\adminlte.php</strong> para el menú de los clientes:<div class="language-php extra-class"><pre class="language-php"><code>≡
<span class="token comment">/* *** CLIENTES *** */</span>
<span class="token punctuation">[</span>
	<span class="token string single-quoted-string">'text'</span>        <span class="token operator">=&gt;</span> <span class="token string single-quoted-string">'Menú de opciones'</span><span class="token punctuation">,</span>
	<span class="token string single-quoted-string">'icon'</span>        <span class="token operator">=&gt;</span> <span class="token string single-quoted-string">'fas fa-caret-square-down'</span><span class="token punctuation">,</span>
	<span class="token string single-quoted-string">'icon_color'</span>  <span class="token operator">=&gt;</span> <span class="token string single-quoted-string">'blue'</span><span class="token punctuation">,</span>
	<span class="token string single-quoted-string">'can'</span>  <span class="token operator">=&gt;</span> <span class="token string single-quoted-string">'cliente'</span><span class="token punctuation">,</span>
	<span class="token string single-quoted-string">'submenu'</span> <span class="token operator">=&gt;</span> <span class="token punctuation">[</span>
		<span class="token punctuation">[</span>
			<span class="token string single-quoted-string">'text'</span>          <span class="token operator">=&gt;</span> <span class="token string single-quoted-string">'Pago del análisis'</span><span class="token punctuation">,</span>
			<span class="token string single-quoted-string">'icon'</span>          <span class="token operator">=&gt;</span> <span class="token string single-quoted-string">'fas fa-money-bill'</span><span class="token punctuation">,</span>
			<span class="token string single-quoted-string">'icon_color'</span>    <span class="token operator">=&gt;</span> <span class="token string single-quoted-string">'yellow'</span><span class="token punctuation">,</span>
			<span class="token string single-quoted-string">'route'</span>         <span class="token operator">=&gt;</span> <span class="token string single-quoted-string">'clientes.pay'</span><span class="token punctuation">,</span>
			<span class="token string single-quoted-string">'can'</span>           <span class="token operator">=&gt;</span> <span class="token string single-quoted-string">'pay.services'</span><span class="token punctuation">,</span>
		<span class="token punctuation">]</span><span class="token punctuation">,</span>
		<span class="token punctuation">[</span>
			<span class="token string single-quoted-string">'text'</span>          <span class="token operator">=&gt;</span> <span class="token string single-quoted-string">'Completar información'</span><span class="token punctuation">,</span>
			<span class="token string single-quoted-string">'icon'</span>          <span class="token operator">=&gt;</span> <span class="token string single-quoted-string">'fas fa-user-plus'</span><span class="token punctuation">,</span>
			<span class="token string single-quoted-string">'icon_color'</span>    <span class="token operator">=&gt;</span> <span class="token string single-quoted-string">'yellow'</span><span class="token punctuation">,</span>
			<span class="token string single-quoted-string">'route'</span>         <span class="token operator">=&gt;</span> <span class="token string single-quoted-string">'clientes.getinfo'</span><span class="token punctuation">,</span>
			<span class="token string single-quoted-string">'can'</span>           <span class="token operator">=&gt;</span> <span class="token string single-quoted-string">'cliente'</span><span class="token punctuation">,</span>
		<span class="token punctuation">]</span><span class="token punctuation">,</span>
		<span class="token punctuation">[</span>
			<span class="token string single-quoted-string">'text'</span>          <span class="token operator">=&gt;</span> <span class="token string single-quoted-string">'Cargar árbol'</span><span class="token punctuation">,</span>
			<span class="token string single-quoted-string">'icon'</span>          <span class="token operator">=&gt;</span> <span class="token string single-quoted-string">'fas fa-sitemap'</span><span class="token punctuation">,</span>
			<span class="token string single-quoted-string">'icon_color'</span>    <span class="token operator">=&gt;</span> <span class="token string single-quoted-string">'yellow'</span><span class="token punctuation">,</span>
			<span class="token string single-quoted-string">'route'</span>         <span class="token operator">=&gt;</span> <span class="token string single-quoted-string">'clientes.tree'</span><span class="token punctuation">,</span>
			<span class="token string single-quoted-string">'can'</span>           <span class="token operator">=&gt;</span> <span class="token string single-quoted-string">'cliente'</span><span class="token punctuation">,</span>
		<span class="token punctuation">]</span><span class="token punctuation">,</span>
		<span class="token punctuation">[</span>
			<span class="token string single-quoted-string">'text'</span>          <span class="token operator">=&gt;</span> <span class="token string single-quoted-string">'Perfil de usuario'</span><span class="token punctuation">,</span>
			<span class="token string single-quoted-string">'icon'</span>          <span class="token operator">=&gt;</span> <span class="token string single-quoted-string">'fas fa-user-cog'</span><span class="token punctuation">,</span>
			<span class="token string single-quoted-string">'icon_color'</span>    <span class="token operator">=&gt;</span> <span class="token string single-quoted-string">'yellow'</span><span class="token punctuation">,</span>
			<span class="token string single-quoted-string">'url'</span>           <span class="token operator">=&gt;</span> <span class="token string single-quoted-string">'user/profile'</span><span class="token punctuation">,</span>
			<span class="token string single-quoted-string">'can'</span>           <span class="token operator">=&gt;</span> <span class="token string single-quoted-string">'cliente'</span><span class="token punctuation">,</span>
		<span class="token punctuation">]</span><span class="token punctuation">,</span>
	<span class="token punctuation">]</span><span class="token punctuation">,</span>
<span class="token punctuation">]</span><span class="token punctuation">,</span>
<span class="token punctuation">[</span>
	<span class="token string single-quoted-string">'text'</span>          <span class="token operator">=&gt;</span> <span class="token string single-quoted-string">'Finalizar carga'</span><span class="token punctuation">,</span>
	<span class="token string single-quoted-string">'icon'</span>          <span class="token operator">=&gt;</span> <span class="token string single-quoted-string">'fas fa-sign-out-alt'</span><span class="token punctuation">,</span>
	<span class="token string single-quoted-string">'icon_color'</span>    <span class="token operator">=&gt;</span> <span class="token string single-quoted-string">'blue'</span><span class="token punctuation">,</span>
	<span class="token string single-quoted-string">'route'</span>         <span class="token operator">=&gt;</span> <span class="token string single-quoted-string">'clientes.salir'</span><span class="token punctuation">,</span>
	<span class="token string single-quoted-string">'can'</span>           <span class="token operator">=&gt;</span> <span class="token string single-quoted-string">'cliente'</span><span class="token punctuation">,</span>
<span class="token punctuation">]</span><span class="token punctuation">,</span>
≡
</code></pre></div></li> <li>Agregar código de seguimiento en <strong>resources\views\layouts\app.blade.php</strong>:<div class="language-php extra-class"><div class="highlight-lines"><br><br><br><div class="highlighted"> </div><div class="highlighted"> </div><div class="highlighted"> </div><div class="highlighted"> </div><div class="highlighted"> </div><div class="highlighted"> </div><div class="highlighted"> </div><div class="highlighted"> </div><br><br><br><br><div class="highlighted"> </div><div class="highlighted"> </div><div class="highlighted"> </div><br><br><br></div><pre class="language-php"><code><span class="token operator">&lt;</span><span class="token operator">!</span><span class="token constant">DOCTYPE</span> html<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span>html lang<span class="token operator">=</span><span class="token string double-quoted-string">&quot;{{ str_replace('_', '-', app()-&gt;getLocale()) }}&quot;</span><span class="token operator">&gt;</span>
	<span class="token operator">&lt;</span>head<span class="token operator">&gt;</span>
		<span class="token operator">&lt;</span><span class="token operator">!</span><span class="token operator">--</span> Google <span class="token function">tag</span> <span class="token punctuation">(</span>gtag<span class="token operator">.</span>js<span class="token punctuation">)</span> <span class="token operator">--</span><span class="token operator">&gt;</span>
		<span class="token operator">&lt;</span>script async src<span class="token operator">=</span><span class="token string double-quoted-string">&quot;https://www.googletagmanager.com/gtag/js?id=UA-189067277-1&quot;</span><span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>script<span class="token operator">&gt;</span>
		<span class="token operator">&lt;</span>script<span class="token operator">&gt;</span>
			window<span class="token operator">.</span>dataLayer <span class="token operator">=</span> window<span class="token operator">.</span><span class="token class-name">dataLayer</span> <span class="token operator">||</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
			<span class="token keyword">function</span> <span class="token function-definition function">gtag</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>dataLayer<span class="token operator">.</span><span class="token function">push</span><span class="token punctuation">(</span>arguments<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">}</span>
			<span class="token function">gtag</span><span class="token punctuation">(</span><span class="token string single-quoted-string">'js'</span><span class="token punctuation">,</span> <span class="token keyword">new</span> <span class="token class-name">Date</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
			<span class="token function">gtag</span><span class="token punctuation">(</span><span class="token string single-quoted-string">'config'</span><span class="token punctuation">,</span> <span class="token string single-quoted-string">'UA-189067277-1'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token operator">&lt;</span><span class="token operator">/</span>script<span class="token operator">&gt;</span>
		≡
	<span class="token operator">&lt;</span><span class="token operator">/</span>head<span class="token operator">&gt;</span>
	<span class="token operator">&lt;</span>body <span class="token keyword">class</span><span class="token operator">=</span><span class="token string double-quoted-string">&quot;font-sans antialiased&quot;</span><span class="token operator">&gt;</span>
		≡
		<span class="token operator">&lt;</span><span class="token operator">!</span><span class="token operator">--</span> Start of HubSpot Embed Code <span class="token operator">--</span><span class="token operator">&gt;</span>
		<span class="token operator">&lt;</span>script type<span class="token operator">=</span><span class="token string double-quoted-string">&quot;text/javascript&quot;</span> id<span class="token operator">=</span><span class="token string double-quoted-string">&quot;hs-script-loader&quot;</span> async defer src<span class="token operator">=</span><span class="token string double-quoted-string">&quot;//js.hs-scripts.com/20053496.js&quot;</span><span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>script<span class="token operator">&gt;</span>
		<span class="token operator">&lt;</span><span class="token operator">!</span><span class="token operator">--</span> End of HubSpot Embed Code <span class="token operator">--</span><span class="token operator">&gt;</span>
	<span class="token operator">&lt;</span><span class="token operator">/</span>body<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>html<span class="token operator">&gt;</span>
</code></pre></div></li> <li>Modificar plantilla <strong>resources\views\navigation-menu.blade.php</strong>:<div class="language-php extra-class"><div class="highlight-lines"><br><br><br><br><br><br><br><div class="highlighted"> </div><br><br><br><br><br><br><br><br><br></div><pre class="language-php"><code><span class="token operator">&lt;</span>nav x<span class="token operator">-</span>data<span class="token operator">=</span><span class="token string double-quoted-string">&quot;{ open: false }&quot;</span> <span class="token keyword">class</span><span class="token operator">=</span><span class="token string double-quoted-string">&quot;bg-white border-b border-gray-100&quot;</span><span class="token operator">&gt;</span>
	<span class="token operator">&lt;</span><span class="token operator">!</span><span class="token operator">--</span> Primary Navigation Menu <span class="token operator">--</span><span class="token operator">&gt;</span>
	<span class="token operator">&lt;</span>div <span class="token keyword">class</span><span class="token operator">=</span><span class="token string double-quoted-string">&quot;max-w-7xl mx-auto px-4 sm:px-6 lg:px-8&quot;</span><span class="token operator">&gt;</span>
		<span class="token operator">&lt;</span>div <span class="token keyword">class</span><span class="token operator">=</span><span class="token string double-quoted-string">&quot;flex justify-between h-16&quot;</span><span class="token operator">&gt;</span>
			<span class="token operator">&lt;</span>div <span class="token keyword">class</span><span class="token operator">=</span><span class="token string double-quoted-string">&quot;flex&quot;</span><span class="token operator">&gt;</span>
				<span class="token operator">&lt;</span>div <span class="token keyword">class</span><span class="token operator">=</span><span class="token string double-quoted-string">&quot;hidden space-x-8 sm:-my-px sm:ml-10 sm:flex&quot;</span><span class="token operator">&gt;</span>
					<span class="token operator">&lt;</span>div <span class="token keyword">class</span><span class="token operator">=</span><span class="token string double-quoted-string">&quot;block px-2 py-3 text-lg ctvSefar&quot;</span><span class="token operator">&gt;</span>
						<span class="token operator">&lt;</span>strong<span class="token operator">&gt;</span><span class="token punctuation">{</span><span class="token punctuation">{</span> <span class="token punctuation">(</span><span class="token class-name static-context">Auth</span><span class="token operator">::</span><span class="token function">user</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">-&gt;</span><span class="token property">servicio</span> <span class="token operator">!=</span> <span class="token constant">null</span><span class="token punctuation">)</span> <span class="token operator">?</span> <span class="token string single-quoted-string">'Servicio: '</span> <span class="token operator">.</span> <span class="token class-name static-context">Auth</span><span class="token operator">::</span><span class="token function">user</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">-&gt;</span><span class="token property">servicio</span> <span class="token punctuation">:</span> <span class="token class-name static-context">Auth</span><span class="token operator">::</span><span class="token function">user</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">-&gt;</span><span class="token property">name</span> <span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>strong<span class="token operator">&gt;</span>
					<span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
				<span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
			<span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
			≡
		<span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
	<span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
	≡
<span class="token operator">&lt;</span><span class="token operator">/</span>nav<span class="token operator">&gt;</span>
</code></pre></div></li> <li>Crear vista <strong>resources\views\clientes\getinfo.blade.php</strong>:<div class="language-php extra-class"><pre class="language-php"><code></code></pre></div></li> <li>Crear vista <strong>resources\views\clientes\pay.blade.php</strong>:<div class="language-php extra-class"><pre class="language-php"><code></code></pre></div></li> <li>Modificar controlador <strong>app\Http\Controllers\ClienteController.php</strong> para añadir los métodos <strong>getinfo</strong> y <strong>pay</strong> .........:<div class="language-php extra-class"><pre class="language-php"><code></code></pre></div></li> <li>Modificar vista <strong>resources\views\livewire\crud\users-table.blade.php</strong>:<div class="language-php extra-class"><pre class="language-php"><code>≡
<span class="token operator">&lt;</span>table <span class="token keyword">class</span><span class="token operator">=</span><span class="token string double-quoted-string">&quot;min-w-full divide-y divide-gray-200&quot;</span><span class="token operator">&gt;</span>
	<span class="token operator">&lt;</span>thead <span class="token keyword">class</span><span class="token operator">=</span><span class="token string double-quoted-string">&quot;bg-gray-50&quot;</span><span class="token operator">&gt;</span>
		<span class="token operator">&lt;</span>tr<span class="token operator">&gt;</span>
			<span class="token operator">&lt;</span>th scope<span class="token operator">=</span><span class="token string double-quoted-string">&quot;col&quot;</span> <span class="token keyword">class</span><span class="token operator">=</span><span class="token string double-quoted-string">&quot;px-3 py-2 text-left text-md font-medium text-gray-500 uppercase tracking-wider&quot;</span><span class="token operator">&gt;</span>
				<span class="token punctuation">{</span><span class="token punctuation">{</span><span class="token operator">--</span> <span class="token operator">-</span> ■ ■ <span class="token operator">-</span> <span class="token operator">--</span><span class="token punctuation">}</span><span class="token punctuation">}</span>
				<span class="token operator">-</span> <span class="token operator">&lt;</span>i <span class="token keyword">class</span><span class="token operator">=</span><span class="token string double-quoted-string">&quot;fas fa-portrait&quot;</span><span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>i<span class="token operator">&gt;</span> <span class="token operator">-</span>
			<span class="token operator">&lt;</span><span class="token operator">/</span>th<span class="token operator">&gt;</span><span class="token punctuation">{</span><span class="token punctuation">{</span><span class="token operator">--</span>
			<span class="token operator">&lt;</span>th scope<span class="token operator">=</span><span class="token string double-quoted-string">&quot;col&quot;</span> <span class="token keyword">class</span><span class="token operator">=</span><span class="token string double-quoted-string">&quot;px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase tracking-wider&quot;</span><span class="token operator">&gt;</span>
				<span class="token constant">ID</span>
			<span class="token operator">&lt;</span><span class="token operator">/</span>th<span class="token operator">&gt;</span> <span class="token operator">--</span><span class="token punctuation">}</span><span class="token punctuation">}</span>
			<span class="token operator">&lt;</span>th scope<span class="token operator">=</span><span class="token string double-quoted-string">&quot;col&quot;</span> <span class="token keyword">class</span><span class="token operator">=</span><span class="token string double-quoted-string">&quot;px-2 py-2 text-left text-xs font-medium text-gray-500 uppercase tracking-wider&quot;</span><span class="token operator">&gt;</span>
				<span class="token punctuation">{</span><span class="token punctuation">{</span> <span class="token function">__</span><span class="token punctuation">(</span><span class="token string single-quoted-string">'User name'</span><span class="token punctuation">)</span> <span class="token punctuation">}</span><span class="token punctuation">}</span>
			<span class="token operator">&lt;</span><span class="token operator">/</span>th<span class="token operator">&gt;</span><span class="token punctuation">{</span><span class="token punctuation">{</span><span class="token operator">--</span>
			<span class="token operator">&lt;</span>th scope<span class="token operator">=</span><span class="token string double-quoted-string">&quot;col&quot;</span> <span class="token keyword">class</span><span class="token operator">=</span><span class="token string double-quoted-string">&quot;px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase tracking-wider&quot;</span><span class="token operator">&gt;</span>
				<span class="token punctuation">{</span><span class="token punctuation">{</span> <span class="token function">__</span><span class="token punctuation">(</span><span class="token string single-quoted-string">'Passport'</span><span class="token punctuation">)</span> <span class="token punctuation">}</span><span class="token punctuation">}</span>
			<span class="token operator">&lt;</span><span class="token operator">/</span>th<span class="token operator">&gt;</span> <span class="token operator">--</span><span class="token punctuation">}</span><span class="token punctuation">}</span>
			<span class="token operator">&lt;</span>th scope<span class="token operator">=</span><span class="token string double-quoted-string">&quot;col&quot;</span> <span class="token keyword">class</span><span class="token operator">=</span><span class="token string double-quoted-string">&quot;px-2 py-2 text-left text-xs font-medium text-gray-500 uppercase tracking-wider&quot;</span><span class="token operator">&gt;</span>
				<span class="token punctuation">{</span><span class="token punctuation">{</span> <span class="token function">__</span><span class="token punctuation">(</span><span class="token string single-quoted-string">'Correo electrónico'</span><span class="token punctuation">)</span> <span class="token punctuation">}</span><span class="token punctuation">}</span>
			<span class="token operator">&lt;</span><span class="token operator">/</span>th<span class="token operator">&gt;</span>
			<span class="token operator">&lt;</span>th scope<span class="token operator">=</span><span class="token string double-quoted-string">&quot;col&quot;</span> <span class="token keyword">class</span><span class="token operator">=</span><span class="token string double-quoted-string">&quot;px-2 py-2 text-left text-xs font-medium text-gray-500 uppercase tracking-wider&quot;</span><span class="token operator">&gt;</span>
				<span class="token punctuation">{</span><span class="token punctuation">{</span> <span class="token function">__</span><span class="token punctuation">(</span><span class="token string single-quoted-string">'Servicio'</span><span class="token punctuation">)</span> <span class="token punctuation">}</span><span class="token punctuation">}</span>
			<span class="token operator">&lt;</span><span class="token operator">/</span>th<span class="token operator">&gt;</span>
			<span class="token operator">&lt;</span>th scope<span class="token operator">=</span><span class="token string double-quoted-string">&quot;col&quot;</span> <span class="token keyword">class</span><span class="token operator">=</span><span class="token string double-quoted-string">&quot;px-2 py-2 text-left text-xs font-medium text-gray-500 uppercase tracking-wider&quot;</span><span class="token operator">&gt;</span>
				<span class="token punctuation">{</span><span class="token punctuation">{</span> <span class="token function">__</span><span class="token punctuation">(</span><span class="token string single-quoted-string">'Fecha de registro'</span><span class="token punctuation">)</span> <span class="token punctuation">}</span><span class="token punctuation">}</span>
			<span class="token operator">&lt;</span><span class="token operator">/</span>th<span class="token operator">&gt;</span>
			<span class="token punctuation">{</span><span class="token punctuation">{</span><span class="token operator">--</span> @<span class="token function">can</span><span class="token punctuation">(</span><span class="token string single-quoted-string">'crud.permissions.edit'</span><span class="token punctuation">)</span>
			<span class="token operator">&lt;</span>th scope<span class="token operator">=</span><span class="token string double-quoted-string">&quot;col&quot;</span> <span class="token keyword">class</span><span class="token operator">=</span><span class="token string double-quoted-string">&quot;px-1 y-2 text-center text-xs font-medium text-gray-500 uppercase tracking-wider&quot;</span><span class="token operator">&gt;</span>
				<span class="token punctuation">{</span><span class="token punctuation">{</span> <span class="token function">__</span><span class="token punctuation">(</span><span class="token string single-quoted-string">'Permissions'</span><span class="token punctuation">)</span> <span class="token punctuation">}</span><span class="token punctuation">}</span>
			<span class="token operator">&lt;</span><span class="token operator">/</span>th<span class="token operator">&gt;</span>
			@endcan <span class="token operator">--</span><span class="token punctuation">}</span><span class="token punctuation">}</span>
			@<span class="token function">can</span><span class="token punctuation">(</span><span class="token string single-quoted-string">'crud.users.edit'</span><span class="token punctuation">)</span>
			<span class="token operator">&lt;</span>th scope<span class="token operator">=</span><span class="token string double-quoted-string">&quot;col&quot;</span> <span class="token keyword">class</span><span class="token operator">=</span><span class="token string double-quoted-string">&quot;px-1 y-2 text-center text-xs font-medium text-gray-500 uppercase tracking-wider&quot;</span><span class="token operator">&gt;</span>
				<span class="token punctuation">{</span><span class="token punctuation">{</span> <span class="token function">__</span><span class="token punctuation">(</span><span class="token string single-quoted-string">'Edit'</span><span class="token punctuation">)</span> <span class="token punctuation">}</span><span class="token punctuation">}</span>
			<span class="token operator">&lt;</span><span class="token operator">/</span>th<span class="token operator">&gt;</span>
			@endcan
			@<span class="token function">can</span><span class="token punctuation">(</span><span class="token string single-quoted-string">'crud.users.destroy'</span><span class="token punctuation">)</span>
			<span class="token operator">&lt;</span>th scope<span class="token operator">=</span><span class="token string double-quoted-string">&quot;col&quot;</span> <span class="token keyword">class</span><span class="token operator">=</span><span class="token string double-quoted-string">&quot;px-3 py-2 text-center text-xs font-medium text-gray-500 uppercase tracking-wider&quot;</span><span class="token operator">&gt;</span>
				<span class="token punctuation">{</span><span class="token punctuation">{</span> <span class="token function">__</span><span class="token punctuation">(</span><span class="token string single-quoted-string">'Remove'</span><span class="token punctuation">)</span> <span class="token punctuation">}</span><span class="token punctuation">}</span>
			<span class="token operator">&lt;</span><span class="token operator">/</span>th<span class="token operator">&gt;</span>
			@endcan
		<span class="token operator">&lt;</span><span class="token operator">/</span>tr<span class="token operator">&gt;</span>
	<span class="token operator">&lt;</span><span class="token operator">/</span>thead<span class="token operator">&gt;</span>
	<span class="token operator">&lt;</span>tbody <span class="token keyword">class</span><span class="token operator">=</span><span class="token string double-quoted-string">&quot;bg-white divide-y divide-gray-200&quot;</span><span class="token operator">&gt;</span>
	@<span class="token keyword">foreach</span> <span class="token punctuation">(</span><span class="token variable">$users</span> <span class="token keyword">as</span> <span class="token variable">$user</span><span class="token punctuation">)</span>
		<span class="token operator">&lt;</span>tr<span class="token operator">&gt;</span>
			<span class="token operator">&lt;</span>td <span class="token keyword">class</span><span class="token operator">=</span><span class="token string double-quoted-string">&quot;px-3 py-2 whitespace-nowrap text-center&quot;</span><span class="token operator">&gt;</span>
				<span class="token operator">&lt;</span>div <span class="token keyword">class</span><span class="token operator">=</span><span class="token string double-quoted-string">&quot;flex-shrink-0 h-10 w-10&quot;</span><span class="token operator">&gt;</span>
					<span class="token operator">&lt;</span>img
						<span class="token keyword">class</span><span class="token operator">=</span><span class="token string double-quoted-string">&quot;h-10 w-10 rounded-full&quot;</span>
						src<span class="token operator">=</span><span class="token string double-quoted-string">&quot;{{ <span class="token interpolation"><span class="token variable">$user</span><span class="token operator">-&gt;</span><span class="token property">profile_photo_url</span></span> }}&quot;</span>
						onerror<span class="token operator">=</span><span class="token string double-quoted-string">&quot;this.src='{{ Storage::disk('s3')-&gt;url('imagenes/auxiliar/user.png') }}'&quot;</span>
						alt<span class="token operator">=</span><span class="token string double-quoted-string">&quot;Foto usuario&quot;</span>
					<span class="token operator">&gt;</span>
				<span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
			<span class="token operator">&lt;</span><span class="token operator">/</span>td<span class="token operator">&gt;</span>
			<span class="token operator">&lt;</span>td <span class="token keyword">class</span><span class="token operator">=</span><span class="token string double-quoted-string">&quot;px-2 py-2 whitespace-nowrap&quot;</span><span class="token operator">&gt;</span>
				<span class="token operator">&lt;</span>small<span class="token operator">&gt;</span><span class="token punctuation">{</span><span class="token punctuation">{</span> <span class="token class-name static-context">Str</span><span class="token operator">::</span><span class="token function">limit</span><span class="token punctuation">(</span><span class="token variable">$user</span><span class="token operator">-&gt;</span><span class="token property">name</span><span class="token punctuation">,</span> <span class="token number">20</span><span class="token punctuation">)</span> <span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>small<span class="token operator">&gt;</span>
			<span class="token operator">&lt;</span><span class="token operator">/</span>td<span class="token operator">&gt;</span>
			<span class="token operator">&lt;</span>td <span class="token keyword">class</span><span class="token operator">=</span><span class="token string double-quoted-string">&quot;px-2 py-2 whitespace-nowrap&quot;</span><span class="token operator">&gt;</span>
				<span class="token operator">&lt;</span>small<span class="token operator">&gt;</span><span class="token punctuation">{</span><span class="token punctuation">{</span> <span class="token variable">$user</span><span class="token operator">-&gt;</span><span class="token property">email</span> <span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>small<span class="token operator">&gt;</span>
			<span class="token operator">&lt;</span><span class="token operator">/</span>td<span class="token operator">&gt;</span>
			<span class="token operator">&lt;</span>td <span class="token keyword">class</span><span class="token operator">=</span><span class="token string double-quoted-string">&quot;px-2 py-2 whitespace-nowrap&quot;</span><span class="token operator">&gt;</span>
				<span class="token operator">&lt;</span>small<span class="token operator">&gt;</span><span class="token punctuation">{</span><span class="token punctuation">{</span> <span class="token variable">$user</span><span class="token operator">-&gt;</span><span class="token property">servicio</span> <span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>small<span class="token operator">&gt;</span>
			<span class="token operator">&lt;</span><span class="token operator">/</span>td<span class="token operator">&gt;</span>
			<span class="token operator">&lt;</span>td <span class="token keyword">class</span><span class="token operator">=</span><span class="token string double-quoted-string">&quot;px-2 py-2 whitespace-nowrap&quot;</span><span class="token operator">&gt;</span>
				<span class="token operator">&lt;</span>small<span class="token operator">&gt;</span><span class="token punctuation">{</span><span class="token punctuation">{</span> <span class="token function">date_format</span><span class="token punctuation">(</span><span class="token variable">$user</span><span class="token operator">-&gt;</span><span class="token property">created_at</span><span class="token punctuation">,</span><span class="token string double-quoted-string">&quot;Y-m-d&quot;</span><span class="token punctuation">)</span> <span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>small<span class="token operator">&gt;</span>
			<span class="token operator">&lt;</span><span class="token operator">/</span>td<span class="token operator">&gt;</span>
			@<span class="token function">can</span><span class="token punctuation">(</span><span class="token string single-quoted-string">'crud.users.edit'</span><span class="token punctuation">)</span>
			<span class="token operator">&lt;</span>td <span class="token keyword">class</span><span class="token operator">=</span><span class="token string double-quoted-string">&quot;px-1 py-2 whitespace-nowrap text-center font-medium&quot;</span><span class="token operator">&gt;</span>
				<span class="token operator">&lt;</span>a href<span class="token operator">=</span><span class="token string double-quoted-string">&quot;{{ route('crud.users.edit', <span class="token interpolation"><span class="token variable">$user</span></span>) }}&quot;</span> <span class="token keyword">class</span><span class="token operator">=</span><span class="token string double-quoted-string">&quot;mx-12 text-grey-600 hover:text-indigo-900&quot;</span> title<span class="token operator">=</span><span class="token string double-quoted-string">&quot;Editar&quot;</span><span class="token operator">&gt;</span><span class="token operator">&lt;</span>i <span class="token keyword">class</span><span class="token operator">=</span><span class="token string double-quoted-string">&quot;fas fa-edit&quot;</span><span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>i<span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>a<span class="token operator">&gt;</span>
			<span class="token operator">&lt;</span><span class="token operator">/</span>td<span class="token operator">&gt;</span>
			@endcan
			@<span class="token function">can</span><span class="token punctuation">(</span><span class="token string single-quoted-string">'crud.users.destroy'</span><span class="token punctuation">)</span>
			<span class="token operator">&lt;</span>td <span class="token keyword">class</span><span class="token operator">=</span><span class="token string double-quoted-string">&quot;px-3 py-2 whitespace-nowrap text-center font-medium&quot;</span><span class="token operator">&gt;</span>
				<span class="token operator">&lt;</span>form action<span class="token operator">=</span><span class="token string double-quoted-string">&quot;{{ route('crud.users.destroy', <span class="token interpolation"><span class="token variable">$user</span></span>) }}&quot;</span> method<span class="token operator">=</span><span class="token string double-quoted-string">&quot;POST&quot;</span><span class="token operator">&gt;</span>
					@csrf
					@<span class="token function">method</span><span class="token punctuation">(</span><span class="token string single-quoted-string">'delete'</span><span class="token punctuation">)</span>
					<span class="token operator">&lt;</span>button
						type<span class="token operator">=</span><span class="token string double-quoted-string">&quot;submit&quot;</span>
						<span class="token keyword">class</span><span class="token operator">=</span><span class="token string double-quoted-string">&quot;text-red-600 hover:text-red-900&quot;</span>
						title<span class="token operator">=</span><span class="token string double-quoted-string">&quot;eliminar usuario&quot;</span>
						onclick<span class="token operator">=</span><span class="token string double-quoted-string">&quot;return confirm('¿Está seguro que desea eliminar a este usuario?')&quot;</span><span class="token operator">&gt;</span><span class="token operator">&lt;</span>i <span class="token keyword">class</span><span class="token operator">=</span><span class="token string double-quoted-string">&quot;fas fa-trash&quot;</span><span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>i<span class="token operator">&gt;</span>
					<span class="token operator">&lt;</span><span class="token operator">/</span>button<span class="token operator">&gt;</span>
				<span class="token operator">&lt;</span><span class="token operator">/</span>form<span class="token operator">&gt;</span>
			<span class="token operator">&lt;</span><span class="token operator">/</span>td<span class="token operator">&gt;</span>
			@endcan
		<span class="token operator">&lt;</span><span class="token operator">/</span>tr<span class="token operator">&gt;</span>
	@<span class="token keyword">endforeach</span>
	<span class="token operator">&lt;</span><span class="token operator">/</span>tbody<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>table<span class="token operator">&gt;</span>
≡	
</code></pre></div></li> <li>mmmm</li></ol> <p>pago_registro (monto) float (pago_registro -&gt; monto d elo que pagó)
pago_cupon (si se aplicó cupón) string (pago_cupon -&gt; número de cupón)
id_de_pago</p> <p>{
event: &quot;pagoConfirmado&quot;,
gtm: {
uniqueEventId: 11,
start: 1672045722000,
scrollThreshold: 90,
scrollUnits: &quot;percent&quot;,
scrollDirection: &quot;vertical&quot;,
triggers: &quot;8&quot;,
priorityId: 2
},
transaction_id: &quot;&quot;,
email: &quot;&quot;,
phone_number: &quot;&quot;,
first_name: &quot;&quot;,
last_name: &quot;&quot;,
transaction_value: 1,
product_id: &quot;&quot;,
product_name: &quot;&quot;,
currency: &quot;&quot;
}</p> <ol start="22"><li>Realizar commit:
<ul><li>$ git checkout master</li> <li>$ git merge registro_v2</li> <li>$ git push origin master</li></ul></li></ol> <p>$user-&gt;revokePermissionTo('pay.services');</p> <p>complete su pago
https://buy.stripe.com/14k5mB2qt9Cp68U7ss</p> <h2 id="deploy-en-hostinger"><a href="#deploy-en-hostinger" class="header-anchor">#</a> Deploy en Hostinger</h2> <ol><li>Ingresar a <a href="https://www.hostinger.es" target="_blank" rel="noopener noreferrer">Hostinger<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>.</li> <li>Crear subdominio <strong>app.sefaruniversal.com</strong>.</li> <li>Acceder mediante SSH.</li> <li>Si existe, eliminar carpeta <strong>public_html/app</strong>.</li> <li>En la raíz de <strong>public_html</strong> ejecutar:
<ul><li>$ git clone https://github.com/petrix12/AppSefarUniversal.git</li> <li>Cambiar el nombre de la carpeta del repositorio <strong>AppSefarUniversal</strong> por <strong>app</strong>.</li></ul></li> <li>En la raíz de <strong>app</strong>, ejeuctar:
<ul><li>$ composer install</li></ul></li> <li>Migrar base de datos <strong>sefar</strong> de GoDaddy a Hostinger.<div class="custom-block warning"><p class="custom-block-title">Advertencia</p> <p>Ahora la base de datos en Hostinger se llama <strong>u530524868_sefar</strong>.</p></div></li> <li>Copiar el archivo <strong>.env</strong> de GoDaddy a Hostinger y cambiar las variables de entorno correspondientes a base de datos y correos.</li> <li>Crear <strong>.htaccess</strong> en el hosting:<div class="language-htaccess extra-class"><pre class="language-text"><code>RewriteEngine on
RewriteCond %{REQUEST_URI} !^public
RewriteRule ^(.*)$ public/$1 [L]
</code></pre></div></li> <li>Modificar <strong>.gitignore</strong>:<div class="language-gitignore extra-class"><pre class="language-gitignore"><code><span class="token entry string">≡</span>
<span class="token entry string">.htaccess</span>
</code></pre></div></li> <li>mmm</li></ol></div> <footer class="page-edit"><!----> <!----></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/guide/laravel/sefar2021/sefar2021-P06.html" class="prev">
        Proyecto App Sefar Universal 2021 (Parte VI)
      </a></span> <span class="next"><a href="/guide/laravel/laravel2021/laravel2021.html">
        Curso Laravel 8 desde cero
      </a>
      →
    </span></p></div> </main></div><div class="global-ui"></div></div>
    <script src="/assets/js/app.271db0af.js" defer></script><script src="/assets/js/2.63c13255.js" defer></script><script src="/assets/js/23.c2d1c2e9.js" defer></script>
  </body>
</html>
