<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Proyecto App Sefar Universal 2021 (Parte III) | Docs S++</title>
    <meta name="generator" content="VuePress 1.9.7">
    <link rel="icon" type="image/png" href="https://raw.githubusercontent.com/petrix12/imagenes2022/main/Soluciones%2B%2B/S%2B%2B.ico">
    <meta name="description" content="Documentación General">
    <meta name="theme-color" content="#3eaf7c">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    
    <link rel="preload" href="/assets/css/0.styles.cf1f87b2.css" as="style"><link rel="preload" href="/assets/js/app.271db0af.js" as="script"><link rel="preload" href="/assets/js/2.63c13255.js" as="script"><link rel="preload" href="/assets/js/19.51805c4e.js" as="script"><link rel="prefetch" href="/assets/js/10.48929f7d.js"><link rel="prefetch" href="/assets/js/11.d19bb8e6.js"><link rel="prefetch" href="/assets/js/12.5220d855.js"><link rel="prefetch" href="/assets/js/13.63118c27.js"><link rel="prefetch" href="/assets/js/14.de416fbc.js"><link rel="prefetch" href="/assets/js/15.6c40b102.js"><link rel="prefetch" href="/assets/js/16.50046b07.js"><link rel="prefetch" href="/assets/js/17.246601f6.js"><link rel="prefetch" href="/assets/js/18.e29c4ef8.js"><link rel="prefetch" href="/assets/js/20.885520a9.js"><link rel="prefetch" href="/assets/js/21.110ef84e.js"><link rel="prefetch" href="/assets/js/22.89bec5c9.js"><link rel="prefetch" href="/assets/js/23.c2d1c2e9.js"><link rel="prefetch" href="/assets/js/24.0d8bae3c.js"><link rel="prefetch" href="/assets/js/25.e45536d4.js"><link rel="prefetch" href="/assets/js/26.3613333a.js"><link rel="prefetch" href="/assets/js/27.38ce7268.js"><link rel="prefetch" href="/assets/js/28.83292aca.js"><link rel="prefetch" href="/assets/js/29.8f22e9de.js"><link rel="prefetch" href="/assets/js/3.24a329a2.js"><link rel="prefetch" href="/assets/js/30.191f2466.js"><link rel="prefetch" href="/assets/js/31.ee5c7176.js"><link rel="prefetch" href="/assets/js/32.f6629035.js"><link rel="prefetch" href="/assets/js/33.235a8790.js"><link rel="prefetch" href="/assets/js/34.efba546f.js"><link rel="prefetch" href="/assets/js/35.0a6ca200.js"><link rel="prefetch" href="/assets/js/36.631dd507.js"><link rel="prefetch" href="/assets/js/4.6d32e573.js"><link rel="prefetch" href="/assets/js/5.e457cf98.js"><link rel="prefetch" href="/assets/js/6.8d81f0ec.js"><link rel="prefetch" href="/assets/js/7.159f2f50.js"><link rel="prefetch" href="/assets/js/8.4dc47d25.js"><link rel="prefetch" href="/assets/js/9.6a63ad8e.js">
    <link rel="stylesheet" href="/assets/css/0.styles.cf1f87b2.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><!----> <span class="site-name">Docs S++</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/guide/" class="nav-link router-link-active">
  Guías
</a></div><div class="nav-item"><a href="/config/" class="nav-link">
  Doc
</a></div><div class="nav-item"><a href="https://github.com/petrix12" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Mi GitHub
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/guide/" class="nav-link router-link-active">
  Guías
</a></div><div class="nav-item"><a href="/config/" class="nav-link">
  Doc
</a></div><div class="nav-item"><a href="https://github.com/petrix12" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Mi GitHub
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div> <!----></nav>  <ul class="sidebar-links"><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Soluciones++</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>AWS</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Docker</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Herramientas</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading open"><span>Laravel</span> <span class="arrow down"></span></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/guide/laravel/sefar2022/sefar2022-P01.html" class="sidebar-link">Proyecto Sefar 2022 (PARTE I)</a></li><li><a href="/guide/laravel/sefar2022/sefar2022-P02.html" class="sidebar-link">Proyecto Sefar 2022 (PARTE II)</a></li><li><a href="/guide/laravel/sefar2022/sefar2022-P03.html" class="sidebar-link">Proyecto Sefar 2022 (PARTE III)</a></li><li><a href="/guide/laravel/sefar2021/sefar2021-P01.html" class="sidebar-link">Proyecto App Sefar Universal 2021 (Parte I)</a></li><li><a href="/guide/laravel/sefar2021/sefar2021-P02.html" class="sidebar-link">Proyecto App Sefar Universal 2021 (Parte II)</a></li><li><a href="/guide/laravel/sefar2021/sefar2021-P03.html" aria-current="page" class="active sidebar-link">Proyecto App Sefar Universal 2021 (Parte III)</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/guide/laravel/sefar2021/sefar2021-P03.html#crud-familiares" class="sidebar-link">CRUD Familiares</a></li><li class="sidebar-sub-header"><a href="/guide/laravel/sefar2021/sefar2021-P03.html#crud-tipos-de-documentos" class="sidebar-link">CRUD Tipos de documentos</a></li><li class="sidebar-sub-header"><a href="/guide/laravel/sefar2021/sefar2021-P03.html#seeders-tipos-de-documentos" class="sidebar-link">Seeders Tipos de documentos</a></li><li class="sidebar-sub-header"><a href="/guide/laravel/sefar2021/sefar2021-P03.html#crud-almacenamiento-de-documentos" class="sidebar-link">CRUD Almacenamiento de documentos</a></li><li class="sidebar-sub-header"><a href="/guide/laravel/sefar2021/sefar2021-P03.html#crud-libros" class="sidebar-link">CRUD Libros</a></li><li class="sidebar-sub-header"><a href="/guide/laravel/sefar2021/sefar2021-P03.html#crud-miscelaneos" class="sidebar-link">CRUD Miscelaneos</a></li><li class="sidebar-sub-header"><a href="/guide/laravel/sefar2021/sefar2021-P03.html#crud-biblioteca" class="sidebar-link">CRUD Biblioteca</a></li><li class="sidebar-sub-header"><a href="/guide/laravel/sefar2021/sefar2021-P03.html#componentes-de-formularios-modales-para-vistas-de-arboles" class="sidebar-link">Componentes de formularios modales para vistas de árboles</a></li><li class="sidebar-sub-header"><a href="/guide/laravel/sefar2021/sefar2021-P03.html#vista-arbol-genealogico-albero" class="sidebar-link">Vista árbol genealógico: Albero</a></li><li class="sidebar-sub-header"><a href="/guide/laravel/sefar2021/sefar2021-P03.html#creacion-de-enlaces-simbolicos-symbolic-link" class="sidebar-link">Creación de enlaces simbólicos (symbolic link)</a></li><li class="sidebar-sub-header"><a href="/guide/laravel/sefar2021/sefar2021-P03.html#vista-arbol-genealogico-horizontal" class="sidebar-link">Vista árbol genealógico: Horizontal</a></li><li class="sidebar-sub-header"><a href="/guide/laravel/sefar2021/sefar2021-P03.html#vista-arbol-genealogico-vertical" class="sidebar-link">Vista árbol genealógico: Vertical</a></li><li class="sidebar-sub-header"><a href="/guide/laravel/sefar2021/sefar2021-P03.html#crud-agclientes" class="sidebar-link">CRUD Agclientes</a></li><li class="sidebar-sub-header"><a href="/guide/laravel/sefar2021/sefar2021-P03.html#seeders-para-prueba-de-agclientes" class="sidebar-link">Seeders para prueba de agclientes</a></li><li class="sidebar-sub-header"><a href="/guide/laravel/sefar2021/sefar2021-P03.html#consultar-bd-onidex" class="sidebar-link">Consultar BD Onidex</a></li></ul></li><li><a href="/guide/laravel/sefar2021/sefar2021-P04.html" class="sidebar-link">Proyecto App Sefar Universal 2021 (Parte IV)</a></li><li><a href="/guide/laravel/sefar2021/sefar2021-P05.html" class="sidebar-link">Proyecto App Sefar Universal 2021 (Parte V)</a></li><li><a href="/guide/laravel/sefar2021/sefar2021-P06.html" class="sidebar-link">Proyecto App Sefar Universal 2021 (Parte VI)</a></li><li><a href="/guide/laravel/sefar2021/sefar2021-P07.html" class="sidebar-link">Proyecto App Sefar Universal 2021 (Parte VII)</a></li><li><a href="/guide/laravel/laravel2021/laravel2021.html" class="sidebar-link">Curso Laravel 8 desde cero</a></li></ul></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Lógica</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>PWA</span> <span class="arrow right"></span></p> <!----></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="proyecto-app-sefar-universal-2021-parte-iii"><a href="#proyecto-app-sefar-universal-2021-parte-iii" class="header-anchor">#</a> Proyecto App Sefar Universal 2021 (Parte III)</h1> <ul><li>Versión: <strong>Laravel Framework 8.31.0</strong></li></ul> <h2 id="crud-familiares"><a href="#crud-familiares" class="header-anchor">#</a> CRUD Familiares</h2> <ol><li>Crear modelo Family junto con su migración y controlador y los métodos para el CRUD:
<ul><li>$ php artisan make:model Family -m -c -r</li></ul></li> <li>Preparar migración para la tabla <strong>families</strong> en <strong>database\migrations\2021_03_30_010102_create_families_table.php</strong><div class="language-php extra-class"><pre class="language-php"><code>≡
<span class="token keyword">public</span> <span class="token keyword">function</span> <span class="token function-definition function">up</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    <span class="token class-name static-context">Schema</span><span class="token operator">::</span><span class="token function">create</span><span class="token punctuation">(</span><span class="token string single-quoted-string">'families'</span><span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token class-name type-declaration">Blueprint</span> <span class="token variable">$table</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token variable">$table</span><span class="token operator">-&gt;</span><span class="token function">id</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token variable">$table</span><span class="token operator">-&gt;</span><span class="token keyword type-declaration">string</span><span class="token punctuation">(</span><span class="token string single-quoted-string">'IDCombinado'</span><span class="token punctuation">,</span><span class="token number">175</span><span class="token punctuation">)</span><span class="token operator">-&gt;</span><span class="token function">unique</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token variable">$table</span><span class="token operator">-&gt;</span><span class="token keyword type-declaration">string</span><span class="token punctuation">(</span><span class="token string single-quoted-string">'IDCliente'</span><span class="token punctuation">,</span><span class="token number">175</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token variable">$table</span><span class="token operator">-&gt;</span><span class="token keyword type-declaration">string</span><span class="token punctuation">(</span><span class="token string single-quoted-string">'Cliente'</span><span class="token punctuation">)</span><span class="token operator">-&gt;</span><span class="token function">nullable</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token variable">$table</span><span class="token operator">-&gt;</span><span class="token keyword type-declaration">string</span><span class="token punctuation">(</span><span class="token string single-quoted-string">'IDFamiliar'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token variable">$table</span><span class="token operator">-&gt;</span><span class="token keyword type-declaration">string</span><span class="token punctuation">(</span><span class="token string single-quoted-string">'Familiar'</span><span class="token punctuation">)</span><span class="token operator">-&gt;</span><span class="token function">nullable</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token variable">$table</span><span class="token operator">-&gt;</span><span class="token keyword type-declaration">string</span><span class="token punctuation">(</span><span class="token string single-quoted-string">'Parentesco'</span><span class="token punctuation">)</span><span class="token operator">-&gt;</span><span class="token function">nullable</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token variable">$table</span><span class="token operator">-&gt;</span><span class="token keyword type-declaration">string</span><span class="token punctuation">(</span><span class="token string single-quoted-string">'Lado'</span><span class="token punctuation">)</span><span class="token operator">-&gt;</span><span class="token function">nullable</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token variable">$table</span><span class="token operator">-&gt;</span><span class="token keyword type-declaration">string</span><span class="token punctuation">(</span><span class="token string single-quoted-string">'Rama'</span><span class="token punctuation">)</span><span class="token operator">-&gt;</span><span class="token function">nullable</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token variable">$table</span><span class="token operator">-&gt;</span><span class="token function">text</span><span class="token punctuation">(</span><span class="token string single-quoted-string">'Nota'</span><span class="token punctuation">)</span><span class="token operator">-&gt;</span><span class="token function">nullable</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token variable">$table</span><span class="token operator">-&gt;</span><span class="token function">timestamps</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
≡
</code></pre></div></li> <li>Establecer permisos en los seeders para el CRUD Paises en <strong>database\seeders\RoleSeeder.php</strong>:<div class="language-php extra-class"><pre class="language-php"><code>≡ 
<span class="token keyword">public</span> <span class="token keyword">function</span> <span class="token function-definition function">run</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    ≡        
    <span class="token class-name static-context">Permission</span><span class="token operator">::</span><span class="token function">create</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token string single-quoted-string">'name'</span> <span class="token operator">=&gt;</span> <span class="token string single-quoted-string">'crud.families.index'</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token operator">-&gt;</span><span class="token function">syncRoles</span><span class="token punctuation">(</span><span class="token variable">$rolAdministrador</span><span class="token punctuation">,</span> <span class="token variable">$rolGenealogista</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name static-context">Permission</span><span class="token operator">::</span><span class="token function">create</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token string single-quoted-string">'name'</span> <span class="token operator">=&gt;</span> <span class="token string single-quoted-string">'crud.families.create'</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token operator">-&gt;</span><span class="token function">syncRoles</span><span class="token punctuation">(</span><span class="token variable">$rolAdministrador</span><span class="token punctuation">,</span> <span class="token variable">$rolGenealogista</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name static-context">Permission</span><span class="token operator">::</span><span class="token function">create</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token string single-quoted-string">'name'</span> <span class="token operator">=&gt;</span> <span class="token string single-quoted-string">'crud.families.edit'</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token operator">-&gt;</span><span class="token function">syncRoles</span><span class="token punctuation">(</span><span class="token variable">$rolAdministrador</span><span class="token punctuation">,</span> <span class="token variable">$rolGenealogista</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name static-context">Permission</span><span class="token operator">::</span><span class="token function">create</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token string single-quoted-string">'name'</span> <span class="token operator">=&gt;</span> <span class="token string single-quoted-string">'crud.families.destroy'</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token operator">-&gt;</span><span class="token function">syncRoles</span><span class="token punctuation">(</span><span class="token variable">$rolAdministrador</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    ≡
<span class="token punctuation">}</span>
≡
</code></pre></div></li> <li>Reestablecer base de datos:
<ul><li>$ php artisan migrate:fresh --seed</li></ul></li> <li>Configurar modelo <strong>Family</strong> en <strong>app\Models\Family.php</strong><div class="language-php extra-class"><pre class="language-php"><code>≡
<span class="token keyword">class</span> <span class="token class-name-definition class-name">Family</span> <span class="token keyword">extends</span> <span class="token class-name">Model</span>
<span class="token punctuation">{</span>
    <span class="token keyword">use</span> <span class="token package">HasFactory</span><span class="token punctuation">;</span>

    <span class="token keyword">protected</span> <span class="token variable">$fillable</span> <span class="token operator">=</span> <span class="token punctuation">[</span>
        <span class="token string single-quoted-string">'IDCombinado'</span><span class="token punctuation">,</span>
        <span class="token string single-quoted-string">'IDCliente'</span><span class="token punctuation">,</span>
        <span class="token string single-quoted-string">'Cliente'</span><span class="token punctuation">,</span>
        <span class="token string single-quoted-string">'IDFamiliar'</span><span class="token punctuation">,</span>
        <span class="token string single-quoted-string">'Familiar'</span><span class="token punctuation">,</span>
        <span class="token string single-quoted-string">'Parentesco'</span><span class="token punctuation">,</span>
        <span class="token string single-quoted-string">'Lado'</span><span class="token punctuation">,</span>
        <span class="token string single-quoted-string">'Rama'</span><span class="token punctuation">,</span>
        <span class="token string single-quoted-string">'Nota'</span>
    <span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div></li> <li>Agregar ruta families al grupo de rutas CRUD:<div class="language-php extra-class"><pre class="language-php"><code><span class="token class-name static-context">Route</span><span class="token operator">::</span><span class="token function">resource</span><span class="token punctuation">(</span><span class="token string single-quoted-string">'families'</span><span class="token punctuation">,</span> <span class="token class-name static-context">FamilyController</span><span class="token operator">::</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token operator">-&gt;</span><span class="token function">names</span><span class="token punctuation">(</span><span class="token string single-quoted-string">'families'</span><span class="token punctuation">)</span>
        <span class="token operator">-&gt;</span><span class="token function">middleware</span><span class="token punctuation">(</span><span class="token string single-quoted-string">'can:crud.families.index'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><ul><li><strong>Nota</strong>: añadir a la cabecera:</li></ul> <div class="language-php extra-class"><pre class="language-php"><code><span class="token keyword">use</span> <span class="token package">App<span class="token punctuation">\</span>Http<span class="token punctuation">\</span>Controllers<span class="token punctuation">\</span>FamilyController</span><span class="token punctuation">;</span>
</code></pre></div></li> <li>Crear componente Livewire para Tabla Families:
<ul><li>$ php artisan make:livewire crud/families-table</li></ul></li> <li>Programar controlador para la tabla Families: <strong>app\Http\Livewire\Crud\FamiliesTable.php</strong>:
<ul><li>Ver código en el repositorio.</li></ul></li> <li>Diseñar vista para la tabla Families: <strong>resources\views\livewire\crud\families-table.blade.php</strong>:
<ul><li>Ver código en el repositorio.</li></ul></li> <li>Programar controlador Family: <strong>app\Http\Controllers\FamilyController.php</strong>:
<ul><li>Ver código en el repositorio.</li></ul></li> <li>Diseñar las vistas para el CRUD Familiares:
<ul><li>resources\views\crud\families\index.blade.php</li> <li>resources\views\crud\families\create.blade.php</li> <li>resources\views\crud\families\edit.blade.php</li></ul></li> <li>Editar <strong>config\adminlte.php</strong> para añadir los menú para ingresar al CRUD Familiares:
<ul><li>Ver código en el repositorio.</li></ul></li> <li>Commit:
<ul><li>$ git add .</li> <li>$ git commit -m &quot;CRUD Familiares&quot;</li></ul></li></ol> <h2 id="crud-tipos-de-documentos"><a href="#crud-tipos-de-documentos" class="header-anchor">#</a> CRUD Tipos de documentos</h2> <ol><li>Crear modelo TFile (tipo de documentos) junto con su migración y controlador y los métodos para el CRUD:
<ul><li>$ php artisan make:model TFile -m -c -r</li></ul></li> <li>Preparar migración para la tabla <strong>t_files</strong> en <strong>database\migrations\2021_04_01_143943_create_t_files_table.php</strong>:<div class="language-php extra-class"><pre class="language-php"><code>≡
<span class="token keyword">public</span> <span class="token keyword">function</span> <span class="token function-definition function">up</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    <span class="token class-name static-context">Schema</span><span class="token operator">::</span><span class="token function">create</span><span class="token punctuation">(</span><span class="token string single-quoted-string">'t_files'</span><span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token class-name type-declaration">Blueprint</span> <span class="token variable">$table</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token variable">$table</span><span class="token operator">-&gt;</span><span class="token function">id</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token variable">$table</span><span class="token operator">-&gt;</span><span class="token keyword type-declaration">string</span><span class="token punctuation">(</span><span class="token string single-quoted-string">'tipo'</span><span class="token punctuation">)</span><span class="token operator">-&gt;</span><span class="token function">unique</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token variable">$table</span><span class="token operator">-&gt;</span><span class="token keyword type-declaration">string</span><span class="token punctuation">(</span><span class="token string single-quoted-string">'notas'</span><span class="token punctuation">)</span><span class="token operator">-&gt;</span><span class="token function">nullable</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token variable">$table</span><span class="token operator">-&gt;</span><span class="token function">timestamps</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
≡
</code></pre></div></li> <li>Establecer permisos en los seeders para el CRUD TFiles en <strong>database\seeders\RoleSeeder.php</strong>:<div class="language-php extra-class"><pre class="language-php"><code>≡ 
<span class="token keyword">public</span> <span class="token keyword">function</span> <span class="token function-definition function">run</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    ≡        
    <span class="token class-name static-context">Permission</span><span class="token operator">::</span><span class="token function">create</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token string single-quoted-string">'name'</span> <span class="token operator">=&gt;</span> <span class="token string single-quoted-string">'crud.t_files.index'</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token operator">-&gt;</span><span class="token function">syncRoles</span><span class="token punctuation">(</span><span class="token variable">$rolAdministrador</span><span class="token punctuation">,</span> <span class="token variable">$rolGenealogista</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name static-context">Permission</span><span class="token operator">::</span><span class="token function">create</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token string single-quoted-string">'name'</span> <span class="token operator">=&gt;</span> <span class="token string single-quoted-string">'crud.t_files.create'</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token operator">-&gt;</span><span class="token function">syncRoles</span><span class="token punctuation">(</span><span class="token variable">$rolAdministrador</span><span class="token punctuation">,</span> <span class="token variable">$rolGenealogista</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name static-context">Permission</span><span class="token operator">::</span><span class="token function">create</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token string single-quoted-string">'name'</span> <span class="token operator">=&gt;</span> <span class="token string single-quoted-string">'crud.t_files.edit'</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token operator">-&gt;</span><span class="token function">syncRoles</span><span class="token punctuation">(</span><span class="token variable">$rolAdministrador</span><span class="token punctuation">,</span> <span class="token variable">$rolGenealogista</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name static-context">Permission</span><span class="token operator">::</span><span class="token function">create</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token string single-quoted-string">'name'</span> <span class="token operator">=&gt;</span> <span class="token string single-quoted-string">'crud.t_files.destroy'</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token operator">-&gt;</span><span class="token function">syncRoles</span><span class="token punctuation">(</span><span class="token variable">$rolAdministrador</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    ≡
<span class="token punctuation">}</span>
≡
</code></pre></div></li> <li>Reestablecer base de datos:
<ul><li>$ php artisan migrate:fresh --seed</li></ul></li> <li>Establecer campos de asignación masiva en el modelo <strong>TFile</strong> en <strong>app\Models\TFile.php</strong>:<div class="language-php extra-class"><pre class="language-php"><code>≡
<span class="token keyword">class</span> <span class="token class-name-definition class-name">TFile</span> <span class="token keyword">extends</span> <span class="token class-name">Model</span>
<span class="token punctuation">{</span>
    <span class="token keyword">use</span> <span class="token package">HasFactory</span><span class="token punctuation">;</span>

    <span class="token keyword">protected</span> <span class="token variable">$fillable</span> <span class="token operator">=</span> <span class="token punctuation">[</span>
        <span class="token string single-quoted-string">'tipo'</span><span class="token punctuation">,</span>
        <span class="token string single-quoted-string">'notas'</span><span class="token punctuation">,</span>
    <span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div></li> <li>Agregar ruta t_files al grupo de rutas CRUD:<div class="language-php extra-class"><pre class="language-php"><code><span class="token class-name static-context">Route</span><span class="token operator">::</span><span class="token function">resource</span><span class="token punctuation">(</span><span class="token string single-quoted-string">'t_files'</span><span class="token punctuation">,</span> <span class="token class-name static-context">TFileController</span><span class="token operator">::</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token operator">-&gt;</span><span class="token function">names</span><span class="token punctuation">(</span><span class="token string single-quoted-string">'t_files'</span><span class="token punctuation">)</span>
        <span class="token operator">-&gt;</span><span class="token function">middleware</span><span class="token punctuation">(</span><span class="token string single-quoted-string">'can:crud.t_files.index'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><ul><li><strong>Nota</strong>: añadir a la cabecera:</li></ul> <div class="language-php extra-class"><pre class="language-php"><code><span class="token keyword">use</span> <span class="token package">App<span class="token punctuation">\</span>Http<span class="token punctuation">\</span>Controllers<span class="token punctuation">\</span>TFileController</span><span class="token punctuation">;</span>
</code></pre></div></li> <li>Crear componente Livewire para Tabla TFiles:
<ul><li>$ php artisan make:livewire crud/t_files-table</li></ul></li> <li>Programar controlador para la tabla TFiles: <strong>app\Http\Livewire\Crud\TFilesTable.php</strong>:
<ul><li>Ver código fuente en el repositorio.</li></ul></li> <li>Diseñar vista para la tabla TFiles: <strong>resources\views\livewire\crud\t-files-table.blade.php</strong>:
<ul><li>Ver código fuente en el repositorio.</li></ul></li> <li>Programar controlador TFile: <strong>app\Http\Controllers\TFileController.php</strong>:
<ul><li>Ver código fuente en el repositorio.</li></ul></li> <li>Diseñar las vistas para el CRUD TFiles:
<ul><li>resources\views\crud\t_files\index.blade.php</li> <li>resources\views\crud\t_files\create.blade.php</li> <li>resources\views\crud\t_files\edit.blade.php</li></ul></li> <li>Editar <strong>config\adminlte.php</strong> para añadir los menú para ingresar al CRUD TFiles:
<ul><li>Ver código fuente en el repositorio.</li></ul></li> <li>Commit:
<ul><li>$ git add .</li> <li>$ git commit -m &quot;CRUD Tipos de documentos&quot;</li></ul></li></ol> <h2 id="seeders-tipos-de-documentos"><a href="#seeders-tipos-de-documentos" class="header-anchor">#</a> Seeders Tipos de documentos</h2> <ol><li>Crear seeder para tipos de documentos:
<ul><li>$ php artisan make:seeder TFileSeeder</li></ul></li> <li>Añadir a cabecera de <strong>database\seeders\TFileSeeder.php</strong><div class="language-php extra-class"><pre class="language-php"><code><span class="token keyword">use</span> <span class="token package">App<span class="token punctuation">\</span>Models<span class="token punctuation">\</span>TFile</span><span class="token punctuation">;</span>
</code></pre></div></li> <li>Modificar el método <strong>run</strong> de <strong>database\seeders\TFileSeeder.php</strong><div class="language-php extra-class"><pre class="language-php"><code><span class="token keyword">public</span> <span class="token keyword">function</span> <span class="token function-definition function">run</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    <span class="token class-name static-context">TFile</span><span class="token operator">::</span><span class="token function">create</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token string single-quoted-string">'tipo'</span> <span class="token operator">=&gt;</span> <span class="token string single-quoted-string">'Nacimiento'</span><span class="token punctuation">,</span><span class="token string single-quoted-string">'Notas'</span> <span class="token operator">=&gt;</span> <span class="token string single-quoted-string">'Documentos relaciones con los datos de nacimiento de una persona'</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name static-context">TFile</span><span class="token operator">::</span><span class="token function">create</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token string single-quoted-string">'tipo'</span> <span class="token operator">=&gt;</span> <span class="token string single-quoted-string">'Bautizo'</span><span class="token punctuation">,</span><span class="token string single-quoted-string">'Notas'</span> <span class="token operator">=&gt;</span> <span class="token string single-quoted-string">'Documentos relaciones con los datos de bautizo de una persona'</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name static-context">TFile</span><span class="token operator">::</span><span class="token function">create</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token string single-quoted-string">'tipo'</span> <span class="token operator">=&gt;</span> <span class="token string single-quoted-string">'Matrimonio'</span><span class="token punctuation">,</span><span class="token string single-quoted-string">'Notas'</span> <span class="token operator">=&gt;</span> <span class="token string single-quoted-string">'Documentos relaciones con los datos de matrimonio de una persona'</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name static-context">TFile</span><span class="token operator">::</span><span class="token function">create</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token string single-quoted-string">'tipo'</span> <span class="token operator">=&gt;</span> <span class="token string single-quoted-string">'Defunción'</span><span class="token punctuation">,</span><span class="token string single-quoted-string">'Notas'</span> <span class="token operator">=&gt;</span> <span class="token string single-quoted-string">'Documentos relaciones con los datos de defunción de una persona'</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name static-context">TFile</span><span class="token operator">::</span><span class="token function">create</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token string single-quoted-string">'tipo'</span> <span class="token operator">=&gt;</span> <span class="token string single-quoted-string">'Identificación'</span><span class="token punctuation">,</span><span class="token string single-quoted-string">'Notas'</span> <span class="token operator">=&gt;</span> <span class="token string single-quoted-string">'Documentos relaciones con la identidad de una persona'</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name static-context">TFile</span><span class="token operator">::</span><span class="token function">create</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token string single-quoted-string">'tipo'</span> <span class="token operator">=&gt;</span> <span class="token string single-quoted-string">'Filiatorio'</span><span class="token punctuation">,</span><span class="token string single-quoted-string">'Notas'</span> <span class="token operator">=&gt;</span> <span class="token string single-quoted-string">'Documentos cuyo fin son expresamente migratorios'</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name static-context">TFile</span><span class="token operator">::</span><span class="token function">create</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token string single-quoted-string">'tipo'</span> <span class="token operator">=&gt;</span> <span class="token string single-quoted-string">'Otros'</span><span class="token punctuation">,</span><span class="token string single-quoted-string">'Notas'</span> <span class="token operator">=&gt;</span> <span class="token string single-quoted-string">'Otros tipos de documentos'</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div></li> <li>Añadir al método run de <strong>database\seeders\DatabaseSeeder.php</strong><div class="language-php extra-class"><pre class="language-php"><code><span class="token keyword">public</span> <span class="token keyword">function</span> <span class="token function-definition function">run</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    ≡
    <span class="token variable">$this</span><span class="token operator">-&gt;</span><span class="token function">call</span><span class="token punctuation">(</span><span class="token class-name static-context">TFileSeeder</span><span class="token operator">::</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div></li> <li>Ejecutar:
<ul><li>$ php artisan migrate:fresh --seed</li> <li><strong>Nota</strong>: Para correr los seeder sin resetear la base de datos:
<ul><li>$ php artisan db:seed</li></ul></li></ul></li> <li>Commit:
<ul><li>$ git add .</li> <li>$ git commit -m &quot;Seeder Tipos de documentos&quot;</li></ul></li></ol> <h2 id="crud-almacenamiento-de-documentos"><a href="#crud-almacenamiento-de-documentos" class="header-anchor">#</a> CRUD Almacenamiento de documentos</h2> <ol><li>Crear modelo File junto con su migración y controlador y los métodos para el CRUD:
<ul><li>$ php artisan make:model File -m -c -r</li></ul></li> <li>Preparar migración para la tabla <strong>Files</strong> en <strong>database\migrations\2021_03_31_184533_create_files_table.php</strong><div class="language-php extra-class"><pre class="language-php"><code>≡
<span class="token keyword">public</span> <span class="token keyword">function</span> <span class="token function-definition function">up</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    <span class="token class-name static-context">Schema</span><span class="token operator">::</span><span class="token function">create</span><span class="token punctuation">(</span><span class="token string single-quoted-string">'files'</span><span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token class-name type-declaration">Blueprint</span> <span class="token variable">$table</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token variable">$table</span><span class="token operator">-&gt;</span><span class="token function">id</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token variable">$table</span><span class="token operator">-&gt;</span><span class="token keyword type-declaration">string</span><span class="token punctuation">(</span><span class="token string single-quoted-string">'file'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                     <span class="token comment">// Nombre del archivo</span>
        <span class="token variable">$table</span><span class="token operator">-&gt;</span><span class="token keyword type-declaration">string</span><span class="token punctuation">(</span><span class="token string single-quoted-string">'location'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                 <span class="token comment">// Ubicación del archivo</span>
        <span class="token variable">$table</span><span class="token operator">-&gt;</span><span class="token keyword type-declaration">string</span><span class="token punctuation">(</span><span class="token string single-quoted-string">'tipo'</span><span class="token punctuation">)</span><span class="token operator">-&gt;</span><span class="token function">nullable</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>         <span class="token comment">// Tipo de documento</span>
        <span class="token variable">$table</span><span class="token operator">-&gt;</span><span class="token keyword type-declaration">string</span><span class="token punctuation">(</span><span class="token string single-quoted-string">'propietario'</span><span class="token punctuation">)</span><span class="token operator">-&gt;</span><span class="token function">nullable</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">// Nombre del propietario del documento</span>
        <span class="token variable">$table</span><span class="token operator">-&gt;</span><span class="token keyword type-declaration">string</span><span class="token punctuation">(</span><span class="token string single-quoted-string">'IDCliente'</span><span class="token punctuation">)</span><span class="token operator">-&gt;</span><span class="token function">nullable</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token comment">// IDCliente del propietario del documento</span>
        <span class="token variable">$table</span><span class="token operator">-&gt;</span><span class="token keyword type-declaration">string</span><span class="token punctuation">(</span><span class="token string single-quoted-string">'notas'</span><span class="token punctuation">)</span><span class="token operator">-&gt;</span><span class="token function">nullable</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment">// Notas</span>
        <span class="token variable">$table</span><span class="token operator">-&gt;</span><span class="token function">integer</span><span class="token punctuation">(</span><span class="token string single-quoted-string">'IDPersona'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>               <span class="token comment">// ID de persona</span>
        <span class="token variable">$table</span><span class="token operator">-&gt;</span><span class="token function">unsignedBigInteger</span><span class="token punctuation">(</span><span class="token string single-quoted-string">'user_id'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>      <span class="token comment">// Relación con los usuarios</span>
        <span class="token variable">$table</span><span class="token operator">-&gt;</span><span class="token function">foreign</span><span class="token punctuation">(</span><span class="token string single-quoted-string">'user_id'</span><span class="token punctuation">)</span>
            <span class="token operator">-&gt;</span><span class="token function">references</span><span class="token punctuation">(</span><span class="token string single-quoted-string">'id'</span><span class="token punctuation">)</span>
            <span class="token operator">-&gt;</span><span class="token function">on</span><span class="token punctuation">(</span><span class="token string single-quoted-string">'users'</span><span class="token punctuation">)</span>
            <span class="token operator">-&gt;</span><span class="token function">onDelete</span><span class="token punctuation">(</span><span class="token string single-quoted-string">'cascade'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token variable">$table</span><span class="token operator">-&gt;</span><span class="token function">timestamps</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
≡
</code></pre></div></li> <li>Establecer permisos en los seeders para el CRUD Documentos en <strong>database\seeders\RoleSeeder.php</strong>:<div class="language-php extra-class"><pre class="language-php"><code>≡ 
<span class="token keyword">public</span> <span class="token keyword">function</span> <span class="token function-definition function">run</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    ≡        
    <span class="token class-name static-context">Permission</span><span class="token operator">::</span><span class="token function">create</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token string single-quoted-string">'name'</span> <span class="token operator">=&gt;</span> <span class="token string single-quoted-string">'crud.files.index'</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token operator">-&gt;</span><span class="token function">syncRoles</span><span class="token punctuation">(</span><span class="token variable">$rolAdministrador</span><span class="token punctuation">,</span> <span class="token variable">$rolGenealogista</span><span class="token punctuation">,</span><span class="token variable">$rolDocumentalista</span><span class="token punctuation">,</span><span class="token variable">$rolProduccion</span><span class="token punctuation">,</span><span class="token variable">$rolCliente</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name static-context">Permission</span><span class="token operator">::</span><span class="token function">create</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token string single-quoted-string">'name'</span> <span class="token operator">=&gt;</span> <span class="token string single-quoted-string">'crud.files.create'</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token operator">-&gt;</span><span class="token function">syncRoles</span><span class="token punctuation">(</span><span class="token variable">$rolAdministrador</span><span class="token punctuation">,</span> <span class="token variable">$rolGenealogista</span><span class="token punctuation">,</span><span class="token variable">$rolDocumentalista</span><span class="token punctuation">,</span><span class="token variable">$rolProduccion</span><span class="token punctuation">,</span><span class="token variable">$rolCliente</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name static-context">Permission</span><span class="token operator">::</span><span class="token function">create</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token string single-quoted-string">'name'</span> <span class="token operator">=&gt;</span> <span class="token string single-quoted-string">'crud.files.edit'</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token operator">-&gt;</span><span class="token function">syncRoles</span><span class="token punctuation">(</span><span class="token variable">$rolAdministrador</span><span class="token punctuation">,</span> <span class="token variable">$rolGenealogista</span><span class="token punctuation">,</span><span class="token variable">$rolDocumentalista</span><span class="token punctuation">,</span><span class="token variable">$rolProduccion</span><span class="token punctuation">,</span><span class="token variable">$rolCliente</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name static-context">Permission</span><span class="token operator">::</span><span class="token function">create</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token string single-quoted-string">'name'</span> <span class="token operator">=&gt;</span> <span class="token string single-quoted-string">'crud.files.destroy'</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token operator">-&gt;</span><span class="token function">syncRoles</span><span class="token punctuation">(</span><span class="token variable">$rolAdministrador</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    ≡
<span class="token punctuation">}</span>
≡
</code></pre></div></li> <li>Reestablecer base de datos:
<ul><li>$ php artisan migrate:fresh --seed</li></ul></li> <li>Indicar campos de asignación masiva en el modelo <strong>File</strong> en <strong>app\Models\File.php</strong>:<div class="language-php extra-class"><pre class="language-php"><code>≡
<span class="token keyword">class</span> <span class="token class-name-definition class-name">File</span> <span class="token keyword">extends</span> <span class="token class-name">Model</span>
<span class="token punctuation">{</span>
    <span class="token keyword">use</span> <span class="token package">HasFactory</span><span class="token punctuation">;</span>

    <span class="token keyword">protected</span> <span class="token variable">$fillable</span> <span class="token operator">=</span> <span class="token punctuation">[</span>
        <span class="token string single-quoted-string">'file'</span><span class="token punctuation">,</span>
        <span class="token string single-quoted-string">'location'</span><span class="token punctuation">,</span>
        <span class="token string single-quoted-string">'tipo'</span><span class="token punctuation">,</span>
        <span class="token string single-quoted-string">'propietario'</span><span class="token punctuation">,</span>
        <span class="token string single-quoted-string">'IDCliente'</span><span class="token punctuation">,</span>
        <span class="token string single-quoted-string">'notas'</span><span class="token punctuation">,</span>
        <span class="token string single-quoted-string">'IDPersona'</span><span class="token punctuation">,</span>
        <span class="token string single-quoted-string">'user_id'</span>
    <span class="token punctuation">]</span><span class="token punctuation">;</span>

<span class="token punctuation">}</span>
</code></pre></div></li> <li>Agregar ruta files al grupo de rutas CRUD:<div class="language-php extra-class"><pre class="language-php"><code><span class="token class-name static-context">Route</span><span class="token operator">::</span><span class="token function">resource</span><span class="token punctuation">(</span><span class="token string single-quoted-string">'files'</span><span class="token punctuation">,</span> <span class="token class-name static-context">FileController</span><span class="token operator">::</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token operator">-&gt;</span><span class="token function">names</span><span class="token punctuation">(</span><span class="token string single-quoted-string">'files'</span><span class="token punctuation">)</span>
        <span class="token operator">-&gt;</span><span class="token function">middleware</span><span class="token punctuation">(</span><span class="token string single-quoted-string">'can:crud.files.index'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><ul><li><strong>Nota</strong>: añadir a la cabecera:</li></ul> <div class="language-php extra-class"><pre class="language-php"><code><span class="token keyword">use</span> <span class="token package">App<span class="token punctuation">\</span>Http<span class="token punctuation">\</span>Controllers<span class="token punctuation">\</span>FileController</span><span class="token punctuation">;</span>
</code></pre></div></li> <li>Crear componente Livewire para Tabla Files:
<ul><li>$ php artisan make:livewire crud/files-table</li></ul></li> <li>Programar controlador para la tabla Files: <strong>app\Http\Livewire\Crud\FilesTable.php</strong>:
<ul><li>Ver código fuente en el repositorio.</li></ul></li> <li>Diseñar vista para la tabla Files: <strong>resources\views\livewire\crud\files-table.blade.php</strong>:
<ul><li>Ver código fuente en el repositorio.</li></ul></li> <li>Programar controlador File: <strong>app\Http\Controllers\FileController.php</strong>:
<ul><li>Ver código fuente en el repositorio.</li></ul></li> <li>Diseñar las vistas para el CRUD Files:
<ul><li>resources\views\crud\files\index.blade.php</li> <li>resources\views\crud\files\create.blade.php</li> <li>resources\views\crud\files\edit.blade.php</li></ul></li> <li>Editar <strong>config\adminlte.php</strong> para añadir los menú para ingresar al CRUD Files:
<ul><li>Ver código fuente en el repositorio.</li></ul></li> <li>Commit:
<ul><li>$ git add .</li> <li>$ git commit -m &quot;CRUD Almacenamiento de documentos&quot;</li></ul></li></ol> <h2 id="crud-libros"><a href="#crud-libros" class="header-anchor">#</a> CRUD Libros</h2> <ol><li>Crear modelo Book junto con su migración y controlador y los métodos para el CRUD:
<ul><li>$ php artisan make:model Book -m -c -r</li></ul></li> <li>Preparar migración para la tabla <strong>books</strong> en <strong>database\migrations\2021_05_08_140616_create_books_table.php</strong>:<div class="language-php extra-class"><pre class="language-php"><code>≡
<span class="token keyword">public</span> <span class="token keyword">function</span> <span class="token function-definition function">up</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    <span class="token class-name static-context">Schema</span><span class="token operator">::</span><span class="token function">create</span><span class="token punctuation">(</span><span class="token string single-quoted-string">'books'</span><span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token class-name type-declaration">Blueprint</span> <span class="token variable">$table</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token variable">$table</span><span class="token operator">-&gt;</span><span class="token function">id</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token variable">$table</span><span class="token operator">-&gt;</span><span class="token keyword type-declaration">string</span><span class="token punctuation">(</span><span class="token string single-quoted-string">'id_bd'</span><span class="token punctuation">,</span><span class="token number">4</span><span class="token punctuation">)</span><span class="token operator">-&gt;</span><span class="token function">nullable</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>      <span class="token comment">// id correspondiente en la tabla bd</span>
        <span class="token variable">$table</span><span class="token operator">-&gt;</span><span class="token keyword type-declaration">string</span><span class="token punctuation">(</span><span class="token string single-quoted-string">'titulo'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token variable">$table</span><span class="token operator">-&gt;</span><span class="token keyword type-declaration">string</span><span class="token punctuation">(</span><span class="token string single-quoted-string">'subtitulo'</span><span class="token punctuation">)</span><span class="token operator">-&gt;</span><span class="token function">nullable</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token variable">$table</span><span class="token operator">-&gt;</span><span class="token keyword type-declaration">string</span><span class="token punctuation">(</span><span class="token string single-quoted-string">'autor'</span><span class="token punctuation">)</span><span class="token operator">-&gt;</span><span class="token function">nullable</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token variable">$table</span><span class="token operator">-&gt;</span><span class="token keyword type-declaration">string</span><span class="token punctuation">(</span><span class="token string single-quoted-string">'editorial'</span><span class="token punctuation">)</span><span class="token operator">-&gt;</span><span class="token function">nullable</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token comment">// Ciudad / Editorial</span>
        <span class="token variable">$table</span><span class="token operator">-&gt;</span><span class="token keyword type-declaration">string</span><span class="token punctuation">(</span><span class="token string single-quoted-string">'coleccion'</span><span class="token punctuation">)</span><span class="token operator">-&gt;</span><span class="token function">nullable</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token comment">// Colección, Serie, Número</span>
        <span class="token variable">$table</span><span class="token operator">-&gt;</span><span class="token keyword type-declaration">string</span><span class="token punctuation">(</span><span class="token string single-quoted-string">'fecha'</span><span class="token punctuation">)</span><span class="token operator">-&gt;</span><span class="token function">nullable</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>      	<span class="token comment">// Fecha de edición</span>
        <span class="token variable">$table</span><span class="token operator">-&gt;</span><span class="token keyword type-declaration">string</span><span class="token punctuation">(</span><span class="token string single-quoted-string">'edicion'</span><span class="token punctuation">)</span><span class="token operator">-&gt;</span><span class="token function">nullable</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>      <span class="token comment">// Número de edición</span>
        <span class="token variable">$table</span><span class="token operator">-&gt;</span><span class="token keyword type-declaration">string</span><span class="token punctuation">(</span><span class="token string single-quoted-string">'paginacion'</span><span class="token punctuation">)</span><span class="token operator">-&gt;</span><span class="token function">nullable</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token variable">$table</span><span class="token operator">-&gt;</span><span class="token keyword type-declaration">string</span><span class="token punctuation">(</span><span class="token string single-quoted-string">'isbn'</span><span class="token punctuation">)</span><span class="token operator">-&gt;</span><span class="token function">nullable</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token variable">$table</span><span class="token operator">-&gt;</span><span class="token function">text</span><span class="token punctuation">(</span><span class="token string single-quoted-string">'notas'</span><span class="token punctuation">)</span><span class="token operator">-&gt;</span><span class="token function">nullable</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token variable">$table</span><span class="token operator">-&gt;</span><span class="token keyword type-declaration">string</span><span class="token punctuation">(</span><span class="token string single-quoted-string">'enlace'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                   <span class="token comment">// Enlace o url del documento</span>
        <span class="token variable">$table</span><span class="token operator">-&gt;</span><span class="token function">text</span><span class="token punctuation">(</span><span class="token string single-quoted-string">'claves'</span><span class="token punctuation">)</span><span class="token operator">-&gt;</span><span class="token function">nullable</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>         <span class="token comment">// Palabras claves</span>
        <span class="token variable">$table</span><span class="token operator">-&gt;</span><span class="token keyword type-declaration">string</span><span class="token punctuation">(</span><span class="token string single-quoted-string">'catalogador'</span><span class="token punctuation">)</span><span class="token operator">-&gt;</span><span class="token function">nullable</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">// Nombre o email del usuario que creo el documento</span>
        <span class="token variable">$table</span><span class="token operator">-&gt;</span><span class="token function">timestamps</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
≡
</code></pre></div></li> <li>Establecer permisos en los seeders para el CRUD Books en <strong>database\seeders\RoleSeeder.php</strong>:<div class="language-php extra-class"><pre class="language-php"><code>≡ 
<span class="token keyword">public</span> <span class="token keyword">function</span> <span class="token function-definition function">run</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    ≡        
    <span class="token class-name static-context">Permission</span><span class="token operator">::</span><span class="token function">create</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token string single-quoted-string">'name'</span> <span class="token operator">=&gt;</span> <span class="token string single-quoted-string">'crud.books.index'</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token operator">-&gt;</span><span class="token function">syncRoles</span><span class="token punctuation">(</span><span class="token variable">$rolAdministrador</span><span class="token punctuation">,</span><span class="token variable">$rolGenealogista</span><span class="token punctuation">,</span><span class="token variable">$rolDocumentalista</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name static-context">Permission</span><span class="token operator">::</span><span class="token function">create</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token string single-quoted-string">'name'</span> <span class="token operator">=&gt;</span> <span class="token string single-quoted-string">'crud.books.create'</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token operator">-&gt;</span><span class="token function">syncRoles</span><span class="token punctuation">(</span><span class="token variable">$rolAdministrador</span><span class="token punctuation">,</span><span class="token variable">$rolGenealogista</span><span class="token punctuation">,</span><span class="token variable">$rolDocumentalista</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name static-context">Permission</span><span class="token operator">::</span><span class="token function">create</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token string single-quoted-string">'name'</span> <span class="token operator">=&gt;</span> <span class="token string single-quoted-string">'crud.books.edit'</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token operator">-&gt;</span><span class="token function">syncRoles</span><span class="token punctuation">(</span><span class="token variable">$rolAdministrador</span><span class="token punctuation">,</span><span class="token variable">$rolGenealogista</span><span class="token punctuation">,</span><span class="token variable">$rolDocumentalista</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name static-context">Permission</span><span class="token operator">::</span><span class="token function">create</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token string single-quoted-string">'name'</span> <span class="token operator">=&gt;</span> <span class="token string single-quoted-string">'crud.books.destroy'</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token operator">-&gt;</span><span class="token function">syncRoles</span><span class="token punctuation">(</span><span class="token variable">$rolAdministrador</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    ≡
<span class="token punctuation">}</span>
≡
</code></pre></div></li> <li>Reestablecer base de datos:
<ul><li>$ php artisan migrate:fresh --seed</li></ul></li> <li>En phpMyAdmin pasar datos de la tabla existente bd a la nueva tabla books:
<ul><li>Migrar campos:<div class="language-sql extra-class"><pre class="language-sql"><code><span class="token keyword">INSERT</span> <span class="token keyword">INTO</span> books<span class="token punctuation">(</span>
    books<span class="token punctuation">.</span>id_bd<span class="token punctuation">,</span> 
    books<span class="token punctuation">.</span>titulo<span class="token punctuation">,</span>
    books<span class="token punctuation">.</span>autor<span class="token punctuation">,</span>
    books<span class="token punctuation">.</span>editorial<span class="token punctuation">,</span>
    books<span class="token punctuation">.</span>coleccion<span class="token punctuation">,</span>
    books<span class="token punctuation">.</span>edicion<span class="token punctuation">,</span>
    books<span class="token punctuation">.</span>paginacion<span class="token punctuation">,</span>
    books<span class="token punctuation">.</span>isbn<span class="token punctuation">,</span>
    books<span class="token punctuation">.</span>notas<span class="token punctuation">,</span>
    books<span class="token punctuation">.</span>enlace<span class="token punctuation">,</span>
    books<span class="token punctuation">.</span>claves
<span class="token punctuation">)</span>
<span class="token keyword">SELECT</span> 
    bd<span class="token punctuation">.</span>id<span class="token punctuation">,</span>
    bd<span class="token punctuation">.</span>documento<span class="token punctuation">,</span>
    bd<span class="token punctuation">.</span>responsabilidad<span class="token punctuation">,</span>
    bd<span class="token punctuation">.</span>editorial<span class="token punctuation">,</span>
    bd<span class="token punctuation">.</span>coleccion<span class="token punctuation">,</span>
    bd<span class="token punctuation">.</span>edicion<span class="token punctuation">,</span>
    bd<span class="token punctuation">.</span>colacion<span class="token punctuation">,</span>
    bd<span class="token punctuation">.</span>isbn<span class="token punctuation">,</span>
    bd<span class="token punctuation">.</span>notas<span class="token punctuation">,</span>
    bd<span class="token punctuation">.</span>enlace<span class="token punctuation">,</span>
    bd<span class="token punctuation">.</span>busqueda
<span class="token keyword">FROM</span>  bd
</code></pre></div></li> <li>Actualizar fecha de publicación con el año:<div class="language-sql extra-class"><pre class="language-sql"><code><span class="token keyword">UPDATE</span> <span class="token identifier"><span class="token punctuation">`</span>books<span class="token punctuation">`</span></span> <span class="token keyword">SET</span> <span class="token identifier"><span class="token punctuation">`</span>fecha<span class="token punctuation">`</span></span><span class="token operator">=</span><span class="token string">'[anho_publicacion]/1/1'</span> <span class="token keyword">WHERE</span> <span class="token identifier"><span class="token punctuation">`</span>id_bd<span class="token punctuation">`</span></span> <span class="token operator">LIKE</span> <span class="token string">'1'</span>
</code></pre></div></li> <li>Formula en Excel:<div class="language- extra-class"><pre class="language-text"><code>=&quot;UPDATE `books` SET `fecha`='&quot;&amp;T2&amp;&quot;/1/1' WHERE `id_bd` LIKE '&quot;&amp;A2&amp;&quot;';&quot; (Fila 2)
</code></pre></div></li> <li>Donde: T[i]: anho_publicacion y A[i]: id</li> <li>Actualizar campos <strong>created_at</strong> y <strong>updated_at</strong> con la fecha actual:<div class="language-sql extra-class"><pre class="language-sql"><code><span class="token keyword">UPDATE</span> <span class="token identifier"><span class="token punctuation">`</span>books<span class="token punctuation">`</span></span> <span class="token keyword">SET</span> <span class="token identifier"><span class="token punctuation">`</span>created_at<span class="token punctuation">`</span></span> <span class="token operator">=</span> <span class="token keyword">CURRENT_TIMESTAMP</span><span class="token punctuation">;</span>
<span class="token keyword">UPDATE</span> <span class="token identifier"><span class="token punctuation">`</span>books<span class="token punctuation">`</span></span> <span class="token keyword">SET</span> <span class="token identifier"><span class="token punctuation">`</span>updated_at<span class="token punctuation">`</span></span> <span class="token operator">=</span> <span class="token keyword">CURRENT_TIMESTAMP</span><span class="token punctuation">;</span>
</code></pre></div></li></ul></li> <li>Establecer campos de asignación masiva en el modelo <strong>Book</strong> en <strong>app\Models\Book.php</strong><div class="language-php extra-class"><pre class="language-php"><code>≡
<span class="token keyword">class</span> <span class="token class-name-definition class-name">Book</span> <span class="token keyword">extends</span> <span class="token class-name">Model</span>
<span class="token punctuation">{</span>
    <span class="token keyword">use</span> <span class="token package">HasFactory</span><span class="token punctuation">;</span>

    <span class="token keyword">protected</span> <span class="token variable">$fillable</span> <span class="token operator">=</span> <span class="token punctuation">[</span>
        <span class="token string single-quoted-string">'titulo'</span><span class="token punctuation">,</span>
        <span class="token string single-quoted-string">'subtitulo'</span><span class="token punctuation">,</span>
        <span class="token string single-quoted-string">'autor'</span><span class="token punctuation">,</span>
        <span class="token string single-quoted-string">'editorial'</span><span class="token punctuation">,</span>
        <span class="token string single-quoted-string">'coleccion'</span><span class="token punctuation">,</span>
        <span class="token string single-quoted-string">'fecha'</span><span class="token punctuation">,</span>
        <span class="token string single-quoted-string">'edicion'</span><span class="token punctuation">,</span>
        <span class="token string single-quoted-string">'paginacion'</span><span class="token punctuation">,</span>
        <span class="token string single-quoted-string">'isbn'</span><span class="token punctuation">,</span>
        <span class="token string single-quoted-string">'notas'</span><span class="token punctuation">,</span>
        <span class="token string single-quoted-string">'enlace'</span><span class="token punctuation">,</span>
        <span class="token string single-quoted-string">'claves'</span><span class="token punctuation">,</span>
        <span class="token string single-quoted-string">'catalogador'</span><span class="token punctuation">,</span>
    <span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div></li> <li>Agregar ruta books al grupo de rutas CRUD:<div class="language-php extra-class"><pre class="language-php"><code><span class="token class-name static-context">Route</span><span class="token operator">::</span><span class="token function">resource</span><span class="token punctuation">(</span><span class="token string single-quoted-string">'books'</span><span class="token punctuation">,</span> <span class="token class-name static-context">BookController</span><span class="token operator">::</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token operator">-&gt;</span><span class="token function">names</span><span class="token punctuation">(</span><span class="token string single-quoted-string">'books'</span><span class="token punctuation">)</span>
        <span class="token operator">-&gt;</span><span class="token function">middleware</span><span class="token punctuation">(</span><span class="token string single-quoted-string">'can:crud.books.index'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><ul><li><strong>Nota</strong>: añadir a la cabecera:</li></ul> <div class="language-php extra-class"><pre class="language-php"><code><span class="token keyword">use</span> <span class="token package">App<span class="token punctuation">\</span>Http<span class="token punctuation">\</span>Controllers<span class="token punctuation">\</span>BookController</span><span class="token punctuation">;</span>
</code></pre></div></li> <li>Crear componente Livewire para Tabla Books:
<ul><li>$ php artisan make:livewire crud/books-table</li></ul></li> <li>Programar controlador para la tabla Books: <strong>app\Http\Livewire\Crud\BookTable.php</strong>:
<ul><li>Ver código en el repositorio.</li></ul></li> <li>Diseñar vista para la tabla Books: <strong>resources\views\livewire\crud\books-table.blade.php</strong> <ul><li>Ver código en el repositorio.</li></ul></li> <li>Programar controlador Book: <strong>app\Http\Controllers\BookController.php</strong> <ul><li>Ver código en el repositorio.</li></ul></li> <li>Diseñar las vistas para el CRUD Books:
<ul><li>resources\views\crud\books\index.blade.php</li> <li>resources\views\crud\books\create.blade.php</li> <li>resources\views\crud\books\edit.blade.php</li></ul></li> <li>Editar <strong>config\adminlte.php</strong> para añadir los menú para ingresar al CRUD Books
<ul><li>Ver código en el repositorio.</li></ul></li> <li>Commit:
<ul><li>$ git add .</li> <li>$ git commit -m &quot;CRUD Libros&quot;</li></ul></li></ol> <h2 id="crud-miscelaneos"><a href="#crud-miscelaneos" class="header-anchor">#</a> CRUD Miscelaneos</h2> <ol><li>Crear modelo Miscelaneo junto con su migración y controlador y los métodos para el CRUD:
<ul><li>$ php artisan make:model Miscelaneo -m -c -r</li></ul></li> <li>Preparar migración para la tabla <strong>miscelaneos</strong> en <strong>database\migrations\2021_06_13_204842_create_miscelaneos_table.php</strong>:<div class="language-php extra-class"><pre class="language-php"><code>≡
<span class="token keyword">public</span> <span class="token keyword">function</span> <span class="token function-definition function">up</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    <span class="token class-name static-context">Schema</span><span class="token operator">::</span><span class="token function">create</span><span class="token punctuation">(</span><span class="token string single-quoted-string">'miscelaneos'</span><span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token class-name type-declaration">Blueprint</span> <span class="token variable">$table</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token variable">$table</span><span class="token operator">-&gt;</span><span class="token function">id</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token variable">$table</span><span class="token operator">-&gt;</span><span class="token keyword type-declaration">string</span><span class="token punctuation">(</span><span class="token string single-quoted-string">'id_bd'</span><span class="token punctuation">,</span><span class="token number">4</span><span class="token punctuation">)</span><span class="token operator">-&gt;</span><span class="token function">nullable</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>      <span class="token comment">// id correspondiente en la tabla bd</span>
        <span class="token variable">$table</span><span class="token operator">-&gt;</span><span class="token keyword type-declaration">string</span><span class="token punctuation">(</span><span class="token string single-quoted-string">'titulo'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                   <span class="token comment">// Título</span>
        <span class="token variable">$table</span><span class="token operator">-&gt;</span><span class="token keyword type-declaration">string</span><span class="token punctuation">(</span><span class="token string single-quoted-string">'autor'</span><span class="token punctuation">)</span><span class="token operator">-&gt;</span><span class="token function">nullable</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment">// Autor(es)</span>
        <span class="token variable">$table</span><span class="token operator">-&gt;</span><span class="token keyword type-declaration">string</span><span class="token punctuation">(</span><span class="token string single-quoted-string">'publicado'</span><span class="token punctuation">)</span><span class="token operator">-&gt;</span><span class="token function">nullable</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token comment">// Publicado en</span>
        <span class="token variable">$table</span><span class="token operator">-&gt;</span><span class="token keyword type-declaration">string</span><span class="token punctuation">(</span><span class="token string single-quoted-string">'editorial'</span><span class="token punctuation">)</span><span class="token operator">-&gt;</span><span class="token function">nullable</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token comment">// Ciudad / Editorial</span>
        <span class="token variable">$table</span><span class="token operator">-&gt;</span><span class="token keyword type-declaration">string</span><span class="token punctuation">(</span><span class="token string single-quoted-string">'volumen'</span><span class="token punctuation">)</span><span class="token operator">-&gt;</span><span class="token function">nullable</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>      <span class="token comment">// Año / Número / Volumen</span>
        <span class="token variable">$table</span><span class="token operator">-&gt;</span><span class="token keyword type-declaration">string</span><span class="token punctuation">(</span><span class="token string single-quoted-string">'paginacion'</span><span class="token punctuation">)</span><span class="token operator">-&gt;</span><span class="token function">nullable</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>   <span class="token comment">// Paginación</span>
        <span class="token variable">$table</span><span class="token operator">-&gt;</span><span class="token keyword type-declaration">string</span><span class="token punctuation">(</span><span class="token string single-quoted-string">'isbn'</span><span class="token punctuation">)</span><span class="token operator">-&gt;</span><span class="token function">nullable</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>         <span class="token comment">// ISBN / ISSN</span>
        <span class="token variable">$table</span><span class="token operator">-&gt;</span><span class="token function">text</span><span class="token punctuation">(</span><span class="token string single-quoted-string">'claves'</span><span class="token punctuation">)</span><span class="token operator">-&gt;</span><span class="token function">nullable</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>         <span class="token comment">// Palabras claves</span>
        <span class="token variable">$table</span><span class="token operator">-&gt;</span><span class="token keyword type-declaration">string</span><span class="token punctuation">(</span><span class="token string single-quoted-string">'enlace'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                   <span class="token comment">// Enlace o url del documento</span>
        <span class="token variable">$table</span><span class="token operator">-&gt;</span><span class="token function">text</span><span class="token punctuation">(</span><span class="token string single-quoted-string">'notas'</span><span class="token punctuation">)</span><span class="token operator">-&gt;</span><span class="token function">nullable</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>          <span class="token comment">// Notas</span>
        <span class="token variable">$table</span><span class="token operator">-&gt;</span><span class="token keyword type-declaration">string</span><span class="token punctuation">(</span><span class="token string single-quoted-string">'material'</span><span class="token punctuation">)</span><span class="token operator">-&gt;</span><span class="token function">nullable</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>     <span class="token comment">// Tipo de material:    - Artículo de publicación periódica</span>
                                                    <span class="token comment">//                      - Capítulo de libro</span>
                                                    <span class="token comment">//                      - Material genealógico</span>
                                                    <span class="token comment">//                      - Informes de Sefar</span>
                                                    <span class="token comment">//                      - Otros</span>
        <span class="token variable">$table</span><span class="token operator">-&gt;</span><span class="token keyword type-declaration">string</span><span class="token punctuation">(</span><span class="token string single-quoted-string">'catalogador'</span><span class="token punctuation">)</span><span class="token operator">-&gt;</span><span class="token function">nullable</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">// Nombre o email del usuario que creo el documento</span>
        <span class="token variable">$table</span><span class="token operator">-&gt;</span><span class="token function">timestamps</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
≡
</code></pre></div></li> <li>Establecer permisos en los seeders para el CRUD Miscelaneos en <strong>database\seeders\RoleSeeder.php</strong>:<div class="language-php extra-class"><pre class="language-php"><code>≡ 
<span class="token keyword">public</span> <span class="token keyword">function</span> <span class="token function-definition function">run</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    ≡        
    <span class="token class-name static-context">Permission</span><span class="token operator">::</span><span class="token function">create</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token string single-quoted-string">'name'</span> <span class="token operator">=&gt;</span> <span class="token string single-quoted-string">'crud.miscelaneos.index'</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token operator">-&gt;</span><span class="token function">syncRoles</span><span class="token punctuation">(</span><span class="token variable">$rolAdministrador</span><span class="token punctuation">,</span><span class="token variable">$rolGenealogista</span><span class="token punctuation">,</span><span class="token variable">$rolDocumentalista</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name static-context">Permission</span><span class="token operator">::</span><span class="token function">create</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token string single-quoted-string">'name'</span> <span class="token operator">=&gt;</span> <span class="token string single-quoted-string">'crud.miscelaneos.create'</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token operator">-&gt;</span><span class="token function">syncRoles</span><span class="token punctuation">(</span><span class="token variable">$rolAdministrador</span><span class="token punctuation">,</span><span class="token variable">$rolGenealogista</span><span class="token punctuation">,</span><span class="token variable">$rolDocumentalista</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name static-context">Permission</span><span class="token operator">::</span><span class="token function">create</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token string single-quoted-string">'name'</span> <span class="token operator">=&gt;</span> <span class="token string single-quoted-string">'crud.miscelaneos.edit'</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token operator">-&gt;</span><span class="token function">syncRoles</span><span class="token punctuation">(</span><span class="token variable">$rolAdministrador</span><span class="token punctuation">,</span><span class="token variable">$rolGenealogista</span><span class="token punctuation">,</span><span class="token variable">$rolDocumentalista</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name static-context">Permission</span><span class="token operator">::</span><span class="token function">create</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token string single-quoted-string">'name'</span> <span class="token operator">=&gt;</span> <span class="token string single-quoted-string">'crud.miscelaneos.destroy'</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token operator">-&gt;</span><span class="token function">syncRoles</span><span class="token punctuation">(</span><span class="token variable">$rolAdministrador</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    ≡
<span class="token punctuation">}</span>
≡
</code></pre></div></li> <li>Reestablecer base de datos:
<ul><li>$ php artisan migrate:fresh --seed</li></ul></li> <li>Establecer campos de asignación masiva en el modelo <strong>Miscelaneo</strong> en <strong>app\Models\Miscelaneo.php</strong>:<div class="language-php extra-class"><pre class="language-php"><code>≡
<span class="token keyword">class</span> <span class="token class-name-definition class-name">Miscelaneo</span> <span class="token keyword">extends</span> <span class="token class-name">Model</span>
<span class="token punctuation">{</span>
    <span class="token keyword">use</span> <span class="token package">HasFactory</span><span class="token punctuation">;</span>

    <span class="token keyword">protected</span> <span class="token variable">$fillable</span> <span class="token operator">=</span> <span class="token punctuation">[</span>
        <span class="token string single-quoted-string">'titulo'</span><span class="token punctuation">,</span>
        <span class="token string single-quoted-string">'autor'</span><span class="token punctuation">,</span>
        <span class="token string single-quoted-string">'publicado'</span><span class="token punctuation">,</span>
        <span class="token string single-quoted-string">'editorial'</span><span class="token punctuation">,</span>
        <span class="token string single-quoted-string">'volumen'</span><span class="token punctuation">,</span>
        <span class="token string single-quoted-string">'paginacion'</span><span class="token punctuation">,</span>
        <span class="token string single-quoted-string">'isbn'</span><span class="token punctuation">,</span>
        <span class="token string single-quoted-string">'notas'</span><span class="token punctuation">,</span>
        <span class="token string single-quoted-string">'enlace'</span><span class="token punctuation">,</span>
        <span class="token string single-quoted-string">'claves'</span><span class="token punctuation">,</span>
        <span class="token string single-quoted-string">'material'</span><span class="token punctuation">,</span>
        <span class="token string single-quoted-string">'catalogador'</span><span class="token punctuation">,</span>
    <span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div></li> <li>Agregar ruta miscelaneos al grupo de rutas CRUD:<div class="language-php extra-class"><pre class="language-php"><code><span class="token class-name static-context">Route</span><span class="token operator">::</span><span class="token function">resource</span><span class="token punctuation">(</span><span class="token string single-quoted-string">'miscelaneos'</span><span class="token punctuation">,</span> <span class="token class-name static-context">MiscelaneoController</span><span class="token operator">::</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token operator">-&gt;</span><span class="token function">names</span><span class="token punctuation">(</span><span class="token string single-quoted-string">'miscelaneos'</span><span class="token punctuation">)</span>
        <span class="token operator">-&gt;</span><span class="token function">middleware</span><span class="token punctuation">(</span><span class="token string single-quoted-string">'can:crud.miscelaneos.index'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><ul><li><strong>Nota</strong>: añadir a la cabecera:</li></ul> <div class="language-php extra-class"><pre class="language-php"><code><span class="token keyword">use</span> <span class="token package">App<span class="token punctuation">\</span>Http<span class="token punctuation">\</span>Controllers<span class="token punctuation">\</span>MiscelaneoController</span><span class="token punctuation">;</span>
</code></pre></div></li> <li>Crear componente Livewire para Tabla Miscelaneos:
<ul><li>$ php artisan make:livewire crud/miscelaneos-table</li></ul></li> <li>Programar controlador para la tabla Miscelaneos: <strong>app\Http\Livewire\Crud\MiscelaneosTable.php</strong>:
<ul><li>Ver código en el repositorio.</li></ul></li> <li>Diseñar vista para la tabla Miscelaneos: <strong>resources\views\livewire\crud\miscelaneos-table.blade.php</strong>:
<ul><li>Ver código en el repositorio.</li></ul></li> <li>Programar controlador Miscelaneo: <strong>app\Http\Controllers\MiscelaneoController.php</strong>:
<ul><li>Ver código en el repositorio.</li></ul></li> <li>Diseñar las vistas para el CRUD Miscelaneos:
<ul><li>resources\views\crud\miscelaneos\index.blade.php</li> <li>resources\views\crud\miscelaneos\create.blade.php</li> <li>resources\views\crud\miscelaneos\edit.blade.php</li></ul></li> <li>Editar <strong>config\adminlte.php</strong> para añadir los menú para ingresar al CRUD Miscelaneos:
<ul><li>Ver código en el repositorio.</li></ul></li> <li>Commit:
<ul><li>$ git add .</li> <li>$ git commit -m &quot;CRUD Miscelaneos&quot;</li></ul></li></ol> <h2 id="crud-biblioteca"><a href="#crud-biblioteca" class="header-anchor">#</a> CRUD Biblioteca</h2> <ol><li>Crear modelo Library junto con su migración y controlador y los métodos para el CRUD:
<ul><li>$ php artisan make:model Library -m -c -r</li></ul></li> <li>Preparar migración para la tabla <strong>libraries</strong> en <strong>database\migrations\2021_04_11_155101_create_libraries_table.php</strong><div class="language-php extra-class"><pre class="language-php"><code>≡
<span class="token keyword">public</span> <span class="token keyword">function</span> <span class="token function-definition function">up</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    <span class="token class-name static-context">Schema</span><span class="token operator">::</span><span class="token function">create</span><span class="token punctuation">(</span><span class="token string single-quoted-string">'libraries'</span><span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token class-name type-declaration">Blueprint</span> <span class="token variable">$table</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token variable">$table</span><span class="token operator">-&gt;</span><span class="token function">id</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token variable">$table</span><span class="token operator">-&gt;</span><span class="token keyword type-declaration">string</span><span class="token punctuation">(</span><span class="token string single-quoted-string">'documento'</span><span class="token punctuation">)</span><span class="token operator">-&gt;</span><span class="token function">unique</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>              <span class="token comment">// Nombre del documento</span>
        <span class="token variable">$table</span><span class="token operator">-&gt;</span><span class="token keyword type-declaration">string</span><span class="token punctuation">(</span><span class="token string single-quoted-string">'formato'</span><span class="token punctuation">,</span><span class="token number">12</span><span class="token punctuation">)</span><span class="token operator">-&gt;</span><span class="token function">nullable</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>           <span class="token comment">// Formato del documento</span>
        <span class="token variable">$table</span><span class="token operator">-&gt;</span><span class="token keyword type-declaration">string</span><span class="token punctuation">(</span><span class="token string single-quoted-string">'tipo'</span><span class="token punctuation">,</span><span class="token number">45</span><span class="token punctuation">)</span><span class="token operator">-&gt;</span><span class="token function">nullable</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>              <span class="token comment">// Tipo del documento</span>
        <span class="token variable">$table</span><span class="token operator">-&gt;</span><span class="token keyword type-declaration">string</span><span class="token punctuation">(</span><span class="token string single-quoted-string">'fuente'</span><span class="token punctuation">)</span><span class="token operator">-&gt;</span><span class="token function">nullable</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>               <span class="token comment">// Fuente del documento</span>
        <span class="token variable">$table</span><span class="token operator">-&gt;</span><span class="token keyword type-declaration">string</span><span class="token punctuation">(</span><span class="token string single-quoted-string">'origen'</span><span class="token punctuation">)</span><span class="token operator">-&gt;</span><span class="token function">nullable</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>               <span class="token comment">// Origen del documento</span>
        <span class="token variable">$table</span><span class="token operator">-&gt;</span><span class="token keyword type-declaration">string</span><span class="token punctuation">(</span><span class="token string single-quoted-string">'ubicacion'</span><span class="token punctuation">)</span><span class="token operator">-&gt;</span><span class="token function">nullable</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token comment">// Ubicación actual del documento</span>
        <span class="token variable">$table</span><span class="token operator">-&gt;</span><span class="token keyword type-declaration">string</span><span class="token punctuation">(</span><span class="token string single-quoted-string">'ubicacion_ant'</span><span class="token punctuation">)</span><span class="token operator">-&gt;</span><span class="token function">nullable</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment">// Ubicación anterior del documento</span>
        <span class="token variable">$table</span><span class="token operator">-&gt;</span><span class="token function">text</span><span class="token punctuation">(</span><span class="token string single-quoted-string">'busqueda'</span><span class="token punctuation">)</span><span class="token operator">-&gt;</span><span class="token function">nullable</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>               <span class="token comment">// Palabras que faciliten la búsqueda del documento</span>
        <span class="token variable">$table</span><span class="token operator">-&gt;</span><span class="token function">text</span><span class="token punctuation">(</span><span class="token string single-quoted-string">'notas'</span><span class="token punctuation">)</span><span class="token operator">-&gt;</span><span class="token function">nullable</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                  <span class="token comment">// Notas para el documento</span>
        <span class="token variable">$table</span><span class="token operator">-&gt;</span><span class="token keyword type-declaration">string</span><span class="token punctuation">(</span><span class="token string single-quoted-string">'enlace'</span><span class="token punctuation">)</span><span class="token operator">-&gt;</span><span class="token function">nullable</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>               <span class="token comment">// Enlace o url del documento</span>
        <span class="token variable">$table</span><span class="token operator">-&gt;</span><span class="token keyword type-declaration">string</span><span class="token punctuation">(</span><span class="token string single-quoted-string">'anho_ini'</span><span class="token punctuation">,</span><span class="token number">11</span><span class="token punctuation">)</span><span class="token operator">-&gt;</span><span class="token function">nullable</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>          <span class="token comment">// Año inicial al que hacer referencia el documento</span>
        <span class="token variable">$table</span><span class="token operator">-&gt;</span><span class="token keyword type-declaration">string</span><span class="token punctuation">(</span><span class="token string single-quoted-string">'anho_fin'</span><span class="token punctuation">,</span><span class="token number">11</span><span class="token punctuation">)</span><span class="token operator">-&gt;</span><span class="token function">nullable</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>          <span class="token comment">// Año final al que hacer referencia el documento</span>
        <span class="token variable">$table</span><span class="token operator">-&gt;</span><span class="token keyword type-declaration">string</span><span class="token punctuation">(</span><span class="token string single-quoted-string">'pais'</span><span class="token punctuation">)</span><span class="token operator">-&gt;</span><span class="token function">nullable</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                 <span class="token comment">// País al que hacer referencia el documento</span>
        <span class="token variable">$table</span><span class="token operator">-&gt;</span><span class="token keyword type-declaration">string</span><span class="token punctuation">(</span><span class="token string single-quoted-string">'ciudad'</span><span class="token punctuation">,</span><span class="token number">150</span><span class="token punctuation">)</span><span class="token operator">-&gt;</span><span class="token function">nullable</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>           <span class="token comment">// Ciudad al que hacer referencia el documento</span>
        <span class="token variable">$table</span><span class="token operator">-&gt;</span><span class="token function">dateTime</span><span class="token punctuation">(</span><span class="token string single-quoted-string">'FIncorporacion'</span><span class="token punctuation">)</span><span class="token operator">-&gt;</span><span class="token function">nullable</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>     <span class="token comment">// Fecha de incorporación</span>
        <span class="token variable">$table</span><span class="token operator">-&gt;</span><span class="token keyword type-declaration">string</span><span class="token punctuation">(</span><span class="token string single-quoted-string">'responsabilidad'</span><span class="token punctuation">,</span><span class="token number">150</span><span class="token punctuation">)</span><span class="token operator">-&gt;</span><span class="token function">nullable</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">// Mención de responsabilidad</span>
        <span class="token variable">$table</span><span class="token operator">-&gt;</span><span class="token keyword type-declaration">string</span><span class="token punctuation">(</span><span class="token string single-quoted-string">'edicion'</span><span class="token punctuation">,</span><span class="token number">150</span><span class="token punctuation">)</span><span class="token operator">-&gt;</span><span class="token function">nullable</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>          <span class="token comment">// Edición del documento</span>
        <span class="token variable">$table</span><span class="token operator">-&gt;</span><span class="token keyword type-declaration">string</span><span class="token punctuation">(</span><span class="token string single-quoted-string">'editorial'</span><span class="token punctuation">,</span><span class="token number">150</span><span class="token punctuation">)</span><span class="token operator">-&gt;</span><span class="token function">nullable</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment">// Editorial, ciudad</span>
        <span class="token variable">$table</span><span class="token operator">-&gt;</span><span class="token function">integer</span><span class="token punctuation">(</span><span class="token string single-quoted-string">'anho_publicacion'</span><span class="token punctuation">)</span><span class="token operator">-&gt;</span><span class="token function">nullable</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token comment">// Año de publicación</span>
        <span class="token variable">$table</span><span class="token operator">-&gt;</span><span class="token keyword type-declaration">string</span><span class="token punctuation">(</span><span class="token string single-quoted-string">'no_vol'</span><span class="token punctuation">,</span><span class="token number">50</span><span class="token punctuation">)</span><span class="token operator">-&gt;</span><span class="token function">nullable</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token comment">// Número y volumen</span>
        <span class="token variable">$table</span><span class="token operator">-&gt;</span><span class="token keyword type-declaration">string</span><span class="token punctuation">(</span><span class="token string single-quoted-string">'coleccion'</span><span class="token punctuation">,</span><span class="token number">100</span><span class="token punctuation">)</span><span class="token operator">-&gt;</span><span class="token function">nullable</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment">// Colección</span>
        <span class="token variable">$table</span><span class="token operator">-&gt;</span><span class="token keyword type-declaration">string</span><span class="token punctuation">(</span><span class="token string single-quoted-string">'colacion'</span><span class="token punctuation">,</span><span class="token number">50</span><span class="token punctuation">)</span><span class="token operator">-&gt;</span><span class="token function">nullable</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>          <span class="token comment">// Colación</span>
        <span class="token variable">$table</span><span class="token operator">-&gt;</span><span class="token keyword type-declaration">string</span><span class="token punctuation">(</span><span class="token string single-quoted-string">'isbn'</span><span class="token punctuation">,</span><span class="token number">50</span><span class="token punctuation">)</span><span class="token operator">-&gt;</span><span class="token function">nullable</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>              <span class="token comment">// ISBN o ISSN</span>
        <span class="token variable">$table</span><span class="token operator">-&gt;</span><span class="token keyword type-declaration">string</span><span class="token punctuation">(</span><span class="token string single-quoted-string">'serie'</span><span class="token punctuation">,</span><span class="token number">50</span><span class="token punctuation">)</span><span class="token operator">-&gt;</span><span class="token function">nullable</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>             <span class="token comment">// Serie</span>
        <span class="token variable">$table</span><span class="token operator">-&gt;</span><span class="token keyword type-declaration">string</span><span class="token punctuation">(</span><span class="token string single-quoted-string">'no_clasificacion'</span><span class="token punctuation">,</span><span class="token number">50</span><span class="token punctuation">)</span><span class="token operator">-&gt;</span><span class="token function">nullable</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">// Número de clasificación</span>
        <span class="token variable">$table</span><span class="token operator">-&gt;</span><span class="token keyword type-declaration">string</span><span class="token punctuation">(</span><span class="token string single-quoted-string">'titulo_revista'</span><span class="token punctuation">)</span><span class="token operator">-&gt;</span><span class="token function">nullable</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>       <span class="token comment">// Título de la revista</span>
        <span class="token variable">$table</span><span class="token operator">-&gt;</span><span class="token function">text</span><span class="token punctuation">(</span><span class="token string single-quoted-string">'resumen'</span><span class="token punctuation">)</span><span class="token operator">-&gt;</span><span class="token function">nullable</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                <span class="token comment">// Resumen del documento</span>
        <span class="token variable">$table</span><span class="token operator">-&gt;</span><span class="token keyword type-declaration">string</span><span class="token punctuation">(</span><span class="token string single-quoted-string">'caratula_url'</span><span class="token punctuation">)</span><span class="token operator">-&gt;</span><span class="token function">nullable</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>         <span class="token comment">// Ubicación de la caratula</span>
        <span class="token variable">$table</span><span class="token operator">-&gt;</span><span class="token keyword type-declaration">string</span><span class="token punctuation">(</span><span class="token string single-quoted-string">'usuario'</span><span class="token punctuation">)</span><span class="token operator">-&gt;</span><span class="token function">nullable</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>              <span class="token comment">// Nombre o email del usuario que creo el documento</span>
        <span class="token variable">$table</span><span class="token operator">-&gt;</span><span class="token function">timestamps</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
≡
<span class="token string backtick-quoted-string">``</span>`php
</code></pre></div></li> <li>Establecer permisos en los seeders para el CRUD Biblioteca en <strong>database\seeders\RoleSeeder.php</strong>:<div class="language-php extra-class"><pre class="language-php"><code>≡ 
<span class="token keyword">public</span> <span class="token keyword">function</span> <span class="token function-definition function">run</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    ≡        
    <span class="token class-name static-context">Permission</span><span class="token operator">::</span><span class="token function">create</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token string single-quoted-string">'name'</span> <span class="token operator">=&gt;</span> <span class="token string single-quoted-string">'crud.libraries.index'</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token operator">-&gt;</span><span class="token function">syncRoles</span><span class="token punctuation">(</span><span class="token variable">$rolAdministrador</span><span class="token punctuation">,</span><span class="token variable">$rolGenealogista</span><span class="token punctuation">,</span><span class="token variable">$rolDocumentalista</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name static-context">Permission</span><span class="token operator">::</span><span class="token function">create</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token string single-quoted-string">'name'</span> <span class="token operator">=&gt;</span> <span class="token string single-quoted-string">'crud.libraries.create'</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token operator">-&gt;</span><span class="token function">syncRoles</span><span class="token punctuation">(</span><span class="token variable">$rolAdministrador</span><span class="token punctuation">,</span><span class="token variable">$rolGenealogista</span><span class="token punctuation">,</span><span class="token variable">$rolDocumentalista</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name static-context">Permission</span><span class="token operator">::</span><span class="token function">create</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token string single-quoted-string">'name'</span> <span class="token operator">=&gt;</span> <span class="token string single-quoted-string">'crud.libraries.edit'</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token operator">-&gt;</span><span class="token function">syncRoles</span><span class="token punctuation">(</span><span class="token variable">$rolAdministrador</span><span class="token punctuation">,</span><span class="token variable">$rolGenealogista</span><span class="token punctuation">,</span><span class="token variable">$rolDocumentalista</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name static-context">Permission</span><span class="token operator">::</span><span class="token function">create</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token string single-quoted-string">'name'</span> <span class="token operator">=&gt;</span> <span class="token string single-quoted-string">'crud.libraries.destroy'</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token operator">-&gt;</span><span class="token function">syncRoles</span><span class="token punctuation">(</span><span class="token variable">$rolAdministrador</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    ≡
<span class="token punctuation">}</span>
≡
</code></pre></div></li> <li>Reestablecer base de datos:
<ul><li>$ php artisan migrate:fresh --seed</li></ul></li> <li>Configurar modelo <strong>Library</strong> en <strong>app\Models\Library.php</strong>:<div class="language-php extra-class"><pre class="language-php"><code>≡
<span class="token keyword">class</span> <span class="token class-name-definition class-name">Library</span> <span class="token keyword">extends</span> <span class="token class-name">Model</span>
<span class="token punctuation">{</span>
    <span class="token keyword">use</span> <span class="token package">HasFactory</span><span class="token punctuation">;</span>

    <span class="token keyword">protected</span> <span class="token variable">$fillable</span> <span class="token operator">=</span> <span class="token punctuation">[</span>
        <span class="token string single-quoted-string">'documento'</span><span class="token punctuation">,</span>
        <span class="token string single-quoted-string">'formato'</span><span class="token punctuation">,</span>
        <span class="token string single-quoted-string">'tipo'</span><span class="token punctuation">,</span>
        <span class="token string single-quoted-string">'fuente'</span><span class="token punctuation">,</span>
        <span class="token string single-quoted-string">'origen'</span><span class="token punctuation">,</span>
        <span class="token string single-quoted-string">'ubicacion'</span><span class="token punctuation">,</span>
        <span class="token string single-quoted-string">'ubicacion_ant'</span><span class="token punctuation">,</span>
        <span class="token string single-quoted-string">'busqueda'</span><span class="token punctuation">,</span>
        <span class="token string single-quoted-string">'notas'</span><span class="token punctuation">,</span>
        <span class="token string single-quoted-string">'enlace'</span><span class="token punctuation">,</span>
        <span class="token string single-quoted-string">'anho_ini'</span><span class="token punctuation">,</span> 
        <span class="token string single-quoted-string">'anho_fin'</span><span class="token punctuation">,</span>
        <span class="token string single-quoted-string">'pais'</span><span class="token punctuation">,</span>
        <span class="token string single-quoted-string">'ciudad'</span><span class="token punctuation">,</span>
        <span class="token string single-quoted-string">'FIncorporacion'</span><span class="token punctuation">,</span>
        <span class="token string single-quoted-string">'responsabilidad'</span><span class="token punctuation">,</span>
        <span class="token string single-quoted-string">'edicion'</span><span class="token punctuation">,</span>
        <span class="token string single-quoted-string">'editorial'</span><span class="token punctuation">,</span>
        <span class="token string single-quoted-string">'anho_publicacion'</span><span class="token punctuation">,</span>
        <span class="token string single-quoted-string">'no_vol'</span><span class="token punctuation">,</span>
        <span class="token string single-quoted-string">'coleccion'</span><span class="token punctuation">,</span>
        <span class="token string single-quoted-string">'colacion'</span><span class="token punctuation">,</span>
        <span class="token string single-quoted-string">'isbn'</span><span class="token punctuation">,</span>
        <span class="token string single-quoted-string">'serie'</span><span class="token punctuation">,</span>
        <span class="token string single-quoted-string">'no_clasificacion'</span><span class="token punctuation">,</span>
        <span class="token string single-quoted-string">'titulo_revista'</span><span class="token punctuation">,</span>
        <span class="token string single-quoted-string">'resumen'</span><span class="token punctuation">,</span>
        <span class="token string single-quoted-string">'caratula_url'</span><span class="token punctuation">,</span>
        <span class="token string single-quoted-string">'usuario'</span>
    <span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div></li> <li>Agregar ruta de paises al grupo de rutas CRUD:<div class="language-php extra-class"><pre class="language-php"><code><span class="token class-name static-context">Route</span><span class="token operator">::</span><span class="token function">resource</span><span class="token punctuation">(</span><span class="token string single-quoted-string">'libraries'</span><span class="token punctuation">,</span> <span class="token class-name static-context">LibraryController</span><span class="token operator">::</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token operator">-&gt;</span><span class="token function">names</span><span class="token punctuation">(</span><span class="token string single-quoted-string">'libraries'</span><span class="token punctuation">)</span>
        <span class="token operator">-&gt;</span><span class="token function">middleware</span><span class="token punctuation">(</span><span class="token string single-quoted-string">'can:crud.libraries.index'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><ul><li><strong>Nota</strong>: añadir a la cabecera:</li></ul> <div class="language-php extra-class"><pre class="language-php"><code><span class="token keyword">use</span> <span class="token package">App<span class="token punctuation">\</span>Http<span class="token punctuation">\</span>Controllers<span class="token punctuation">\</span>LibraryController</span><span class="token punctuation">;</span>
</code></pre></div></li> <li>Crear componente Livewire para Tabla Libraries:
<ul><li>$ php artisan make:livewire crud/libraries-table</li></ul></li> <li>Programar controlador para la tabla Libraries: <strong>app\Http\Livewire\Crud\LibrariesTable.php</strong>:
<ul><li>Ver código en el repositorio.</li></ul></li> <li>Diseñar vista para la tabla Libraries: <strong>resources\views\livewire\crud\libraries-table.blade.php</strong>:
<ul><li>Ver código en el repositorio.</li></ul></li> <li>Programar controlador Library: <strong>app\Http\Controllers\LibraryController.php</strong>:
<ul><li>Ver código en el repositorio.</li></ul></li> <li>Diseñar las vistas para el CRUD Paises:
<ul><li>resources\views\crud\libraries\index.blade.php</li> <li>resources\views\crud\libraries\create.blade.php</li> <li>resources\views\crud\libraries\edit.blade.php</li></ul></li> <li>Editar <strong>config\adminlte.php</strong> para añadir los menú para ingresar al CRUD Biblioteca:
<ul><li>Ver código en el repositorio.</li></ul></li> <li>Commit:
<ul><li>$ git add .</li> <li>$ git commit -m &quot;CRUD Biblioteca&quot;</li></ul></li></ol> <h2 id="componentes-de-formularios-modales-para-vistas-de-arboles"><a href="#componentes-de-formularios-modales-para-vistas-de-arboles" class="header-anchor">#</a> Componentes de formularios modales para vistas de árboles</h2> <ol><li>Creación de <strong>resources\views\components\editar-persona.blade.php</strong> para la edición de personas en el árbol:
<ul><li>Ver código en el repositorio.</li></ul></li> <li>Creación de <strong>resources\views\components\ver-doc.blade.php</strong> para ver documentos cargados.:
<ul><li>Ver código en el repositorio.</li></ul></li> <li>Creación de <strong>resources\views\components\cargar-doc.blade.php</strong> para la carga de documentos:
<ul><li>Ver código en el repositorio.</li></ul></li></ol> <h2 id="vista-arbol-genealogico-albero"><a href="#vista-arbol-genealogico-albero" class="header-anchor">#</a> Vista árbol genealógico: <strong>Albero</strong></h2> <ol><li>Crear controlador Albero:
<ul><li>$ php artisan make:controller AlberoController</li></ul></li> <li>Programar controlador Albero en <strong>app\Http\Controllers\AlberoController.php</strong>:
<ul><li>Ver código en el repositorio.</li></ul></li> <li>Crear la vista Albero <strong>resources\views\arboles\arbelo.blade.php</strong>:
<ul><li>Ver código en el repositorio.</li></ul></li> <li>Crear grupo de rutas para las vistas de árboles y agregar la ruta para la vista Albero:<div class="language-php extra-class"><pre class="language-php"><code>	<span class="token comment">// Grupo de rutas para vistas de árboles genealógicos</span>
	<span class="token class-name static-context">Route</span><span class="token operator">::</span><span class="token function">group</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token string single-quoted-string">'middleware'</span> <span class="token operator">=&gt;</span> <span class="token punctuation">[</span><span class="token string single-quoted-string">'auth'</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token string single-quoted-string">'as'</span> <span class="token operator">=&gt;</span> <span class="token string single-quoted-string">'arboles.'</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
		<span class="token class-name static-context">Route</span><span class="token operator">::</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string single-quoted-string">'albero'</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token class-name static-context">AlberoController</span><span class="token operator">::</span><span class="token keyword">class</span><span class="token punctuation">,</span> <span class="token string single-quoted-string">'arbelo'</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token operator">-&gt;</span><span class="token function">name</span><span class="token punctuation">(</span><span class="token string single-quoted-string">'albero.index'</span><span class="token punctuation">)</span>
			<span class="token operator">-&gt;</span><span class="token function">middleware</span><span class="token punctuation">(</span><span class="token string single-quoted-string">'can:genealogista'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><ul><li><strong>Nota</strong>: añadir a la cabecera:</li></ul> <div class="language-php extra-class"><pre class="language-php"><code><span class="token keyword">use</span> <span class="token package">App<span class="token punctuation">\</span>Http<span class="token punctuation">\</span>Controllers<span class="token punctuation">\</span>AlberoController</span><span class="token punctuation">;</span>
</code></pre></div></li> <li>Crear componente Livewire para la vista Albero:
<ul><li>$ php artisan make:livewire vistas/arbol/albero-vista</li></ul></li> <li>Programar controlador para la vista Albero: <strong>app\Http\Livewire\Vistas\Arbol\AlberoVista.php</strong>:
<ul><li>Ver código en el repositorio.</li></ul></li> <li>Crear archivo de estilo para diagramar el árbol en <strong>public\css\arbelo.css</strong>::
<ul><li>Ver código en el repositorio.</li></ul></li> <li>Diseñar vista livewire para la tabla Albero: <strong>resources\views\livewire\crud\arbelo-table.blade.php</strong>:
<ul><li>Ver código en el repositorio.</li></ul></li> <li>Commit --:
<ul><li>$ git add .</li> <li>$ git commit -m &quot;Vista Arbelo&quot;</li></ul></li></ol> <h2 id="creacion-de-enlaces-simbolicos-symbolic-link"><a href="#creacion-de-enlaces-simbolicos-symbolic-link" class="header-anchor">#</a> Creación de enlaces simbólicos (symbolic link)</h2> <ol><li>Crear enlace simbólico en Windows 10:
<ul><li>Ejecutar <strong>C:\Windows\System32\cmd.exe como administrador</strong></li> <li>$ Mklink/D C:\xampp\htdocs\sefar\public\doc C:\xampp\htdocs\sefaruniversal.com\documentos</li> <li>$ Mklink/D C:\xampp\htdocs\sefar\storage\app\public\doc C:\xampp\htdocs\sefaruniversal.com\documentos
<ul><li>Mklink /D &quot;ruta donde queremos crear el enlace&quot; &quot;ruta de origen de archivos&quot;</li></ul></li></ul></li> <li>Crear enlace simbólico en el hosting:
<ul><li>En el cPanel ir a <strong>Trabajos de cron</strong>.</li> <li>Ubicarse en <strong>Añadir nuevo trabajo de cron</strong> y luego <strong>Configuración común</strong>, y seleccionar <em><em>Una vez por mínuto(</em> * * * *)</em>*.</li> <li>En <strong>Comando:</strong> escribir:
<ul><li>ln -s /home/pxvim6av41qx/public_html/documentos /home/pxvim6av41qx/public_html/app.sefaruniversal.com/public/doc</li></ul></li> <li>Presionar <strong>Añadir nuevo trabajo de cron</strong> y esperar a que se ejecute la tarea.</li> <li>Borrar tarea una vez creado el enlace en <strong>Trabajos de cron actuales</strong>.</li> <li>Repetir el procedimiento pero ahora para:
<ul><li>ln -s /home/pxvim6av41qx/public_html/documentos /home/pxvim6av41qx/public_html/app.sefaruniversal.com/storage/app/public/doc</li></ul></li></ul></li></ol> <h2 id="vista-arbol-genealogico-horizontal"><a href="#vista-arbol-genealogico-horizontal" class="header-anchor">#</a> Vista árbol genealógico: <strong>Horizontal</strong></h2> <ol><li>Crear controlador Tree:
<ul><li>$ php artisan make:controller TreeController</li></ul></li> <li>Programar controlador Tree en <strong>app\Http\Controllers\TreeController.php</strong>:
<ul><li>Ver código en el repositorio.</li></ul></li> <li>Crear la vista Tree <strong>resources\views\arboles\tree.blade.php</strong>:
<ul><li>Ver código en el repositorio.</li></ul></li> <li>Agregar la ruta para la vista Tree en el grupo de rutas de árboles.<div class="language-php extra-class"><pre class="language-php"><code><span class="token comment">// Grupo de rutas para vistas de árboles genealógicos</span>
<span class="token class-name static-context">Route</span><span class="token operator">::</span><span class="token function">group</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token string single-quoted-string">'middleware'</span> <span class="token operator">=&gt;</span> <span class="token punctuation">[</span><span class="token string single-quoted-string">'auth'</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token string single-quoted-string">'as'</span> <span class="token operator">=&gt;</span> <span class="token string single-quoted-string">'arboles.'</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    ≡
    <span class="token class-name static-context">Route</span><span class="token operator">::</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string single-quoted-string">'tree/{IDCliente}'</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token class-name static-context">TreeController</span><span class="token operator">::</span><span class="token keyword">class</span><span class="token punctuation">,</span> <span class="token string single-quoted-string">'tree'</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token operator">-&gt;</span><span class="token function">name</span><span class="token punctuation">(</span><span class="token string single-quoted-string">'tree.index'</span><span class="token punctuation">)</span>
        <span class="token operator">-&gt;</span><span class="token function">middleware</span><span class="token punctuation">(</span><span class="token string single-quoted-string">'can:genealogista'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><ul><li><strong>Nota</strong>: añadir a la cabecera:</li></ul> <div class="language-php extra-class"><pre class="language-php"><code><span class="token keyword">use</span> <span class="token package">App<span class="token punctuation">\</span>Http<span class="token punctuation">\</span>Controllers<span class="token punctuation">\</span>TreeController</span><span class="token punctuation">;</span>
</code></pre></div></li> <li>Crear componente Livewire para la vista Tree:
<ul><li>$ php artisan make:livewire vistas/arbol/tree-vista</li></ul></li> <li>Programar controlador para la vista Tree: <strong>app\Http\Livewire\Vistas\Arbol\TreeVista.php</strong>:
<ul><li>Ver código en el repositorio.</li></ul></li> <li>Crear archivo de estilo para diagramar el árbol en <strong>public\css\tree.css</strong>:
<ul><li>Ver código en el repositorio.</li></ul></li> <li>Diseñar vista livewire para la tabla Trees: <strong>resources\views\livewire\vistas\arbol\tree-vista.blade.php</strong>:
<ul><li>Ver código en el repositorio.</li></ul></li> <li>Commit:
<ul><li>$ git add .</li> <li>$ git commit -m &quot;Vista Tree&quot;</li></ul></li></ol> <h2 id="vista-arbol-genealogico-vertical"><a href="#vista-arbol-genealogico-vertical" class="header-anchor">#</a> Vista árbol genealógico: <strong>Vertical</strong></h2> <ol><li>Crear controlador Olivo:
<ul><li>$ php artisan make:controller OlivoController</li></ul></li> <li>Programar controlador Tree en <strong>app\Http\Controllers\OlivoController.php</strong>:
<ul><li>Ver código en el repositorio.</li></ul></li> <li>Crear la vista Olivo <strong>resources\views\arboles\olivo.blade.php</strong>:
<ul><li>Ver código en el repositorio.</li></ul></li> <li>Agregar la ruta para la vista Olivo en el grupo de rutas de árboles.<div class="language-php extra-class"><pre class="language-php"><code><span class="token comment">// Grupo de rutas para vistas de árboles genealógicos</span>
<span class="token class-name static-context">Route</span><span class="token operator">::</span><span class="token function">group</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token string single-quoted-string">'middleware'</span> <span class="token operator">=&gt;</span> <span class="token punctuation">[</span><span class="token string single-quoted-string">'auth'</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token string single-quoted-string">'as'</span> <span class="token operator">=&gt;</span> <span class="token string single-quoted-string">'arboles.'</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    ≡
    <span class="token class-name static-context">Route</span><span class="token operator">::</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string single-quoted-string">'olivo/{IDCliente}'</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token class-name static-context">OlivoController</span><span class="token operator">::</span><span class="token keyword">class</span><span class="token punctuation">,</span> <span class="token string single-quoted-string">'olivo'</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token operator">-&gt;</span><span class="token function">name</span><span class="token punctuation">(</span><span class="token string single-quoted-string">'olivo.index'</span><span class="token punctuation">)</span>
        <span class="token operator">-&gt;</span><span class="token function">middleware</span><span class="token punctuation">(</span><span class="token string single-quoted-string">'can:genealogista'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><ul><li><strong>Nota</strong>: añadir a la cabecera:</li></ul> <div class="language-php extra-class"><pre class="language-php"><code><span class="token keyword">use</span> <span class="token package">App<span class="token punctuation">\</span>Http<span class="token punctuation">\</span>Controllers<span class="token punctuation">\</span>OlivoController</span><span class="token punctuation">;</span>
</code></pre></div></li> <li>Crear componente Livewire para la vista Olivo:
<ul><li>$ php artisan make:livewire vistas/arbol/olivo-vista</li></ul></li> <li>Programar controlador para la vista Olivo: <strong>app\Http\Livewire\Vistas\Arbol\OlivoVista.php</strong>:
<ul><li>Ver código en el repositorio.</li></ul></li> <li>Crear archivo de estilo para diagramar el árbol en <strong>public\css\olivo.css</strong>:
<ul><li>Ver código en el repositorio.</li></ul></li> <li>Diseñar vista livewire para la tabla Olivos: <strong>resources\views\livewire\vistas\arbol\olivo-vista.blade.php</strong>:
<ul><li>Ver código en el repositorio.</li></ul></li> <li>Commit:
<ul><li>$ git add .</li> <li>$ git commit -m &quot;Vista Olivo&quot;</li></ul></li></ol> <h2 id="crud-agclientes"><a href="#crud-agclientes" class="header-anchor">#</a> CRUD Agclientes</h2> <ol><li>Crear modelo Agcliente junto con su migración y controlador y los métodos para el CRUD:
<ul><li>$ php artisan make:model Agcliente -m -c -r</li></ul></li> <li>Preparar migración para la tabla <strong>agclientes</strong> en <strong>database\migrations\2021_03_23_020633_create_agclientes_table.php</strong>:
<ul><li>Ver código en el repositorio.</li></ul></li> <li>Establecer permisos en los seeders para el CRUD Paises en <strong>database\seeders\RoleSeeder.php</strong><div class="language-php extra-class"><pre class="language-php"><code>≡ 
<span class="token keyword">public</span> <span class="token keyword">function</span> <span class="token function-definition function">run</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    ≡
    <span class="token class-name static-context">Permission</span><span class="token operator">::</span><span class="token function">create</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token string single-quoted-string">'name'</span> <span class="token operator">=&gt;</span> <span class="token string single-quoted-string">'crud.agclientes.index'</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token operator">-&gt;</span><span class="token function">syncRoles</span><span class="token punctuation">(</span><span class="token variable">$rolAdministrador</span><span class="token punctuation">,</span> <span class="token variable">$rolGenealogista</span><span class="token punctuation">,</span> <span class="token variable">$rolCliente</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name static-context">Permission</span><span class="token operator">::</span><span class="token function">create</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token string single-quoted-string">'name'</span> <span class="token operator">=&gt;</span> <span class="token string single-quoted-string">'crud.agclientes.create'</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token operator">-&gt;</span><span class="token function">syncRoles</span><span class="token punctuation">(</span><span class="token variable">$rolAdministrador</span><span class="token punctuation">,</span> <span class="token variable">$rolGenealogista</span><span class="token punctuation">,</span> <span class="token variable">$rolCliente</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name static-context">Permission</span><span class="token operator">::</span><span class="token function">create</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token string single-quoted-string">'name'</span> <span class="token operator">=&gt;</span> <span class="token string single-quoted-string">'crud.agclientes.edit'</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token operator">-&gt;</span><span class="token function">syncRoles</span><span class="token punctuation">(</span><span class="token variable">$rolAdministrador</span><span class="token punctuation">,</span> <span class="token variable">$rolGenealogista</span><span class="token punctuation">,</span> <span class="token variable">$rolCliente</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name static-context">Permission</span><span class="token operator">::</span><span class="token function">create</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token string single-quoted-string">'name'</span> <span class="token operator">=&gt;</span> <span class="token string single-quoted-string">'crud.agclientes.destroy'</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token operator">-&gt;</span><span class="token function">syncRoles</span><span class="token punctuation">(</span><span class="token variable">$rolAdministrador</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    ≡
<span class="token punctuation">}</span>
≡
</code></pre></div></li> <li>Reestablecer base de datos:
<ul><li>$ php artisan migrate:fresh --seed</li></ul></li> <li>Configurar modelo <strong>Agcliente</strong> en <strong>app\Models\Agcliente.php</strong><div class="language-php extra-class"><pre class="language-php"><code>≡
<span class="token keyword">class</span> <span class="token class-name-definition class-name">Country</span> <span class="token keyword">extends</span> <span class="token class-name">Model</span>
<span class="token punctuation">{</span>
    <span class="token keyword">use</span> <span class="token package">HasFactory</span><span class="token punctuation">;</span>

    <span class="token keyword">protected</span> <span class="token variable">$fillable</span> <span class="token operator">=</span> <span class="token punctuation">[</span>
        <span class="token string single-quoted-string">'IDCliente'</span><span class="token punctuation">,</span>
        <span class="token string single-quoted-string">'IDPersona'</span><span class="token punctuation">,</span>
        <span class="token string single-quoted-string">'IDPadre'</span><span class="token punctuation">,</span>
        <span class="token string single-quoted-string">'IDMadre'</span><span class="token punctuation">,</span>
        <span class="token string single-quoted-string">'Generacion'</span><span class="token punctuation">,</span>
        <span class="token string single-quoted-string">'Nombres'</span><span class="token punctuation">,</span>
        <span class="token string single-quoted-string">'Apellidos'</span><span class="token punctuation">,</span>
        <span class="token string single-quoted-string">'NPasaporte'</span><span class="token punctuation">,</span>
        <span class="token string single-quoted-string">'PaisPasaporte'</span><span class="token punctuation">,</span>
        <span class="token string single-quoted-string">'NDocIdent'</span><span class="token punctuation">,</span>
        <span class="token string single-quoted-string">'PaisDocIdent'</span><span class="token punctuation">,</span>
        <span class="token string single-quoted-string">'Sexo'</span><span class="token punctuation">,</span>
        <span class="token string single-quoted-string">'AnhoNac'</span><span class="token punctuation">,</span>
        <span class="token string single-quoted-string">'MesNac'</span><span class="token punctuation">,</span>
        <span class="token string single-quoted-string">'DiaNac'</span><span class="token punctuation">,</span>
        <span class="token string single-quoted-string">'LugarNac'</span><span class="token punctuation">,</span>
        <span class="token string single-quoted-string">'PaisNac'</span><span class="token punctuation">,</span>
        <span class="token string single-quoted-string">'AnhoBtzo'</span><span class="token punctuation">,</span>
        <span class="token string single-quoted-string">'MesBtzo'</span><span class="token punctuation">,</span>
        <span class="token string single-quoted-string">'DiaBtzo'</span><span class="token punctuation">,</span>
        <span class="token string single-quoted-string">'LugarBtzo'</span><span class="token punctuation">,</span>
        <span class="token string single-quoted-string">'PaisBtzo'</span><span class="token punctuation">,</span>
        <span class="token string single-quoted-string">'AnhoMatr'</span><span class="token punctuation">,</span>
        <span class="token string single-quoted-string">'MesMatr'</span><span class="token punctuation">,</span>
        <span class="token string single-quoted-string">'DiaMatr'</span><span class="token punctuation">,</span>
        <span class="token string single-quoted-string">'LugarMatr'</span><span class="token punctuation">,</span>
        <span class="token string single-quoted-string">'PaisMatr'</span><span class="token punctuation">,</span>
        <span class="token string single-quoted-string">'AnhoDef'</span><span class="token punctuation">,</span>
        <span class="token string single-quoted-string">'MesDef'</span><span class="token punctuation">,</span>
        <span class="token string single-quoted-string">'DiaDef'</span><span class="token punctuation">,</span>
        <span class="token string single-quoted-string">'LugarDef'</span><span class="token punctuation">,</span>
        <span class="token string single-quoted-string">'PaisDef'</span><span class="token punctuation">,</span>
        <span class="token string single-quoted-string">'Vive'</span><span class="token punctuation">,</span>
        <span class="token string single-quoted-string">'Observaciones'</span><span class="token punctuation">,</span>
        <span class="token string single-quoted-string">'Familiaridad'</span><span class="token punctuation">,</span>
        <span class="token string single-quoted-string">'NombresF'</span><span class="token punctuation">,</span>
        <span class="token string single-quoted-string">'ApellidosF'</span><span class="token punctuation">,</span>
        <span class="token string single-quoted-string">'ParentescoF'</span><span class="token punctuation">,</span>
        <span class="token string single-quoted-string">'NPasaporteF'</span><span class="token punctuation">,</span>
        <span class="token string single-quoted-string">'FRegistro'</span><span class="token punctuation">,</span>
        <span class="token string single-quoted-string">'PNacimiento'</span><span class="token punctuation">,</span>
        <span class="token string single-quoted-string">'LNacimiento'</span><span class="token punctuation">,</span>
        <span class="token string single-quoted-string">'Familiares'</span><span class="token punctuation">,</span>
        <span class="token string single-quoted-string">'Enlace'</span><span class="token punctuation">,</span>
        <span class="token string single-quoted-string">'referido'</span><span class="token punctuation">,</span>
        <span class="token string single-quoted-string">'FTM'</span><span class="token punctuation">,</span>
        <span class="token string single-quoted-string">'FUpdate'</span><span class="token punctuation">,</span>
        <span class="token string single-quoted-string">'Usuario'</span><span class="token punctuation">,</span>
    <span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div></li> <li>Agregar ruta de agclientes al grupo de rutas CRUD:<div class="language-php extra-class"><pre class="language-php"><code><span class="token class-name static-context">Route</span><span class="token operator">::</span><span class="token function">resource</span><span class="token punctuation">(</span><span class="token string single-quoted-string">'agclientes'</span><span class="token punctuation">,</span> <span class="token class-name static-context">AgclienteController</span><span class="token operator">::</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token operator">-&gt;</span><span class="token function">names</span><span class="token punctuation">(</span><span class="token string single-quoted-string">'agclientes'</span><span class="token punctuation">)</span>
        <span class="token operator">-&gt;</span><span class="token function">middleware</span><span class="token punctuation">(</span><span class="token string single-quoted-string">'can:crud.agclientes.index'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><ul><li><strong>Nota</strong>: añadir a la cabecera:</li></ul> <div class="language-php extra-class"><pre class="language-php"><code><span class="token keyword">use</span> <span class="token package">App<span class="token punctuation">\</span>Http<span class="token punctuation">\</span>Controllers<span class="token punctuation">\</span>AgclienteController</span><span class="token punctuation">;</span>
</code></pre></div></li> <li>Crear componente Livewire para Tabla Agclientes:
<ul><li>$ php artisan make:livewire crud/agclientes-table</li></ul></li> <li>Programar controlador para la tabla Agclientes: <strong>app\Http\Livewire\Crud\AgclientesTable.php</strong>:
<ul><li>Ver código en el repositorio.</li></ul></li> <li>Diseñar vista para la tabla Agcliente: <strong>resources\views\livewire\crud\agclientes-table.blade.php</strong>:
<ul><li>Ver código en el repositorio.</li></ul></li> <li>Programar controlador Agcliente: <strong>app\Http\Controllers\AgclienteController.php</strong>:
<ul><li>Ver código en el repositorio.</li></ul></li> <li>Diseñar las vistas para el CRUD Agclientes:
<ul><li>resources\views\crud\agclientes\index.blade.php</li> <li>resources\views\crud\agclientes\create.blade.php</li> <li>resources\views\crud\agclientes\edit.blade.php</li></ul></li> <li>Editar <strong>config\adminlte.php</strong> para añadir los menú para ingresar al CRUD Agclientes:
<ul><li>Ver código en el repositorio.</li></ul></li> <li>Commit:
<ul><li>$ git add .</li> <li>$ git commit -m &quot;CRUD Agclientes&quot;</li></ul></li></ol> <h2 id="seeders-para-prueba-de-agclientes"><a href="#seeders-para-prueba-de-agclientes" class="header-anchor">#</a> Seeders para prueba de agclientes</h2> <ol><li>Crear seeder para agclientes:
<ul><li>$ php artisan make:seeder AgclienteSeeder</li></ul></li> <li>Añadir a cabecera de <strong>database\seeders\CountrySeeder.php</strong>:<div class="language-php extra-class"><pre class="language-php"><code><span class="token keyword">use</span> <span class="token package">App<span class="token punctuation">\</span>Models<span class="token punctuation">\</span>Agcliente</span><span class="token punctuation">;</span>
</code></pre></div></li> <li>Modificar el método <strong>run</strong> de <strong>database\seeders\AgclienteSeeder.php</strong>:
<ul><li>Ver código en el repositorio.</li></ul></li> <li>Añadir al método run de <strong>database\seeders\DatabaseSeeder.php</strong><div class="language-php extra-class"><pre class="language-php"><code><span class="token keyword">public</span> <span class="token keyword">function</span> <span class="token function-definition function">run</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    ≡
    <span class="token variable">$this</span><span class="token operator">-&gt;</span><span class="token function">call</span><span class="token punctuation">(</span><span class="token class-name static-context">AgclienteSeeder</span><span class="token operator">::</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div></li> <li>Crear directorio <strong>storage\app\public\imagenes\paises</strong> y guardar la imagenes de los paises iniciales en formato png y en baja resolución.</li> <li>Ejecutar:
<ul><li>$ php artisan migrate:fresh --seed</li> <li><strong>Nota</strong>: Para correr los seeder sin resetear la base de datos:
<ul><li>$ php artisan db:seed</li></ul></li></ul></li> <li>Commit:
<ul><li>$ git add .</li> <li>$ git commit -m &quot;Seeder Paises&quot;</li></ul></li></ol> <h2 id="consultar-bd-onidex"><a href="#consultar-bd-onidex" class="header-anchor">#</a> Consultar BD Onidex</h2> <ol><li>Agregar las variables de entorno para la conexión a la base de datos <strong>onidex</strong> en <strong>.env</strong>:<div class="language- extra-class"><pre class="language-text"><code>≡
ONIDEX_CONNECTION=mysql
ONIDEX_HOST=127.0.0.1
ONIDEX_PORT=3306
ONIDEX_DATABASE=onidex
ONIDEX_USERNAME=root
ONIDEX_PASSWORD=
≡
</code></pre></div></li> <li>Agregar a <strong>config\database.php</strong> los parámetros de conexión a la base de datos <strong>onidex</strong>:<div class="language-php extra-class"><pre class="language-php"><code>≡
<span class="token string single-quoted-string">'connections'</span> <span class="token operator">=&gt;</span> <span class="token punctuation">[</span>
    ≡
    <span class="token string single-quoted-string">'onidex'</span> <span class="token operator">=&gt;</span> <span class="token punctuation">[</span>
        <span class="token string single-quoted-string">'driver'</span> <span class="token operator">=&gt;</span> <span class="token string single-quoted-string">'mysql'</span><span class="token punctuation">,</span>
        <span class="token string single-quoted-string">'url'</span> <span class="token operator">=&gt;</span> <span class="token function">env</span><span class="token punctuation">(</span><span class="token string single-quoted-string">'DATABASE_URL'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
        <span class="token string single-quoted-string">'host'</span> <span class="token operator">=&gt;</span> <span class="token function">env</span><span class="token punctuation">(</span><span class="token string single-quoted-string">'ONIDEX_HOST'</span><span class="token punctuation">,</span> <span class="token string single-quoted-string">'127.0.0.1'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
        <span class="token string single-quoted-string">'port'</span> <span class="token operator">=&gt;</span> <span class="token function">env</span><span class="token punctuation">(</span><span class="token string single-quoted-string">'ONIDEX_PORT'</span><span class="token punctuation">,</span> <span class="token string single-quoted-string">'3306'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
        <span class="token string single-quoted-string">'database'</span> <span class="token operator">=&gt;</span> <span class="token function">env</span><span class="token punctuation">(</span><span class="token string single-quoted-string">'ONIDEX_DATABASE'</span><span class="token punctuation">,</span> <span class="token string single-quoted-string">'forge'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
        <span class="token string single-quoted-string">'username'</span> <span class="token operator">=&gt;</span> <span class="token function">env</span><span class="token punctuation">(</span><span class="token string single-quoted-string">'ONIDEX_USERNAME'</span><span class="token punctuation">,</span> <span class="token string single-quoted-string">'forge'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
        <span class="token string single-quoted-string">'password'</span> <span class="token operator">=&gt;</span> <span class="token function">env</span><span class="token punctuation">(</span><span class="token string single-quoted-string">'ONIDEX_PASSWORD'</span><span class="token punctuation">,</span> <span class="token string single-quoted-string">''</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
        <span class="token string single-quoted-string">'unix_socket'</span> <span class="token operator">=&gt;</span> <span class="token function">env</span><span class="token punctuation">(</span><span class="token string single-quoted-string">'ONIDEX_SOCKET'</span><span class="token punctuation">,</span> <span class="token string single-quoted-string">''</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
        <span class="token string single-quoted-string">'charset'</span> <span class="token operator">=&gt;</span> <span class="token string single-quoted-string">'utf8'</span><span class="token punctuation">,</span>
        <span class="token string single-quoted-string">'collation'</span> <span class="token operator">=&gt;</span> <span class="token string single-quoted-string">'utf8_general_ci'</span><span class="token punctuation">,</span>
        <span class="token string single-quoted-string">'prefix'</span> <span class="token operator">=&gt;</span> <span class="token string single-quoted-string">''</span><span class="token punctuation">,</span>
        <span class="token string single-quoted-string">'prefix_indexes'</span> <span class="token operator">=&gt;</span> <span class="token constant boolean">true</span><span class="token punctuation">,</span>
        <span class="token string single-quoted-string">'strict'</span> <span class="token operator">=&gt;</span> <span class="token constant boolean">true</span><span class="token punctuation">,</span>
        <span class="token string single-quoted-string">'engine'</span> <span class="token operator">=&gt;</span> <span class="token constant">null</span><span class="token punctuation">,</span>
        <span class="token string single-quoted-string">'options'</span> <span class="token operator">=&gt;</span> <span class="token function">extension_loaded</span><span class="token punctuation">(</span><span class="token string single-quoted-string">'pdo_mysql'</span><span class="token punctuation">)</span> <span class="token operator">?</span> <span class="token function">array_filter</span><span class="token punctuation">(</span><span class="token punctuation">[</span>
            <span class="token class-name static-context">PDO</span><span class="token operator">::</span><span class="token constant">MYSQL_ATTR_SSL_CA</span> <span class="token operator">=&gt;</span> <span class="token function">env</span><span class="token punctuation">(</span><span class="token string single-quoted-string">'MYSQL_ATTR_SSL_CA'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
        <span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
    <span class="token punctuation">]</span><span class="token punctuation">,</span>		   
    ≡
<span class="token punctuation">]</span><span class="token punctuation">,</span>
≡
</code></pre></div><ul><li><strong>Nota</strong>: No se crearan migraciones debido a que solo se realizaran consultas a una base de datos existente y externa para nuestro proyecto.</li> <li>Para consultar conexiones múltiples en Laravel: https://styde.net/multiples-bases-de-datos-con-laravel-5-y-eloquent</li></ul></li> <li>Crear modelo Onidex:
<ul><li>$ php artisan make:model Onidex</li></ul></li> <li>Programar modelo Onidex: <strong>app\Models\Onidex.php</strong>:<div class="language-php extra-class"><pre class="language-php"><code><span class="token php language-php"><span class="token delimiter important">&lt;?php</span>

<span class="token keyword">namespace</span> <span class="token package">App<span class="token punctuation">\</span>Models</span><span class="token punctuation">;</span>

<span class="token keyword">use</span> <span class="token package">Illuminate<span class="token punctuation">\</span>Database<span class="token punctuation">\</span>Eloquent<span class="token punctuation">\</span>Factories<span class="token punctuation">\</span>HasFactory</span><span class="token punctuation">;</span>
<span class="token keyword">use</span> <span class="token package">Illuminate<span class="token punctuation">\</span>Database<span class="token punctuation">\</span>Eloquent<span class="token punctuation">\</span>Model</span><span class="token punctuation">;</span>

<span class="token keyword">class</span> <span class="token class-name-definition class-name">Onidex</span> <span class="token keyword">extends</span> <span class="token class-name">Model</span>
<span class="token punctuation">{</span>
    <span class="token keyword">use</span> <span class="token package">HasFactory</span><span class="token punctuation">;</span>

    <span class="token comment">/**
    * The database connection used by the model.
    *
    * @var string
    */</span>
    <span class="token keyword">protected</span> <span class="token variable">$connection</span> <span class="token operator">=</span> <span class="token string single-quoted-string">'onidex'</span><span class="token punctuation">;</span>

    <span class="token comment">/**
    * The database table used by the model.
    *
    * @var string
    */</span>
    <span class="token keyword">protected</span> <span class="token variable">$table</span> <span class="token operator">=</span> <span class="token string single-quoted-string">'onidexes'</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</span></code></pre></div></li> <li>Crear controlador Onidex:
<ul><li>$ php artisan make:controller OnidexController</li></ul></li> <li>Programar controlador Onidex <strong>app\Http\Controllers\OnidexController.php</strong>:
<ul><li>Ver código en el repositorio.</li></ul></li> <li>Crear componente Livewire para Tabla <strong>onidexes</strong>:
<ul><li>$ php artisan make:livewire consulta/onidexes-table</li></ul></li> <li>Programar controlador para la tabla <strong>onidexes</strong>: <strong>app\Http\Livewire\Consulta\OnidexesTable.php</strong>:
<ul><li>Ver código en el repositorio.</li></ul></li> <li>Diseñar vista para la tabla <strong>onidexes</strong>: <strong>resources\views\livewire\crud\users-table.blade.php</strong>:
<ul><li>Ver código en el repositorio.</li></ul></li> <li>Crear y diseñar vista principal Onidex: <strong>resources\views\consultas\onidex\index.blade.php</strong>:
<ul><li>Ver código en el repositorio.</li></ul></li> <li>Crear grupo de rutas para consultas en <strong>routes\web.php</strong>:<div class="language-php extra-class"><pre class="language-php"><code><span class="token comment">// Grupo de rutas para Consultas a base de datos</span>
<span class="token class-name static-context">Route</span><span class="token operator">::</span><span class="token function">group</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token string single-quoted-string">'middleware'</span> <span class="token operator">=&gt;</span> <span class="token punctuation">[</span><span class="token string single-quoted-string">'auth'</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token string single-quoted-string">'as'</span> <span class="token operator">=&gt;</span> <span class="token string single-quoted-string">'consultas.'</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div></li> <li>Agregar rutas <strong>onidex.index</strong> y <strong>onidex.show</strong> en el grupo de rutas para consultas en <strong>routes\web.php</strong>:<div class="language-php extra-class"><pre class="language-php"><code><span class="token class-name static-context">Route</span><span class="token operator">::</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string single-quoted-string">'consultaodx'</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token class-name static-context">OnidexController</span><span class="token operator">::</span><span class="token keyword">class</span><span class="token punctuation">,</span> <span class="token string single-quoted-string">'index'</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token operator">-&gt;</span><span class="token function">name</span><span class="token punctuation">(</span><span class="token string single-quoted-string">'onidex.index'</span><span class="token punctuation">)</span>
        <span class="token operator">-&gt;</span><span class="token function">middleware</span><span class="token punctuation">(</span><span class="token string single-quoted-string">'can:consultas.onidex.index'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token class-name static-context">Route</span><span class="token operator">::</span><span class="token function">post</span><span class="token punctuation">(</span><span class="token string single-quoted-string">'consultaodx'</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token class-name static-context">OnidexController</span><span class="token operator">::</span><span class="token keyword">class</span><span class="token punctuation">,</span> <span class="token string single-quoted-string">'show'</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token operator">-&gt;</span><span class="token function">name</span><span class="token punctuation">(</span><span class="token string single-quoted-string">'onidex.show'</span><span class="token punctuation">)</span>
        <span class="token operator">-&gt;</span><span class="token function">middleware</span><span class="token punctuation">(</span><span class="token string single-quoted-string">'can:consultas.onidex.show'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><ul><li><strong>Nota</strong>: añadir a la cabecera:</li></ul> <div class="language-php extra-class"><pre class="language-php"><code><span class="token keyword">use</span> <span class="token package">App<span class="token punctuation">\</span>Http<span class="token punctuation">\</span>Controllers<span class="token punctuation">\</span>OnidexController</span><span class="token punctuation">;</span>
</code></pre></div></li> <li>Crear y diseñar vista para mostrar registros Onidex: <strong>resources\views\consultas\onidex\show.blade.php</strong>:
<ul><li>Ver código en el repositorio.</li></ul></li> <li>Commit:
<ul><li>$ git add .</li> <li>$ git commit -m &quot;App Consulta BD Onidex&quot;</li></ul></li></ol></div> <footer class="page-edit"><!----> <!----></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/guide/laravel/sefar2021/sefar2021-P02.html" class="prev">
        Proyecto App Sefar Universal 2021 (Parte II)
      </a></span> <span class="next"><a href="/guide/laravel/sefar2021/sefar2021-P04.html">
        Proyecto App Sefar Universal 2021 (Parte IV)
      </a>
      →
    </span></p></div> </main></div><div class="global-ui"></div></div>
    <script src="/assets/js/app.271db0af.js" defer></script><script src="/assets/js/2.63c13255.js" defer></script><script src="/assets/js/19.51805c4e.js" defer></script>
  </body>
</html>
